<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Page with MapStore API</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato" type='text/css'>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css" />
        <link rel="shortcut icon" type="image/png" href="https://cdn.jslibs.mapstore2.geo-solutions.it/leaflet/favicon.ico" />
        <script src="https://maps.google.com/maps/api/js?v=3"></script>
        <!--script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.10/proj4.js"></script-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"></script>
        <style>
        #container {
            position: absolute;
            top: 100px;
            left: 10px;
            right: 10px;
            bottom: 100px;
        }
        #mapstore2-embedded, #map, .fill {
            width: 100%;
            height: 100%;
        }
        </style>
    </head>
    <body onload="init()">
        <div id="container" class="ms2"></div>
        <script id="ms2-api" src="dist/ms2-geonode-api.js"></script>
        <script type="text/javascript">
        function init() {
            MapStore2.create('container',{
            config: {
                "catalogServices": { 
                    "selectedService": "GeoNode Catalogue", 
                    "services": {
                        "Demo WMS Service": {
                            "autoload": false,
                            "title": "Demo WMS Service",
                            "type": "wms",
                            "url": "https://demo.geo-solutions.it/geoserver/wms"
                        },
                        "Demo WMTS Service": {
                            "autoload": false,
                            "title": "Demo WMTS Service",
                            "type": "wmts",
                            "url": "https://demo.geo-solutions.it/geoserver/gwc/service/wmts"
                        },
                        "GeoNode Catalogue": {
                            "GeoNode Catalogue": {
                                "autoload": true,
                                "title": "GeoNode Catalogue",
                                "type": "csw",
                                "url": "http://localhost:8000/catalogue/csw"
                            }
                        }
                    }
                }, 
                "map": {
                    "center": {
                        "crs": "EPSG:3857",
                        "x": 16270120.86775,
                        "y": -5107675.859305
                    }, 
                    "layers": [
                        {"format": "image/png8", "group": "background", "restUrl": "/gs/rest", "title": "Local GeoServer", "type": "wms", "url": "http://localhost:8080/geoserver/wms", "visibility": false},
                        {"group": "background", "name": "mapnik", "source": "osm", "title": "Open Street Map", "type": "osm", "visibility": true},
                        {"group": "background", "name": "HYBRID", "source": "google", "title": "Google HYBRID", "type": "google", "visibility": false},
                        {"group": "background", "name": "osm", "source": "mapquest", "title": "MapQuest OSM", "type": "mapquest", "visibility": false},
                        {"apiKey": "AqTGBsziZHIJYYxgivLBf0hVdrAk9mWO5cQcb8Yux8sW5M8c8opEC2lZqKR1ZZXf", "group": "background", "name": "Aerial", "source": "bing", "title": "Bing Aerial", "type": "bing", "visibility": false},
                        {"group": "background", "name": "Night2012", "provider": "NASAGIBS.ViirsEarthAtNight2012", "source": "nasagibs", "title": "NASAGIBS Night 2012", "type": "tileprovider", "visibility": false},
                        {"format": "image/jpeg", "group": "background", "name": "rv1", "title": "e-Geos Ortofoto RealVista 1.0", "type": "wms", "url": "http://www.realvista.it/reflector/open/service", "visibility": false},
                        {"format": "image/png", "group": "background", "name": "sde:NE2_HR_LC_SR_W_DR", "title": "Natural Earth", "type": "wms", "url": "https://demo.geo-solutions.it/geoserver/wms", "visibility": false},
                        {"format": "image/png", "group": "background", "name": "sde:HYP_HR_SR_OB_DR", "title": "Hypsometric", "type": "wms", "url": "https://demo.geo-solutions.it/geoserver/wms", "visibility": false},
                        {"format": "image/png", "group": "background", "name": "sde:GRAY_HR_SR_OB_DR", "title": "Gray Earth", "type": "wms", "url": "https://demo.geo-solutions.it/geoserver/wms", "visibility": false},
                        {"group": "background", "name": "OpenTopoMap", "provider": "OpenTopoMap", "source": "OpenTopoMap", "title": "OpenTopoMap", "type": "tileprovider", "visibility": false},
                        {"abstract": "No abstract provided.", "attribution": {"title": "admin"}, "bbox": {"bounds": {"maxx": 16528622.3695, "maxy": -4804213.11999, "minx": 16011619.366, "miny": -5411138.59862}, "crs": "EPSG:3857"}, "format": "image/png", "group": "", "keywords": ["boundaries", "features"], "llbbox": [143.834824, -43.648056, 148.479141, -39.573891], "name": "geonode:boundaries", "opacity": 1.0, "styles": [{"legend": {"format": "image/png", "height": "40", "href": "http://localhost:8080/geoserver/ows?service=wms&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=geonode%3Aboundaries", "width": "22"}, "name": "boundaries", "title": "boundaries"}], 
                            "title": "boundaries", "type": "wms", "url": "http://localhost:8080/geoserver/ows", "visibility": true}
                        ],
                    "maxExtent": [-20037508.34, -20037508.34, 20037508.34, 20037508.34],
                    "maxResolution": 156543.03390625,
                    "projection": "EPSG:3857",
                    "units": "m",
                    "zoom": 7
                },
                "version": 2,
                
            },
        proxy: "http://localhost:8081/proxy?url=",
        printingEnabled: true,
        localConfig: {
            translations: '',
            printUrl: "pdf/info.json",
            useAuthenticationRules: true,
            authenticationRules: [{
                "urlPattern": ".*geostore.*",
                "method": "bearer"
            }, {
                "urlPattern": ".*geoserver.*",
                "authkeyParamName": "access_token",
                "method": "authkey"
            }],
            initialState: {
                defaultState: {
                    security: {
                        token: "z8OGZsBN1m8hRvkEYV0FMsQJwHF6zQ"
                    }
                }
            }
          }
      });
}
        </script>
    </body>
</html>
