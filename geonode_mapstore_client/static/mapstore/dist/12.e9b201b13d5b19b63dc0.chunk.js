(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"./MapStore2/web/client/actions/help.js":function(e,t,n){"use strict";n.r(t),n.d(t,"CHANGE_HELP_STATE",(function(){return r})),n.d(t,"CHANGE_HELP_TEXT",(function(){return o})),n.d(t,"CHANGE_HELPWIN_VIZ",(function(){return i})),n.d(t,"changeHelpState",(function(){return a})),n.d(t,"changeHelpText",(function(){return c})),n.d(t,"changeHelpwinVisibility",(function(){return l}));var r="CHANGE_HELP_STATE",o="CHANGE_HELP_TEXT",i="CHANGE_HELPWIN_VIZ";function a(e){return{type:r,enabled:e}}function c(e){return{type:o,helpText:e}}function l(e){return{type:i,helpwinViz:e}}},"./MapStore2/web/client/actions/widgets.js":function(e,t,n){"use strict";n.r(t),n.d(t,"INSERT",(function(){return c})),n.d(t,"NEW",(function(){return l})),n.d(t,"EDIT",(function(){return s})),n.d(t,"EDIT_NEW",(function(){return u})),n.d(t,"EDITOR_CHANGE",(function(){return p})),n.d(t,"EDITOR_SETTING_CHANGE",(function(){return d})),n.d(t,"UPDATE",(function(){return f})),n.d(t,"UPDATE_PROPERTY",(function(){return m})),n.d(t,"UPDATE_LAYER",(function(){return g})),n.d(t,"CHANGE_LAYOUT",(function(){return b})),n.d(t,"DELETE",(function(){return y})),n.d(t,"CLEAR_WIDGETS",(function(){return v})),n.d(t,"ADD_DEPENDENCY",(function(){return h})),n.d(t,"REMOVE_DEPENDENCY",(function(){return O})),n.d(t,"LOAD_DEPENDENCIES",(function(){return j})),n.d(t,"RESET_DEPENDENCIES",(function(){return w})),n.d(t,"TOGGLE_CONNECTION",(function(){return S})),n.d(t,"OPEN_FILTER_EDITOR",(function(){return E})),n.d(t,"EXPORT_CSV",(function(){return A})),n.d(t,"EXPORT_IMAGE",(function(){return P})),n.d(t,"WIDGET_SELECTED",(function(){return x})),n.d(t,"NEW_CHART",(function(){return C})),n.d(t,"DEFAULT_TARGET",(function(){return T})),n.d(t,"DEPENDENCY_SELECTOR_KEY",(function(){return M})),n.d(t,"WIDGETS_REGEX",(function(){return I})),n.d(t,"TOGGLE_COLLAPSE",(function(){return k})),n.d(t,"TOGGLE_COLLAPSE_ALL",(function(){return D})),n.d(t,"TOGGLE_TRAY",(function(){return N})),n.d(t,"createWidget",(function(){return _})),n.d(t,"createChart",(function(){return R})),n.d(t,"insertWidget",(function(){return L})),n.d(t,"updateWidget",(function(){return F})),n.d(t,"updateWidgetProperty",(function(){return B})),n.d(t,"updateWidgetLayer",(function(){return U})),n.d(t,"deleteWidget",(function(){return G})),n.d(t,"clearWidgets",(function(){return H})),n.d(t,"changeLayout",(function(){return W})),n.d(t,"editWidget",(function(){return z})),n.d(t,"editNewWidget",(function(){return V})),n.d(t,"onEditorChange",(function(){return Q})),n.d(t,"changeEditorSetting",(function(){return q})),n.d(t,"addDependency",(function(){return Y})),n.d(t,"removeDependency",(function(){return K})),n.d(t,"resetDependencies",(function(){return J})),n.d(t,"loadDependencies",(function(){return Z})),n.d(t,"toggleConnection",(function(){return X})),n.d(t,"setPage",(function(){return $})),n.d(t,"exportCSV",(function(){return ee})),n.d(t,"selectWidget",(function(){return te})),n.d(t,"exportImage",(function(){return ne})),n.d(t,"openFilterEditor",(function(){return re})),n.d(t,"setupDependencySelector",(function(){return oe})),n.d(t,"changeDependencySelector",(function(){return ie})),n.d(t,"toggleDependencySelector",(function(){return ae})),n.d(t,"toggleCollapse",(function(){return ce})),n.d(t,"toggleCollapseAll",(function(){return le})),n.d(t,"toggleTray",(function(){return se}));var r=n("./node_modules/uuid/v1.js"),o=n.n(r);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c="WIDGETS:INSERT",l="WIDGETS:NEW",s="WIDGETS:EDIT",u="WIDGETS:EDIT_NEW",p="WIDGETS:EDITOR_CHANGE",d="WIDGETS:EDITOR_SETTING_CHANGE",f="WIDGETS:UPDATE",m="WIDGETS:UPDATE_PROPERTY",g="WIDGETS:UPDATE_LAYER",b="WIDGETS:CHANGE_LAYOUT",y="WIDGETS:DELETE",v="WIDGETS:CLEAR_WIDGETS",h="WIDGETS:ADD_DEPENDENCY",O="WIDGETS:REMOVE_DEPENDENCY",j="WIDGETS:LOAD_DEPENDENCIES",w="WIDGETS:RESET_DEPENDENCIES",S="WIDGETS:TOGGLE_CONNECTION",E="WIDGETS:OPEN_FILTER_EDITOR",A="WIDGETS:EXPORT_CSV",P="WIDGETS:EXPORT_IMAGE",x="WIDGETS:WIDGET_SELECTED",C="WIDGETS:NEW_CHART",T="floating",M="dependencySelector",I=/^widgets\["?([^"\]]*)"?\]\.?(.*)$/,k="WIDGET:TOGGLE_COLLAPSE",D="WIDGET:TOGGLE_COLLAPSE_ALL",N="WIDGET:TOGGLE_TRAY",_=function(e){return{type:l,widget:e}},R=function(){return{type:C}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:c,target:t,id:o()(),widget:e}},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:f,target:t,widget:e}},B=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T;return{type:m,id:e,target:o,key:t,value:n,mode:r}},U=function(e){return{type:g,layer:e}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:y,target:t,widget:e}},H=function(){return{type:v}},W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;return{type:b,allLayouts:t,layout:e,target:n}},z=function(e){return{type:s,widget:e}},V=function(e,t){return{type:u,widget:e,settings:t}},Q=function(e,t){return{type:p,key:e,value:t}},q=function(e,t){return{type:d,key:e,value:t}},Y=function(e,t){return{type:h,key:e,value:t}},K=function(e){return{type:O,key:e}},J=function(){return{type:w}},Z=function(e){return{type:j,dependencies:e}},X=function(e,t,n,r){return{type:S,active:e,availableDependencies:t,options:n,target:r}},$=function(e){return q("step",e)},ee=function(e){var t=e.data,n=void 0===t?[]:t,r=e.title;return{type:A,data:n,title:void 0===r?"export":r}},te=function(e,t){return{type:x,widget:e,opts:t}},ne=function(e){var t=e.widgetDivId;return{type:P,widgetDivId:t}},re=function(){return{type:E}},oe=function(e){return q("".concat(M),e)},ie=function(e,t){return q("".concat(M,"[").concat(e,"]"),t)},ae=function(e,t){return oe(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({active:e},t))},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:k,widget:e,target:t}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return{type:D,target:e}},se=function(e){return{type:N,value:e}}},"./MapStore2/web/client/api/WFS.js":function(e,t,n){"use strict";n.r(t),n.d(t,"toDescribeURL",(function(){return m})),n.d(t,"getFeatureSimple",(function(){return g})),n.d(t,"getCapabilitiesURL",(function(){return b})),n.d(t,"getFeatureURL",(function(){return y})),n.d(t,"getFeature",(function(){return v})),n.d(t,"getCapabilities",(function(){return h})),n.d(t,"describeFeatureTypeOGCSchemas",(function(){return O})),n.d(t,"describeFeatureType",(function(){return j}));var r=n("./MapStore2/web/client/libs/ajax.js"),o=n.n(r),i=n("./node_modules/url/url.js"),a=n.n(i),c=n("./node_modules/object-assign/index.js"),l=n.n(c);function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e,t){var n=a.a.parse(e,!0);return a.a.format(d(d({},n),{},{search:void 0,query:d(d({},n.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))},g=function(e,t){return o.a.get(e+"?service=WFS&version=1.1.0&request=GetFeature",{params:l()({outputFormat:"application/json"},t)}).then((function(e){return"object"!==u(e.data)?JSON.parse(e.data):e.data}))},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.version,r=void 0===n?"1.1.0":n,o=a.a.parse(e,!0);return a.a.format(l()({},o,{query:l()({service:"WFS",version:r,request:"GetCapabilities"},o.query)}))},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.version,o=void 0===r?"1.1.0":r,i=s(n,["version"]),c=a.a.parse(e,!0);return a.a.format(l()({},c,{query:l()(d({service:"WFS",typeName:t,version:o,request:"GetFeature"},i),c.query)}))},v=function(e,t,n){return o.a.get(y(e,t,n))},h=function(e){return o.a.get(b(e))},O=function(e,t){var r=a.a.parse(e,!0),i=a.a.format(l()({},r,{query:l()({service:"WFS",version:"1.1.0",typeName:t,request:"DescribeFeatureType"},r.query)}));return new Promise((function(e){Promise.all([n.e(0),n.e(17)]).then(function(){var t=n("./MapStore2/web/client/utils/ogc/WFS/index.js").unmarshaller;e(o.a.get(i).then((function(e){var n=t.unmarshalString(e.data);return n&&n.value})))}.bind(null,n)).catch(n.oe)}))},j=function(e,t){return o.a.get(m(e,t)).then((function(e){return e.data}))}},"./MapStore2/web/client/api/WMS.js":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"parseUrl",(function(){return v})),n.d(t,"extractCredits",(function(){return h})),n.d(t,"flatLayers",(function(){return O})),n.d(t,"getOnlineResource",(function(){return j})),n.d(t,"searchAndPaginate",(function(){return w})),n.d(t,"getDimensions",(function(){return S})),n.d(t,"getCapabilities",(function(){return E})),n.d(t,"describeLayer",(function(){return A})),n.d(t,"getRecords",(function(){return P})),n.d(t,"describeLayers",(function(){return x})),n.d(t,"textSearch",(function(){return C})),n.d(t,"parseLayerCapabilities",(function(){return T})),n.d(t,"getBBox",(function(){return M})),n.d(t,"reset",(function(){return I}));var a=n("./node_modules/url/url.js"),c=n("./node_modules/object-assign/index.js"),l=n("./node_modules/xml2js/lib/xml2js.js"),s=n("./MapStore2/node_modules/lodash/lodash.js"),u=s.isArray,p=s.castArray,d=s.get,f=n("./MapStore2/web/client/libs/ajax.js"),m=n("./MapStore2/web/client/utils/ConfigUtils.js"),g=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),b=n("./MapStore2/node_modules/lodash/lodash.js"),y={},v=function(e){var t=(u(e)&&e||e.split(","))[0],n=a.parse(t,!0);return a.format(c({},n,{search:null},{query:c({service:"WMS",version:"1.3.0",request:"GetCapabilities"},n.query)}))},h=function(e){var t=e&&e.Title,n=e.LogoURL&&o(o({},d(e,"LogoURL.$")||{}),{},{format:d(e,"LogoURL.Format")}),r=d(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:n,imageUrl:d(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:r}},O=function e(t){return t.Layer?(u(t.Layer)&&t.Layer||[t.Layer]).reduce((function(t,n){return t.concat(e(n)).concat(n.Layer&&n.Name?[n]:[])}),[]):t.Name&&[t]||[]},j=function(e){return e.Request&&e.Request.GetMap&&e.Request.GetMap.DCPType&&e.Request.GetMap.DCPType.HTTP&&e.Request.GetMap.DCPType.HTTP.Get&&e.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&e.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=(e.WMS_Capabilities||e.WMT_MS_Capabilities||{}).Capability,i=(e.WMS_Capabilities||e.WMT_MS_Capabilities||{}).Service,a=j(o),l=o.Layer&&(o.Layer.SRS||o.Layer.CRS)||[],s=o.Layer&&o.Layer.Attribution&&h(o.Layer.Attribution),p=o.Request&&o.Request.GetMap&&o.Request.GetMap.Format||[],d=O(o),f=u(d)?d:[d],m=f.filter((function(e){return!r||-1!==e.Name.toLowerCase().indexOf(r.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(r.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(r.toLowerCase())}));return{numberOfRecordsMatched:m.length,numberOfRecordsReturned:Math.min(n,m.length),nextRecord:t+Math.min(n,m.length)+1,service:i,records:m.filter((function(e,r){return r>=t-1&&r<t-1+n})).map((function(e){return c({},e,{formats:p,onlineResource:a,SRS:l,credits:e.Attribution?h(e.Attribution):s})}))}},S=function(e){return p(e.Dimension||e.dimension||[]).map((function(t,n){var r=e.Extent&&p(e.Extent)[n]||e.extent&&p(e.extent)[n];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||r&&r.$.default,values:t._&&t._.split(",")||r&&r._&&r._.split(",")}}))},E=function(e,t){var r=a.parse(e,!0),o=a.format(c({},r,{query:c({service:"WMS",version:"1.1.1",request:"GetCapabilities"},r.query)}));return new Promise((function(e){Promise.all([n.e(0),n.e(7)]).then(function(){var r=n("./MapStore2/web/client/utils/ogc/WMS.js").unmarshaller;e(f.get(v(o)).then((function(e){var n;if(t)return l.parseString(e.data,{explicitArray:!1},(function(e,t){n=t})),n;var o=r.unmarshalString(e.data);return o&&o.value})))}.bind(null,n)).catch(n.oe)}))},A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.parse(e,!0),i=a.format(c({},o,{query:c({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},o.query,r.query||{})}));return new Promise((function(e){Promise.all([n.e(0),n.e(7)]).then(function(){var t=n("./MapStore2/web/client/utils/ogc/WMS.js").unmarshaller;e(f.get(v(i)).then((function(e){var n=t.unmarshalString(e.data);return n&&n.value&&n.value.layerDescription&&n.value.layerDescription[0]})))}.bind(null,n)).catch(n.oe)}))},P=function(e,t,n,r){var o=y[e];return o&&(new Date).getTime()<o.timestamp+1e3*(m.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(w(o.data,t,n,r))})):f.get(v(e)).then((function(o){var i;return l.parseString(o.data,{explicitArray:!1},(function(e,t){i=t})),y[e]={timestamp:(new Date).getTime(),data:i},w(i,t,n,r)}))},x=function(e,t){var n=a.parse(e,!0),r=a.format(c({},n,{query:c({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},n.query)}));return f.get(v(r)).then((function(e){var t;return l.parseString(e.data,{explicitArray:!1},(function(e,n){t=n&&n.WMS_DescribeLayerResponse&&n.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return o(o({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:o({},e&&e.query&&e.query.$||{})})}))}))},C=function(e,t,n,r){return P(e,t,n,r)},T=function e(t,n,r){return p(r||b.get(t,"capability.layer.layer")).reduce((function(r,o){return r||(!o.name&&o.layer?e(t,n,p(o.layer)):2===n.name.split(":").length&&o.name&&2===o.name.split(":").length?n.name===o.name&&o:o.name&&2===o.name.split(":").length?n.name===o.name.split(":")[1]&&o:2===n.name.split(":").length?n.name.split(":")[1]===o.name&&o:n.name===o.name&&o)}),null)},M=function(e,t){for(var n=e,r=n.EX_GeographicBoundingBox||n.exGeographicBoundingBox||g.getWMSBoundingBox(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;!r&&n.Layer&&n.Layer.length;)r=(n=n.Layer[0]).EX_GeographicBoundingBox||n.exGeographicBoundingBox||g.getWMSBoundingBox(n.BoundingBox)||n.LatLonBoundingBox&&n.LatLonBoundingBox.$||n.latLonBoundingBox;r||(r={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[r.westBoundLongitude||r.minx,r.southBoundLatitude||r.miny,r.eastBoundLongitude||r.maxx,r.northBoundLatitude||r.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},I=function(){Object.keys(y).forEach((function(e){delete y[e]}))},k={flatLayers:O,parseUrl:v,getDimensions:S,getCapabilities:E,describeLayer:A,getRecords:P,describeLayers:x,textSearch:C,parseLayerCapabilities:T,getBBox:M,reset:I};t.default=k},"./MapStore2/web/client/components/I18N/images/flags sync recursive ^\\.\\/.*\\.png$":function(e,t,n){var r={"./de-DE.png":"./MapStore2/web/client/components/I18N/images/flags/de-DE.png","./de.png":"./MapStore2/web/client/components/I18N/images/flags/de.png","./en-US.png":"./MapStore2/web/client/components/I18N/images/flags/en-US.png","./en.png":"./MapStore2/web/client/components/I18N/images/flags/en.png","./es-ES.png":"./MapStore2/web/client/components/I18N/images/flags/es-ES.png","./es.png":"./MapStore2/web/client/components/I18N/images/flags/es.png","./fi-FI.png":"./MapStore2/web/client/components/I18N/images/flags/fi-FI.png","./fi.png":"./MapStore2/web/client/components/I18N/images/flags/fi.png","./fr-FR.png":"./MapStore2/web/client/components/I18N/images/flags/fr-FR.png","./fr.png":"./MapStore2/web/client/components/I18N/images/flags/fr.png","./hr-HR.png":"./MapStore2/web/client/components/I18N/images/flags/hr-HR.png","./it-IT.png":"./MapStore2/web/client/components/I18N/images/flags/it-IT.png","./jp.png":"./MapStore2/web/client/components/I18N/images/flags/jp.png","./nl-NL.png":"./MapStore2/web/client/components/I18N/images/flags/nl-NL.png","./nl.png":"./MapStore2/web/client/components/I18N/images/flags/nl.png","./pt-PT.png":"./MapStore2/web/client/components/I18N/images/flags/pt-PT.png","./pt.png":"./MapStore2/web/client/components/I18N/images/flags/pt.png","./us.png":"./MapStore2/web/client/components/I18N/images/flags/us.png","./vi-VN.png":"./MapStore2/web/client/components/I18N/images/flags/vi-VN.png","./vi.png":"./MapStore2/web/client/components/I18N/images/flags/vi.png","./zh-ZH.png":"./MapStore2/web/client/components/I18N/images/flags/zh-ZH.png"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="./MapStore2/web/client/components/I18N/images/flags sync recursive ^\\.\\/.*\\.png$"},"./MapStore2/web/client/components/I18N/images/flags/de-DE.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYvTxcWb4+53h3z8GZpZff/79+v3n/7/fDAz/GHAAgABi+f37e3FxOZD1Dwz+/v3z9y+E/AMFv3//+Qumfv9et241QACxMDExAVWfOHkJJAEW/gUEP0EQDn78+AHE/gFOQJUAAcQiy8Ag8O+fLFj1n1+/QDp+/gQioK7fP378+vkDqOH39x9A/RJ/gE5lAAhAYhzcAACCQBDkgRXRjP034R0IaDTZTFZn0DItot37S94KLOINerEcI7aKHAHE8v/3r/9//zIA1f36/R+o4tevf1ANYNVA9P07RD9IJQMDQACxADHD3z8Ig4GMHz+AqqHagKp//fwLVA0U//v7LwMDQACx/LZiYFD7/5/53/+///79BqK/EMZ/UPACSYa/v/8DyX9A0oTxx2EGgABi+a/H8F/m339BoCoQ+g8kgRaCQvgPJJiBYmAuw39hxn+uDAABxMLwi+E/0PusRkwMvxhBGoDkH4b/v/+D2EDyz///QB1/QLb8+sP0lQEggFh+vGXYM2/SP6A2Zoaf30Ex/J+PgekHwz9gQDAz/P0FYrAyMfz7wcDAzPDtFwNAgAEAd3SIyRitX1gAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/de.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYvTxcWb4+53h3z8GZpZff/79+v3n/7/fDAz/GHAAgABi+f37e3FxOZD1Dwz+/v3z9y+E/AMFv3//+Qumfv9et241QACxMDExAVWfOHkJJAEW/gUEP0EQDn78+AHE/gFOQJUAAcQiy8Ag8O+fLFj1n1+/QDp+/gQioK7fP378+vkDqOH39x9A/RJ/gE5lAAhAYhzcAACCQBDkgRXRjP034R0IaDTZTFZn0DItot37S94KLOINerEcI7aKHAHE8v/3r/9//zIA1f36/R+o4tevf1ANYNVA9P07RD9IJQMDQACxADHD3z8Ig4GMHz+AqqHagKp//fwLVA0U//v7LwMDQACx/LZiYFD7/5/53/+///79BqK/EMZ/UPACSYa/v/8DyX9A0oTxx2EGgABi+a/H8F/m339BoCoQ+g8kgRaCQvgPJJiBYmAuw39hxn+uDAABxMLwi+E/0PusRkwMvxhBGoDkH4b/v/+D2EDyz///QB1/QLb8+sP0lQEggFh+vGXYM2/SP6A2Zoaf30Ex/J+PgekHwz9gQDAz/P0FYrAyMfz7wcDAzPDtFwNAgAEAd3SIyRitX1gAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/en-US.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woNChAfXTteVAAAAjRJREFUKM9VkklIlVEAhb9fHxkVDWLwQKw2URI0kQ2GmoYELcJFhFZQ+FBxHaRhIA20qKiWrzDSoAwMGsgicEIlizILi+ZNIERJhNp777/3/ve0sEV9q7M78J0TJBqGxb94D94BBhBguLK8B6V+M/njGwbwgJ23hLHSBCQahuV9pOsDTlZGHX1O1lq19TqFYUbJx07GhArDUJlMWul0SnZ0RD4KlXw0riDRMKyymq10DnoiD5EH40Sk2ZxxYpQW+PkLxbLxW7cwp7aWa13jnE++IAss8nC3SYQe7jdZIkH30RQZJ94GkGptxTXWk336FO/KqqjYfYs376fIGEOQqBtUaU0x1/o8kZ9tdhZCibeELHVPmWheSxCP/6dKgtcfvxPDp9hfItp6xIOmDJWn5tLdNEX8jGGy6jPzkx246glkDN5avDEQRcRW59P7EWIg2gcCnIPy0zl4J9ZczDB+dDGL9h3Hh5bsZyN/Fwnw3iOEBDs+TcLXr19krVUqldLMzIzS09MKW5olSX7jJtl1GzRLpImKcvVf7lY8/4r2Hr6jhSuOKCu//RLZY0/IuXCBWOcNwmSSRLhn9hJhiIwBie07Osnr7aMo+MarykHWFi1HkSXrS3U9bv02THwBoysrOPF7M7kLIiQICvMJCuNIomBVLgcP3WaosISlbW00Pm+l7kAxQX/HTX3oGqKrYBsvhwzWpXFRxMi9ah5WViHn2NXbTdHOs+Aj8BF5y5Zw7FwNAyev8gcAFF3B0hKD4gAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/en.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGCSURBVHjaYvz48SMDEvj3j+Hfty/npKX/MTAY3L7NwMf3DxUABBALUBEfHx+Q/P//P1QPJ7t6UdG/P3+EpKQY2Nj+I4Fnz54BBBALRBFcNUj4378fDx78+/3739+/QBvhqhkZGf/8+QMQQCxoqiEkUPX/X7+BShiQjAc7+B9AALE8SEmRi4//++ED0Dyg2Qx///77+fPfr1//f/9+PWMGUBVQHCT15w+LkNCF3FyAAGJ5t3q1oJLSr8eP///+8//Pb5BLgMYDyV+/3q1Z8w/MAPrn/69f7AoKzxgYAAKIhcventvIiE1e/t+/vwx/QIYBbfi4dStQKa+LC9QGoIa/f1lFRAT27QMIIMa3b9/y8/PDXQ/ywI8ft1xdgQar7tsHDyWgLNDTd+7cAQggFqA/kL0LkQQ5A4j+/mVE8jEQAEMJIIBAGuCqIaKMDAxsMjJAJzEyMQFNhYlBZQECCKTh1atXyHH56927Q1u2/GJgcLh0iUFICOSEf//+gB0CBAABBgAC4UQezUonUAAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/es-ES.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFnSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f0NIKPoFJH/9//ULyGaUlQXaABBALAx/Gf4zAt31F4i+ffj3/cN/XrFfzOx//v///f//LzACM/79ZmD8/e8TA0AAMYHdDVT958vXP38nMDB0s3x94/Tj5y+YahhiAKLfQKUAAcQEdtJfoDHMF2L+vPzDmFXLelf551tGFOOhev4A/QgQQExgHwAd8IdFT/Wz6j+GhlpmXSOW/2z///8Eq/sJ18Dw/zdQA0AAMQExxJjjdy9x2/76EfLz4MXdP/i+wsyGkkA3Aw3984cBIIAYfzIwMKel/bt3jwEaLNAwgZIQxp/fDH/+MqqovL14ESCAWICeZvr9h0FSEhSgwBgAygFDEMT+wwAhgQgc4kAEVAwQQIxfUSMSTxxDAECAAQAJWke8v4u1tAAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/es.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFnSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f0NIKPoFJH/9//ULyGaUlQXaABBALAx/Gf4zAt31F4i+ffj3/cN/XrFfzOx//v///f//LzACM/79ZmD8/e8TA0AAMYHdDVT958vXP38nMDB0s3x94/Tj5y+YahhiAKLfQKUAAcQEdtJfoDHMF2L+vPzDmFXLelf551tGFOOhev4A/QgQQExgHwAd8IdFT/Wz6j+GhlpmXSOW/2z///8Eq/sJ18Dw/zdQA0AAMQExxJjjdy9x2/76EfLz4MXdP/i+wsyGkkA3Aw3984cBIIAYfzIwMKel/bt3jwEaLNAwgZIQxp/fDH/+MqqovL14ESCAWICeZvr9h0FSEhSgwBgAygFDEMT+wwAhgQgc4kAEVAwQQIxfUSMSTxxDAECAAQAJWke8v4u1tAAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/fi-FI.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIUFBUyAPfcpAAAAUpJREFUKM+FkjtLA1EQhb979242IeKrCBokiqJgp0IaS8HOVjvxB1gI4o+wtBFs7CztrCwsbCy1UBCbiBiNDzD43NzdZMciJkTJxgNT3DNw7pk5g4h8iEggIlZE7O7Bmc3NbVpGNuz61qH1bWgbvXZlgCTg0IDwG3/ff6CBqJVIeQZHKRAh5bkkPdNRwJycF0Hq33gJw0XhCb9aA9fh+r7M8dkNnusQRe2tqJml7QBwAZSC5zefh5dPgrBGpj9Nti+NVirWgSK71hQgEujyoDeFMgZ5/YI3vz5kjIaZX5hqbkprze3zO4W7MpVKyPBohrHBHoyjEYkZ4fSqFMiPg2TCYf/okp29E0rFMivLs6wu5nGNQxQjYKYnBn4R47lHko6GsMpQppv8ZPbfGN1Wwq9UqYmA1viVEN9WO8cIFIBEcxGq5YBUPZlO+AYo0JZbV1yoGgAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/fi.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AIUFBUyAPfcpAAAAUpJREFUKM+FkjtLA1EQhb979242IeKrCBokiqJgp0IaS8HOVjvxB1gI4o+wtBFs7CztrCwsbCy1UBCbiBiNDzD43NzdZMciJkTJxgNT3DNw7pk5g4h8iEggIlZE7O7Bmc3NbVpGNuz61qH1bWgbvXZlgCTg0IDwG3/ff6CBqJVIeQZHKRAh5bkkPdNRwJycF0Hq33gJw0XhCb9aA9fh+r7M8dkNnusQRe2tqJml7QBwAZSC5zefh5dPgrBGpj9Nti+NVirWgSK71hQgEujyoDeFMgZ5/YI3vz5kjIaZX5hqbkprze3zO4W7MpVKyPBohrHBHoyjEYkZ4fSqFMiPg2TCYf/okp29E0rFMivLs6wu5nGNQxQjYKYnBn4R47lHko6GsMpQppv8ZPbfGN1Wwq9UqYmA1viVEN9WO8cIFIBEcxGq5YBUPZlO+AYo0JZbV1yoGgAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/I18N/images/flags/fr-FR.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYiyeepkBBv79+Zfnx/f379+fP38CyT9//jAyMiq5GP77wvDnJ8MfoAIGBoAAYgGqC7STApL///3/9++/pCTv////Qdz/QO4/IMna0vf/z+9/v379//37bUUTQACBNDD8Z/j87fffvyAVX79+/Q8GQDbQeKA9fM+e/Pv18/+vnwzCIkBLAAKQOAY5AIAwCEv4/4PddNUm3ji0QJyxW3rgzE0iLfqDGr2oYuu0l54AYvnz5x9Q6d+/QPQfyAQqAin9B3EOyG1A1UDj//36zfjr1y8GBoAAFI9BDgAwCMIw+P8Ho3GDO6XQ0l4MN8b2kUwYaLszqgKM/KHcDXwBxAJUD3TJ779A8h9Q5D8SAHoARP36+Rfo41+/mcA2AAQQy49ff0Cu//MPpAeI/0FdA1QNYYNVA/3wmwEYVgwMAAHE8uPHH5BqoD1//gJJLADoJKDS378Z//wFhhJAALF8A3rizz8uTmYg788fJkj4QOKREQyYxSWBhjEC/fcXZANAALF8+/anbcHlHz9+ffvx58uPX9KckkCn/gby/wLd8uvHjx96k+cD1UGiGQgAAgwA7q17ZpsMdUQAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/fr.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYiyeepkBBv79+Zfnx/f379+fP38CyT9//jAyMiq5GP77wvDnJ8MfoAIGBoAAYgGqC7STApL///3/9++/pCTv////Qdz/QO4/IMna0vf/z+9/v379//37bUUTQACBNDD8Z/j87fffvyAVX79+/Q8GQDbQeKA9fM+e/Pv18/+vnwzCIkBLAAKQOAY5AIAwCEv4/4PddNUm3ji0QJyxW3rgzE0iLfqDGr2oYuu0l54AYvnz5x9Q6d+/QPQfyAQqAin9B3EOyG1A1UDj//36zfjr1y8GBoAAFI9BDgAwCMIw+P8Ho3GDO6XQ0l4MN8b2kUwYaLszqgKM/KHcDXwBxAJUD3TJ779A8h9Q5D8SAHoARP36+Rfo41+/mcA2AAQQy49ff0Cu//MPpAeI/0FdA1QNYYNVA/3wmwEYVgwMAAHE8uPHH5BqoD1//gJJLADoJKDS378Z//wFhhJAALF8A3rizz8uTmYg788fJkj4QOKREQyYxSWBhjEC/fcXZANAALF8+/anbcHlHz9+ffvx58uPX9KckkCn/gby/wLd8uvHjx96k+cD1UGiGQgAAgwA7q17ZpsMdUQAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/hr-HR.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3WAAAN1gGQb3mcAAAAB3RJTUUH4QoHCTAQC4tfhwAAARZJREFUKM+VkqtOA0EUhr+ZWWi3XS4hEBpAkCIICYKLRBIcOAQPUEHqeAEcDkOC4wVQqGLwWCyGFswGSLglTUvbmc7BYMhuFzjy5Fz//1ONUkkYGAIosiJIbdMaly/iTUDQa4MTtDiU978P0N5xsXvIx8Mjk+Mx9aVl5l5eKfcN6+dneG1+1KvnSiXxQmtkipvWGBPSJuc69BDmw08KvU7iAiUiSQ2sJd6vUtzapP/2TrN2yczpCcPlhT9qYC3h2iq23oBgiNGdbUwUpYqo05KqkAdrQWuUAul2MSbdDbV3UEu1sTr9xErYxHvhLlfi6DYiFyT3KRaPZRACG7OKKG+4uneI/IOD79FcxwK4TJaCTMyyIQTgC/dfW5JUkrXFAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/it-IT.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAE2SURBVHjaYmSYyMDwgwEE/jEw/GF4mvT0HyqQUlX9B5aEIIAAYmH4wlDtWg1SDwT//0lKSv7/D+T9/w+nYmL+//79/88fIPll0yaAAGJhYAGJP/n69O+/v0CAUAcHt2////ULqJpRVhZoA0AAsQCtAZoMVP0HiP7+RlcNBEDVYA0Mv38DNQAEEMj8vwx//wCt/AdC/zEBkgagYoAAYgF6FGj277+///wlpAEoz8AAEEAgDX/BZv/69wuoB48GRrCTAAKICajh9//fv/6CVP/++wu7BrDxQFf/YWAACCCwk0BKf0MQdg1/gBqAPv0L9ANAALEAY+33vz+S3JIgb/z5C45CBkZGRgY4UFICKQUjoJMAAoiRoZSB4RMojkHx/YPhbNVZoM3AOISQQPUK9vaQOIYAgAADAC5Wd4RRwnKfAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/jp.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAE2SURBVHjaYvz69SsDEvj37x+ERGbAwZ9//wACiAUoysXFBST///8P0QOm//+HU0jgxYsXAAHEAlP0H8HYt+//4SP/f//6b2b238sLrpqRkRFoCUAAsaCrXrv2/8KF///8+f/r9//Dh/8/ffI/OQWiAeJCgABigrseJPT27f/Vq////v3/1y8oWrzk/+PHcEv+/PkDEEBMEM/B3fj/40eo0t9g8suX/w8f/odZAVQMEEAsQAzj/2cQFf3PxARWCrYEaBXQLCkpqB/+/wcqBgggJrjxQPX/hYX/+/v///kLqhpIBgf/l5ODhxiQBAggFriToDoTEv5zcf3ftQuk2s7uf0wM3MdAAPQDQAAxvn37lo+PDy4KZUDcycj4/z9CBojv3r0LEEAgG969eweLSBDEBSCWAAQYACaTbJ/kuok9AAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/nl-NL.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFXSURBVHjaYvzPgAD/UNlYEUAAkuTgCAAIBgJggq5VoAs1qM0vdzmMz362vezjokxPGimkEQ5WoAQEKuK71zwCCKyB4c//J8+BShn+/vv/+w/D399AEox+//8FJH/9/wUU+cUoKw20ASCAWBhEDf/LyDOw84BU//kDtgGI/oARmAHRDJQSFwVqAAggxo8fP/Ly8oKc9P8/AxjiAoyMjA8ePAAIIJZ///5BVIM0MOBWDpRlZPzz5w9AALH8gyvCbz7QBrCJAAHEyKDYX15r/+j1199//v35++/Xn7+///77DST/wMl/f4Dk378K4jx7O2cABBALw7NP77/+ev3xB0gOpOHfr99AdX9/gTVASKCGP//+8XCyMjC8AwggFoZfIHWSwpwQk4CW/AYjsKlA8u+ff////v33998/YPgBnQQQQIzAaGNg+AVGf5AYf5BE/oCjGEIyAQQYAGvKZ4C6+xXRAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/nl.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFXSURBVHjaYvzPgAD/UNlYEUAAkuTgCAAIBgJggq5VoAs1qM0vdzmMz362vezjokxPGimkEQ5WoAQEKuK71zwCCKyB4c//J8+BShn+/vv/+w/D399AEox+//8FJH/9/wUU+cUoKw20ASCAWBhEDf/LyDOw84BU//kDtgGI/oARmAHRDJQSFwVqAAggxo8fP/Ly8oKc9P8/AxjiAoyMjA8ePAAIIJZ///5BVIM0MOBWDpRlZPzz5w9AALH8gyvCbz7QBrCJAAHEyKDYX15r/+j1199//v35++/Xn7+///77DST/wMl/f4Dk378K4jx7O2cABBALw7NP77/+ev3xB0gOpOHfr99AdX9/gTVASKCGP//+8XCyMjC8AwggFoZfIHWSwpwQk4CW/AYjsKlA8u+ff////v33998/YPgBnQQQQIzAaGNg+AVGf5AYf5BE/oCjGEIyAQQYAGvKZ4C6+xXRAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/pt-PT.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAG8SURBVHjaYmSIZGD4wgAF/xgYWBj+boQysSKAAGJh+MRQnVoNUgEE///9ZfzLoPiX4e8fxj9/mP/8Yfr9+/+fP/9h5JdNmwACiIWBCaj4/5P3T7mY/xoJ/9UR/v0n8O+f17/Zlv/+//73/1+////+9f/XL6BqRllZoA0AAcQCNvv/339/C03+8v/8w7bk7+/vv/+7/P4S95ur+xdY9W+IBobfv4EaAAKICeiuv////vnz58PX3xxb/7BlN3/K7Ph1WoSR/fcfhl//f4KN/wW1BGg6QAAxMfxi+PP37++/v1kYfn//+usnE+cHCbWfTKz/mH7+ZgUpQmj48wdoA0AAsQA1/P0HZP458/qXqvNfjdnVItxy3wNvApUIvwPb8BvqJEawkwACiIXhDwPQ+F9/f+2890dY6/cnrycCb++z3frNfOwX01eEagZgKAHdzcAAEEAgG4DGA/W8+fO79+Rvdt5f2+b++sP+m+kdWDVEwx+gBmBY/wX6ASCAWBi+Mfz+80eSX/L3n99AzwBDm0H2NwtQHS/QapDBIPT3LwQBnQQQQIwMxgwM7xgYfjAArQKRTAyvP2OPYwgACDAAjtdGduN8tIgAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/pt.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAG8SURBVHjaYmSIZGD4wgAF/xgYWBj+boQysSKAAGJh+MRQnVoNUgEE///9ZfzLoPiX4e8fxj9/mP/8Yfr9+/+fP/9h5JdNmwACiIWBCaj4/5P3T7mY/xoJ/9UR/v0n8O+f17/Zlv/+//73/1+////+9f/XL6BqRllZoA0AAcQCNvv/339/C03+8v/8w7bk7+/vv/+7/P4S95ur+xdY9W+IBobfv4EaAAKICeiuv////vnz58PX3xxb/7BlN3/K7Ph1WoSR/fcfhl//f4KN/wW1BGg6QAAxMfxi+PP37++/v1kYfn//+usnE+cHCbWfTKz/mH7+ZgUpQmj48wdoA0AAsQA1/P0HZP458/qXqvNfjdnVItxy3wNvApUIvwPb8BvqJEawkwACiIXhDwPQ+F9/f+2890dY6/cnrycCb++z3frNfOwX01eEagZgKAHdzcAAEEAgG4DGA/W8+fO79+Rvdt5f2+b++sP+m+kdWDVEwx+gBmBY/wX6ASCAWBi+Mfz+80eSX/L3n99AzwBDm0H2NwtQHS/QapDBIPT3LwQBnQQQQIwMxgwM7xgYfjAArQKRTAyvP2OPYwgACDAAjtdGduN8tIgAAAAASUVORK5CYII="},"./MapStore2/web/client/components/I18N/images/flags/us.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHzSURBVHjaYkxOP8IAB//+Mfz7w8Dwi4HhP5CcJb/n/7evb16/APL/gRFQDiAAw3JuAgAIBEDQ/iswEERjGzBQLEru97ll0g0+3HvqMn1SpqlqGsZMsZsIe0SICA5gt5a/AGIEarCPtFh+6N/ffwxA9OvP/7//QYwff/6fZahmePeB4dNHhi+fGb59Y4zyvHHmCEAAAW3YDzQYaJJ93a+vX79aVf58//69fvEPlpIfnz59+vDhw7t37968efP3b/SXL59OnjwIEEAsDP+YgY53b2b89++/awvLn98MDi2cVxl+/vl6mituCtBghi9f/v/48e/XL86krj9XzwEEEENy8g6gu22rfn78+NGs5Ofr16+ZC58+fvyYwX8rxOxXr169fPny+fPn1//93bJlBUAAsQADZMEBxj9/GBxb2P/9+S/R8u3vzxuyaX8ZHv3j8/YGms3w8ycQARmi2eE37t4ACCDGR4/uSkrKAS35B3TT////wADOgLOBIaXIyjBlwxKAAGKRXjCB0SOEaeu+/y9fMnz4AHQxCP348R/o+l+//sMZQBNLEvif3AcIIMZbty7Ly6t9ZmXl+fXj/38GoHH/UcGfP79//BBiYHjy9+8/oUkNAAHEwt1V/vI/KBY/QSISFqM/GBg+MzB8A6PfYC5EFiDAABqgW776MP0rAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/vi-VN.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFsSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f4NI9d////3+f+b3/1+////+9f/XL6A4o6ws0AaAAGIBm/0fRTVQ2v3Pf97f/4/9Aqv+DdHA8Ps3UANAALEAMSNQNdDGP3+ALvnf8vv/t9//9X/////7f+uv/4K//iciNABNBwggsJP+/IW4kuH3n//1v/8v+wVSDURmv/57//7/CeokoKFA0wECiAnkpL9/wH4CO+DNr/+VQA1A9PN/w6//j36CVIMRxEkAAQR20m+QpSBXgU0CuSTj9/93v/8v//V/xW+48UBD/zAwAAQQSAMzOMiABoBUswCd8ev/M7A669//OX7///Lr/x+gBlCoAJ0DEEAgDUy//zBISoKNAfoepJNRFmQkyJecfxj4/kDCEIiAigECiPErakTiiWMIAAgwAB4ZUlqMMhQQAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/vi.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFsSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f4NI9d////3+f+b3/1+////+9f/XL6A4o6ws0AaAAGIBm/0fRTVQ2v3Pf97f/4/9Aqv+DdHA8Ps3UANAALEAMSNQNdDGP3+ALvnf8vv/t9//9X/////7f+uv/4K//iciNABNBwggsJP+/IW4kuH3n//1v/8v+wVSDURmv/57//7/CeokoKFA0wECiAnkpL9/wH4CO+DNr/+VQA1A9PN/w6//j36CVIMRxEkAAQR20m+QpSBXgU0CuSTj9/93v/8v//V/xW+48UBD/zAwAAQQSAMzOMiABoBUswCd8ev/M7A669//OX7///Lr/x+gBlCoAJ0DEEAgDUy//zBISoKNAfoepJNRFmQkyJecfxj4/kDCEIiAigECiPErakTiiWMIAAgwAB4ZUlqMMhQQAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/I18N/images/flags/zh-ZH.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFqSURBVHjaYrzOwPAPjJgYQEDAleHVbhADIvgHLPgHiQ0QQCxAlkR9NW8sw+cV/1gV/7Gb/hV4+vfzhj8Mv/78//Pn/+/f/8AkhH1t0yaAAAJp4I37zyz2lDfu79uqv/++/WYz+cuq/vvLxt8gdb+A5K9/v34B2SyyskBLAAII5JAva/7/+/z367a/f3/8ZuT9+//Pr78vQUrB6n4CSSj6/RuoASCAWEDO/fD3ddEfhv9/OE3/sKj8/n7k9/fDQNUIs/+DVf8HawAIIJCT/v38C3Hr95N/GDh/f94AVvT7N8RUBpjxQAVADQABBNLw/y/Ifwy/f/399ufTOpDBEPf8g5sN0QBEDAwAAQTWABEChgOSA9BVA00E2wAQQCANQBbEif/AzoCqgLkbbBYwWP/+//sXqBYggFhAkfL7D7OkJFCOCSj65zfUeFjwg8z++/ffX5AGoGKAAGI8jhSRyIw/SJH9D4aAYQoQYAA6rnMw1jU2vQAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/TOC/DefaultGroup.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),g=n("./MapStore2/web/client/components/TOC/Node.jsx"),b=n("./node_modules/prop-types/index.js"),y=n("./MapStore2/web/client/components/TOC/enhancers/draggableComponent.jsx"),v=n("./MapStore2/web/client/components/TOC/fragments/GroupTitle.jsx"),h=n("./MapStore2/web/client/components/TOC/fragments/GroupChildren.jsx"),O=n("./MapStore2/web/client/components/TOC/fragments/VisibilityCheck.jsx"),j=n("./MapStore2/web/client/components/TOC/fragments/LayersTool.jsx"),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,u=s(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=u.call.apply(u,[this].concat(n))),"renderVisibility",(function(t){return e.props.groupVisibilityCheckbox&&!t?m.createElement(O,{node:e.props.node,key:"visibility",tooltip:"toc.toggleGroupVisibility",checkType:e.props.visibilityCheckType,propertiesChangeHandler:e.props.propertiesChangeHandler}):m.createElement(j,{key:"loadingerror",glyph:"exclamation-mark text-danger",tooltip:"toc.loadingerror",className:"toc-error"})})),e}return t=d,(n=[{key:"render",value:function(){var e=this,t=this.props,n=(t.children,t.onToggle,t.connectDragPreview),r=t.connectDragSource,a=t.connectDropTarget,c=i(t,["children","onToggle","connectDragPreview","connectDragSource","connectDropTarget"]),l=this.props.selectedNodes.filter((function(t){return t===e.props.node.id})).length>0?" selected":"",s=this.props.node.loadingError?" group-error":"",u=c.isDraggable?m.createElement(j,{key:"grabTool",tooltip:"toc.grabGroupIcon",className:"toc-grab",ref:"target",glyph:"menu-hamburger"}):m.createElement("span",{className:"toc-layer-tool toc-grab"}),p=m.createElement("div",{className:"toc-default-group-head"},u,this.renderVisibility(s),m.createElement(v,{tooltipOptions:this.props.tooltipOptions,tooltip:this.props.titleTooltip,node:this.props.node,currentLocale:this.props.currentLocale,onClick:this.props.onToggle,onSelect:this.props.onSelect})),d=m.createElement(h,{level:this.props.level+1,onSort:this.props.onSort,onError:this.props.onError,setDndState:this.props.setDndState,position:"collapsible"},this.props.children);return this.props.node.showComponent&&!this.props.node.hide?m.createElement(g,o({className:(this.props.isDragging||this.props.node.placeholder?"is-placeholder ":"")+"toc-default-group toc-group-"+this.props.level+l+s,sortableStyle:this.props.sortableStyle,style:this.props.style,type:"group"},c),n(a(this.props.isDraggable?r(p):p)),this.props.isDragging||this.props.node.placeholder?null:d):null}}])&&c(t.prototype,n),r&&c(t,r),d}(m.Component);f(w,"propTypes",{node:b.object,style:b.object,sortableStyle:b.object,onToggle:b.func,level:b.number,onSort:b.func,onError:b.func,propertiesChangeHandler:b.func,groupVisibilityCheckbox:b.bool,visibilityCheckType:b.string,currentLocale:b.string,selectedNodes:b.array,onSelect:b.func,titleTooltip:b.bool,tooltipOptions:b.object,setDndState:b.func,connectDragSource:b.func,connectDragPreview:b.func,connectDropTarget:b.func,isDraggable:b.bool,isDragging:b.bool,isOver:b.bool}),f(w,"defaultProps",{node:{},onToggle:function(){},style:{marginBottom:"16px",cursor:"pointer"},sortableStyle:{},propertiesChangeHandler:function(){},groupVisibilityCheckbox:!1,visibilityCheckType:"glyph",level:1,currentLocale:"en-US",joinStr:" - ",selectedNodes:[],onSelect:function(){},titleTooltip:!1,connectDragPreview:function(e){return e},connectDragSource:function(e){return e},connectDropTarget:function(e){return e},isDraggable:!1,isDragging:!1,isOver:!1}),e.exports=y("LayerOrGroup",w)},"./MapStore2/web/client/components/TOC/DefaultLayer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),g=n("./node_modules/prop-types/index.js"),b=n("./MapStore2/web/client/components/TOC/Node.jsx"),y=n("./MapStore2/node_modules/lodash/lodash.js"),v=y.isObject,h=y.castArray,O=y.find,j=n("./node_modules/react-bootstrap/es/index.js"),w=j.Grid,S=j.Row,E=j.Col,A=j.Glyphicon,P=n("./MapStore2/web/client/components/TOC/enhancers/draggableComponent.jsx"),x=n("./MapStore2/web/client/components/TOC/fragments/VisibilityCheck.jsx"),C=n("./MapStore2/web/client/components/TOC/fragments/Title.jsx"),T=n("./MapStore2/web/client/components/TOC/fragments/WMSLegend.jsx"),M=n("./MapStore2/web/client/components/TOC/fragments/LayersTool.jsx"),I=n("./MapStore2/web/client/components/TOC/fragments/OpacitySlider.jsx"),k=n("./MapStore2/web/client/components/TOC/fragments/ToggleFilter.jsx"),D=n("./MapStore2/web/client/components/data/featuregrid/enhancers/withTooltip.js"),N=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js")("tooltip")(D(A)),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,u=s(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=u.call.apply(u,[this].concat(n))),"getTitle",(function(t){return(v(t.title)?t.title[e.props.currentLocale]||t.title.default:t.title)||t.name})),f(p(e),"renderOpacitySlider",(function(t){return e.props.activateOpacityTool?m.createElement(I,{opacity:e.props.node.opacity,disabled:!e.props.node.visibility,hideTooltip:t,onChange:function(t){return e.props.onUpdateNode(e.props.node.id,"layers",{opacity:t})}}):null})),f(p(e),"renderCollapsible",(function(){return m.createElement("div",{key:"legend",position:"collapsible",className:"collapsible-toc"},m.createElement(w,{fluid:!0},e.props.showFullTitleOnExpand?m.createElement(S,null,m.createElement(E,{xs:12,className:"toc-full-title"},e.getTitle(e.props.node))):null,e.props.activateLegendTool?m.createElement(S,null,m.createElement(E,{xs:12},m.createElement(T,i({node:e.props.node,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,language:e.props.language},e.props.legendOptions)))):null),e.renderOpacitySlider(e.props.hideOpacityTooltip))})),f(p(e),"renderVisibility",(function(){return"Error"===e.props.node.loadingError?m.createElement(M,{key:"loadingerror",glyph:"exclamation-mark text-danger",tooltip:"toc.loadingerror",className:"toc-error"}):m.createElement(x,{key:"visibilitycheck",tooltip:"Warning"===e.props.node.loadingError?"toc.toggleLayerVisibilityWarning":"toc.toggleLayerVisibility",node:e.props.node,checkType:e.props.visibilityCheckType,propertiesChangeHandler:e.props.propertiesChangeHandler})})),f(p(e),"renderToolsLegend",(function(t){return"Error"===e.props.node.loadingError||t?null:m.createElement(M,{node:e.props.node,tooltip:"toc.displayLegendAndTools",key:"toollegend",className:"toc-legend",ref:"target",glyph:"chevron-left",onClick:function(t){return e.props.onToggle(t.id,t.expanded)}})})),f(p(e),"renderIndicators",(function(){return h(e.props.indicators).map((function(t){return"dimension"===t.type&&O(e.props.node&&e.props.node.dimensions||[],t.condition)?t.glyph&&m.createElement(N,i({key:t.key,glyph:t.glyph},t.props)):null}))})),f(p(e),"renderNode",(function(t,n,r,o,a,c,l){var s="wms"===e.props.node.type&&!e.props.activateLegendTool&&!e.props.showFullTitleOnExpand||"wms"!==e.props.node.type&&!e.props.showFullTitleOnExpand,u=c?m.createElement("div",{style:{padding:0,height:10},className:"toc-default-layer-head"}):m.createElement("div",{className:"toc-default-layer-head"},t,e.renderVisibility(),m.createElement(k,{node:e.props.node,propertiesChangeHandler:e.props.propertiesChangeHandler}),m.createElement(C,{tooltipOptions:e.props.tooltipOptions,tooltip:e.props.titleTooltip,filterText:e.props.filterText,node:e.props.node,currentLocale:e.props.currentLocale,onClick:e.props.onSelect,onContextMenu:e.props.onContextMenu}),e.props.node.loading?m.createElement("div",{className:"toc-inline-loader"}):e.renderToolsLegend(s),e.props.indicators?e.renderIndicators():null);return m.createElement(b,i({className:(e.props.isDragging||e.props.node.placeholder?"is-placeholder ":"")+"toc-default-layer"+n+r+o+a,style:e.props.style,type:"layer"},l),l.isDraggable&&!c?e.props.connectDragPreview(u):u,c||!e.props.activateOpacityTool||e.props.node.expanded||!e.props.node.visibility||"Error"===e.props.node.loadingError?null:e.renderOpacitySlider(e.props.hideOpacityTooltip),c||s?null:e.renderCollapsible())})),f(p(e),"filterLayers",(function(t){return-1!==((v(t.title)?t.title[e.props.currentLocale]||t.title.default:t.title)||t.name).toLowerCase().indexOf(e.props.filterText.toLowerCase())})),e}return t=d,(n=[{key:"render",value:function(){var e=this,t=this.props,n=(t.children,t.propertiesChangeHandler,t.onToggle,t.connectDragSource),r=t.connectDropTarget,i=o(t,["children","propertiesChangeHandler","onToggle","connectDragSource","connectDropTarget"]),a=!this.props.node.visibility||this.props.node.invalid?" visibility":"",c=this.props.selectedNodes.filter((function(t){return t===e.props.node.id})).length>0?" selected":"",l="Error"===this.props.node.loadingError?" layer-error":"",s="Warning"===this.props.node.loadingError?" layer-warning":"",u=i.isDraggable?m.createElement(M,{key:"grabTool",tooltip:"toc.grabLayerIcon",className:"toc-grab",ref:"target",glyph:"menu-hamburger"}):m.createElement("span",{className:"toc-layer-tool toc-grab"}),p=!!this.props.node.dummy,d=!p&&this.filterLayers(this.props.node)?this.renderNode(u,a,c,l,s,p,i):null,f=m.createElement("div",{style:p?{opacity:0,boxShadow:"none"}:{},className:"toc-list-item"},!this.props.filterText||this.props.filterText&&p?this.renderNode(u,a,c,l,s,p,i):d);return!1!==i.node.showComponent&&!i.node.hide&&this.props.filter(this.props.node)?r(i.isDraggable&&!p?n(f):f):null}}])&&c(t.prototype,n),r&&c(t,r),d}(m.Component);f(_,"propTypes",{node:g.object,propertiesChangeHandler:g.func,onToggle:g.func,onContextMenu:g.func,onSelect:g.func,style:g.object,sortableStyle:g.object,activateLegendTool:g.bool,activateOpacityTool:g.bool,indicators:g.array,visibilityCheckType:g.string,currentZoomLvl:g.number,scales:g.array,additionalTools:g.array,legendOptions:g.object,currentLocale:g.string,selectedNodes:g.array,filterText:g.string,onUpdateNode:g.func,titleTooltip:g.bool,filter:g.func,showFullTitleOnExpand:g.bool,hideOpacityTooltip:g.bool,tooltipOptions:g.object,connectDragPreview:g.func,connectDragSource:g.func,connectDropTarget:g.func,isDraggable:g.bool,isDragging:g.bool,isOver:g.bool,language:g.string}),f(_,"defaultProps",{style:{},sortableStyle:{},propertiesChangeHandler:function(){},onToggle:function(){},onContextMenu:function(){},onSelect:function(){},activateLegendTool:!1,activateOpacityTool:!0,indicators:[],visibilityCheckType:"glyph",additionalTools:[],currentLocale:"en-US",joinStr:" - ",selectedNodes:[],filterText:"",onUpdateNode:function(){},filter:function(){return!0},titleTooltip:!1,showFullTitleOnExpand:!1,hideOpacityTooltip:!1,connectDragPreview:function(e){return e},connectDragSource:function(e){return e},connectDropTarget:function(e){return e}}),e.exports=P("LayerOrGroup",_)},"./MapStore2/web/client/components/TOC/DefaultLayerOrGroup.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),g=n("./node_modules/react/index.js"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,o=u(p);function p(){return c(this,p),o.apply(this,arguments)}return t=p,(n=[{key:"render",value:function(){var e=this.props,t=e.groupElement,n=e.layerElement,r=e.node,o=a(e,["groupElement","layerElement","node"]);return r.nodes?g.cloneElement(t,i({node:r},o),g.createElement(p,{groupElement:t,layerElement:n})):g.cloneElement(n,i({node:r},o))}}])&&l(t.prototype,n),r&&l(t,r),p}(g.Component);f(b,"propTypes",{node:m.object,groupElement:m.element.isRequired,layerElement:m.element.isRequired}),e.exports=b},"./MapStore2/web/client/components/TOC/Node.jsx":function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("./node_modules/prop-types/index.js"),i=n("./node_modules/react/index.js"),a=n("./node_modules/create-react-class/index.js"),c=n("./node_modules/object-assign/index.js"),l=n("./node_modules/react-transition-group/index.js").CSSTransitionGroup,s=a({displayName:"Node",propTypes:{node:o.object,style:o.object,styler:o.func,className:o.string,type:o.string,onSort:o.func,isDraggable:o.bool,animateCollapse:o.bool},getDefaultProps:function(){return{node:null,style:{},styler:function(){},className:"",type:"node",onSort:null,animateCollapse:!0}},renderChildren:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return i.Children.map(this.props.children,(function(n){if(t(n)){var o=(n.type.inheritedPropTypes||["node"]).reduce((function(t,n){return e.props[n]?c(t,r({},n,e.props[n])):t}),{});return i.cloneElement(n,o)}return null}))},render:function(){var e=void 0===this.props.node.expanded||this.props.node.expanded,t=this.props.type,n=c({},this.props.style,this.props.styler(this.props.node)),r=e&&"Error"!==this.props.node.loadingError?this.renderChildren((function(e){return e&&"collapsible"===e.props.position})):[];return this.props.animateCollapse&&(r=i.createElement(l,{transitionName:"TOC-Node",transitionEnterTimeout:250,transitionLeaveTimeout:250},r)),i.createElement("div",{key:this.props.node.name,className:(e?t+"-expanded":t+"-collapsed")+" "+this.props.className,style:this.props.node.dummy?{padding:0}:n},this.renderChildren((function(e){return e&&"collapsible"!==e.props.position})),r)}});e.exports=s},"./MapStore2/web/client/components/TOC/TOC.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./MapStore2/web/client/components/TOC/enhancers/dndTree.jsx");n("./MapStore2/web/client/components/TOC/css/toc.css");var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,l=c(s);function s(){return o(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this,t=[],n=this.props.nodes.filter(this.props.filter);if(this.props.children){var r=0;t=n.map((function(t){return p.cloneElement(e.props.children,{node:t,parentNodeId:"root",onSort:e.props.onSort,onError:e.props.onError,sortIndex:t.hide||t.dummy?r:r++,key:t.name||t.id||"default",isDraggable:!(!e.props.onSort||t.nodes&&"Default"===t.name),setDndState:e.props.setDndState})}))}return this.props.onSort,p.createElement("div",{id:this.props.id,className:"mapstore-layers-container"},t)}}])&&i(t.prototype,n),r&&i(t,r),s}(p.Component);u(m,"propTypes",{filter:d.func,nodes:d.array,id:d.string,onSort:d.func,onError:d.func,setDndState:d.func}),u(m,"defaultProps",{filter:function(){return!0},nodes:[],id:"mapstore-layers",onSort:null,setDndState:function(){}}),e.exports=f(m)},"./MapStore2/web/client/components/TOC/css/toc.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/css/toc.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/TOC/enhancers/dndTree.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./node_modules/react/index.js"),s=n("./node_modules/recompose/es/Recompose.js"),u=s.compose,p=s.branch,d=s.withState,f=n("./MapStore2/node_modules/lodash/isArray.js"),m=n("./MapStore2/node_modules/lodash/flatten.js"),g=function e(t,n,r){var o=t.findIndex((function(e){return e.id===n}));if(-1!==o){var i=t.slice();return r?i[o]=a(a({},i[o]),r):i.splice(o,1),i}return t.map((function(t){return a(a({},t),{},{nodes:t.nodes&&e(t.nodes,n,r)})}))},b=p((function(e){var t=e.nodes;return f(t)}),u(d("dndState","setDndState",{node:null,parentNodeId:"",newParentNodeId:"",sortIndex:0,illegalDrop:null}),(function(e){return function(t){var n=t.dndState,i=t.nodes,c=o(t,["dndState","nodes"]),s=n.node,u=n.parentNodeId,p=n.newParentNodeId,d=n.illegalDrop,f=function e(t,n){var r=n.node,o=n.sortIndex,i=n.parentNodeId,c=n.newParentNodeId,l=n.illegalDrop;return t&&r?t.map((function(t){if(t.nodes&&t.id===c){var s=c===i?g(t.nodes,r.id,null):t.nodes.slice();return s.splice(o,0,a(a({},r),c===i?{}:{id:r.id+"__placeholder",placeholder:!0,hide:!!l})),a(a({},t),{},{nodes:s})}return a(a({},t),{},{nodes:e(t.nodes,n)})})):t}([{id:"root",nodes:i}],n)[0],b=function e(t,n){var r=n.node,o=n.newParentNodeId,i=n.parentNodeId;return a(a({},t),{},{nodes:m(t.nodes.map((function(a,c){return!a.nodes||a.placeholder||a.hide||r&&a.id===r.id?[a]:[e(a,n)].concat(t.nodes[c+1]&&(t.nodes[c+1].placeholder||r&&t.id===o&&o===i&&t.nodes[c+1].id===r.id)?[]:[{id:a.id+"__dummy",dummy:!0}])})))})}({id:"root",nodes:p!==u||d?g(f.nodes,s.id,{hide:!0}):f.nodes},n);return l.createElement(e,r({},c,{nodes:b.nodes}))}})));e.exports=b},"./MapStore2/web/client/components/TOC/enhancers/draggableComponent.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n("./node_modules/react-dom/index.js"),a=n("./node_modules/react-dnd/lib/index.js"),c=a.DragSource,l=a.DropTarget,s=n("./node_modules/recompose/es/Recompose.js"),u=s.compose,p=s.branch,d={beginDrag:function(e){return e.setDndState&&e.setDndState({node:e.node,parentNodeId:e.parentNodeId,newParentNodeId:e.parentNodeId,sortIndex:e.sortIndex}),{node:e.node,parentNodeId:e.parentNodeId,newParentNodeId:e.parentNodeId,sortIndex:e.sortIndex}},endDrag:function(e,t){var n=t.getItem(),i=n.sortIndex,a=n.newParentNodeId,c=n.illegalDrop;e.setDndState&&e.setDndState({node:null,illegalDrop:null}),c?e.onError&&e.onError(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:"notification.warning",autoDismiss:5,position:"tc"},c)):e.onSort&&e.onSort(e.node.id,a,i)}},f=function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),draggedItem:t.getItem()}},m={hover:function(e,t,n){var r=t.getItem(),o=r.sortIndex,a=e.sortIndex;if(t.isOver({shallow:!0})){var c=i.findDOMNode(n),l=c.getElementsByClassName("toc-default-group-head")[0],s=l||c;if(s){var u=s.getBoundingClientRect(),p=t.getClientOffset().y-u.top;if(l){var d=(u.bottom-u.top)/3;if(e.isDragging||e.node&&e.node.placeholder)return;if(r.newParentNodeId===e.parentNodeId&&o<a&&p<d)return;if(r.newParentNodeId===e.parentNodeId&&o>a&&p>2*d)return;p<d?(r.sortIndex=e.sortIndex,r.newParentNodeId=e.parentNodeId,"Default"===e.node.name&&(r.illegalDrop={message:"toc.error.defaultGroupOnTop",values:{groupTitle:e.node.title}})):(r.sortIndex=0,r.newParentNodeId=e.node.id,r.illegalDrop=null)}else{var f=(u.bottom-u.top)/2;if(o===a&&r.newParentNodeId===e.parentNodeId)return;if(r.newParentNodeId===e.parentNodeId&&o<a&&p<f)return;if(r.newParentNodeId===e.parentNodeId&&o>a&&p>f)return;r.sortIndex=e.sortIndex,r.newParentNodeId=e.parentNodeId,r.illegalDrop=null}e.setDndState&&e.setDndState(r)}}}},g=function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}};e.exports=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isDraggable;return t}),u(c(e,d,f),l(e,m,g)),u(l(e,m,g))).apply(void 0,n)}},"./MapStore2/web/client/components/TOC/enhancers/tocItemsSettings.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/node_modules/lodash/lodash.js"),c=a.isNil,l=a.isEqual,s=a.isArray,u=a.isFunction,p=n("./node_modules/recompose/es/Recompose.js"),d=p.withState,f=p.withHandlers,m=p.compose,g=p.lifecycle,b=m(d("alertModal","onShowAlertModal",!1),d("showEditor","onShowEditor",!1)),y=m(f({onClose:function(e){var t=e.onUpdateInitialSettings,n=void 0===t?function(){}:t,r=e.onUpdateOriginalSettings,a=void 0===r?function(){}:r,c=e.onUpdateNode,p=void 0===c?function(){}:c,d=e.originalSettings,f=e.settings,m=e.onHideSettings,g=void 0===m?function(){}:m,b=e.onShowAlertModal,y=void 0===b?function(){}:b;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object.keys(f.options).reduce((function(e,t){return o(o({},e),{},i({},t,"opacity"!==t||d[t]?d[t]:1))}),{});l(r,f.options)||e?(s(t)&&t.forEach((function(e){u(e)&&e()})),p(f.node,f.nodeType,o(o({},f.options),d)),g(),y(!1),a({}),n({})):y(!0)}},onSave:function(e){var t=e.onUpdateInitialSettings,n=void 0===t?function(){}:t,r=e.onUpdateOriginalSettings,o=void 0===r?function(){}:r,i=e.onHideSettings,a=void 0===i?function(){}:i,c=e.onShowAlertModal,l=void 0===c?function(){}:c;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];s(e)&&e.forEach((function(e){u(e)&&e()})),a(),l(!1),o({}),n({})}}}),g({componentWillMount:function(){var e=this.props,t=e.element,n=void 0===t?{}:t,r=e.onUpdateOriginalSettings,i=void 0===r?function(){}:r,a=e.onUpdateInitialSettings,c=void 0===a?function(){}:a;i({}),c(o({},n))},componentWillReceiveProps:function(e){var t=this.props,n=t.settings,r=void 0===n?{}:n,o=t.onRetrieveLayerData,i=void 0===o?function(){}:o;!r.expanded&&e.settings&&e.settings.expanded&&c(e.element.description)&&"wms"===e.element.type&&i(e.element)},componentWillUpdate:function(e){var t=this.props,n=t.initialActiveTab,r=void 0===n?"general":n,i=t.settings,a=void 0===i?{}:i,c=t.onUpdateOriginalSettings,l=void 0===c?function(){}:c,s=t.onUpdateInitialSettings,u=void 0===s?function(){}:s,p=t.onSetTab,d=void 0===p?function(){}:p;!a.expanded&&e.settings&&e.settings.expanded&&(l({}),u(o({},e.element)),d(r))}}));e.exports={settingsState:b,settingsLifecycle:y,updateSettingsLifecycle:m(b,y)}},"./MapStore2/web/client/components/TOC/fragments/GroupChildren.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js");n("./MapStore2/web/client/components/TOC/fragments/css/groupchildren.css");var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,l=c(s);function s(){return o(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this,t=[];if(this.props.children){var n=(this.props.node.nodes||[]).filter((function(t){return e.props.filter(t,e.props.node)})),r=0;t=n.map((function(t){return d.cloneElement(e.props.children,{node:t,parentNodeId:e.props.node?e.props.node.id:"",key:t.id,sortIndex:t.hide||t.dummy?r:r++,onSort:e.props.onSort,onError:e.props.onError,level:e.props.level,isDraggable:!!e.props.onSort,setDndState:e.props.setDndState})}))}return this.props.onSort,d.createElement("div",{className:"toc-group-children"},t)}}])&&i(t.prototype,n),r&&i(t,r),s}(d.Component);u(f,"propTypes",{node:p.object,filter:p.func,onSort:p.func,onError:p.func,setDndState:p.func,level:p.number}),u(f,"inheritedPropTypes",["node","filter","onSort"]),u(f,"defaultProps",{node:null,filter:function(){return!0},onSort:null,level:1}),e.exports=f},"./MapStore2/web/client/components/TOC/fragments/GroupTitle.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./MapStore2/web/client/components/TOC/fragments/StatusIcon.jsx"),m=n("./node_modules/react-bootstrap/es/index.js").Tooltip,g=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),b=n("./MapStore2/web/client/utils/TOCUtils.js").getTitleAndTooltip,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,l=c(s);function s(){return o(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this,t=void 0===this.props.node.expanded||this.props.node.expanded,n=b(this.props),r=n.title,o=n.tooltipText;return this.props.tooltip&&o?p.createElement(g,{placement:this.props.node.tooltipPlacement||"top",overlay:p.createElement(m,{id:"tooltip-layer-group"},o)},p.createElement("div",{style:this.props.style},p.createElement("span",{className:"toc-group-title",onClick:this.props.onSelect?function(t){return e.props.onSelect(e.props.node.id,"group",t.ctrlKey)}:function(){}},r),p.createElement(f,{onClick:function(){return e.props.onClick(e.props.node.id,t)},expanded:t,node:this.props.node}))):p.createElement("div",{style:this.props.style},p.createElement("span",{className:"toc-group-title",onClick:this.props.onSelect?function(t){return e.props.onSelect(e.props.node.id,"group",t.ctrlKey)}:function(){}},r),p.createElement(f,{onClick:function(){return e.props.onClick(e.props.node.id,t)},expanded:t,node:this.props.node}))}}])&&i(t.prototype,n),r&&i(t,r),s}(p.Component);u(y,"propTypes",{node:d.object,onClick:d.func,onSelect:d.func,style:d.object,currentLocale:d.string,tooltip:d.bool,tooltipOptions:d.object}),u(y,"inheritedPropTypes",["node"]),u(y,"defaultProps",{onClick:function(){},onSelect:null,currentLocale:"en-US",style:{},tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}}),e.exports=y},"./MapStore2/web/client/components/TOC/fragments/LayersTool.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/prop-types/index.js"),d=n("./node_modules/react/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.Glyphicon,g=f.Tooltip,b=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),y=n("./MapStore2/web/client/components/I18N/Message.jsx"),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,l=c(s);function s(){return o(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this,t=this.props.className?" "+this.props.className:"",n=d.createElement(m,{className:"toc-layer-tool"+t,style:this.props.style,glyph:this.props.glyph,onClick:function(){return e.props.onClick(e.props.node)}});return this.props.tooltip?d.createElement(b,{placement:"bottom",overlay:d.createElement(g,{id:"Tooltip-"+this.props.tooltip},d.createElement("strong",null,d.createElement(y,{msgId:this.props.tooltip})))},n):n}}])&&i(t.prototype,n),r&&i(t,r),s}(d.Component);u(v,"propTypes",{node:p.object,onClick:p.func,style:p.object,glyph:p.string,tooltip:p.string,className:p.string}),u(v,"defaultProps",{onClick:function(){}}),e.exports=v},"./MapStore2/web/client/components/TOC/fragments/OpacitySlider.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./MapStore2/web/client/components/misc/Slider.jsx"),m=n("./MapStore2/node_modules/lodash/lodash.js"),g=m.isNil,b=m.isArray,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,l=c(s);function s(){return o(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=this;return p.createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(e){e.stopPropagation()}},this.props.hideTooltip&&p.createElement(f,{disabled:this.props.disabled,start:[g(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(t){b(t)&&t[0]&&e.props.onChange(parseFloat(t[0].replace(" %","")/100))}})||p.createElement(f,{disabled:this.props.disabled,start:[g(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" %"}},range:{min:0,max:100},onChange:function(t){return e.props.onChange(parseFloat(t[0].replace(" %",""))/100)}}))}}])&&i(t.prototype,n),r&&i(t,r),s}(p.Component);u(y,"propTypes",{opacity:d.number,disabled:d.bool,hideTooltip:d.bool,onChange:d.func}),u(y,"defaultProps",{opacity:1,onChange:function(){},visibility:!0}),e.exports=y},"./MapStore2/web/client/components/TOC/fragments/StatusIcon.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react-bootstrap/es/index.js"),m=f.Glyphicon,g=f.Tooltip,b=n("./MapStore2/web/client/components/I18N/Message.jsx"),y=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,l=c(s);function s(){return o(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"render",value:function(){var e=void 0===this.props.node.expanded||this.props.node.expanded;return p.createElement(y,{placement:"bottom",overlay:p.createElement(g,{id:"toc-status-icon"},p.createElement(b,{msgId:e?"toc.statusIconOpen":"toc.statusIconClose"}))},p.createElement(m,{onClick:this.props.onClick,className:"toc-status-icon",glyph:e?"folder-open":"folder-close"}))}}])&&i(t.prototype,n),r&&i(t,r),s}(p.Component);u(v,"propTypes",{node:d.object,onClick:d.func}),u(v,"inheritedPropTypes",["node","expanded"]),u(v,"defaultProps",{node:null,onClick:function(){}}),e.exports=v},"./MapStore2/web/client/components/TOC/fragments/Title.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/prop-types/index.js"),g=n("./node_modules/react/index.js"),b=n("./node_modules/react-bootstrap/es/index.js").Tooltip,y=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),v=n("./MapStore2/web/client/utils/TOCUtils.js").getTitleAndTooltip;n("./MapStore2/web/client/components/TOC/fragments/css/toctitle.css");var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=s(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=i.call.apply(i,[this].concat(n))),"getFilteredTitle",(function(t){var n=t.toLowerCase().split(e.props.filterText.toLowerCase());return e.props.filterText?n.reduce((function(t,r,i){return i===n.length-1?[].concat(o(t),[r]):[].concat(o(t),[r,g.createElement("strong",{key:i},e.props.filterText.toLowerCase())])}),[]):t})),f(p(e),"renderTitle",(function(){var t=v(e.props).title;return g.createElement("div",{className:"toc-title",onClick:e.props.onClick?function(t){return e.props.onClick(e.props.node.id,"layer",t.ctrlKey)}:function(){},onContextMenu:function(t){t.preventDefault(),e.props.onContextMenu(e.props.node)}},e.getFilteredTitle(t))})),e}return t=u,(n=[{key:"render",value:function(){var e=v(this.props).tooltipText;return this.props.tooltip&&e?g.createElement(y,{placement:this.props.node.tooltipPlacement||"top",overlay:g.createElement(b,{id:"tooltip-layer-title"},e)},this.renderTitle()):this.renderTitle()}}])&&c(t.prototype,n),r&&c(t,r),u}(g.Component);f(h,"propTypes",{node:m.object,onClick:m.func,onContextMenu:m.func,currentLocale:m.string,filterText:m.string,tooltip:m.bool,tooltipOptions:m.object}),f(h,"defaultProps",{onClick:function(){},onContextMenu:function(){},currentLocale:"en-US",filterText:"",tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}}),e.exports=h},"./MapStore2/web/client/components/TOC/fragments/ToggleFilter.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),g=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-bootstrap/es/index.js"),y=b.Glyphicon,v=b.Tooltip,h=n("./MapStore2/web/client/components/I18N/Message.jsx"),O=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o=s(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=o.call.apply(o,[this].concat(n))),"onClick",(function(){var t=(e.props.node||{}).layerFilter;e.props.propertiesChangeHandler(e.props.node.id,{layerFilter:i(i({},t),{},{disabled:!t.disabled})})})),e}return t=u,(n=[{key:"render",value:function(){var e=(this.props.node||{}).layerFilter,t=(e||{}).disabled;return!!e&&m.createElement(O,{placement:"bottom",overlay:m.createElement(v,{id:"toc-filter-icon"},m.createElement(h,{msgId:t?"toc.filterIconDisabled":"toc.filterIconEnabled"}))},m.createElement(y,{onClick:this.onClick,className:"toc-filter-icon ".concat(t?"disabled":""),glyph:"filter-layer"}))}}])&&c(t.prototype,n),r&&c(t,r),u}(m.Component);f(j,"propTypes",{node:g.object,propertiesChangeHandler:g.func}),f(j,"inheritedPropTypes",["node"]),f(j,"defaultProps",{node:null,propertiesChangeHandler:function(){}}),e.exports=j},"./MapStore2/web/client/components/TOC/fragments/VisibilityCheck.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./MapStore2/node_modules/lodash/lodash.js").isFunction,g=n("./MapStore2/web/client/components/TOC/fragments/LayersTool.jsx"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=c(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=l.call.apply(l,[this].concat(n))),"changeVisibility",(function(){e.props.propertiesChangeHandler(e.props.node.id,{visibility:!e.props.node.visibility})})),e}return t=u,(n=[{key:"render",value:function(){return"glyph"===this.props.checkType?d.createElement(g,{tooltip:this.props.tooltip,style:this.props.style,className:"visibility-check"+(this.props.node.visibility?" checked":""),"data-position":this.props.node.storeIndex,glyph:this.props.node.visibility?this.props.glyphChecked:this.props.glyphUnchecked,onClick:this.changeVisibility}):d.createElement("input",{className:"visibility-check",style:this.props.style,"data-position":this.props.node.storeIndex,type:m(this.props.checkType)?this.props.checkType(this.props.node):this.props.checkType,checked:this.props.node.visibility?"checked":"",onChange:this.changeVisibility})}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(b,"propTypes",{node:f.object,tooltip:f.string,propertiesChangeHandler:f.func,style:f.object,checkType:f.oneOfType([f.string,f.func]),glyphChecked:f.string,glyphUnchecked:f.string}),p(b,"defaultProps",{style:{},checkType:"glyph",glyphChecked:"eye-open",tooltip:"toc.toggleLayerVisibility",glyphUnchecked:"eye-close"}),e.exports=b},"./MapStore2/web/client/components/TOC/fragments/WMSLegend.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./MapStore2/node_modules/lodash/lodash.js"),g=m.isEmpty,b=m.isNumber,y=n("./MapStore2/web/client/components/TOC/fragments/legend/Legend.jsx"),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=c(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),p(s(t=l.call(this,e)),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),p(s(t),"canShow",(function(e){return e.visibility||!t.props.showOnlyIfVisible})),p(s(t),"useLegendOptions",(function(){return!g(t.props.node.legendOptions)&&b(t.props.node.legendOptions.legendHeight)&&b(t.props.node.legendOptions.legendWidth)})),p(s(t),"setOverflow",(function(){return t.useLegendOptions()&&t.props.node.legendOptions.legendWidth>t.state.containerWidth})),t.containerRef=d.createRef(),t}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,n=t&&this.useLegendOptions();return t?d.createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},d.createElement(y,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(v,"propTypes",{node:f.object,legendContainerStyle:f.object,legendStyle:f.object,showOnlyIfVisible:f.bool,currentZoomLvl:f.number,scales:f.array,WMSLegendOptions:f.string,scaleDependent:f.bool,language:f.string,legendWidth:f.number,legendHeight:f.number}),p(v,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0}),e.exports=v},"./MapStore2/web/client/components/TOC/fragments/css/groupchildren.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/groupchildren.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/TOC/fragments/css/toctitle.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/toctitle.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/TOC/fragments/legend/Legend.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/url/url.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),g=n("./MapStore2/node_modules/lodash/lodash.js").isArray,b=n("./MapStore2/web/client/components/I18N/Message.jsx"),y=n("./MapStore2/web/client/utils/SecurityUtils.js"),v=n("./node_modules/object-assign/index.js"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=c(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=l.call.apply(l,[this].concat(n))),"state",{error:!1}),p(s(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),p(s(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var n=e.layer,r=t||g(n.url)&&Math.floor(Math.random()*n.url.length),o=g(n.url)?n.url[r]:n.url.replace(/[?].*$/g,""),i=d.parse(o),a=y.clearNilValuesForParams(n.params),c=v({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:n.name,style:n.style||null,version:n.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},n.legendParams||{},e.language&&n.localizedLayerStyles?{LANGUAGE:e.language}:{},y.addAuthenticationToSLD(a||{},e.layer),a&&a.SLD_BODY?{SLD_BODY:a.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return y.addAuthenticationParameter(o,c),d.format({host:i.host,protocol:i.protocol,pathname:i.pathname,query:c})}return""})),p(s(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=u,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?m.createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):m.createElement(b,{msgId:"layerProperties.legenderror"})}}])&&i(t.prototype,n),r&&i(t,r),u}(m.Component);p(h,"propTypes",{layer:f.object,legendHeight:f.number,legendWidth:f.number,legendOptions:f.string,style:f.object,currentZoomLvl:f.number,scales:f.array,scaleDependent:f.bool,language:f.string}),p(h,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0}),e.exports=h},"./MapStore2/web/client/components/TOC/fragments/settings/Display.jsx":function(e,t,n){var r,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=n("./node_modules/react/index.js"),b=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react-widgets/lib/index.js").DropdownList,v=n("./MapStore2/web/client/components/I18N/Message.jsx"),h=n("./node_modules/react-bootstrap/es/index.js"),O=h.Grid,j=h.Row,w=h.Col,S=h.FormGroup,E=h.ControlLabel,A=h.Checkbox,P=n("./MapStore2/node_modules/lodash/lodash.js"),x=P.clamp,C=P.isNil,T=P.isNumber,M=n("./MapStore2/web/client/components/TOC/fragments/legend/Legend.jsx"),I=n("./MapStore2/web/client/components/I18N/IntlNumberFormControl.jsx"),k=n("./MapStore2/web/client/components/widgets/widget/InfoPopover.jsx");n("./node_modules/react-widgets/lib/less/react-widgets.less"),e.exports=(o=r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t,n,r,o=u(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),m(d(t=o.call(this,e)),"state",{opacity:100,legendOptions:{legendWidth:12,legendHeight:12},containerStyle:{overflowX:"auto"},containerWidth:0}),m(d(t),"updateState",(function(e){e.settings&&e.settings.options&&t.setState(c(c({},t.state),{},{opacity:C(e.settings.options.opacity)?t.state.opacity:Math.round(100*e.settings.options.opacity),legendOptions:c(c({},t.state.legendOptions),{},{legendHeight:e.element.legendOptions&&!C(e.element.legendOptions.legendHeight)?e.element.legendOptions.legendHeight:t.state.legendOptions.legendHeight,legendWidth:e.element.legendOptions&&!C(e.element.legendOptions.legendWidth)?e.element.legendOptions.legendWidth:t.state.legendOptions.legendWidth}),containerWidth:t.containerRef.current&&t.containerRef.current.clientWidth}))})),m(d(t),"onChange",(function(e,n){if("opacity"===e){var r=n&&x(Math.round(n),0,100);t.setState(c({opacity:r},t.state)),t.props.onChange("opacity",r&&r/100||0)}else{var o=n&&x(Math.round(n),0,1e3);t.setState(c(c({},t.state),{},{legendOptions:c(c({},t.state.legendOptions),{},m({},e,o))})),t.props.onChange({legendOptions:c(c({},t.state.legendOptions),{},m({},e,o))})}})),m(d(t),"onBlur",(function(e){var n=e.target.value&&Math.round(e.target.value),r=e.target.name;t.props.onChange({legendOptions:c(c({},t.state.legendOptions),{},m({},r,n>=12?n:""))})})),m(d(t),"getValidationState",(function(e){return t.state.legendOptions&&t.state.legendOptions[e]?parseInt(t.state.legendOptions[e],10)<12&&"error":null})),m(d(t),"setOverFlow",(function(){return t.state.legendOptions.legendWidth>t.state.containerWidth})),m(d(t),"useLegendOptions",(function(){return"error"!==t.getValidationState("legendWidth")&&"error"!==t.getValidationState("legendHeight")&&T(t.state.legendOptions.legendHeight)&&T(t.state.legendOptions.legendWidth)})),t.containerRef=g.createRef(),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.updateState(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props!==e&&this.updateState(e)}},{key:"render",value:function(){var e=this;return g.createElement(O,{fluid:!0,className:"fluid-container "+(!this.props.containerWidth&&"adjust-display")},"wms"===this.props.element.type&&g.createElement(j,null,g.createElement(w,{xs:12},g.createElement(S,null,g.createElement(E,null,g.createElement(v,{msgId:"layerProperties.format"})),g.createElement(y,{key:"format-dropdown",data:this.props.formats||["image/png","image/png8","image/jpeg","image/vnd.jpeg-png","image/gif"],value:this.props.element&&this.props.element.format||"image/png",onChange:function(t){e.props.onChange("format",t)}}))),g.createElement(w,{xs:12},g.createElement(S,null,g.createElement(E,null,g.createElement(v,{msgId:"WMS Layer tile size"})),g.createElement(y,{key:"wsm-layersize-dropdown",data:[256,512],value:this.props.element&&this.props.element.tileSize||256,onChange:function(t){e.props.onChange("tileSize",t)}})))),g.createElement(j,null,g.createElement(w,{xs:12},g.createElement(S,null,g.createElement(E,null,this.props.opacityText," %"),g.createElement(I,{type:"number",min:0,max:100,name:"opacity",value:this.state.opacity,onChange:function(t){return e.onChange("opacity",t)}})))),"wms"===this.props.element.type&&g.createElement(j,null,g.createElement(w,{xs:12},g.createElement("hr",null),g.createElement(S,null,g.createElement(A,{key:"transparent",checked:this.props.element&&(void 0===this.props.element.transparent||this.props.element.transparent),onChange:function(t){e.props.onChange("transparent",t.target.checked)}},g.createElement(v,{msgId:"layerProperties.transparent"})),g.createElement(A,{value:"tiled",key:"tiled",disabled:!!this.props.element.singleTile,onChange:function(t){return e.props.onChange("tiled",t.target.checked)},checked:!this.props.element||void 0===this.props.element.tiled||this.props.element.tiled},g.createElement(v,{msgId:"layerProperties.cached"})),g.createElement(A,{key:"singleTile",value:"singleTile",checked:this.props.element&&void 0!==this.props.element.singleTile&&this.props.element.singleTile,onChange:function(t){return e.props.onChange("singleTile",t.target.checked)}},g.createElement(v,{msgId:"layerProperties.singleTile"})),this.props.isLocalizedLayerStylesEnabled&&g.createElement(A,{key:"localizedLayerStyles",value:"localizedLayerStyles","data-qa":"display-lacalized-layer-styles-option",checked:this.props.element&&void 0!==this.props.element.localizedLayerStyles&&this.props.element.localizedLayerStyles,onChange:function(t){return e.props.onChange("localizedLayerStyles",t.target.checked)}},g.createElement(v,{msgId:"layerProperties.enableLocalizedLayerStyles.label"})," ",g.createElement(k,{text:g.createElement(v,{msgId:"layerProperties.enableLocalizedLayerStyles.tooltip"})})))),g.createElement("div",{className:"legend-options"},g.createElement(w,{xs:12,className:"legend-label"},g.createElement("label",{key:"legend-options-title",className:"control-label"},g.createElement(v,{msgId:"layerProperties.legendOptions.title"}))),g.createElement(w,{xs:12,sm:6,className:"first-selectize"},g.createElement(S,{validationState:this.getValidationState("legendWidth")},g.createElement(E,null,g.createElement(v,{msgId:"layerProperties.legendOptions.legendWidth"})),g.createElement(I,{value:this.state.legendOptions.legendWidth,name:"legendWidth",type:"number",min:12,max:1e3,onChange:function(t){return e.onChange("legendWidth",t)},onKeyPress:function(e){return"-"===e.key&&e.preventDefault()},onBlur:this.onBlur}))),g.createElement(w,{xs:12,sm:6,className:"second-selectize"},g.createElement(S,{validationState:this.getValidationState("legendHeight")},g.createElement(E,null,g.createElement(v,{msgId:"layerProperties.legendOptions.legendHeight"})),g.createElement(I,{value:this.state.legendOptions.legendHeight,name:"legendHeight",type:"number",min:12,max:1e3,onChange:function(t){return e.onChange("legendHeight",t)},onKeyPress:function(e){return"-"===e.key&&e.preventDefault()},onBlur:this.onBlur}))),g.createElement(w,{xs:12,className:"legend-preview"},g.createElement(E,null,g.createElement(v,{msgId:"layerProperties.legendOptions.legendPreview"})),g.createElement("div",{style:this.setOverFlow()&&this.state.containerStyle||{},ref:this.containerRef},g.createElement(M,{style:this.setOverFlow()&&{}||void 0,layer:this.props.element,legendHeight:this.useLegendOptions()&&this.state.legendOptions.legendHeight||void 0,legendWidth:this.useLegendOptions()&&this.state.legendOptions.legendWidth||void 0,language:this.props.isLocalizedLayerStylesEnabled?this.props.currentLocaleLanguage:void 0}))))))}}])&&l(t.prototype,n),r&&l(t,r),i}(g.Component),m(r,"propTypes",{opacityText:b.node,element:b.object,formats:b.array,settings:b.object,onChange:b.func,isLocalizedLayerStylesEnabled:b.bool}),m(r,"defaultProps",{onChange:function(){},opacityText:g.createElement(v,{msgId:"opacity"})}),o)},"./MapStore2/web/client/components/TOC/fragments/settings/General.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),g=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-spinkit/dist/index.js"),y=n("./node_modules/react-bootstrap/es/index.js"),v=y.FormControl,h=y.FormGroup,O=y.ControlLabel,j=y.InputGroup,w=y.Col,S=n("./MapStore2/web/client/components/I18N/Message.jsx"),E=n("./node_modules/react-selectize/src/index.js").SimpleSelect,A=n("./MapStore2/node_modules/lodash/lodash.js"),P=A.isString,x=A.isObject,C=A.find,T=n("./MapStore2/web/client/utils/LocaleUtils.js"),M=n("./node_modules/object-assign/index.js");n("./node_modules/react-selectize/themes/index.css");var I=n("./node_modules/react-bootstrap/es/index.js").Grid,k=n("./MapStore2/web/client/utils/TOCUtils.js"),D=k.createFromSearch,N=k.flattenGroups,_=n("./MapStore2/web/client/utils/TOCUtils.js"),R=n("./MapStore2/web/client/components/TOC/fragments/settings/LayerNameEditField.jsx").default,L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,r,o,u=s(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=u.call.apply(u,[this].concat(n))),"updateEntry",(function(t,n){return x(t)?e.props.onChange(t):e.props.onChange(t,n.target.value)})),f(p(e),"updateTranslation",(function(t,n){var r="default"===t&&P(e.props.element.title)?n.target.value:M({},x(e.props.element.title)?e.props.element.title:{default:e.props.element.title||""},f({},t,n.target.value));e.props.onChange("title",r)})),e}return t=d,(r=[{key:"render",value:function(){var e=this,t=T.getSupportedLocales(),r=x(this.props.element.title)?M({},this.props.element.title):{default:this.props.element.title},o=this.props.pluginCfg.hideTitleTranslations,a=void 0!==o&&o,c=[{value:"title",label:T.getMessageById(this.context.messages,"layerProperties.tooltip.title")},{value:"description",label:T.getMessageById(this.context.messages,"layerProperties.tooltip.description")},{value:"both",label:T.getMessageById(this.context.messages,"layerProperties.tooltip.both")},{value:"none",label:T.getMessageById(this.context.messages,"layerProperties.tooltip.none")}],l=[{value:"top",label:T.getMessageById(this.context.messages,"layerProperties.tooltip.top")},{value:"right",label:T.getMessageById(this.context.messages,"layerProperties.tooltip.right")},{value:"bottom",label:T.getMessageById(this.context.messages,"layerProperties.tooltip.bottom")}],s=this.props.groups&&N(this.props.groups);return m.createElement(I,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},m.createElement("form",{ref:"settings"},m.createElement(h,null,m.createElement(O,null,m.createElement(S,{msgId:"layerProperties.title"})),m.createElement(v,{defaultValue:r.default||"",key:"title",type:"text",onBlur:this.updateTranslation.bind(null,"default")})),a||m.createElement(h,null,m.createElement(O,null,m.createElement(S,{msgId:"layerProperties.titleTranslations"})),Object.keys(t).map((function(o){var i;try{i=n("./MapStore2/web/client/components/I18N/images/flags sync recursive ^\\.\\/.*\\.png$")("./"+t[o].code+".png")}catch(e){i=!1}return i?m.createElement(j,{key:o},m.createElement(j.Addon,null,m.createElement("img",{src:i,alt:t[o].description})),m.createElement(v,{placeholder:t[o].description,defaultValue:r[t[o].code]||"",type:"text",onBlur:e.updateTranslation.bind(null,t[o].code)})):null}))),m.createElement(R,{element:this.props.element,enableLayerNameEditFeedback:this.props.enableLayerNameEditFeedback,onUpdateEntry:this.updateEntry.bind(null)}),m.createElement(h,null,m.createElement(O,null,m.createElement(S,{msgId:"layerProperties.description"})),this.props.element.capabilitiesLoading?m.createElement(b,{spinnerName:"circle"}):m.createElement(v,{defaultValue:this.props.element.description||"",key:"description",rows:"2",componentClass:"textarea",style:{resize:"vertical",minHeight:"33px"},onBlur:this.updateEntry.bind(null,"description")})),"layers"===this.props.nodeType?m.createElement("div",null,m.createElement("label",{key:"group-label",className:"control-label"},m.createElement(S,{msgId:"layerProperties.group"})),m.createElement(E,{key:"group-dropdown",options:(s||this.props.element&&this.props.element.group||[]).map((function(e){return x(e)?i(i({},e),{},{label:_.getLabelName(e.label,s)}):{label:_.getLabelName(e,s),value:e}})),defaultValue:{label:_.getLabelName(this.props.element&&this.props.element.group||"Default",s),value:this.props.element&&this.props.element.group||"Default"},placeholder:_.getLabelName(this.props.element&&this.props.element.group||"Default",s),onChange:function(t){e.updateEntry("group",{target:{value:t||"Default"}})},theme:"bootstrap3",createFromSearch:this.props.allowNew?D:void 0,hideResetButton:!this.props.allowNew,editable:this.props.allowNew,onValueChange:function(e){e&&e.newOption&&this.options.unshift({label:e.label,value:e.value}),this.onChange(e?e.value:null)}})):null,this.props.showTooltipOptions&&m.createElement("div",{style:{width:"100%"}},m.createElement(w,{xs:12,sm:8,className:"first-selectize"},m.createElement("br",null),m.createElement("label",{key:"tooltip-label",className:"control-label"},m.createElement(S,{msgId:"layerProperties.tooltip.label"})),m.createElement(E,{hideResetButton:!0,dropdownDirection:-1,key:"tooltips-dropdown",options:c,theme:"bootstrap3",value:C(c,(function(t){return t.value===(e.props.element.tooltipOptions||"title")})),onValueChange:function(t){e.updateEntry("tooltipOptions",{target:{value:t.value||"title"}})}})),m.createElement(w,{xs:12,sm:4,className:"second-selectize"},m.createElement("br",null),m.createElement("label",{key:"tooltip-placement-label",className:"control-label"},m.createElement(S,{msgId:"layerProperties.tooltip.labelPlacement"})),m.createElement(E,{hideResetButton:!0,dropdownDirection:-1,key:"tooltips-placement-dropdown",options:l,theme:"bootstrap3",value:C(l,(function(t){return t.value===(e.props.element.tooltipPlacement||"top")})),onValueChange:function(t){e.updateEntry("tooltipPlacement",{target:{value:t.value||"top"}})}})))))}}])&&c(t.prototype,r),o&&c(t,o),d}(m.Component);f(L,"propTypes",{onChange:g.func,element:g.object,settings:g.object,groups:g.array,nodeType:g.string,pluginCfg:g.object,showTooltipOptions:g.bool,allowNew:g.bool,enableLayerNameEditFeedback:g.bool}),f(L,"contextTypes",{messages:g.object}),f(L,"defaultProps",{element:{},onChange:function(){},nodeType:"layers",showTooltipOptions:!0,pluginCfg:{},allowNew:!1}),e.exports=L},"./MapStore2/web/client/components/TOC/fragments/settings/LayerNameEditField.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/recompose/es/Recompose.js"),a=n("./node_modules/react-bootstrap/es/index.js"),c=n("./node_modules/react-spinkit/dist/index.js"),l=n.n(c),s=n("./MapStore2/web/client/components/I18N/Message.jsx"),u=n.n(s),p=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),d=n.n(p);t.default=Object(i.compose)(Object(i.withState)("enableOverlayTrigger","setEnableOverlayTrigger",!0),Object(i.withState)("overlayTriggerDelayID","setOverlayTriggerDelayID"),Object(i.withState)("layerName","setLayerName",""),Object(i.withState)("editingLayerName","setEditingLayerName",!1),Object(i.withState)("waitingForLayerLoading","setWaitingForLayerLoading",!1),Object(i.withState)("waitingForLayerLoad","setWaitingForLayerLoad",!1),Object(i.withState)("layerError","setLayerError"),Object(i.withHandlers)({setEditingLayerName:function(e){var t=e.editingLayerName,n=void 0!==t&&t,r=e.overlayTriggerDelayID,o=e.setEditingLayerName,i=void 0===o?function(){}:o,a=e.setOverlayTriggerDelayID,c=void 0===a?function(){}:a,l=e.setEnableOverlayTrigger,s=void 0===l?function(){}:l;return function(e){n!==e&&(r&&clearTimeout(r),s(!1),c(setTimeout((function(){s(!0)}),250))),i(e)}}}),Object(i.lifecycle)({componentDidMount:function(){var e;this.props.setLayerName(null===(e=this.props.element)||void 0===e?void 0:e.name)},componentDidUpdate:function(){var e=this.props,t=e.element,n=void 0===t?{}:t,r=e.waitingForLayerLoading,o=e.waitingForLayerLoad,i=e.setWaitingForLayerLoad,a=void 0===i?function(){}:i,c=e.setWaitingForLayerLoading,l=void 0===c?function(){}:c,s=e.setEditingLayerName,u=void 0===s?function(){}:s,p=e.setLayerError,d=void 0===p?function(){}:p;r&&n.loading?(l(!1),a(!0)):o&&!n.loading&&(a(!1),d(n.loadingError),u(!!n.loadingError))}}))((function(e){var t,n=e.enableOverlayTrigger,r=e.element,i=void 0===r?{}:r,c=e.enableLayerNameEditFeedback,s=void 0!==c&&c,p=e.layerName,f=void 0===p?"":p,m=e.editingLayerName,g=void 0!==m&&m,b=e.layerError,y=e.waitingForLayerLoading,v=void 0!==y&&y,h=e.waitingForLayerLoad,O=void 0!==h&&h,j=e.setLayerName,w=void 0===j?function(){}:j,S=e.setWaitingForLayerLoading,E=void 0===S?function(){}:S,A=e.setEditingLayerName,P=void 0===A?function(){}:A,x=e.onUpdateEntry,C=void 0===x?function(){}:x,T=o.a.createElement(a.InputGroup.Addon,{className:"btn",onClick:function(){g?f!==i.name?(C("name",{target:{value:f}}),s?E(!0):P(!1)):P(!1):P(!0)}},v||O?o.a.createElement(l.a,{noFadeIn:!0,style:{width:"18px",height:"18px"},spinnerName:"circle"}):o.a.createElement(a.Glyphicon,{glyph:g?"ok":"pencil"}));return o.a.createElement(a.FormGroup,{validationState:!b||O||v?null:"error"},o.a.createElement(a.ControlLabel,null,o.a.createElement(u.a,{msgId:"layerProperties.name"})),o.a.createElement(a.InputGroup,null,o.a.createElement(a.FormControl,{value:f,key:"name",type:"text",disabled:!g,onChange:function(e){return w(e.target.value)}}),n?(t=T,o.a.createElement(d.a,{placement:"top",overlay:o.a.createElement(a.Tooltip,{id:"tooltip-layer-name-edit"},o.a.createElement(u.a,{msgId:"layerProperties.tooltip.".concat(g?"confirm":"edit","LayerName")}))},t)):T))}))},"./MapStore2/web/client/components/TOC/fragments/settings/WMSStyle.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./MapStore2/web/client/components/I18N/Message.jsx"),g=n("./node_modules/react-select/dist/react-select.es.js").default,b=n("./node_modules/react-bootstrap/es/index.js"),y=b.Button,v=b.Glyphicon,h=b.Alert,O=n("./MapStore2/node_modules/lodash/lodash.js").findIndex,j=n("./node_modules/react-bootstrap/es/index.js").Grid,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=c(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=l.call.apply(l,[this].concat(n))),"renderLegend",(function(){return null})),p(s(e),"renderItemLabel",(function(e){return d.createElement("div",null,d.createElement("div",{key:"item-title"},e.title||e.name),d.createElement("div",null,d.createElement("small",{className:"text-muted",key:"item-key-description"},e.name)))})),p(s(e),"renderError",(function(){return e.props.element&&e.props.element.capabilities&&e.props.element&&e.props.element.capabilities.error?d.createElement(h,{bsStyle:"danger"},d.createElement(m,{msgId:"layerProperties.styleListLoadError"})):null})),p(s(e),"updateEntry",(function(t,n){var r=n.target.value;e.props.onChange(t,r)})),e}return t=u,(n=[{key:"render",value:function(){var e=this,t=[{label:"Default Style",value:""}].concat((this.props.element.availableStyles||[]).map((function(t){return{label:e.renderItemLabel(t),value:t.name}})));return(this.props.element.style&&this.props.element.availableStyles&&O(this.props.element.availableStyles,(function(t){return t.name===e.props.element.style})))>=0||!this.props.element.style||t.push({label:this.props.element.style,value:this.props.element.style}),d.createElement(j,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},d.createElement("form",{ref:"style"},d.createElement(g.Creatable,{key:"styles-dropdown",options:t,isLoading:this.props.element&&this.props.element.capabilitiesLoading,value:this.props.element.style||"",onOpen:function(){!e.props.element||e.props.element.capabilities&&e.props.element.availableStyles||e.props.retrieveLayerData(e.props.element)},promptTextCreator:function(e){return d.createElement(m,{msgId:"layerProperties.styleCustom",msgParams:{value:e}})},onChange:function(t){e.updateEntry("style",{target:{value:t&&t.value||""}})}}),d.createElement("br",null),this.renderLegend(),this.renderError(),d.createElement(y,{bsStyle:"primary",style:{float:"right"},onClick:function(){return e.props.retrieveLayerData(e.props.element)}},d.createElement(v,{glyph:"refresh"})," ",d.createElement(m,{msgId:"layerProperties.stylesRefreshList"})),d.createElement("br",null)))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(w,"propTypes",{retrieveLayerData:f.func,onChange:f.func,element:f.object,groups:f.array}),p(w,"defaultProps",{element:{},retrieveLayerData:function(){},onChange:function(){}}),e.exports=w},"./MapStore2/web/client/components/data/featuregrid/enhancers/withTooltip.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),a=n("./node_modules/react-bootstrap/es/index.js").Tooltip;e.exports=function(e){return function(t){var n=t.tooltip,c=t.id,l=t.placement,s=r(t,["tooltip","id","placement"]);return o.createElement(i,{placement:l,overlay:o.createElement(a,{id:"fe-".concat(c)},n)},o.createElement(e,s))}}},"./MapStore2/web/client/components/data/identify/viewers/HTMLViewer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,d,f=n("./node_modules/react/index.js"),m=n("./node_modules/prop-types/index.js"),g=n("./MapStore2/web/client/components/misc/HtmlRenderer.jsx"),b=/^[\s\S]*<body>([\s\S]*)<\/body>[\s\S]*$/i,y=/(<style[\s\=\w\/\"]*>[^<]*<\/style>)/i,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,l=c(s);function s(){return o(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"shouldComponentUpdate",value:function(e){return e.response!==this.props.response}},{key:"render",value:function(){var e=this.props.response||"",t=y.exec(e),n=t&&2===t.length?y.exec(e)[1]:"";n=n.replace(/body[,]+/g,"");var r=e.replace(b,"$1").trim();return f.createElement(g,{html:n+r})}}])&&i(t.prototype,n),r&&i(t,r),s}(f.Component);u=v,p="propTypes",d={response:m.string},p in u?Object.defineProperty(u,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[p]=d,e.exports=v},"./MapStore2/web/client/components/data/identify/viewers/JSONViewer.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/recompose/es/Recompose.js").shouldUpdate,i={TEMPLATE:n("./MapStore2/web/client/components/data/identify/viewers/TemplateViewer.jsx"),PROPERTIES:n("./MapStore2/web/client/components/data/identify/viewers/PropertiesViewer.js")};e.exports=o((function(e,t){return t.response!==e.response}))((function(e){var t=e.layer&&e.layer.featureInfo&&e.layer.featureInfo.format&&e.layer.featureInfo.template&&"<p><br></p>"!==e.layer.featureInfo.template&&e.layer.featureInfo.format||"PROPERTIES",n=i[t]||i.PROPERTIES;return r.createElement(n,e)}))},"./MapStore2/web/client/components/data/identify/viewers/PropertiesViewer.js":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n("./node_modules/react/index.js"),i=n("./MapStore2/web/client/components/data/identify/viewers/row/PropertiesViewer.jsx");e.exports=function(e){var t=e.response,n=e.layer,a=e.rowViewer,c=n&&n.rowViewer||a||i;return o.createElement("div",{className:"mapstore-json-viewer"},(t.features||[]).map((function(e,t){return o.createElement(c,r({key:t,feature:e,title:e.id+"",exclude:["bbox"]},e.properties))})))}},"./MapStore2/web/client/components/data/identify/viewers/TemplateViewer.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/node_modules/lodash/lodash.js").template,i=n("./MapStore2/web/client/utils/TemplateUtils.js"),a=n("./MapStore2/web/client/components/misc/HtmlRenderer.jsx");e.exports=function(e){var t=e.layer,n=void 0===t?{}:t,c=e.response;return r.createElement("div",{className:"ms-template-viewer"},c.features.map((function(e,t){return r.createElement("div",{key:t},r.createElement(a,{html:o(i.getCleanTemplate(n.featureInfo&&n.featureInfo.template||"",e,/\$\{.*?\}/g,2,1))(e)}))})))}},"./MapStore2/web/client/components/data/identify/viewers/TextViewer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,p,d,f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,l=c(s);function s(){return o(this,s),l.apply(this,arguments)}return t=s,(n=[{key:"shouldComponentUpdate",value:function(e){return e.response!==this.props.response}},{key:"render",value:function(){return m.createElement("pre",null,this.props.response)}}])&&i(t.prototype,n),r&&i(t,r),s}(m.Component);u=g,p="propTypes",d={response:f.string},p in u?Object.defineProperty(u,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[p]=d,e.exports=g},"./MapStore2/web/client/components/data/identify/viewers/row/PropertiesViewer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./MapStore2/node_modules/lodash/lodash.js").isString,g=n("./MapStore2/web/client/utils/StringUtils.js").containsHTML,b=["exclude","titleStyle","listStyle","componentStyle","title","feature"],y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=c(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=l.call.apply(l,[this].concat(n))),"getBodyItems",(function(){return Object.keys(e.props).filter(e.toExclude).map((function(t){var n=e.renderProperty(e.props[t]);return d.createElement("tr",{key:t,style:e.props.listStyle},d.createElement("td",null,t),d.createElement("td",null,g(n)?d.createElement("span",{dangerouslySetInnerHTML:{__html:n}}):n))}))})),p(s(e),"renderHeader",(function(){return e.props.title?d.createElement("thead",{key:e.props.title,style:e.props.titleStyle,className:"ms-properties-viewer-title"},d.createElement("tr",null,d.createElement("th",{colSpan:"2"},e.props.title))):null})),p(s(e),"renderBody",(function(){var t=e.getBodyItems();return 0===t.length?null:d.createElement("tbody",{className:"ms-properties-viewer-body"},t)})),p(s(e),"renderProperty",(function(e){return m(e)?e:JSON.stringify(e)})),p(s(e),"toExclude",(function(t){return-1===b.concat(e.props.exclude).indexOf(t)})),e}return t=u,(n=[{key:"render",value:function(){return d.createElement("table",{className:"ms-properties-viewer",style:this.props.componentStyle},this.renderHeader(),this.renderBody())}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(y,"displayName","PropertiesViewer"),p(y,"propTypes",{title:f.string,exclude:f.array,titleStyle:f.object,listStyle:f.object,componentStyle:f.object}),p(y,"defaultProps",{exclude:[],titleStyle:{},listStyle:{},componentStyle:{}}),e.exports=y},"./MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png":function(e,t,n){e.exports=n.p+"MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png"},"./MapStore2/web/client/components/geostory/layouts/sections/patterns/grid.svg":function(e,t,n){e.exports=n.p+"grid.svg"},"./MapStore2/web/client/components/geostory/layouts/sections/patterns/world.svg":function(e,t,n){e.exports=n.p+"world.svg"},"./MapStore2/web/client/components/home/Home.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),g=n("./node_modules/prop-types/index.js"),b=n("./node_modules/react-bootstrap/es/index.js"),y=b.Glyphicon,v=b.Tooltip,h=b.Button,O=n("./MapStore2/web/client/components/misc/OverlayTrigger.jsx"),j=n("./MapStore2/web/client/components/I18N/Message.jsx"),w=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,r,u=s(d);function d(){var e;a(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=u.call.apply(u,[this].concat(n))),"checkUnsavedChanges",(function(){e.props.renderUnsavedMapChangesDialog?e.props.onCheckMapChanges(e.goHome):(e.props.onCloseUnsavedDialog(),e.goHome())})),f(p(e),"goHome",(function(){e.context.router.history.push("/")})),e}return t=d,(n=[{key:"render",value:function(){var e=this.props,t=e.tooltipPosition,n=i(e,["tooltipPosition"]),r=m.createElement(v,{id:"toolbar-home-button"},m.createElement(j,{msgId:"gohome"}));return m.createElement(m.Fragment,null,m.createElement(O,{overlay:r,placement:t},m.createElement(h,o({id:"home-button",className:"square-button",bsStyle:"primary",onClick:this.checkUnsavedChanges,tooltip:r},n),this.props.icon)),m.createElement(w,{ref:"unsavedMapModal",show:this.props.displayUnsavedDialog||!1,onClose:this.props.onCloseUnsavedDialog,title:m.createElement(j,{msgId:"resources.maps.unsavedMapConfirmTitle"}),buttons:[{bsStyle:"primary",text:m.createElement(j,{msgId:"resources.maps.unsavedMapConfirmButtonText"}),onClick:this.goHome},{text:m.createElement(j,{msgId:"resources.maps.unsavedMapCancelButtonText"}),onClick:this.props.onCloseUnsavedDialog}],fitContent:!0},m.createElement("div",{className:"ms-detail-body"},m.createElement(j,{msgId:"resources.maps.unsavedMapConfirmMessage"}))))}}])&&c(t.prototype,n),r&&c(t,r),d}(m.Component);f(S,"propTypes",{icon:g.node,onCheckMapChanges:g.func,onCloseUnsavedDialog:g.func,displayUnsavedDialog:g.bool,renderUnsavedMapChangesDialog:g.bool,tooltipPosition:g.string}),f(S,"contextTypes",{router:g.object,messages:g.object}),f(S,"defaultProps",{icon:m.createElement(y,{glyph:"home"}),onCheckMapChanges:function(){},onCloseUnsavedDialog:function(){},renderUnsavedMapChangesDialog:!0,tooltipPosition:"left"}),e.exports=S},"./MapStore2/web/client/components/map/BaseMap.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),v=n("./MapStore2/node_modules/lodash/lodash.js").isString,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,r,a=p(d);function d(){var e;l(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(f(e=a.call.apply(a,[this].concat(n))),"getTool",(function(t){var n=e.props.plugins;return v(t)?{name:t,impl:n.tools[t]}:c({name:t.name,impl:n.tools[t.name]},t)})),g(f(e),"renderLayers",(function(){var t=e.props.map&&e.props.map.projection||"EPSG:3857",n=e.props.plugins.Layer;return e.props.layers.map((function(r,o){return b.createElement(n,{type:r.type,srs:t,position:o,key:r.id||r.name,options:r,env:r.localizedLayerStyles?e.props.env:[]},e.renderLayerContent(r,t))}))})),g(f(e),"renderLayerContent",(function(t,n){if(t.features&&"vector"===t.type){var r=e.props.plugins.Feature;return t.features.map((function(e){return b.createElement(r,{key:e.id,msId:e.id,type:e.type,crs:n,geometry:e.geometry,features:e.features,featuresCrs:t.featuresCrs||"EPSG:4326",layerStyle:t.style,style:e.style||t.style||null,properties:e.properties})}))}return null})),g(f(e),"renderTools",(function(){return e.props.tools.map((function(t){var n=e.getTool(t),r=n.impl,a=n.name,c=i(n,["impl","name"]);return b.createElement(r,o({key:a},c))}))})),e}return t=d,(n=[{key:"render",value:function(){var e=this.props.plugins.Map,t=this.props.map&&this.props.map.projection||"EPSG:3857";return this.props.map?b.createElement(e,o({projectionDefs:this.props.projectionDefs,style:this.props.styleMap,id:this.props.id,zoomControl:!1,center:{x:0,y:0},zoom:1,hookRegister:this.props.hookRegister,mapStateSource:this.props.mapStateSource||this.props.id},this.props.options,this.props.map,{projection:t},this.props.eventHandlers),this.renderLayers(),this.renderTools()):null}}])&&s(t.prototype,n),r&&s(t,r),d}(b.Component);g(h,"propTypes",{id:y.string,options:y.object,map:y.object,mapStateSource:y.string,eventHandlers:y.object,styleMap:y.object,layers:y.array,hookRegister:y.object,projectionDefs:y.array,plugins:y.any,tools:y.array,getLayerProps:y.func,env:y.array}),g(h,"defaultProps",{id:"__base_map__",options:{},map:{},styleMap:{},tools:[],projectionDefs:[],eventHandlers:{onMapViewChanges:function(){},onClick:function(){},onMouseMove:function(){},onLayerLoading:function(){},onLayerError:function(){}},env:[]}),e.exports=h},"./MapStore2/web/client/components/map/enhancers/autoMapType.js":function(e,t,n){var r=n("./node_modules/react-redux/es/index.js").connect,o=n("./node_modules/reselect/es/index.js").createSelector,i=n("./MapStore2/web/client/selectors/maptype.js").mapTypeSelector;e.exports=r(o(i,(function(e){return{mapType:e}})))},"./MapStore2/web/client/components/map/enhancers/autoResize.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),c=a.withStateHandlers,l=a.withProps,s=a.compose,u=n("./MapStore2/web/client/components/misc/enhancers/withResizeSpy.js");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return s(c((function(){return{resize:0}}),{onResize:function(e){var t=e.resize,n=void 0===t?0:t;return function(){return{resize:n+1}}}}),u({debounceTime:e}),l((function(e){var t=e.options,n=e.resize;return{options:o(o({},t),{},{resize:n})}})))}},"./MapStore2/web/client/components/map/enhancers/getProjectionDefs.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getProjectionDefs",(function(){return c}));var r=n("./node_modules/recompose/es/Recompose.js"),o=n("./MapStore2/web/client/utils/ConfigUtils.js"),i=n.n(o),a=n("./MapStore2/node_modules/lodash/lodash.js"),c=Object(r.withProps)((function(e){var t=e.projectionDefs;return{projectionDefs:Object(a.isArray)(t)&&t.length?t:i.a.getConfigProp("projectionDefs")||[]}}));t.default=c},"./MapStore2/web/client/components/map/enhancers/handlingUnsupportedProjection.js":function(e,t,n){"use strict";n.r(t),n.d(t,"fetchingProjection",(function(){return d})),n.d(t,"handlingUnsupportedProjection",(function(){return f}));var r=n("./node_modules/recompose/es/Recompose.js"),o=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),i=n.n(o),a=n("./MapStore2/web/client/components/I18N/Message.jsx"),c=n.n(a),l=n("./node_modules/react/index.js"),s=n.n(l),u=n("./MapStore2/web/client/utils/ConfigUtils.js"),p=n.n(u),d=Object(r.withProps)((function(e){var t=e.map;return{projection:e.projection||(t.data&&t.data.map?t.data.map.projection:t&&t.projection)}})),f=Object(r.compose)(d,i()((function(e){var t=e.projectionDefs,n=void 0===t?p.a.getConfigProp("projectionDefs")||[]:t,r=e.projection;return r&&0===n.concat([{code:"EPSG:4326"},{code:"EPSG:3857"},{code:"EPSG:900913"}]).filter((function(e){return e.code===r})).length}),(function(e){var t=e.projection;return{glyph:"1-map",style:{width:"100%",height:"100%",display:"flex"},title:s.a.createElement(c.a,{msgId:"map.errors.loading.title"}),mainViewStyle:{margin:"auto"},imageStyle:{height:120,width:120,margin:"auto"},description:s.a.createElement(c.a,{msgId:"map.errors.loading.projectionError",msgParams:{projection:t}})}})))},"./MapStore2/web/client/components/map/enhancers/mapType.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js").withPropsOnChange;e.exports=a(["mapType","plugins"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapType,r=e.plugins;return{plugins:o(o({},n("./MapStore2/web/client/components/map/plugins sync recursive ^\\.\\/.*\\.js$")("./"+t+".js")()),r)}}))},"./MapStore2/web/client/components/map/enhancers/onMapViewChanges.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),c=a.compose,l=a.withHandlers,s=a.withPropsOnChange;e.exports=c(l({onMapViewChanges:function(e){var t=e.map,n=void 0===t?{}:t,r=e.onMapViewChanges,i=void 0===r?function(){}:r;return function(e,t,r,a,c,l){i(o(o({},n),{},{center:e,bbox:o(o({},n.bbox),r),zoom:t,size:a,mapStateSource:c,projection:l}))}}}),s(["onMapViewChanges","eventHandlers"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapViewChanges,n=void 0===t?function(){}:t,r=e.eventHandlers,i=void 0===r?{}:r;return{eventHandlers:o(o({},i),{},{onMapViewChanges:n})}})))},"./MapStore2/web/client/components/map/openlayers/img/marker-icon.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/map/plugins sync recursive ^\\.\\/.*\\.js$":function(e,t,n){var r={"./cesium.js":"./MapStore2/web/client/components/map/plugins/cesium.js","./leaflet.js":"./MapStore2/web/client/components/map/plugins/leaflet.js","./openlayers.js":"./MapStore2/web/client/components/map/plugins/openlayers.js","./sink.js":"./MapStore2/web/client/components/map/plugins/sink.js"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="./MapStore2/web/client/components/map/plugins sync recursive ^\\.\\/.*\\.js$"},"./MapStore2/web/client/components/map/plugins/cesium.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").createSink;e.exports=function(){return n("./MapStore2/web/client/components/map/cesium/plugins/index.js"),{Map:n("./MapStore2/web/client/components/map/cesium/Map.jsx"),Layer:n("./MapStore2/web/client/components/map/cesium/Layer.jsx"),Feature:r((function(){}))}}},"./MapStore2/web/client/components/map/plugins/leaflet.js":function(e,t,n){e.exports=function(){return n("./MapStore2/web/client/components/map/leaflet/plugins/index.js"),{Map:n("./MapStore2/web/client/components/map/leaflet/Map.jsx"),Layer:n("./MapStore2/web/client/components/map/leaflet/Layer.jsx"),Feature:n("./MapStore2/web/client/components/map/leaflet/Feature.jsx"),Locate:n("./MapStore2/web/client/components/map/leaflet/Locate.jsx"),MeasurementSupport:n("./MapStore2/web/client/components/map/leaflet/MeasurementSupport.jsx"),Overview:n("./MapStore2/web/client/components/map/leaflet/Overview.jsx"),ScaleBar:n("./MapStore2/web/client/components/map/leaflet/ScaleBar.jsx"),DrawSupport:n("./MapStore2/web/client/components/map/leaflet/DrawSupport.jsx"),PopupSupport:n("./MapStore2/web/client/components/map/leaflet/PopupSupport.jsx").default}}},"./MapStore2/web/client/components/map/plugins/openlayers.js":function(e,t,n){e.exports=function(){return n("./MapStore2/web/client/components/map/openlayers/plugins/index.js"),{Map:n("./MapStore2/web/client/components/map/openlayers/Map.jsx").default,Layer:n("./MapStore2/web/client/components/map/openlayers/Layer.jsx").default,Feature:n("./MapStore2/web/client/components/map/openlayers/Feature.jsx").default,Locate:n("./MapStore2/web/client/components/map/openlayers/Locate.jsx").default,MeasurementSupport:n("./MapStore2/web/client/components/map/openlayers/MeasurementSupport.jsx").default,Overview:n("./MapStore2/web/client/components/map/openlayers/Overview.jsx").default,ScaleBar:n("./MapStore2/web/client/components/map/openlayers/ScaleBar.jsx").default,DrawSupport:n("./MapStore2/web/client/components/map/openlayers/DrawSupport.jsx").default,PopupSupport:n("./MapStore2/web/client/components/map/openlayers/PopupSupport.jsx").default}}},"./MapStore2/web/client/components/map/plugins/sink.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").createSink;e.exports=function(){return{Map:r((function(){})),Layer:r((function(){})),Feature:r((function(){}))}}},"./MapStore2/web/client/components/misc/EmptyView.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/react/index.js"),c=n("./MapStore2/web/client/components/misc/FitIcon.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,r=e.mainViewStyle,i=void 0===r?{}:r,l=e.contentStyle,s=void 0===l?{}:l,u=e.imageStyle,p=void 0===u?{}:u,d=e.glyph,f=void 0===d?"info-sign":d,m=e.iconFit,g=e.title,b=e.tooltip,y=e.tooltipId,v=e.description,h=e.content;return a.createElement("div",{className:"empty-state-container",style:o({height:m?"100%":void 0},n)},a.createElement("div",{key:"main-view",className:"empty-state-main-view",style:o({height:m?"100%":void 0},i)},f?a.createElement("div",{key:"glyph",className:"empty-state-image",style:o({height:m?"100%":void 0},p)},a.createElement(c,{iconFit:m,tooltip:b,tooltipId:y,glyph:f})):null,g?a.createElement("h1",{key:"title"},g):null,v?a.createElement("p",{key:"description",className:"empty-state-description"},v):null),a.createElement("div",{key:"content",className:"empty-state-content",style:s},h))}},"./MapStore2/web/client/components/misc/Filter.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react-bootstrap/es/index.js"),g=m.FormGroup,b=m.FormControl,y=m.Glyphicon,v=m.InputGroup,h=m.OverlayTrigger,O=m.Tooltip;n("./MapStore2/web/client/components/misc/style/filter.css");var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=c(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=l.call.apply(l,[this].concat(n))),"onFilter",(function(t){e.props.onFilter(t.target.value)})),p(s(e),"onClear",(function(){e.props.onFilter("")})),e}return t=u,(n=[{key:"render",value:function(){var e=this.props.filterText?d.createElement(h,{placement:"bottom",overlay:d.createElement(O,{id:"mapstore-toc-filter"},this.props.tooltipClear)},d.createElement(y,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):d.createElement(y,{className:"text-primary",glyph:"filter"});return d.createElement(g,{className:"mapstore-filter"},d.createElement(v,null,d.createElement(b,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),d.createElement(v.Addon,{className:"square-button-md"},this.props.loading?d.createElement("div",{className:"toc-inline-loader"}):e)))}}])&&i(t.prototype,n),r&&i(t,r),u}(d.Component);p(j,"propTypes",{loading:f.bool,filterText:f.string,filterPlaceholder:f.oneOfType([f.object,f.string]),onFilter:f.func,onFocus:f.func,tooltipClear:f.oneOfType([f.object,f.string])}),p(j,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"}),e.exports=j},"./MapStore2/web/client/components/misc/FitIcon.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,i=n("./node_modules/react-container-dimensions/lib/index.js").default,a=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx")(o);e.exports=function(e){var t=e.glyph,n=void 0===t?"info-sign":t,o=e.tooltip,c=e.tooltipId,l=e.iconFit,s=e.padding,u=void 0===s?0:s,p=e.margin,d=void 0===p?0:p;return r.createElement(i,null,(function(e){var t=e.width,i=e.height;return r.createElement(a,{glyph:n,tooltip:o,tooltipId:c,style:{display:"inline-block",padding:u+"px",margin:d+"px",textAlign:"center",fontSize:l?Math.min(t,i)-2*u-2*d:t-2*u-2*d}})}))}},"./MapStore2/web/client/components/misc/HtmlRenderer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),f=n("./node_modules/react/index.js"),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r,l=c(u);function u(){var e;o(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(s(e=l.call.apply(l,[this].concat(n))),"getSourceCode",(function(){return{__html:e.props.html}})),e}return t=u,(n=[{key:"render",value:function(){return f.createElement("div",{id:this.props.id,dangerouslySetInnerHTML:this.getSourceCode()})}}])&&i(t.prototype,n),r&&i(t,r),u}(f.Component);p(m,"propTypes",{html:d.string,id:d.string}),e.exports=m},"./MapStore2/web/client/components/misc/Slider.jsx":function(e,t,n){var r=n("./MapStore2/node_modules/lodash/lodash.js").isEqual,o=n("./node_modules/recompose/es/Recompose.js").shouldUpdate;e.exports=o((function(e,t){return!r(e.start,t.start)||e.disabled!==t.disabled}))(n("./node_modules/react-nouislider/dist/react-nouislider.common.js"))},"./MapStore2/web/client/components/misc/StandardDialog.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=n("./node_modules/react/index.js"),s=n("./MapStore2/web/client/components/misc/Dialog.jsx"),u=n("./node_modules/react-bootstrap/es/index.js").Glyphicon;e.exports=function(e){var t=e.show,n=e.style,o=void 0===n?{}:n,a=e.modal,p=e.draggable,d=void 0!==p&&p,f=e.closeGlyph,m=void 0===f?"1-close":f,g=e.closable,b=void 0===g||g,y=e.onClose,v=void 0===y?function(){}:y,h=e.title,O=e.header,j=e.footer,w=e.children,S=c(e,["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"]);return t?l.createElement(s,r({modal:a,onClickOut:b&&a?function(){return v()}:null,style:i(i({},o),{},{display:t?"block":"none"}),draggable:d},S),l.createElement("span",{role:"header"},h||(O||l.createElement("span",null," ")),b?l.createElement("button",{onClick:function(){return v()},className:"settings-panel-close close"},l.createElement(u,{glyph:m})):null),l.createElement("span",{role:"body"},w),j?l.createElement("span",{role:"footer"},j):null):null}},"./MapStore2/web/client/components/misc/cardgrids/SideCard.jsx":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=n("./node_modules/react/index.js"),l=n("./MapStore2/node_modules/lodash/lodash.js").isObject,s=n("./MapStore2/web/client/components/misc/Loader.jsx");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,n=e.caption,r=e.infoExtra,i=e.className,u=void 0===i?"":i,p=e.description,d=e.fullText,f=e.onClick,m=void 0===f?function(){}:f,g=e.onMouseEnter,b=void 0===g?function(){}:g,y=e.onMouseLeave,v=void 0===y?function(){}:y,h=e.preview,O=e.selected,j=e.size,w=e.style,S=void 0===w?{}:w,E=e.stylePreview,A=void 0===E?{}:E,P=e.styleTools,x=void 0===P?{}:P,C=e.title,T=e.loading,M=e.dragSymbol,I=void 0===M?"+":M,k=e.tools,D=a(e,["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"]);return c.createElement("div",{className:"mapstore-side-card".concat(O?" selected":"").concat(j?" ms-"+j:"").concat(u?" ".concat(u):"").concat(d?" full-text":""),onClick:function(e){return m(o({title:C,preview:h,description:p,caption:n,tools:k},D),e)},onMouseEnter:b,onMouseLeave:v,style:S},c.createElement("div",{className:"ms-head"},D.isDraggable&&D.connectDragSource&&D.connectDragSource(c.createElement("div",{className:"mapstore-side-card-tool text-center"},c.createElement("div",{style:{width:10,overflow:"hidden"}},I))),h&&c.createElement("div",{className:"mapstore-side-preview",style:A},h),c.createElement("div",{className:"mapstore-side-card-container"},c.createElement("div",{className:"mapstore-side-card-inner"},c.createElement("div",{className:"mapstore-side-card-left-container"},c.createElement("div",{className:"mapstore-side-card-info"},C&&c.createElement("div",{className:"mapstore-side-card-title"},c.createElement("span",null,C)),p&&c.createElement("div",{className:"mapstore-side-card-desc"},l(p)?p:c.createElement("span",null,p)),n&&c.createElement("div",{className:"mapstore-side-card-caption"},c.createElement("span",null,n))),r),c.createElement("div",{className:"mapstore-side-card-right-container"},c.createElement("div",{className:"mapstore-side-card-tool text-center",style:x},k),"sm"!==j&&c.createElement("div",{className:"mapstore-side-card-loading"},c.createElement(s,{className:"mapstore-side-card-loader",size:12,hidden:!T})))))),t&&c.createElement("div",{className:"ms-body"},t))}},"./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/react/index.js"),f=n("./MapStore2/web/client/components/misc/cardgrids/SideCard.jsx"),m=n("./node_modules/prop-types/index.js"),g=n("./node_modules/react-bootstrap/es/index.js"),b=g.Row,y=g.Col,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,e);var t,n,r,s=l(u);function u(){return i(this,u),s.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,n=e.items,r=e.colProps,i=e.onItemClick,a=e.size,c=t||f;return d.createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},d.createElement(b,{className:"items-list"},n.map((function(e,t){return d.createElement(y,o({key:e.id||t},r),d.createElement(c,o({onClick:function(){return i(e)},size:a},e)))}))))}}])&&a(t.prototype,n),r&&a(t,r),u}(d.Component);p(v,"propTypes",{size:m.string,onItemClick:m.func,colProps:m.object,items:m.array,cardComponent:m.oneOfType([m.string,m.func]),className:m.string}),p(v,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]}),e.exports=v},"./MapStore2/web/client/components/misc/enhancers/draggableContainer.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=n("./node_modules/react/index.js"),s=n("./node_modules/recompose/es/Recompose.js"),u=s.compose,p=s.branch;e.exports=u(p((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var n=t.onSort,o=t.isDraggable,a=t.items,s=void 0===a?[]:a,u=t.containerId,p=c(t,["onSort","isDraggable","items","containerId"]),d=s.map((function(e,t){return i(i({},e),{},{onSort:n,isDraggable:o,sortId:t,key:e.id||t,containerId:u})}));return l.createElement(e,r({},i(i({},p),{},{isDraggable:o}),{items:d}))}})))},"./MapStore2/web/client/components/misc/enhancers/emptyState.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/node_modules/lodash/lodash.js").isFunction,i=n("./node_modules/recompose/es/Recompose.js").branch,a=n("./MapStore2/web/client/components/misc/EmptyView.jsx");e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return i(e,(function(){return function(e){return r.createElement(n,t&&o(t)?t(e):t)}}))}},"./MapStore2/web/client/components/misc/enhancers/infiniteScroll/withScrollSpy.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/react/index.js"),y=n("./node_modules/prop-types/index.js"),v=n("./node_modules/react-dom/index.js");n("./node_modules/rxjs/Rx.js"),e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataProp,n=void 0===t?"items":t,r=e.querySelector,o=e.closest,c=void 0!==o&&o,u=e.loadingProp,d=void 0===u?"loading":u,m=e.skip,h=void 0===m?0:m,O=e.pageSize,j=void 0===O?10:O,w=e.offsetSize,S=void 0===w?200:w;return function(e){var t,o;return o=t=function(t){s(u,t);var o=p(u);function u(){var e;a(this,u);for(var t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return g(f(e=o.call.apply(o,[this].concat(l))),"findScrollDomNode",(function(){if(!e.isMounded)return null;var t=v.findDOMNode(f(e));return t&&c&&r?t.closest(r||"*"):t&&(r?t.querySelector(r):t)})),g(f(e),"onScroll",(function(){var t=i({skip:h,pageSize:j,offsetSize:S},e.props.scrollOptions),r=e.findScrollDomNode();r&&e.props.isScrolled({div:r,offset:t.offsetSize})&&(!n||e.props[n]&&e.props[n].length)&&(!d||!e.props[d])&&e.props.hasMore(e.props)&&e.props.onLoadMore(n?Math.ceil((e.props[n].length-t.skip)/t.pageSize):null)})),e}return l(u,[{key:"componentDidMount",value:function(){this.isMounded=!0;var e=this.findScrollDomNode();e&&(this.listenerAdded=!0,e.addEventListener("scroll",this.onScroll,!1),this.onScroll())}},{key:"componentDidUpdate",value:function(e){var t=this,r=this.findScrollDomNode();r&&!this.listenerAdded&&(r.addEventListener("scroll",this.onScroll,!1),this.listenerAdded=!0),!r||n&&this.props[n]&&this.props[n]===e[n]||setTimeout((function(){return t.onScroll()}),300)}},{key:"componentWillUnmount",value:function(){this.isMounded=!1,this.listenerAdded=!1;var e=this.findScrollDomNode();e&&e.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){return b.createElement(e,this.props)}}]),u}(b.Component),g(t,"propTypes",{hasMore:y.func,onLoadMore:y.func,isScrolled:y.func,scrollOptions:y.object}),g(t,"defaultProps",{onLoadMore:function(){},hasMore:function(){return!0},isScrolled:function(e){var t=e.div,n=e.offset;return t.scrollTop+t.clientHeight>=t.scrollHeight-n}}),o}}},"./MapStore2/web/client/components/misc/enhancers/localizeStringMap.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n("./node_modules/prop-types/index.js"),l=n("./MapStore2/node_modules/lodash/lodash.js").castArray,s=n("./node_modules/recompose/es/Recompose.js"),u=s.getContext,p=s.mapProps,d=s.compose,f=n("./MapStore2/web/client/utils/LocaleUtils.js").getLocalizedProp;e.exports=function(e){return d(u({locale:c.string}),p((function(t){var n=t.locale,o=r(t,["locale"]);return i(i({},o),l(e).reduce(function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return i(i({},n),{},a({},r,e[r]&&f(t,e[r])))}}(o,n),{}))})))}},"./MapStore2/web/client/components/misc/enhancers/withControllableState.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.branch,i=r.withState;e.exports=function(e,t,n){return o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e[t]}),i(e,t,n))}},"./MapStore2/web/client/components/misc/style/filter.css":function(e,t,n){var r=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/misc/style/filter.css");"string"==typeof r&&(r=[[e.i,r,""]]);n("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/components/notifications/NotificationContainer.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=n("./node_modules/react/index.js"),y=n("./node_modules/react-notification-system/dist/NotificationSystem.js"),v=n("./node_modules/prop-types/index.js"),h=n("./node_modules/react-intl/lib/index.es.js"),O=h.injectIntl,j=h.intlShape,w=h.defineMessages,S=n("./MapStore2/web/client/utils/LocaleUtils.js"),E=n("./MapStore2/web/client/components/misc/Portal.jsx"),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(d,e);var t,n,r,a=p(d);function d(){var e;l(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(f(e=a.call.apply(a,[this].concat(n))),"system",(function(){return e.refs.notify})),g(f(e),"updateNotifications",(function(t){var n=t.map((function(e){return e.uid})),r=e.system().state.notifications||[];r.forEach((function(t){n.indexOf(t.uid)<0&&e.system().removeNotification(t.uid)})),t.forEach((function(t){if(r.indexOf(t.uid)<0){var n,o=t.message,i=S.getMessageById(e.context.messages,o);if(t.values)n=(0,e.props.intl.formatMessage)(n=w({id:o,defaultMessage:i}),t.values);else n=i||o;e.system().addNotification(c(c({},t),{},{title:S.getMessageById(e.context.messages,t.title)||t.title,message:n,action:t.action&&{label:S.getMessageById(e.context.messages,t.action.label)||t.action.label,callback:t.action.dispatch?function(){e.props.onDispatch(t.action.dispatch)}:t.action.callback},onRemove:function(){e.props.onRemove(t.uid),t.onRemove&&t.onRemove()}}))}}))})),e}return t=d,(n=[{key:"componentDidMount",value:function(){this.updateNotifications(this.props.notifications)}},{key:"componentDidUpdate",value:function(){var e=(this.props||[]).notifications;this.updateNotifications(e)}},{key:"render",value:function(){var e=this.props,t=(e.notifications,e.onRemove,i(e,["notifications","onRemove"]));return b.createElement(E,null,b.createElement(y,o({ref:"notify"},t)))}}])&&s(t.prototype,n),r&&s(t,r),d}(b.Component);g(A,"propTypes",{notifications:v.array,intl:j.isRequired,onRemove:v.func,onDispatch:v.func}),g(A,"contextTypes",{messages:v.object}),g(A,"defaultProps",{notifications:[],onRemove:function(){},onDispatch:function(){}}),e.exports=O(A)},"./MapStore2/web/client/components/style/ColorPicker.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),c=n("./MapStore2/node_modules/lodash/isFunction.js"),l=n.n(c),s=n("./node_modules/react-color/lib/index.js"),u=n("./node_modules/tinycolor2/tinycolor.js"),p=n.n(u),d=n("./node_modules/react-dom/index.js"),f=n("./MapStore2/web/client/utils/ConfigUtils.js");function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=e.value,n=e.format,i=e.onChangeColor,a=e.text,c=e.line,u=e.disabled,f=e.pickerProps,g=e.containerNode,y=e.onOpen,h=e.placement,O={picker:{opacity:0},arrow:{opacity:0},overlay:{}},j=v(Object(r.useState)(),2),w=j[0],S=j[1],E=v(Object(r.useState)(O),2),A=E[0],P=E[1],x=v(Object(r.useState)(),2),C=x[0],T=x[1],M=p()(t).toString(),I=l()(g)?g():g;Object(r.useEffect)((function(){var e=w&&p()(w).toString();e&&M&&M!==e&&S(t)}),[M]),Object(r.useEffect)((function(){y(C),C||P(O)}),[C]);var k=Object(r.useRef)(),D=Object(r.useRef)();function N(){var e,t,n,r,o,i,a;if("center"===h)return{picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};var c=null==k||null===(e=k.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),l=null==D||null===(n=D.current)||void 0===n||null===(r=n.getBoundingClientRect)||void 0===r?void 0:r.call(n),s=null==D||null===(o=D.current)||void 0===o||null===(i=o.querySelector)||void 0===i?void 0:i.call(o,".ms-sketch-picker"),u=null==s||null===(a=s.getBoundingClientRect)||void 0===a?void 0:a.call(s);if(c&&l&&u){var p,d,f,m,g=u.width,b=u.height,y=l.top,v=l.left,O=l.width,j=l.height,w=c.top,S=c.left,E=c.width,A=c.height,P=[S+E/2,w+A/2],x=P[0]-v>g/2+10&&v+O-P[0]>g/2+10,C=P[1]-y>b/2+10&&y+j-P[1]>b/2+10,T={top:{filter:function(){return x&&w-y>b+10},styles:function(){return{picker:{position:"absolute",top:w-b-10-y,left:S+E/2-g/2-v},overlay:{},arrow:{top:w+2,left:S+E/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return C&&v+O-(S+E)>g+10},styles:function(){return{picker:{position:"absolute",top:w-b/2-y,left:S+E+10-v},overlay:{},arrow:{top:w+A/2,left:S+E-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return x&&y+j-(w+A)>b+10},styles:function(){return{picker:{position:"absolute",top:w+A+10-y,left:S+E/2-g/2-v},overlay:{},arrow:{top:w+A-2,left:S+E/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return C&&S-v>g+10},styles:function(){return{picker:{position:"absolute",top:w-b/2-y,left:S-g-10-v},overlay:{},arrow:{top:w+A/2,left:S+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null==T||null===(p=T[h])||void 0===p||null===(d=p.filter)||void 0===d?void 0:d.call(p))return null==T||null===(f=T[h])||void 0===f||null===(m=f.styles)||void 0===m?void 0:m.call(f);if("top"!==h&&T.top.filter())return T.top.styles();if("right"!==h&&T.right.filter())return T.right.styles();if("bottom"!==h&&T.bottom.filter())return T.bottom.styles();if("left"!==h&&T.left.filter())return T.left.styles()}return{picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}}}Object(r.useEffect)((function(){var e=function(){return P(N())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(r.useEffect)((function(){C&&P(N())}),[C]);var _,R,L=u?" ms-disabled":"",F=o.a.createElement("div",{ref:D,className:"ms-color-picker-overlay",style:b({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0},null==A?void 0:A.overlay)},o.a.createElement("div",{className:"ms-color-picker-cover",style:{position:"absolute",width:"100%",height:"100%",top:0,left:0},onClick:function(){T(!1),w&&i(n?p()(w).toString(n):w)}}),o.a.createElement(s.SketchPicker,m({},f,{className:"ms-sketch-picker",styles:{picker:b({width:200,padding:"10px 10px 0",boxSizing:"initial"},null==A?void 0:A.picker)},color:p()(w||t).toRgb(),onChange:function(e){return S(e.rgb)}})),o.a.createElement("div",{className:"ms-sketch-picker-arrow",style:b({position:"absolute",borderWidth:12},null==A?void 0:A.arrow)})),B=I?Object(d.createPortal)(F,I):F;return o.a.createElement("div",{className:"ms-color-picker".concat(L)},o.a.createElement("div",{className:"ms-color-picker-swatch",ref:k,style:(_=w||t||"transparent",R=p()(_).toRgbString(),c?{boxSizing:"border-box",border:"4px solid ".concat(R),backgroundColor:"transparent"}:{color:"transparent"===_?"#000000":p.a.mostReadable(R,["#000000"],{includeFallbackColors:!0}).toHexString(),backgroundColor:R}),onClick:function(){u||(T(!C),w&&i(n?p()(w).toString(n):w))}},a),C?B:null)}O.propTypes={value:a.a.oneOfType([a.a.string,a.a.shape({r:a.a.number,g:a.a.number,b:a.a.number,a:a.a.number})]),format:a.a.string,onChangeColor:a.a.func,text:a.a.string,line:a.a.bool,disabled:a.a.bool,pickerProps:a.a.object,containerNode:a.a.oneOfType([a.a.node,a.a.func]),onOpen:a.a.function,placement:a.a.string},O.defaultProps={disabled:!1,line:!1,onChangeColor:function(){},pickerProps:{},onOpen:function(){},containerNode:function(){return document.querySelector("."+(Object(f.getConfigProp)("themePrefix")||"ms2")+" > div")||document.body}},t.default=O},"./MapStore2/web/client/components/style/ColorSelector.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),c=n("./node_modules/react-bootstrap/es/index.js"),l=n("./MapStore2/web/client/components/style/ColorPicker.jsx");function s(e){var t=e.color,n=e.format,r=e.line,i=e.onChangeColor,a=e.disableAlpha,s=e.containerNode,u=e.onOpen,p=e.presetColors,d=e.placement;return o.a.createElement("div",{className:"ms-color-selector"},o.a.createElement(l.default,{text:o.a.createElement(c.Glyphicon,{glyph:"dropper"}),format:n,line:r,value:t,onChangeColor:i,pickerProps:{disableAlpha:a,presetColors:p},containerNode:s,onOpen:u,placement:d}))}s.propTypes={color:a.a.oneOfType([a.a.string,a.a.shape({r:a.a.number,g:a.a.number,b:a.a.number,a:a.a.number})]),format:a.a.string,line:a.a.bool,onChangeColor:a.a.func,disableAlpha:a.a.bool,containerNode:a.a.node,onOpen:a.a.func,presetColors:a.a.array,placement:a.a.string},s.defaultProps={line:!1,onChangeColor:function(){},onOpen:function(){}},t.default=s},"./MapStore2/web/client/components/widgets/builder/wizard/map/NodeEditor.jsx":function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=n("./node_modules/react/index.js"),c=n("./MapStore2/web/client/components/I18N/Message.jsx"),l=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),s=n("./MapStore2/node_modules/lodash/lodash.js").isObject,u=n("./node_modules/react-bootstrap/es/index.js"),p=u.Row,d=u.Col,f=u.Nav,m=u.NavItem,g=u.Glyphicon,b=l(m);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,n=e.element,l=void 0===n?{}:n,u=e.tabs,m=void 0===u?[]:u,y=e.activeTab,v=e.width,h=e.groups,O=e.isLocalizedLayerStylesEnabled,j=e.setActiveTab,w=void 0===j?function(){}:j,S=e.onUpdateParams,E=void 0===S?function(){}:S,A=e.onRetrieveLayerData,P=void 0===A?function(){}:A,x=e.realtimeUpdate,C=i(e,["settings","element","tabs","activeTab","width","groups","isLocalizedLayerStylesEnabled","setActiveTab","onUpdateParams","onRetrieveLayerData","realtimeUpdate"]);return a.createElement(p,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},a.createElement(d,{xs:12},a.createElement(f,{bsStyle:"tabs",activeKey:y,justified:!0},m.map((function(e){return a.createElement(b,{key:"ms-tab-settings-"+e.id,tooltip:a.createElement(c,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){return w(e.id)}},a.createElement(g,{glyph:e.glyph}))})))),a.createElement(d,{xs:12},m.filter((function(e){return e.id&&e.id===y})).filter((function(e){return e.Component})).map((function(e){return a.createElement(e.Component,r({},C,{key:"ms-tab-settings-body-"+e.id,containerWidth:v,element:l,groups:h,nodeType:t.nodeType,settings:t,retrieveLayerData:P,isLocalizedLayerStylesEnabled:O,onChange:function(e,t){return s(e)?E(e,x):E(o({},e,t),x)}}))}))))}},"./MapStore2/web/client/components/widgets/builder/wizard/map/PreviewMap.jsx":function(e,t,n){var r=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/previewMap.js");e.exports=r(n("./MapStore2/web/client/components/widgets/widget/MapView.jsx"))},"./MapStore2/web/client/components/widgets/builder/wizard/map/TOC.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/recompose/es/Recompose.js").compose,i=n("./MapStore2/web/client/components/TOC/TOC.jsx"),a=n("./MapStore2/web/client/components/TOC/DefaultLayerOrGroup.jsx"),c=n("./MapStore2/web/client/components/TOC/DefaultGroup.jsx"),l=n("./MapStore2/web/client/components/TOC/DefaultLayer.jsx"),s=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodePropertyChanges.js"),u=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodeFiltering.js"),p=o(n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/mapToNodes.js"),u,s);e.exports=p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.changeLayerPropertyByGroup,n=void 0===t?function(){}:t,o=e.changeLayerProperty,s=void 0===o?function(){}:o,u=e.changeGroupProperty,p=void 0===u?function(){}:u,d=e.onSort,f=e.onSelect,m=e.selectedNodes,g=e.nodes,b=void 0===g?[]:g;return r.createElement(i,{onSort:d,selectedNodes:m,onSelect:f,nodes:b},r.createElement(a,{groupElement:r.createElement(c,{onSort:d,selectedNodes:m,onSelect:f,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(r){return n(e,r,t[r])}))},onToggle:function(e,t){return p(e,"expanded",!t)},groupVisibilityCheckbox:!0}),layerElement:r.createElement(l,{selectedNodes:m,onSelect:f,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(n){return s(e,n,t[n])}))},onUpdateNode:function(e,t,n){return Object.keys(n).map((function(t){return s(e,t,n[t])}))},onToggle:function(e,t){return s(e,"expanded",!t)}})}))}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodeFiltering.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/node_modules/lodash/lodash.js").head,c=n("./node_modules/recompose/es/Recompose.js").withProps,l=function(e){var t=e.nodes,n=e.filterText;e.currentLocale;return function e(t,n){return t.reduce((function(t,r){var i=o({},r);return i.nodes&&(i=o(o({},i),{},{nodes:e(i.nodes,n)})),n.forEach((function(e){i.nodes&&e.func(i)?i=o(o({},i),e.options):i.nodes&&(i=o({},i))})),t.push(i),t}),[])}(t,[{options:{showComponent:!0},func:function(){return!n}},{options:{loadingError:!0},func:function(e){return a(e.nodes.filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return n&&a(e.nodes.filter((function(e){return!0})))}}])};e.exports=c((function(e){return{nodes:l(e)}}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodePropertyChanges.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js").withHandlers,o=n("./MapStore2/web/client/utils/LayersUtils.js").belongsToGroup,i=n("./MapStore2/node_modules/lodash/lodash.js"),a=i.findIndex,c=i.castArray;e.exports=r({changeLayerProperty:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(e,t,r){var i=a(o.layers||[],{id:e});n("map.layers[".concat(i,"].").concat(t),r)}},changeLayerPropertyByGroup:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,i=void 0===r?{}:r;return function(e,t,r){return i.layers.filter(o(e)).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return a(i.layers||[],{id:t})})).filter((function(e){return e>=0})).map((function(e){return n("map.layers[".concat(e,"].").concat(t),r)}))}},changeGroupProperty:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?[]:r;return function(e,t,r){var i,l=o.groups?c(o.groups):[],s=a(l,(function(t){return e===t.id})),u=-1===s?l.length:s;"expanded"!==t||(null==l||null===(i=l[u])||void 0===i?void 0:i.id)||n("map.groups[".concat(u,"].id"),e),n("map.groups[".concat(u,"].").concat(t),r)}},updateMapEntries:function(e){var t=e.onChange,n=void 0===t?function(){}:t;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return n("map[".concat(t,"]"),e[t])}))}}})},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodeSelection.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./node_modules/recompose/es/Recompose.js"),a=i.withProps,c=i.compose,l=i.withStateHandlers,s=n("./MapStore2/node_modules/lodash/lodash.js").findIndex,u=function(e,t){return(t.layers||[]).filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.group,r=void 0===n?"Default":n;return r===e})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t}))};e.exports=c(l((function(){return{selectedLayers:[],selectedGroups:[]}}),{onNodeSelect:function(e,t){var n=e.selectedLayers,o=void 0===n?[]:n,i=e.selectedGroups,a=void 0===i?[]:i,c=t.map,l=void 0===c?{}:c;return function(e,t,n){return{selectedLayers:"group"===t?s(a,(function(t){return t===e}))>=0?o.filter((function(t){return s(u(e,l),(function(e){return e===t}))<0})):n?[].concat(r(o),r(u(e,l))):r(u(e,l)):s(o,(function(t){return t===e}))>=0?o.filter((function(t){return t!==e})):n?[].concat(r(o),[e]):[e],selectedGroups:"group"===t?s(a,(function(t){return t===e}))>=0?a.filter((function(t){return t!==e})):n?[].concat(r(a),[e]):[e]:n?a:[]}}}}),a((function(e){var t=e.selectedLayers,n=e.selectedGroups;return{selectedNodes:[].concat(r(t),r(n))}})))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/mapToNodes.js":function(e,t,n){var r=n("./MapStore2/web/client/utils/LayersUtils.js"),o=n("./node_modules/recompose/es/Recompose.js").withProps;e.exports=o((function(e){var t,n,o,i=e.map;return{nodes:(t=r.splitMapAndLayers(i),n=t.layers,o=void 0===n?{}:n,r.denormalizeGroups(o.flat||[],o.groups||[]).groups)}}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/nodeEditor.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),c=a.compose,l=a.withProps,s=a.withState,u=a.withHandlers,p=n("./MapStore2/node_modules/lodash/lodash.js").get,d=n("./MapStore2/web/client/components/misc/enhancers/withControllableState.js"),f=n("./MapStore2/web/client/utils/LayersUtils.js").splitMapAndLayers,m=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/mapToNodes.js"),g=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/withSelectedNode.js"),b=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/withCapabilitiesRetrieval.js"),y=n("./MapStore2/web/client/components/TOC/fragments/settings/General.jsx"),v=n("./MapStore2/web/client/components/TOC/fragments/settings/Display.jsx"),h=b(n("./MapStore2/web/client/components/TOC/fragments/settings/WMSStyle.jsx")),O=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodePropertyChanges.js"),j=n("./MapStore2/web/client/components/TOC/enhancers/tocItemsSettings.js").settingsLifecycle,w=l((function(e){return{tabs:e.tabs||[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:y},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:e.settings&&"layers"===e.settings.nodeType,Component:v},{id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:e.settings&&"layers"===e.settings.nodeType&&e.element&&"wms"===e.element.type,Component:h}]}}));e.exports=c(m,g,s("settings","onUpdateSettings",{}),l((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{}:t,r=e.selectedNode,i=e.settings,a=void 0===i?{}:i;return{element:r,settings:o(o({},a),{},{nodeType:r&&r.nodes?"groups":"layers",options:{opacity:a.opacity>=0?a.opacity:r.opacity>=0?r.opacity:1}}),groups:p(f(n),"layers.groups")}})),c(O,u({onUpdateNode:function(e){var t=e.changeLayerProperty,n=void 0===t?function(){}:t,r=e.changeGroupProperty,o=void 0===r?function(){}:r,i=e.editNode;return function(e,t,r){"layers"===t&&Object.keys(r).map((function(e){return n(i,e,r[e])})),"groups"===t&&Object.keys(r).map((function(e){return o(i,e,r[e])}))}}}),u({onUpdateParams:function(e){var t=e.settings,n=void 0===t?{}:t,r=e.onUpdateNode,i=void 0===r?function(){}:r;return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&i(n.node,n.nodeType,o(o({},n.props),e))}}})),j,d("activeTab","setActiveTab","general"),w)},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/previewMap.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,i=r.withHandlers;e.exports=o(i({onMapViewChanges:function(e){var t=e.onChange,n=void 0===t?function(){}:t;return function(e){n("map",e),n("mapStateSource",e.mapStateSource)}}}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/withCapabilitiesRetrieval.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./node_modules/recompose/es/Recompose.js"),c=a.createEventHandler,l=a.mapPropsStream,s=n("./MapStore2/web/client/observables/wms.js").getLayerCapabilities,u=n("./node_modules/rxjs/Rx.js");e.exports=l((function(e){var t=c(),n=t.stream,r=t.handler;return e.pluck("element").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.id===t.id})).switchMap((function(){return n.switchMap((function(e){return s(e).map((function(e){return{capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}})).startWith({capabilitiesLoading:!0})})).catch((function(e){return u.Observable.of({capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:e},description:null})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(o({},t),{},{retrieveLayerData:r,element:o(o({},t.element),e)})}))}))},"./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/withSelectedNode.js":function(e,t,n){var r=this;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n("./MapStore2/node_modules/lodash/lodash.js").isMatch,a=n("./node_modules/recompose/es/Recompose.js").withProps;e.exports=a((function(e){var t=e.nodes,n=void 0===t?{}:t,a=e.editNode,c={};return a&&function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;for(var c in t)null!==t[c]&&"object"===o(t[c])&&(i(t[c],n)&&a.apply(r,[t[c]]),e(t[c],n,a))}(n,{id:a},(function(e){c=e})),{selectedNode:c}}))},"./MapStore2/web/client/components/widgets/widget/MapView.jsx":function(e,t,n){var r=n("./MapStore2/web/client/components/map/enhancers/autoMapType.js"),o=n("./MapStore2/web/client/components/map/enhancers/mapType.js"),i=n("./MapStore2/web/client/components/map/enhancers/autoResize.js"),a=n("./MapStore2/web/client/components/map/enhancers/getProjectionDefs.js").default,c=n("./MapStore2/web/client/components/map/enhancers/onMapViewChanges.js"),l=n("./node_modules/recompose/es/Recompose.js").compose,s=n("./MapStore2/web/client/components/map/enhancers/handlingUnsupportedProjection.js").handlingUnsupportedProjection;e.exports=l(c,i(0),r,o,a,s)(n("./MapStore2/web/client/components/map/BaseMap.jsx"))},"./MapStore2/web/client/epics/notifications.js":function(e,t,n){var r=n("./node_modules/rxjs/Rx.js"),o=n("./MapStore2/web/client/actions/notifications.js").clear,i=n("./node_modules/connected-react-router/esm/index.js").LOCATION_CHANGE;e.exports={clearNotificationOnLocationChange:function(e){return e.ofType(i).switchMap((function(){return r.Observable.of(o())}))}}},"./MapStore2/web/client/libs/leaflet.js":function(e,t){e.exports=window.L},"./MapStore2/web/client/plugins/Notifications.jsx":function(e,t,n){var r=n("./MapStore2/web/client/actions/notifications.js"),o=r.hide,i=r.dispatchAction,a=n("./MapStore2/web/client/epics/notifications.js").clearNotificationOnLocationChange,c=n("./node_modules/react-redux/es/index.js").connect;e.exports={NotificationsPlugin:c((function(e){return{notifications:e&&e.notifications}}),{onRemove:o,onDispatch:i})(n("./MapStore2/web/client/components/notifications/NotificationContainer.jsx")),reducers:{notifications:n("./MapStore2/web/client/reducers/notifications.js").default},epics:{clearNotificationOnLocationChange:a}}},"./MapStore2/web/client/product/assets/img/marker-icon-red.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QwKDiknI+uvvgAABttJREFUWMOll2uMVVcVx/9773PuPY/7mBcUZ4q1JmbiF6nQwtSY2pSYtobCB2yMrxhrHGOrfioEjQYlMWikH7TxUWNbjTFWU6gComm1UEgMAi20kFCrIMPMFIZ53Xvn3vPYZ++1/HBh6GVmmDu6k/+Xk/1fv7Mfa61zBDOjnfHihzZ1Gcg+YcUyCZrkvPf2A4efG2/HK24G+cuHN/cLS59nIT7DzH1Syli5jrGZUUTkKyGuAPa3RPTsA0f3vbEkyHfEBrlunbMVUn47LBYRhkE+7/uQORdCCDAzyAA6mkEURbpWqQpm/l4Q0I57X95rFoUcWLvxvazk71039/5b+noDVymQzsCZAWcZ2BKEkhCuC+E6kDkXmbUYv3QpylJ9zhj58EPHd/9zQcgf1228Xwnxh3Jnp+rq6XE5TmAb8aJ7rnwPIvQxPTlppicnLQGf3PSPvS/Mgey/c1OPVfzv3t7ecuj7MJUZsLVodwil4JQKiHSKS6OjDaFs/4a//2kUAOS1SVbxLwulkhd4HvTENMgYMPMcQcp5n5Mx0FMV+Pk8iuWyY6369bXYEgCeX7vh06zk+lu6O/O2WgeIWiQdB25nAbmeLsiOInI9XXA7y5A5d85cW62jp6s7L5Qa2LP2oS8CgNi3ZmOQCjP+7t6+wIOEnWm0bINT8kGej/FqBY1GAyZJoVwHQamE5YUSlCWYWgUgef2MiiESEIYuvZ14pLqdBOlq5eRF6Oehr0wAdP0iqDBAKhSGRoax8v6P4M5PbULxtlvRGB3Dud0HcG7Pn7Gyuwee77W8nJ2pIlzeA6UUJZSuVpv7+jcHfmF9yVGujTIAAoCAUA5URwEj01Po/8InsOprj8Dr6oCQEvmOElbcvQb+imV462+H0VXsAGcWbLnpZwHpKjQMmyTL3pSC+Z4w7/qkM4CuS7gOalECUS6g/7Ob571R7/nYfQhvX4npRh0yl2vxk84Q5l1fMN8jCRjwXQVOdXOrrko6AnGaYtldqyCEWPDqrhhYjcSkEIpb/Jxq+K4CAQOOIRs0SwWBmWbNzAzLBKdQWDQRzdVMaPUThBAgIl8COBUlCYRSrW+SZcgrB2Ovvn5TyNjJM8iznbMTQilESQICn5RE4nAjzTKhVIuZkhTlvIvKW+cxfOTYvIDx02dx+ehr6PQDkM7mVIAo0dqyfEUaaY5X01gLpcDWzoqSFCJO0Vcs4OCWHXjz+f0g0yywRITzL76Cl778dbyrWIbKLGwjavELpVBNG9rAHBdPf/DeXmZ3eE3frZKmKuDsHZVaSridZTTY4kK9jjiOUVqxHPUr41Cui9uLJZScHMzEOJivJ6NwHciuDrw6Omxh0CeYGc/c8dFjt5XLd/VIF7Y607JsFhaqWG4mJlskWiPv5uBJBYpmYGp1CG7dalUuYoIyHqpWjz1y6qUBBwA0xK6Rev3Z5cuXBaZmm3VolgLY6jSoVoHMuSg4Dqheh87M7DwGtaxeeg5Gx6ZiDfH92QIpnfgFbYyu6QzSC5t16AaxFeDYwM4k4NgABvPOk16ISqKRWlvvfrBz7yxk8MSRjMA/uVyvxcp3wJy1XMe2BUCFPkYb9dgyPfHwzt/Z1n5i7ZMTSaoispCBD+ZsyZKBi7qOUE0TYTN6uqWfAMCjZw5dBvDk0EwUK99rNqgbesVNBUAGPi7W6zGAJx47e2hyDgQAjLY7KzpB3WRQoT9vB1xIMvAxk2nMZJaEq3/wzrgtkMfOHppkIXZdjKJYhcHV1G9vFSr0MdRoRATeOXjiSHVBCAAYL7erZqyt6RQqDCAYi8ophKjpFI3MGGvtD2+MOQfylaMHaoL5u0NxGsvAB4FBRAuKBSB8DxeiKCLJOx49c6i+KAQAkMt+FFubVrMUTiGEYF5QquihohPElhK/OvHj+cLNCxk8cSQi8PahNItl4Deb1jxnIYSA9EIMpVnMQnzrc/85nbQNAQAd0VOptfUpnUAW8vPeKFEMMaUTpNbUum3wi4ViLQj56r8Oppbpm8OZjYUfAlK2ZreUkF4ew1kWk5Tf+PiZfXrJEAAY637fM5poekqnUGEOID0rp5DHlE6RWprofrD7VzeLc1PI9oNPGSuw7SJx82xU8xNVKAkEHoZslhCw7VqN+p8gADD2uvebzJrL45mBLIQAEVSxgCvawBBGx04Hzy0WY1HIdt5PLMTWEUKCwIfwPbDvYYQ4gZRbt/N++r8hAPCluw/uNmQvjFtit7OMK8YyEZ0fPPXXPe3424LgZ8RWyceHGVoTYQQiA7Cl7X+Xdv9+AeDnH7jvtbzAHSnj5OAbL69p1yexhMFCPJ5ACBZiC5ZkXELPYGb8dNX6bUv1/Bd7pfPVmVDtrAAAAABJRU5ErkJggg=="},"./MapStore2/web/client/product/assets/img/marker-shadow.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"},"./MapStore2/web/client/reducers/controls.js":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/actions/controls.js"),o=n("./node_modules/object-assign/index.js"),i=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.TOGGLE_CONTROL:var n=t.property||"enabled";return i()({},e,a({},t.control,i()({},e[t.control],a({},n,!(e[t.control]||{})[n]))));case r.SET_CONTROL_PROPERTY:return!0===t.toggle&&e[t.control]&&e[t.control][t.property]===t.value?i()({},e,a({},t.control,i()({},e[t.control],a({},t.property,void 0)))):i()({},e,a({},t.control,i()({},e[t.control],a({},t.property,t.value))));case r.SET_CONTROL_PROPERTIES:return i()({},e,a({},t.control,i()({},e[t.control],t.properties)));case r.RESET_CONTROLS:var o=Object.keys(e).filter((function(e){return-1===(t.skip||[]).indexOf(e)})),c=o.reduce((function(t,n){return i()(t,a({},n,i()({},e[n],!0===e[n].enabled?{enabled:!1}:{})))}),{});return i()({},e,c);default:return e}}},"./MapStore2/web/client/reducers/notifications.js":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/actions/notifications.js");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case r.SHOW_NOTIFICATION:t.type;var n=s(t,["type"]);return[].concat(c(e),[i({},n)]);case r.HIDE_NOTIFICATION:return e.filter((function(e){return e.uid!==t.uid}));case r.CLEAR_NOTIFICATIONS:return[];default:return e}}},"./MapStore2/web/client/selectors/context.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return y}));var r=n("./node_modules/reselect/es/index.js"),o=n("./MapStore2/web/client/selectors/localConfig.js"),i=n("./MapStore2/node_modules/lodash/lodash.js"),a=n("./MapStore2/web/client/utils/ConfigUtils.js"),c=n.n(a),l=n("./MapStore2/web/client/utils/PluginsUtils.js");function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){return e.context&&e.context.currentContext},d=function(e){return e.context&&e.context.resource},f=Object(r.createSelector)((function(){return Object(i.get)(c.a.getConfigProp("plugins"),"desktop")}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{desktop:[].concat(s(e),["Context"])}})),m=function(e){return f(e)},g=Object(r.createSelector)((function(e){return Object(i.get)(p(e),"plugins")}),(function(e){return Object(i.get)(p(e),"userPlugins")}),(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&{desktop:[].concat(s(Object(i.get)(e,"desktop",[])),s(t.filter((function(e){return e.active}))))}})),b=(Object(r.createSelector)(p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.templates})),function(e){return function(e){return Object(i.get)(e,"context.loading")}(e)?m(e):g(e)||f(e)}),y=function(e){return Object(r.createSelector)(p,b,(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!t||Object(i.findIndex)(Object(i.get)(n,"desktop",[]),(function(t){return t.name===e}))>-1}))};Object(r.createSelector)((function(e){return Object(l.getMonitoredState)(e,Object(o.b)(e))}),(function(e){return JSON.stringify(e)}))},"./MapStore2/web/client/selectors/dashboard.js":function(e,t,n){"use strict";n.r(t),n.d(t,"isDashboardAvailable",(function(){return i})),n.d(t,"isShowSaveOpen",(function(){return a})),n.d(t,"isShowSaveAsOpen",(function(){return c})),n.d(t,"isDashboardEditing",(function(){return l})),n.d(t,"showConnectionsSelector",(function(){return s})),n.d(t,"dashboardResource",(function(){return u})),n.d(t,"isDashboardLoading",(function(){return p})),n.d(t,"getDashboardSaveErrors",(function(){return d})),n.d(t,"isBrowserMobile",(function(){return f})),n.d(t,"buttonCanEdit",(function(){return m}));var r=n("./node_modules/reselect/es/index.js"),o=n("./MapStore2/web/client/selectors/router.js"),i=function(e){return e&&e.dashboard&&e.dashboard.editor&&e.dashboard.editor.available},a=function(e){return e&&e.dashboard&&e.dashboard.showSaveModal},c=function(e){return e&&e.dashboard&&e.dashboard.showSaveAsModal},l=function(e){return e&&e.dashboard&&e.dashboard.editing},s=function(e){return e&&e.dashboard&&e.dashboard.showConnections},u=function(e){return e&&e.dashboard&&e.dashboard.resource},p=function(e){return e&&e.dashboard&&e.dashboard.loading},d=function(e){return e&&e.dashboard&&e.dashboard.saveErrors},f=function(e){return e&&e.browser&&e.browser.mobile},m=Object(r.createSelector)(o.pathnameSelector,u,f,(function(e,t,n){return n?!n:t&&t.canEdit||isNaN(e.substr(-4))}))},"./MapStore2/web/client/selectors/dimension.js":function(e,t,n){"use strict";n.r(t),n.d(t,"layerDimensionDataSelectorCreator",(function(){return p})),n.d(t,"getLayerStaticDimension",(function(){return d})),n.d(t,"layerDimensionSelectorCreator",(function(){return f})),n.d(t,"timeDataSelector",(function(){return m})),n.d(t,"layersWithTimeDataSelector",(function(){return g})),n.d(t,"currentTimeSelector",(function(){return b})),n.d(t,"offsetTimeSelector",(function(){return y})),n.d(t,"offsetEnabledSelector",(function(){return v})),n.d(t,"timeSequenceSelector",(function(){return h})),n.d(t,"layerTimeSequenceSelectorCreator",(function(){return O})),n.d(t,"layerDimensionRangeSelector",(function(){return j}));var r=n("./MapStore2/web/client/selectors/layers.js"),o=n("./node_modules/reselect/es/index.js"),i=n("./MapStore2/node_modules/lodash/lodash.js");function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e,t){return function(n){return Object(i.get)(n,"dimension.data[".concat(t,"][").concat(e,"]"))}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(i.find)(e.dimensions||[],{name:t})},f=function(e,t){return function(n){return p(e.id,t)(n)||d(e,t)}},m=function(e){return Object(r.layersSelector)(e).reduce((function(t,n){var r=f(n,"time")(e);return r?s(s({},t),{},u({},n.id,r)):t}),{})},g=function(e){return Object(r.layersSelector)(e).filter((function(e){return d(e,"time")}))},b=function(e){var t=Object(i.get)(e,"dimension.currentTime");return t&&t.split("/")[0]},y=function(e){return Object(i.get)(e,"dimension.offsetTime")},v=function(e){return!!y(e)},h=Object(o.createSelector)(m,(function(e){return Object.keys(e).reduce((function(t,n){return[].concat(a(t),a(e[n]&&e[n].values||[]))}),[]).sort()||[]})),O=function(e){return function(t){return a(Object(i.get)(f(e,"time")(t),"values",[])).sort()}},j=function(e,t){var n=p(t,"time")(e),r=n&&n.domain&&n.domain.split("--");if(r&&2===r.length)return r&&{start:r[0],end:r[1]};var o=n&&n.domain&&n.domain.split(",");return o&&o.length>0?{start:o[0],end:o[o.length-1]}:null}},"./MapStore2/web/client/selectors/layers.js":function(e,t,n){"use strict";n.r(t),n.d(t,"layersSelector",(function(){return b})),n.d(t,"currentBackgroundLayerSelector",(function(){return y})),n.d(t,"getLayerFromId",(function(){return v})),n.d(t,"getLayerFromName",(function(){return h})),n.d(t,"allBackgroundLayerSelector",(function(){return O})),n.d(t,"highlightPointSelector",(function(){return j})),n.d(t,"geoColderSelector",(function(){return w})),n.d(t,"centerToMarkerSelector",(function(){return S})),n.d(t,"additionalLayersSelector",(function(){return E})),n.d(t,"layerSelectorWithMarkers",(function(){return A})),n.d(t,"rawGroupsSelector",(function(){return P})),n.d(t,"groupsSelector",(function(){return x})),n.d(t,"selectedNodesSelector",(function(){return C})),n.d(t,"getSelectedLayers",(function(){return T})),n.d(t,"getSelectedLayer",(function(){return M})),n.d(t,"layerFilterSelector",(function(){return I})),n.d(t,"layerSettingSelector",(function(){return k})),n.d(t,"layerMetadataSelector",(function(){return D})),n.d(t,"wfsDownloadSelector",(function(){return N})),n.d(t,"backgroundControlsSelector",(function(){return _})),n.d(t,"currentBackgroundSelector",(function(){return R})),n.d(t,"tempBackgroundSelector",(function(){return L})),n.d(t,"getLayersWithDimension",(function(){return F})),n.d(t,"elementSelector",(function(){return B})),n.d(t,"queryableLayersSelector",(function(){return U})),n.d(t,"selectedLayerLoadingErrorSelector",(function(){return G})),n.d(t,"queryableSelectedLayersSelector",(function(){return H}));var r=n("./node_modules/reselect/es/index.js"),o=n("./MapStore2/web/client/utils/MapInfoUtils.js"),i=n.n(o),a=n("./MapStore2/web/client/utils/LayersUtils.js"),c=n.n(a),l=n("./MapStore2/web/client/utils/SearchUtils.js"),s=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),u=n("./MapStore2/web/client/selectors/mapInfo.js"),p=n("./MapStore2/node_modules/lodash/lodash.js"),d=n("./MapStore2/web/client/utils/TOCUtils.js");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,n=e.config;return t&&Object(p.isArray)(t)?t:t&&t.flat||n&&n.layers||[]},y=function(e){return Object(p.head)(b(e).filter((function(e){return e&&e.visibility&&"background"===e.group})))},v=function(e,t){return Object(p.head)(b(e).filter((function(e){return e.id===t})))},h=function(e,t){return Object(p.head)(b(e).filter((function(e){return e.name===t})))},O=function(e){return b(e).filter((function(e){return"background"===e.group}))},j=function(e){return e.annotations&&e.annotations.showMarker&&e.annotations.clickPoint},w=function(e){return e.search&&e.search},S=function(e){return Object(p.get)(e,"mapInfo.centerToMarker","")},E=function(e){return Object(p.get)(e,"additionallayers",[])},A=Object(r.createSelector)([b,u.clickedPointWithFeaturesSelector,w,S,E,j],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,c=o.filter((function(e){return"override"===e.actionType})),u=o.filter((function(e){return"overlay"===e.actionType})).map((function(e){return e.options})),d=e.map((function(e){var t=(Object(p.head)(c.filter((function(t){return t.id===e.id})))||{}).options;return t?m(m({},e),t):m({},e)}));if(d=d.concat(u),t){d.push(i.a.getMarkerLayer("GetFeatureInfoHighLight",{features:t.features},void 0,{overrideOLStyle:!0,featuresCrs:t.featuresCrs,style:m(m({},l.defaultIconStyle),{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2})}));var f="enabled"===r?Object(s.getNormalizedLatLon)(t.latlng):t.latlng;d.push(i.a.getMarkerLayer("GetFeatureInfo",f))}if(a){var g="enabled"===r?Object(s.getNormalizedLatLon)(a.latlng):a.latlng;d.push(i.a.getMarkerLayer("Annotations",g)),d.push(i.a.getMarkerLayer("GetFeatureInfo",m({},g)))}if(n&&n.markerPosition){var b=Object(p.isObject)(n.style)&&n.style||{};d.push(i.a.getMarkerLayer("GeoCoder",n.markerPosition,"marker",{overrideOLStyle:!0,style:m(m({},l.defaultIconStyle),b)},n.markerLabel))}return d})),P=function(e){return e.layers&&e.layers.flat&&e.layers.groups||[]},x=function(e){return e.layers&&e.layers.flat&&e.layers.groups&&c.a.denormalizeGroups(e.layers.flat,e.layers.groups).groups||[]},C=function(e){return e.layers&&e.layers.selected||[]},T=function(e){return C(e).map((function(t){return Object(p.find)(b(e),{id:t})}))},M=function(e){var t=T(e)||[];return t&&t[0]},I=function(e){return e.layers&&e.layers.filter||""},k=function(e){return e.layers&&e.layers.settings||{expanded:!1,options:{opacity:1}}},D=function(e){return e.layers&&e.layers.layerMetadata||{expanded:!1,metadataRecord:{},maskLoading:!1}},N=function(e){return e.controls&&e.controls.wfsdownload?{expanded:e.controls.wfsdownload.enabled}:{expanded:!1}},_=function(e){return e.controls&&e.controls.backgroundSelector||{}},R=function(e){var t=_(e),n=O(e)||[];return t.currentLayer&&!Object(p.isEmpty)(t.currentLayer)?t.currentLayer:Object(p.head)(n.filter((function(e){return e.visibility})))||{}},L=function(e){var t=_(e),n=O(e)||[];return t.tempLayer&&!Object(p.isEmpty)(t.tempLayer)?t.tempLayer:Object(p.head)(n.filter((function(e){return e.visibility})))||{}},F=function(e,t){return(b(e)||[]).filter((function(e){return e&&e.dimensions&&Object(p.find)(Object(p.castArray)(e.dimensions),{name:t})}))},B=function(e){var t=k(e),n=b(e),r=x(e);return"layers"===t.nodeType&&Object(p.isArray)(n)&&Object(p.head)(n.filter((function(e){return e.id===t.node})))||"groups"===t.nodeType&&Object(p.isArray)(r)&&Object(p.head)(Object(d.flattenGroups)(r,0,!0).filter((function(e){return e.id===t.node})))||{}},U=function(e){return b(e).filter(i.a.defaultQueryableFilter)},G=function(e){return"Error"===(M(e)||{}).loadingError},H=function(e){return T(e).filter(i.a.defaultQueryableFilter)}},"./MapStore2/web/client/selectors/localConfig.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n("./MapStore2/node_modules/lodash/lodash.js"),o=function(e){return e.localConfig},i=function(e){return(o(e)||{}).monitorState},a=function(e){return function(t){return Object(r.get)(function(e){return Object(r.get)(o(e),"plugins")}(t),e)}},c=function(e){return Object(r.get)(o(e),"defaultMapOptions.floatingIdentifyDelay",500)}},"./MapStore2/web/client/selectors/locale.js":function(e,t,n){"use strict";n.r(t),n.d(t,"currentLocaleSelector",(function(){return i})),n.d(t,"currentMessagesSelector",(function(){return a})),n.d(t,"currentLocaleLanguageSelector",(function(){return c}));var r=n("./node_modules/reselect/es/index.js"),o=n("./MapStore2/node_modules/lodash/lodash.js"),i=function(e){return e.locale&&e.locale.current||"en-US"},a=function(e){return e.locale&&e.locale.messages||{}},c=Object(r.createSelector)([i],(function(e){return Object(o.head)(e.split("-"))}))},"./MapStore2/web/client/selectors/map.js":function(e,t,n){"use strict";n.r(t),n.d(t,"mapSelector",(function(){return c})),n.d(t,"projectionSelector",(function(){return l})),n.d(t,"stateMapIdSelector",(function(){return s})),n.d(t,"mapIdSelector",(function(){return u})),n.d(t,"mapInfoSelector",(function(){return p})),n.d(t,"mapInfoLoadingSelector",(function(){return d})),n.d(t,"mapSaveErrorsSelector",(function(){return f})),n.d(t,"mapInfoDetailsUriFromIdSelector",(function(){return m})),n.d(t,"mapInfoDetailsSettingsFromIdSelector",(function(){return g})),n.d(t,"mapIsEditableSelector",(function(){return b})),n.d(t,"projectionDefsSelector",(function(){return y})),n.d(t,"mapConstraintsSelector",(function(){return v})),n.d(t,"configuredRestrictedExtentSelector",(function(){return h})),n.d(t,"configuredExtentCrsSelector",(function(){return O})),n.d(t,"configuredMinZoomSelector",(function(){return j})),n.d(t,"mapLimitsSelector",(function(){return w})),n.d(t,"minZoomSelector",(function(){return S})),n.d(t,"resolutionsSelector",(function(){return E})),n.d(t,"scalesSelector",(function(){return A})),n.d(t,"mapVersionSelector",(function(){return P})),n.d(t,"mapNameSelector",(function(){return x})),n.d(t,"mouseMoveListenerSelector",(function(){return C})),n.d(t,"isMouseMoveActiveSelector",(function(){return T})),n.d(t,"isMouseMoveCoordinatesActiveSelector",(function(){return M})),n.d(t,"isMouseMoveIdentifyActiveSelector",(function(){return I}));var r=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),o=n.n(r),i=n("./node_modules/reselect/es/index.js"),a=n("./MapStore2/node_modules/lodash/lodash.js"),c=function(e){return e.map&&e.map.present||e.map||e.config&&e.config.map||null},l=Object(i.createSelector)([c],(function(e){return e&&e.projection})),s=function(e){return Object(a.get)(c(e),"mapId")&&parseInt(Object(a.get)(c(e),"mapId"),10)||null},u=function(e){return Object(a.get)(e,"mapInitialConfig.mapId")&&parseInt(Object(a.get)(e,"mapInitialConfig.mapId"),10)||s(e)},p=function(e){return Object(a.get)(c(e),"info")},d=function(e){return Object(a.get)(c(e),"loadingInfo",!1)},f=function(e){return Object(a.get)(c(e),"mapSaveErrors")},m=function(e){return Object(a.get)(p(e),"details")},g=function(e){return Object(a.get)(p(e),"detailsSettings")},b=function(e){var t=Object(a.get)(p(e),"canEdit");return void 0===t?Object(a.get)(e,"context.resource.canEdit"):t},y=function(e){return e.localConfig&&e.localConfig.projectionDefs||[]},v=function(e){return e.localConfig&&e.localConfig.mapConstraints||{}},h=function(e){return v(e).restrictedExtent},O=function(e){return v(e).crs},j=function(e){var t=v(e),n=l(e);return n&&Object(a.get)(t,'projectionsConstraints["'.concat(n,'"].minZoom'))||Object(a.get)(t,"minZoom")},w=function(e){return Object(a.get)(c(e),"limits")},S=function(e){return Object(a.get)(w(e),"minZoom")},E=function(e){return Object(a.get)(c(e),"resolutions")},A=Object(i.createSelector)([E,l],(function(e,t){if(e&&t){var n=o.a.getUnits(t);return e.map((function(e){return e*(100/2.54*96)*("degrees"===n?111194.87428468118:1)}))}return[]})),P=function(e){return e.map&&e.map.present&&e.map.present.version||1},x=function(e){return e.map&&e.map.present&&e.map.present.info&&e.map.present.info.name||""},C=function(e){return Object(a.get)(c(e),"eventListeners.mousemove",[])},T=function(e){return!!C(e).length},M=function(e){return C(e).includes("mouseposition")},I=function(e){return C(e).includes("identifyFloatingTool")}},"./MapStore2/web/client/selectors/mapInfo.js":function(e,t,n){"use strict";n.r(t),n.d(t,"isMapPopup",(function(){return g})),n.d(t,"mapInfoRequestsSelector",(function(){return b})),n.d(t,"isMapInfoOpen",(function(){return y})),n.d(t,"generalInfoFormatSelector",(function(){return v})),n.d(t,"showEmptyMessageGFISelector",(function(){return h})),n.d(t,"mapInfoConfigurationSelector",(function(){return O})),n.d(t,"measureActiveSelector",(function(){return j})),n.d(t,"clickPointSelector",(function(){return w})),n.d(t,"clickLayerSelector",(function(){return S})),n.d(t,"showMarkerSelector",(function(){return E})),n.d(t,"itemIdSelector",(function(){return A})),n.d(t,"overrideParamsSelector",(function(){return P})),n.d(t,"filterNameListSelector",(function(){return x})),n.d(t,"drawSupportActiveSelector",(function(){return C})),n.d(t,"annotationsEditingSelector",(function(){return T})),n.d(t,"mapInfoDisabledSelector",(function(){return M})),n.d(t,"stopGetFeatureInfoSelector",(function(){return I})),n.d(t,"identifyOptionsSelector",(function(){return k})),n.d(t,"isHighlightEnabledSelector",(function(){return D})),n.d(t,"indexSelector",(function(){return N})),n.d(t,"responsesSelector",(function(){return _})),n.d(t,"requestsSelector",(function(){return R})),n.d(t,"isLoadedResponseSelector",(function(){return L})),n.d(t,"validResponsesSelector",(function(){return F})),n.d(t,"currentResponseSelector",(function(){return B})),n.d(t,"currentFeatureSelector",(function(){return U})),n.d(t,"currentFeatureCrsSelector",(function(){return G})),n.d(t,"getStyleForFeature",(function(){return H})),n.d(t,"applyMapInfoStyle",(function(){return W})),n.d(t,"highlightStyleSelector",(function(){return z})),n.d(t,"clickedPointWithFeaturesSelector",(function(){return V})),n.d(t,"currentEditFeatureQuerySelector",(function(){return Q})),n.d(t,"mapTriggerSelector",(function(){return q}));var r=n("./MapStore2/node_modules/lodash/lodash.js"),o=n("./node_modules/reselect/es/index.js"),i=n("./MapStore2/web/client/selectors/map.js"),a=n("./MapStore2/web/client/selectors/context.js"),c=n("./MapStore2/web/client/selectors/locale.js"),l=n("./MapStore2/web/client/utils/MapInfoUtils.js"),s=n.n(l),u=n("./MapStore2/web/client/selectors/maptype.js"),p=n("./MapStore2/web/client/selectors/localConfig.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=Object(o.createSelector)((function(e){return Object(p.c)("desktop")(e)||{}}),u.isCesium,(function(e,t){return!t&&!!((Object.values(e).filter((function(e){return"Identify"===e.name})).pop()||{}).cfg||{}).showInMapPopup})),b=function(e){return Object(r.get)(e,"mapInfo.requests")||[]},y=Object(o.createSelector)(b,Object(a.b)("Identify"),g,(function(e,t,n){return!n&&!!e&&e.length>0&&t})),v=function(e){return Object(r.get)(e,"mapInfo.configuration.infoFormat","text/plain")},h=function(e){return Object(r.get)(e,"mapInfo.configuration.showEmptyMessageGFI",!0)},O=function(e){return Object(r.get)(e,"mapInfo.configuration",{})},j=function(e){return Object(r.get)(e,"controls.measure.enabled")&&(Object(r.get)(e,"measurement.lineMeasureEnabled")||Object(r.get)(e,"measurement.areaMeasureEnabled")||Object(r.get)(e,"measurement.bearingMeasureEnabled"))},w=function(e){return e&&e.mapInfo&&e.mapInfo.clickPoint},S=function(e){return e&&e.mapInfo&&e.mapInfo.clickLayer},E=function(e){return e&&e.mapInfo&&e.mapInfo.showMarker},A=function(e){return Object(r.get)(e,"mapInfo.itemId",null)},P=function(e){return Object(r.get)(e,"mapInfo.overrideParams",{})},x=function(e){return Object(r.get)(e,"mapInfo.filterNameList",[])},C=function(e){var t=Object(r.get)(e,"draw.drawStatus",!1);return t&&"clean"!==t&&"stop"!==t},T=function(e){return Object(r.get)(e,"annotations.editing")},M=function(e){return!Object(r.get)(e,"mapInfo.enabled",!1)},I=Object(o.createSelector)(M,j,C,T,Object(a.b)("Identify"),(function(e,t,n,r,o){return e||!!t||n||!!r||!o})),k=Object(o.createStructuredSelector)({format:v,map:i.mapSelector,point:w,currentLocale:c.currentLocaleSelector}),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.mapInfo&&e.mapInfo.highlight},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.mapInfo&&e.mapInfo.index},_=function(e){return e.mapInfo&&e.mapInfo.responses||[]},R=function(e){var t;return(null==e||null===(t=e.mapInfo)||void 0===t?void 0:t.requests)||[]},L=function(e){var t;return null==e||null===(t=e.mapInfo)||void 0===t?void 0:t.loaded},F=Object(o.createSelector)(R,_,v,i.isMouseMoveIdentifyActiveSelector,(function(e,t,n,r){var o=s.a.getValidator(n);return e.length===t.length&&o.getValidResponses(t,r)})),B=Object(o.createSelector)(F,N,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]})),U=function(e){var t=B(e)||{};return Object(r.get)(t,"layerMetadata.features")},G=function(e){var t=B(e)||{};return Object(r.get)(t,"layerMetadata.featuresCrs")},H=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.style||t.geometry&&("Point"===t.geometry.type||"MultiPoint"===t.geometry.type)?e:Object(r.omit)(e,"radius")}},W=function(e){return function(t){return f(f({},t),{},{style:H(e)(t)})}},z=function(e){return Object(r.get)(e,"mapInfo.highlightStyle",{color:"#3388ff",weight:4,radius:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2})},V=Object(o.createSelector)(w,D,U,G,E,z,(function(e,t,n,o,i,a){return i&&e?t?f(f({},e),{},{featuresCrs:o,features:n&&Object(r.isArray)(n)&&n.map(W(a))}):e:void 0})),Q=function(e){var t;return null===(t=e.mapInfo)||void 0===t?void 0:t.currentEditFeatureQuery},q=function(e){var t,n;return void 0===(null===(t=e.mapInfo)||void 0===t||null===(n=t.configuration)||void 0===n?void 0:n.trigger)?"click":e.mapInfo.configuration.trigger}},"./MapStore2/web/client/selectors/maptype.js":function(e,t,n){"use strict";n.r(t),n.d(t,"mapTypeSelector",(function(){return r})),n.d(t,"isCesium",(function(){return o})),n.d(t,"isLeaflet",(function(){return i})),n.d(t,"isOpenlayers",(function(){return a}));var r=function(e){return e&&e.maptype&&e.maptype.mapType||"leaflet"},o=function(e){return"cesium"===r(e)},i=function(e){return"leaflet"===r(e)},a=function(e){return"openlayers"===r(e)}},"./MapStore2/web/client/selectors/widgets.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getEditorSettings",(function(){return g})),n.d(t,"getDependenciesMap",(function(){return b})),n.d(t,"getDependenciesKeys",(function(){return y})),n.d(t,"getEditingWidget",(function(){return v})),n.d(t,"getWidgetLayer",(function(){return h})),n.d(t,"getFloatingWidgets",(function(){return O})),n.d(t,"getCollapsedState",(function(){return j})),n.d(t,"getVisibleFloatingWidgets",(function(){return w})),n.d(t,"getWidgetAttributeFilter",(function(){return S})),n.d(t,"getCollapsedIds",(function(){return E})),n.d(t,"getMapWidgets",(function(){return A})),n.d(t,"getTableWidgets",(function(){return P})),n.d(t,"availableDependenciesSelector",(function(){return x})),n.d(t,"availableDependenciesForEditingWidgetSelector",(function(){return C})),n.d(t,"getDependencySelectorConfig",(function(){return T})),n.d(t,"isWidgetSelectionActive",(function(){return M})),n.d(t,"getWidgetsDependenciesGroups",(function(){return I})),n.d(t,"getFloatingWidgetsLayout",(function(){return k})),n.d(t,"getFloatingWidgetsCurrentLayout",(function(){return D})),n.d(t,"getDashboardWidgets",(function(){return N})),n.d(t,"isTrayEnabled",(function(){return _})),n.d(t,"dashboardHasWidgets",(function(){return R})),n.d(t,"getDashboardWidgetsLayout",(function(){return L})),n.d(t,"getEditingWidgetLayer",(function(){return F})),n.d(t,"returnToFeatureGridSelector",(function(){return B})),n.d(t,"getEditingWidgetFilter",(function(){return U})),n.d(t,"dashBoardDependenciesSelector",(function(){return G})),n.d(t,"dependenciesSelector",(function(){return H})),n.d(t,"widgetsConfig",(function(){return W}));var r=n("./MapStore2/node_modules/lodash/lodash.js"),o=n("./MapStore2/web/client/selectors/map.js"),i=n("./MapStore2/web/client/selectors/layers.js"),a=n("./MapStore2/web/client/selectors/router.js"),c=n("./MapStore2/web/client/actions/widgets.js"),l=n("./MapStore2/web/client/utils/WidgetsUtils.js"),s=n("./MapStore2/web/client/selectors/dashboard.js"),u=n("./node_modules/reselect/es/index.js"),p=n("./MapStore2/web/client/utils/ReselectUtils.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){return Object(r.get)(e,"widgets.builder.settings")},b=function(e){return Object(r.get)(e,"widgets.dependencies")||{}},y=function(e){return Object.keys(b(e)).map((function(t){return b(e)[t]}))},v=function(e){return Object(r.get)(e,"widgets.builder.editor")},h=Object(u.createSelector)(v,i.getSelectedLayer,(function(e){return Object(s.isDashboardAvailable)(e)&&Object(s.isDashboardEditing)(e)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return t||!r&&n})),O=function(e){return Object(r.get)(e,"widgets.containers[".concat(c.DEFAULT_TARGET,"].widgets"))},j=function(e){return Object(r.get)(e,"widgets.containers[".concat(c.DEFAULT_TARGET,"].collapsed"))},w=Object(u.createSelector)(O,j,(function(e,t){return e&&t?e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id;return!t[n]})):e})),S=function(e,t){return Object(u.createSelector)(w,(function(n){var o=Object(r.find)(n,{id:e});return o&&o.quickFilters&&o.options&&Object(r.find)(o.options.propertyName,(function(e){return e===t}))&&o.quickFilters[t]||{}}))},E=Object(u.createSelector)(j,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),A=function(e){return(O(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"map"===t}))},P=function(e){return(O(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"table"===t}))},x=Object(u.createSelector)(A,P,o.mapSelector,a.pathnameSelector,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0;return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat(Object(r.castArray)(n).map((function(){return"map"}))).concat(Object(r.castArray)(t).filter((function(){return-1===o.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),C=Object(u.createSelector)(A,P,o.mapSelector,a.pathnameSelector,v,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=i&&"map"!==i.widgetType?i&&i.layer||{}:i&&i.map&&i.map.layers||[];return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat(Object(r.castArray)(n).map((function(){return n?"map":null}))).filter((function(e){return e})).concat(Object(r.castArray)(t).filter((function(){return-1===o.indexOf("viewer")})).filter((function(e){return Object(r.isArray)(a)||a.name===e.layer.name})).filter((function(e){return i&&i.id!==e.id})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),T=function(e){return Object(r.get)(g(e),"".concat(c.DEPENDENCY_SELECTOR_KEY))},M=function(e){return Object(r.get)(T(e),"active")},I=Object(u.createSelector)(O,(function(e){return Object(l.getWidgetsGroups)(e)})),k=function(e){return Object(r.get)(e,"widgets.containers[".concat(c.DEFAULT_TARGET,"].layouts"))},D=function(e){return Object(r.get)(e,"widgets.containers[".concat(c.DEFAULT_TARGET,"].layout"))},N=function(e){return Object(r.get)(e,"widgets.containers[".concat(c.DEFAULT_TARGET,"].widgets"))},_=function(e){return Object(r.get)(e,"widgets.tray")},R=function(e){return(N(e)||[]).length>0},L=function(e){return Object(r.get)(e,"widgets.containers[".concat(c.DEFAULT_TARGET,"].layouts"))},F=function(e){return Object(r.get)(v(e),"layer")},B=function(e){return Object(r.get)(e,"widgets.builder.editor.returnToFeatureGrid",!1)},U=function(e){return Object(r.get)(v(e),"filter")},G=function(){return{}},H=Object(p.createShallowSelector)(b,y,(function(e){return y(e).map((function(t){return 0===t.indexOf("map.")?Object(r.get)(Object(o.mapSelector)(e),t.slice(4)):t.match(c.WIDGETS_REGEX)?Object(l.getWidgetDependency)(t,O(e)):Object(r.get)(e,t)}))}),(function(e,t,n){return t.reduce((function(t,r,o){return f(f({},t),{},m({},Object.keys(e)[o],n[o]))}),{})})),W=Object(u.createStructuredSelector)({widgets:O,layouts:k})},"./MapStore2/web/client/utils/CoordinatesUtils.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=n("./node_modules/node-geo-distance/index.js"),p=n("./MapStore2/web/client/libs/proj4.js").default,d=p,f=n("./MapStore2/web/client/libs/ajax.js"),m=n("./node_modules/object-assign/index.js"),g=n("./MapStore2/node_modules/lodash/lodash.js"),b=g.isArray,y=g.isObject,v=g.isFunction,h=g.flattenDeep,O=g.chunk,j=g.cloneDeep,w=g.isNumber,S=g.slice,E=g.head,A=g.last,P=n("./node_modules/@turf/line-intersect/index.js"),x=n("./node_modules/@turf/polygon-to-linestring/index.js"),C=n("./node_modules/@turf/great-circle/main.es.js").default,T=n("./node_modules/turf-point/index.js"),M=n("./node_modules/@turf/bbox-polygon/main.es.js").default,I=n("./node_modules/@turf/boolean-overlap/main.es.js").default,k=n("./node_modules/@turf/boolean-contains/main.es.js").default,D={vincenty:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],o=e[n+1],i=c(r,2),a=i[0],l=i[1],s=c(o,2),p=s[0],d=s[1];t+=parseFloat(u.vincentySync({longitude:a,latitude:l},{longitude:p,latitude:d}))}return t},haversine:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],o=e[n+1],i=c(r,2),a=i[0],l=i[1],s=c(o,2),p=s[0],d=s[1];t+=parseFloat(u.haversineSync({longitude:a,latitude:l},{longitude:p,latitude:d}))}return t}};function N(e,t){return(n=e).length>=2&&"number"==typeof n[0]&&"number"==typeof n[1]?t(e):e.map((function(e){return N(e,t)}));var n}var _=function(e){return"http://spatialreference.org/ref/epsg/".concat(e,"/proj4/")};function R(e,t,n){if(null===e)return e;var r=j(e);return"Feature"===e.type?r.geometry=R(e.geometry,t,n):"FeatureCollection"===e.type?r.features=r.features.map((function(e){return R(e,t,n)})):"GeometryCollection"===e.type?r.geometries=r.geometries.map((function(e){return R(e,t,n)})):t&&t(r),n&&n(r),r}function L(e){return"string"==typeof e||e instanceof String?p.defs(e)?new p.Proj(e):null:e}var F={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"},B=function(e){return{x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}},U=function(e){var t=e;return w(e.x)||(t.x=parseFloat(e.x)),w(e.y)||(t.y=parseFloat(e.y)),t},G=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t&&p.defs(t)?new p.Proj(t):null,i=n&&p.defs(n)?new p.Proj(n):null;if(o&&i){var a=b(e)?p.toPoint(e):p.toPoint([e.x,e.y]),c=m({},t===n?U(a):p.transform(o,i,U(a)),{srs:n});return r?B(c):c}return null},H=["EPSG:900913","EPSG:4326","EPSG:3857"],W=function(e,t,n){return"EPSG:4326"===t?e:n?e.map((function(e){return[G([e[0],e[1]],"EPSG:4326",t),G([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(a(e),[t.x,t.y])}),[])})):[G([e[0],e[1]],"EPSG:4326",t),G([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(a(e),[t.x,t.y])}),[])},z=function(e){return e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:M(e):null},V=function(e,t){var n=function(e,t){var n="EPSG:4326"!==t?[G([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),G([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce((function(e,t){return[].concat(a(e),[t.x,t.y])}),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)],r=!1;return"EPSG:4326"===t?r=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(r=Math.abs(e.maxx-e.minx)>=40075016.68557849),r?[0,n[1],360,n[3]]:[(n[0]+180)%360,n[1],(n[2]+180)%360,n[3]].map((function(e,t){return t%2==0&&e<0?360+e:e}))}(e,t),r=n[2]<n[0];return r?{extent:W([[-180,n[1],n[2]-180,n[3]],[n[0]-180,n[1],180,n[3]]],t,r),isIDL:r}:{extent:W([n[0]-180,n[1],n[2]-180,n[3]],t,r),isIDL:r}},Q={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},q={setCrsLabels:function(e){F=m({},F,e)},getUnits:function(e){return new p.Proj(e).units||"degrees"},reproject:G,getProjectedBBox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=t*r[0]/2,i=t*r[1]/2,a=Math.cos(n),c=Math.sin(n),l=o*a,s=o*c,u=i*a,p=i*c,d=e.x,f=e.y,m=d-l+p,g=d-l-p,b=d+l-p,y=d+l+p,v=f-s-u,h=f-s+u,O=f+s+u,j=f+s-u,w=q.createBBox(Math.min(m,g,b,y),Math.min(v,h,O,j),Math.max(m,g,b,y),Math.max(v,h,O,j));return w},createBBox:function(e,t,n,r){return{minx:e,miny:t,maxx:n,maxy:r}},reprojectGeoJson:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326",r=t,o=n;"string"==typeof r&&(r=L(r)),"string"==typeof o&&(o=L(o));var i=d(r,o);return R(e,(function(e){e.crs&&delete e.crs,e.coordinates=N(e.coordinates,(function(e){var t=c(e,2),n=t[0],r=t[1];return i.forward([n,r])}))}),(function(e){var t,n;e.bbox&&(e.bbox=(t=[Number.MAX_VALUE,Number.MAX_VALUE],n=[-Number.MAX_VALUE,-Number.MAX_VALUE],R(e,(function(e){N(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),n[0]=Math.max(n[0],e[0]),n[1]=Math.max(n[1],e[1])}))})),[t[0],t[1],n[0],n[1]]))}))},lineIntersectPolygon:function(e,t){var n=x(t).features[0];return 0!==P(e,n).features.length},normalizePoint:B,normalizeLng:function(e){var t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},reprojectBbox:function(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r=b(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};var i=[];for(var a in r)if(r.hasOwnProperty(a)){var c=q.reproject(r[a],t,n,o);if(!c)return null;var l=c.x,s=c.y;i.push(l),i.push(s)}return i},getCompatibleSRS:function(e,t){return"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e},getEquivalentSRS:function(e){return"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e]},getEPSGCode:function(e){return-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e},normalizeSRS:function(e,t){var n="EPSG:900913"===e?"EPSG:3857":e;return t&&!t[n]?q.getCompatibleSRS(n,t):n},isAllowedSRS:function(e,t){return t[q.getCompatibleSRS(e,t)]},getAvailableCRS:function(){var e={};for(var t in p.defs)p.defs.hasOwnProperty(t)&&(e[t]={label:F[t]||t});return e},filterCRSList:function(e,t,n,r){var a=Object.keys(e).reduce((function(n,r){return m({},-1===t.indexOf(r)?n:o(o({},n),{},i({},r,e[r])))}),{}),c=r.map((function(e){return e.code})),l=Object.keys(n).reduce((function(e,t){return m({},-1===c.indexOf(t)?e:o(o({},e),{},i({},t,n[t])))}),{});return m({},a,l)},calculateAzimuth:function(e,t,n){var r=q.reproject(e,n,"EPSG:4326"),o=q.reproject(t,n,"EPSG:4326"),i=r.x*Math.PI/180,a=r.y*Math.PI/180,c=o.x*Math.PI/180,l=o.y*Math.PI/180,s=c-i,u=Math.sin(s)*Math.cos(l),p=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(s);return(180*Math.atan2(u,p)/Math.PI+360)%360},calculateDistance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(D).indexOf(t)?D[t](e):0},FORMULAS:D,extendExtent:function(e,t){var n=e.slice();return t[0]<e[0]&&(n[0]=t[0]),t[2]>e[2]&&(n[2]=t[2]),t[1]<e[1]&&(n[1]=t[1]),t[3]>e[3]&&(n[3]=t[3]),n},getGeoJSONExtent:function(e){var t=this,n=[1/0,1/0,-1/0,-1/0],r=function(e,n){var r=q.getGeoJSONExtent(n);return t.isValidExtent(r)?t.extendExtent(r,e):r};if(e.coordinates){if("Point"===e.type){var o=e.coordinates;n[0]=o[0]-.01*o[0],n[1]=o[1]-.01*o[1],n[2]=o[0]+.01*o[0],n[3]=o[1]+.01*o[1]}return O(h(e.coordinates),2).reduce((function(e,t){return[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]}),n)}if("GeometryCollection"===e.type)return e.geometries.reduce(r,n);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(r,n);if("Feature"===e.type&&e.geometry)return q.getGeoJSONExtent(e.geometry)}return n},isValidExtent:function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},calculateCircleCoordinates:function(e,t,n,r){var o,i,a,c=Math.PI*(1/n-.5);r&&(c+=r/180*Math.PI);for(var l=[[]],s=0;s<n;s++)o=c+2*s*Math.PI/n,i=e.x+t*Math.cos(o),a=e.y+t*Math.sin(o),l[0].push([i,a]);return l[0].push(l[0][0]),l},transformLineToArcs:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},n=[],r=0;r<e.length-1;++r){var o=e[r],i=e[r+1],c=T(o),l=T(i);if(o[0]!==i[0]||o[1]!==i[1]){var s=C(c,l,t);n=[].concat(a(n),a(s.geometry.coordinates))}}return n},transformArcsToLine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[E(e),A(e)]:e.length>t?[E(e)].concat(q.transformArcsToLine(S(e,t))):[]},coordsOLtoLeaflet:function(e){var t=e.coordinates;switch(e.type){case"Polygon":return t.map((function(e){return e.map((function(e){return e.reverse()}))}));case"LineString":return t.map((function(e){return e.reverse()}));case"Point":return t.reverse();default:return[]}},mergeToPolyGeom:function(e){return 1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((function(e){return e.geometry}))}},getViewportGeometry:function(e,t){if(E(H.filter((function(e){return e===t})))){var n=V(e,t),r=n.extent,o=n.isIDL,i=(o?r:[r]).map((function(e){var t=[e[0],e[1]],n=[e[2],e[3]];return[[t,[t[0],n[1]],n,[n[0],t[1]],t]]}));if(o){var a=r[1][0]+(Math.abs(r[0][0]-r[0][2])+Math.abs(r[1][0]-r[1][2]))/2;return{type:"MultiPolygon",radius:0,projection:t,coordinates:i,extent:r,center:[a=a>180?a-360:a,(r[0][1]+r[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:i[0],extent:r,center:[(r[0]+r[2])/2,(r[1]+r[3])/2]}}var c=[e.minx,e.miny,e.maxx,e.maxy],l=[c[0],c[1]],s=[c[2],c[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[l,[l[0],s[1]],s,[s[0],l[1]],l]],extent:c,center:[(c[0]+c[2])/2,(c[1]+c[3])/2]}},getProjUrl:_,getExtentFromViewport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bounds,n=e.crs,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!t||!n)return null;var o=q.getViewportGeometry(t,n),i=o.extent;if(4===i.length)return q.reprojectBbox(i,n,r);var a=i.map((function(e){return e[2]-e[0]})),l=c(a,2),s=l[0],u=l[1];return s>u?q.reprojectBbox(i[0],n,r):q.reprojectBbox(i[1],n,r)},fetchProjRemotely:function(e,t){var n=2===e.split(":").length?e.split(":")[1]:"3857";return f.get(t||_(n),null,{timeout:2e3})},parseURN:function(e){var t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e,n=t&&A(t.split(":"));return"WGS 1984"===n||"WGS84"===n?"EPSG:4326":n?"EPSG:"+n:null},determineCrs:L,parseString:function(e){var t=e.split(" "),n=parseFloat(t[0]),r=parseFloat(t[1]);return!isNaN(n)&&!isNaN(r)&&{x:n,y:r}||null},getWMSBoundingBox:function(e,t){var n=t||"EPSG:3857",r=e&&b(e)&&E(e.filter((function(e){return e&&e.$&&e.$.SRS===n&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny})).map((function(e){return e&&e.$&&q.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],n,"EPSG:4326")})));return b(r)&&{minx:r[0],miny:r[1],maxx:r[2],maxy:r[3]}||null},isSRSAllowed:function(e){return!!p.defs(e)},getNormalizedLatLon:function(e){var t=e.lng,n=void 0===t?1:t,r=e.lat;return{lat:void 0===r?1:r,lng:q.normalizeLng(n)}},isInsideVisibleArea:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=q.getNormalizedLatLon(e),c=G([i.lng,i.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;var l=q.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),s=o({left:0,right:0,top:0,bottom:0},n),u={minx:l[0]+s.left*r,miny:l[1]+s.bottom*r,maxx:l[2]-s.right*r,maxy:l[3]-s.top*r},p=q.getViewportGeometry(u,t.projection),d=4===p.extent.length?[a(p.extent)]:a(p.extent);return E(d.map((function(e){return c.x>=e[0]&&c.y>=e[1]&&c.x<=e[2]&&c.y<=e[3]})).filter((function(e){return e})))||!1},centerToVisibleArea:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=q.getNormalizedLatLon(e),a=G([i.lng,i.lat],"EPSG:4326",t.projection),c=o({left:0,right:0,top:0,bottom:0},n),l={width:(t.size.width-c.right-c.left)*r,height:(t.size.height-c.top-c.bottom)*r},s={minx:a.x-l.width/2-c.left*r,miny:a.y-l.height/2-c.bottom*r,maxx:a.x+l.width/2+c.right*r,maxy:a.y+l.height/2+c.top*r},u=q.getViewportGeometry(s,t.projection);if(4===u.extent.length)return{pos:G([u.extent[0]+t.size.width/2*r,u.extent[1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(u.extent[0][2]-u.extent[0][0])>Math.abs(u.extent[1][2]-u.extent[1][0])){var p=G([u.extent[0][2]-t.size.width/2*r,u.extent[0][3]-t.size.height/2*r],t.projection,"EPSG:4326"),d=o(o({},p),{},{x:p.x+(i.lng>p.x?360:0)});return{pos:d,zoom:t.zoom,crs:"EPSG:4326"}}return{pos:G([u.extent[1][0]+t.size.width/2*r,u.extent[1][1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},calculateCircleRadiusFromPixel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,i=b(n)?n:[n.x,n.y];if(w(i[0])&&!isNaN(i[0])&&w(i[1])&&!isNaN(i[1])&&w(t.x)&&!isNaN(t.x)&&w(t.y)&&!isNaN(t.y)){var a=v(e)?e([t.x,t.y>=r?t.y-r:t.y+r]):null,c=a&&(b(a)?a:[a.x,a.y]);return b(c)?Math.sqrt((i[0]-c[0])*(i[0]-c[0])+(i[1]-c[1])*(i[1]-c[1])):o}return o},roundCoord:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roundingBehaviour,n=void 0===t?"round":t,r=e.value,o=void 0===r?0:r,i=e.maximumFractionDigits,a=void 0===i?0:i;return 0===a&&Math[n]?Math[n](o):o},midpoint:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=b(e)?{x:e[0],y:e[1]}:e,o=b(t)?{x:t[0],y:t[1]}:t,i={x:.5*(r.x+o.x),y:.5*(r.y+o.y)};return n?[i.x,i.y]:i},pointObjectToArray:function(e){return y(e)&&w(e.x)&&w(e.y)?[e.x,e.y]:e},getExtentFromNormalized:V,getPolygonFromExtent:z,isPointInsideExtent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return k(z(t),T([e.lng,e.lat]))},isBboxCompatible:function(e,t){return I(e,t)||k(e,t)||k(t,e)},extractCrsFromURN:function(e){if(e){var t=e.split(":");if(!("urn"!==t[0]||"ogc"!==t[1]&&"x-ogc"!==t[1]||"def"!==t[2]||"crs"!==t[3]||!t[4]&&!t[6])){var n=t[4],r=t[6];return n?"".concat(n,":").concat(r):r}}return null},crsCodeTable:Q,makeNumericEPSG:function(e){if(!e||"EPSG:"!==e.slice(0,5))return null;var t=e.slice(5),n=parseInt(t,10);if(n>=1024&&n<=32767)return e;var r=t.replace(" ","").replace(":","").toLowerCase(),o=Q[r];return o>=1024&&o<=32767?"EPSG:".concat(o):null},makeBboxFromOWS:function(e,t){var n=[e[0],e[1]],r=[t[0],t[1]];if(n[1]>r[1]){var o=n;n=r,r=o}if(n[0]>r[0]){var i=n.slice(),a=r.slice();n=[a[0],i[1]],r=[i[0],a[1]]}return[n[0],n[1],r[0],r[1]]}};e.exports=q},"./MapStore2/web/client/utils/FeatureInfoUtils.js":function(e,t){var n=/^[\s\S]*<gml:featureMembers[^>]*>([\s\S]*)<\/gml:featureMembers>[\s\S]*$/i,r=/^[\s\S]*<body[^>]*>([\s\S]*)<\/body>[\s\S]*$/i,o=/(<style[\s\=\w\/\"]*>[^<]*<\/style>)/i;function i(e){if("string"==typeof e.response&&0!==e.response.indexOf("<?xml")){var t=e.response.match(r);return e.layerMetadata&&e.layerMetadata.regex?t&&t[1]&&t[1].match(e.layerMetadata.regex):t&&t[1]&&t[1].trim().length>0}return!1}function a(e){if("string"==typeof e.response&&-1!==e.response.indexOf("<?xml")){var t=e.response.match(n);return t&&t[1]&&t[1].trim().length>0}return!1}var c={HTML:{getValidResponses:function(e,t){return t?e.filter(i):e},getNoValidResponses:function(e){return e.filter((function(e){return!i(e)}))}},TEXT:{getValidResponses:function(e,t){var n=e.filter((function(e){var t=e.response;return""!==t&&"string"==typeof t&&0!==t.indexOf("<?xml")}));return t&&(n=n.filter((function(e){var t=e.response;return"string"==typeof t&&0!==t.indexOf("no features were found")}))),n},getNoValidResponses:function(e){return e.filter((function(e){return""===e.response||"string"==typeof e.response&&0===e.response.indexOf("no features were found")||e.response&&"string"==typeof e.response&&0===e.response.indexOf("<?xml")}))}},JSON:{getValidResponses:function(e,t){var n=e.filter((function(e){var t=e.response;return t&&t.features}));return t&&(n=n.filter((function(e){var n=e.response;return t&&n.features.length}))),n},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}},PROPERTIES:{getValidResponses:function(e,t){var n=e.filter((function(e){var t=e.response;return t&&t.features}));return t&&(n=n.filter((function(e){var n=e.response;return t&&n.features.length}))),n},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}},GML3:{getValidResponses:function(e){return e.filter(a)},getNoValidResponses:function(e){return e.filter((function(e){return!a(e)}))}},TEMPLATE:{getValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&e.response.features.length}))},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}}},l={HTML:{getBody:function(e){return e.replace(r,"$1").trim()},getStyle:function(e){var t=o.exec(e),n=t&&2===t.length?o.exec(e)[1]:"";return n=n.replace(/body[,]+/g,"")},getBodyWithStyle:function(e){return l.HTML.getStyle(e)+l.HTML.getBody(e)}}};e.exports={INFO_FORMATS:{TEXT:"text/plain",HTML:"text/html",JSONP:"text/javascript",PROPERTIES:"application/json",JSON:"application/json",GML2:"application/vnd.ogc.gml",GML3:"application/vnd.ogc.gml/3.1.1",TEMPLATE:"application/json"},INFO_FORMATS_BY_MIME_TYPE:{"text/plain":"TEXT","text/html":"HTML","text/javascript":"JSONP","application/json":"JSON","application/vnd.ogc.gml":"GML2","application/vnd.ogc.gml/3.1.1":"GML3"},Validator:c,Parser:l,parseXMLResponse:a,parseHTMLResponse:i}},"./MapStore2/web/client/utils/FilterUtils.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./MapStore2/web/client/utils/ogc/GML/index.js"),s=l.processOGCGeometry,u=l.pointElement,p=l.polygonElement,d=l.lineStringElement,f=l.closePolygon,m=n("./MapStore2/web/client/utils/ogc/WFS/base.js").wfsToGmlVersion,g=n("./MapStore2/web/client/utils/ogc/Filter/operators.js"),b=g.ogcComparisonOperators,y=g.ogcLogicalOperators,v=g.ogcSpatialOperators,h=n("./MapStore2/web/client/utils/ogc/Filter/CQL/parser.js").read,O=n("./MapStore2/web/client/utils/ogc/Filter/fromObject.js"),j=n("./MapStore2/web/client/utils/ogc/Filter/FilterBuilder.js"),w=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),S=n("./MapStore2/node_modules/lodash/lodash.js"),E=S.get,A=S.isNil,P=S.isUndefined,x=S.isArray,C=S.find,T=S.findIndex,M=function(e){return e&&e.replace?e.replace(/\'/g,"''"):e},I=function(e,t){return!A(e)&&"isNull"!==t||!P(e)&&"isNull"===t},k=function(e){return'"'+e+'"'},D=function(e){return e?"1.0"===e?"1.0.0":"1.1"===e?"1.1.0":e:"2.0"},N={ogc:{startTag:"<ogc:PropertyName>",endTag:"</ogc:PropertyName>"},fes:{startTag:"<fes:ValueReference>",endTag:"</fes:ValueReference>"}},_=function(e,t,n,r){var o;if("><"===t){if(n.startDate&&n.endDate){var i=n.startDate.toISOString?n.startDate.toISOString():n.startDate,a=n.endDate.toISOString?n.endDate.toISOString():n.endDate;o=b[t](r,N[r].startTag+e+N[r].endTag+"<"+r+":LowerBoundary><"+r+":Literal>"+i+"</"+r+":Literal></"+r+":LowerBoundary><"+r+":UpperBoundary><"+r+":Literal>"+a+"</"+r+":Literal></"+r+":UpperBoundary>")}}else if(n.startDate){var c=n.startDate.toISOString?n.startDate.toISOString():n.startDate;o=b[t](r,N[r].startTag+e+N[r].endTag+"<"+r+":Literal>"+c+"</"+r+":Literal>")}return o},R=function(e,t,n,r){var o;return A(n)||(o=b[t](r,N[r].startTag+e+N[r].endTag+"<"+r+":Literal>"+n+"</"+r+":Literal>")),o},L=function(e,t,n,r){var o;return I(n,t)&&(o="isNull"===t?b[t](r,N[r].startTag+e+N[r].endTag):"="===t?b[t](r,N[r].startTag+e+N[r].endTag+"<"+r+":Literal>"+n+"</"+r+":Literal>"):b[t](r,N[r].startTag+e+N[r].endTag+"<"+r+":Literal>*"+n+"*</"+r+":Literal>")),o},F=function(e,t,n,r){var o="";return I(n,t)&&"="===t&&""!==n&&(o=b[t](r,N[r].startTag+e+N[r].endTag+"<"+r+":Literal>"+n+"</"+r+":Literal>")),o},B=function(e,t,n,r){var o;if("><"===t)A(n)||null===n.lowBound||void 0===n.lowBound||null!==n.upBound&&void 0!==n.upBound?A(n)||null===n.upBound||void 0===n.upBound||null!==n.lowBound&&void 0!==n.lowBound?A(n)||null===n.upBound||void 0===n.upBound||null===n.lowBound||void 0===n.lowBound||(o=b[t](r,N[r].startTag+e+N[r].endTag+"<"+r+":LowerBoundary><"+r+":Literal>"+n.lowBound+"</"+r+":Literal></"+r+":LowerBoundary><"+r+":UpperBoundary><"+r+":Literal>"+n.upBound+"</"+r+":Literal></"+r+":UpperBoundary>")):o=b["<="](r,N[r].startTag+e+N[r].endTag+"<"+r+":Literal>"+n.upBound+"</"+r+":Literal>"):o=b[">="](r,N[r].startTag+e+N[r].endTag+"<"+r+":Literal>"+n.lowBound+"</"+r+":Literal>");else{var i=A(n)||null===n.lowBound||void 0===n.lowBound?n:n.lowBound;A(i)||(o=b[t](r,N[r].startTag+e+N[r].endTag+"<"+r+":Literal>"+i+"</"+r+":Literal>"))}return o},U=function(e,t){var n="";switch(e.type){case"date":n=_(e.attribute,e.operator,e.values,t);break;case"number":n=B(e.attribute,e.operator,e.values,t);break;case"string":n=L(e.attribute,e.operator,e.values,t);break;case"boolean":n=F(e.attribute,e.operator,e.values,t);break;case"list":if(e.values&&e.values.length>0){n=e.values.reduce((function(n,r){var o=null===r||"null"===r?"isNull":"=";return n+L(e.attribute,o,r,t)}),""),n=y.OR(t,n)}}return n},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeName,n=e.geometryName,r=e.cqlFilter,o=void 0===r?"INCLUDE":r;return"queryCollection('".concat(t,"', '").concat(n,"','").concat(M(o),"')")},H=function(e){return"collectGeometries(".concat(e,")")},W={checkOperatorValidity:I,setupCrossLayerFilterDefaults:function(e){if(!e||!E(e,"collectGeometries.queryCollection"))return null;if(E(e,"collectGeometries.queryCollection")){var t=(E(e,"collectGeometries.queryCollection.filterFields")||[]).filter((function(e){return I(e.value,e.operator)})),n=E(e,"collectGeometries.queryCollection.groupFields")||[{id:1,index:0,logic:"OR"}];return a(a({},e),{},{collectGeometries:a(a({},e.collectGeometries),{},{queryCollection:a(a({},e.collectGeometries.queryCollection),{},{filterFields:t,groupFields:n})})})}return null},toOGCFilterParts:function(e,t,n){var r,o,i,c,l,s,u,p=this,d=[];if(e.filterFields&&e.filterFields.length>0)""!==(r=e.groupFields&&e.groupFields.length>0?W.processOGCFilterGroup(e.groupFields[0],e,n):W.processOGCFilterFields(null,e,n))&&d.push(r);else if(e.simpleFilterFields&&e.simpleFilterFields.length>0){var f=y.AND(n,e.simpleFilterFields.map((function(e){return U(e,n)})).join(""));d.push(f)}if(x(e.spatialField)?(c=C(e.spatialField,(function(e){return"BBOX"===e.operation})))||(i=e.spatialField):e.spatialField&&("BBOX"===e.spatialField.operation?c=e.spatialField:i=[e.spatialField]),c){if(x(c.geometry&&c.geometry.extent[0])){var g=c.geometry.extent.reduce((function(e,r){var o=Object.assign({},c);return c.geometry.extent=r,e+p.processOGCSpatialFilter(t,o,n)}),"");o=y.OR(n,g)}d.push(o)}else if(i&&(i=i.filter((function(e){return e&&e.geometry&&e.operation}))).length>0){var b=i.map((function(e){return p.processOGCSpatialFilter(t,e,n)})).join("");o=i.length>1?y[e.spatialFieldOperator||"AND"](n,b):b,d.push(o)}if(e.crossLayerFilter&&e.crossLayerFilter.operation){var v=a(a({},e.crossLayerFilter),{},{attribute:e.crossLayerFilter.attribute});Array.isArray()?v.forEach((function(e){return d.push(p.processOGCCrossLayerFilter(e,n))})):d.push(this.processOGCCrossLayerFilter(v,n))}return e.options&&e.options.cqlFilter&&d.push((l=e.options.cqlFilter,s={filterNS:n,wfsVersion:t,gmlVersion:m(t)},u=j(s),O(u)(h(l)))),d},toOGCFilter:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"EPSG:4326";try{r=t instanceof Object?t:JSON.parse(t)}catch(e){return e}var s=D(n||"2.0"),u="2.0"===s?"fes":"ogc",p=this.getGetFeatureBase(s,r.pagination,i,a,t&&t.options),d=this.toOGCFilterParts(r,s,u),f="";return d.length>0&&(f="<"+u+":Filter>",1===d.length?f+=d[0]:(f+="<"+u+":And>",d.forEach((function(e){f+=e})),f+="</"+u+":And>"),f+="</"+u+":Filter>"),p+="<wfs:Query ".concat("2.0"===s?"typeNames":"typeName",'="').concat(e,'" ').concat("native"!==l&&'srsName="'.concat(l,'"')||"",">"),p+=f,c&&(p+=c.map((function(e){return N[u].startTag+e+N[u].endTag})).join("")),o&&o.sortBy&&o.sortOrder&&(p+="<"+u+":SortBy><"+u+":SortProperty>"+N[u].startTag+o.sortBy+N[u].endTag+"<"+u+":SortOrder>"+o.sortOrder+"</"+u+":SortOrder></"+u+":SortProperty></"+u+":SortBy>"),p+="</wfs:Query></wfs:GetFeature>"},processOGCFilterGroup:function(e,t,n){var r=this,o=this.processOGCFilterFields(e,t,n),i=this.findSubGroups(e,t.groupFields);return i.length>0&&i.forEach((function(e){o+=r.processOGCFilterGroup(e,t,n)})),""!==o?y[e.logic](n,o):""},processOGCFilterFields:function(e,t,n){var r=e?t.filterFields.filter((function(t){return t.groupId===e.id&&I(t.value,t.operator)})):t.filterFields.filter((function(e){return I(e.value,e.operator)}));return r.length?r.reduce((function(e,t){var r;switch(t.type){case"date":case"date-time":case"time":r=_(t.attribute,t.operator,t.value,n);break;case"number":r=B(t.attribute,t.operator,t.value,n);break;case"string":r=L(t.attribute,t.operator,t.value,n);break;case"boolean":r=F(t.attribute,t.operator,t.value,n);break;case"list":r=R(t.attribute,t.operator,t.value,n)}return"isNull"===t.operator&&(r=L(t.attribute,t.operator,t.operator,n)),r&&e.push(r),e}),[]).join(""):""},processOGCSimpleFilterField:U,getGmlPointElement:function(e,t,n){return u(e,t,m(n))},getGmlPolygonElement:function(e,t,n){return p(e,t,m(n))},getGmlLineStringElement:function(e,t,n){return d(e,t,m(n))},processOGCGeometry:function(e,t){return s(m(e),t)},processOGCSpatialFilter:function(e,t,n){if(t.collectGeometries)return W.processOGCCrossLayerFilter(t);var r=N[n].startTag+t.attribute+N[n].endTag;switch(t.operation){case"INTERSECTS":case"DWITHIN":case"WITHIN":case"CONTAINS":r+=s(m(e),t.geometry),"DWITHIN"===t.operation&&(r+="<"+n+':Distance units="m">'+(t.geometry.distance||0)+"</"+n+":Distance>");break;case"BBOX":var o=t.geometry.extent[0]+" "+t.geometry.extent[1],i=t.geometry.extent[2]+" "+t.geometry.extent[3];r+='<gml:Envelope srsName="'+t.geometry.projection+'"><gml:lowerCorner>'+o+"</gml:lowerCorner><gml:upperCorner>"+i+"</gml:upperCorner></gml:Envelope>"}return v[t.operation](n,r)},getGetFeatureBase:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=D(e),a="<wfs:GetFeature ";switch(a+=r?'outputFormat="'+r+'" ':"",a+=t&&(t.startIndex||0===t.startIndex)?'startIndex="'+t.startIndex+'" ':"",a+=o.viewParams?' viewParams="'.concat(o.viewParams,'" '):"",i){case"1.0.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=n?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" outputFormat="GML2" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd"')+">";break;case"1.1.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=n?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"')+">";break;default:a+=t&&t.maxFeatures?'count="'+t.maxFeatures+'" ':"",a=n&&!t?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')+">"}return a},getCrossLayerCqlFilter:function(e){return E(e,"collectGeometries.queryCollection.cqlFilter")||(E(e,"collectGeometries.queryCollection.filterFields")||[]).length>0&&(E(e,"collectGeometries.queryCollection.groupFields")||[]).length>0&&W.toCQLFilter(e.collectGeometries.queryCollection)||"INCLUDE"},processOGCCrossLayerFilter:function(e,t){var n=t||"ogc",r=N[n].startTag+e.attribute+N[n].endTag;if(e.collectGeometries){var o=W.getCrossLayerCqlFilter(e);r+='<ogc:Function name="collectGeometries"><ogc:Function name="queryCollection">'+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.typeName,"</ogc:Literal>")+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.geometryName,"</ogc:Literal>")+"<ogc:Literal><![CDATA[".concat(o,"]]></ogc:Literal>")+"</ogc:Function></ogc:Function>"}return"DWITHIN"===e.operation&&(r+="<"+n+':Distance units="m">'+(e.distance||0)+"</"+n+":Distance>"),v[e.operation](n,r)},toCQLFilter:function(e){var t,n=this;try{t=e instanceof Object?e:JSON.parse(e)}catch(e){return e}var r,o,i=[];if(t.filterFields&&t.filterFields.length>0)(r=this.processCQLFilterGroup(t.groupFields[0],t))&&i.push(r);else if(t.simpleFilterFields&&t.simpleFilterFields.length>0){var a=t.simpleFilterFields.reduce((function(e,t){var r=e,o=n.processCQLSimpleFilterField(t);return!1!==o&&(r=e.length>0?e+" AND ("+o+")":"("+o+")"),r}),"");a=a.length>0?a:"INCLUDE",i.push(a)}if(t.spatialField&&(o=this.processCQLSpatialFilter(t))&&i.push(o),t.crossLayerFilter){var c=t.crossLayerFilter,l=c.operation,s=c.attribute,u=c.collectGeometries&&c.collectGeometries.queryCollection;if(l&&s&&u){var p=u.typeName,d=u.geometryName,f=W.getCrossLayerCqlFilter(c),m=H(G({typeName:p,geometryName:d,cqlFilter:f}));i.push("".concat(l,"(").concat(s,",").concat(m,")"))}}return i.length?"("+(i.length>1?i.join(") AND ("):i[0])+")":null},processCQLFilterGroup:function(e,t){var n=this,r="NOR"===e.logic?a(a({},e),{},{logic:"AND",negateAll:!0}):e,o=this.processCQLFilterFields(r,t),i=this.findSubGroups(r,t.groupFields);if(i.length>0){var c=i.map((function(e){return(r.negateAll?"NOT (":"(")+n.processCQLFilterGroup(e,t)+")"})).join(" "+r.logic+" ");return o?[o,c].join(" "+r.logic+" "):c}return o},getCQLGeometryElement:function(e,t){var n=t+"(";switch(t){case"Point":n+=e.join(" ");break;case"MultiPoint":e.forEach((function(t,r){n+=t.join(" "),n+=r<e.length-1?", ":""}));break;case"Polygon":e.forEach((function(t,r){n+="(";var o=f(t).map((function(e){return e[0]+" "+e[1]}));n+=o.join(", "),n+=")",n+=r<e.length-1?", ":""}));break;case"MultiPolygon":e.forEach((function(t,r){n+="(",t.forEach((function(e,r){n+="(";var o=f(e).map((function(e){return e[0]+" "+e[1]}));n+=o.join(", "),n+=")",n+=r<t.length-1?", ":""})),n+=")",n+=r<e.length-1?", ":""}))}return n+=")"},processCQLSpatialFilter:function(e){var t=this,n=(x(e.spatialField)?e.spatialField:[e.spatialField]).filter((function(e){return e&&e.geometry&&e.operation})),r="";return n.forEach((function(o,i){if(r+=o.operation+'("'+o.attribute+'",',o.collectGeometries&&o.collectGeometries.queryCollection)r+=H(G(o.collectGeometries.queryCollection));else{var a=o.geometry.projection||"";a=2===a.split(":").length?"SRID="+a.split(":")[1]+";":"",r+=a+t.getCQLGeometryElement(o.geometry.coordinates,o.geometry.type)}r+=")",i<n.length-1&&(r+=" ".concat(e.spatialFieldOperator||"AND"," "))})),r},cqlDateField:function(e,t,n){var r;"><"===t?n.startDate&&n.endDate&&(r="("+e+">='"+(n.startDate.toISOString?n.startDate.toISOString():n.startDate)+"' AND "+e+"<='"+(n.endDate.toISOString?n.endDate.toISOString():n.endDate)+"')"):n.startDate&&(r=e+t+"'"+(n.startDate.toISOString?n.startDate.toISOString():n.startDate)+"'");return r},escapeCQLStrings:M,cqlStringField:function(e,t,n){var r,o=k(e);if(!A(n))if("isNull"===t)r="isNull("+o+")=true";else if("="===t){r=o+t+("'"+M(n)+"'")}else if("ilike"===t){r="strToLowerCase("+o+") LIKE "+("'%"+M(n).toLowerCase()+"%'")}else{r=o+" LIKE "+("'%"+M(n)+"%'")}return r},cqlBooleanField:function(e,t,n){var r="";A(n)||""===n||"="===t&&(r='"'+e+'"'+t+("'"+n+"'"));return r},cqlNumberField:function(e,t,n){var r,o=k(e);if("><"===t)A(n)||null===n.lowBound||void 0===n.lowBound||null!==n.upBound&&void 0!==n.upBound?A(n)||null===n.upBound||void 0===n.upBound||null!==n.lowBound&&void 0!==n.lowBound?A(n)||null===n.upBound||void 0===n.upBound||null===n.lowBound||void 0===n.lowBound||(r="("+o+">='"+n.lowBound+"' AND "+o+"<='"+n.upBound+"')"):r="("+o+"<='"+n.upBound+"')":r="("+o+">='"+n.lowBound+"')";else{var i=A(n)||null===n.lowBound||void 0===n.lowBound?n:n.lowBound;A(i)||(r=o+" "+t+" '"+i+"'")}return r},findSubGroups:function(e,t){return t.filter((function(t){return t.groupId===e.id}))},cqlListField:function(e,t,n){return this.cqlStringField(e,t,n)},processCQLFilterFields:function(e,t){var n=this,r=t.filterFields.filter((function(t){return t.groupId===e.id})),o=[];return r&&(r.forEach((function(t){var r;switch(t.type){case"date":case"time":case"date-time":r=n.cqlDateField(t.attribute,t.operator,t.value);break;case"number":r=n.cqlNumberField(t.attribute,t.operator,t.value);break;case"string":r=n.cqlStringField(t.attribute,t.operator,t.value);break;case"boolean":r=n.cqlBooleanField(t.attribute,t.operator,t.value);break;case"list":r=n.cqlListField(t.attribute,t.operator,t.value)}r&&o.push(e.negateAll?"NOT ("+r+")":r)})),o=o.join(" "+e.logic+" ")),o},processCQLSimpleFilterField:function(e){var t=!1;switch(e.type){case"date":t=this.cqlDateField(e.attribute,e.operator,e.values);break;case"number":t=this.cqlNumberField(e.attribute,e.operator,e.values);break;case"string":t=this.cqlStringField(e.attribute,e.operator,e.values);break;case"boolean":t=this.cqlBooleanField(e.attribute,e.operator,e.values);break;case"list":if(e.values.length!==e.optionsValues.length){var n=!1,r=e.values.reduce((function(e,t){return null===t||"null"===t?n=!0:e.push("'"+t+"'"),e}),[]);t=r.length>0?e.attribute+" IN("+r.join(",")+")":t,n&&(t=t?t+" OR isNull("+e.attribute+")=true":"isNull("+e.attribute+")=true")}}return!!(t&&t.length>0)&&t},getOgcAllPropertyValue:function(e,t){return'<wfs:GetPropertyValue service="WFS" valueReference=\''.concat(t,'\'\n                    version="2.0" xmlns:fes="http://www.opengis.net/fes/2.0"\n                    xmlns:gml="http://www.opengis.net/gml/3.2"\n                    xmlns:wfs="http://www.opengis.net/wfs/2.0"\n                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n                    xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd">\n                        <wfs:Query typeNames="').concat(e,'"/>\n                </wfs:GetPropertyValue>')},getSLD:function(e,t,n){var r=this.toOGCFilter(e,t,n),o=r.search("<".concat(this.nsplaceholder,":Filter>"));if(-1!==o){var i=r.search("</wfs:Query>");r=r.substr(o,i-o)}else r="";return'<StyledLayerDescriptor version="1.0.0"\n                xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:gml="http://www.opengis.net/gml" xmlns:gsml="urn:cgi:xmlns:CGI:GeoSciML:2.0" xmlns:sld="http://www.opengis.net/sld" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><NamedLayer><Name>'.concat(e,"</Name><UserStyle><FeatureTypeStyle><Rule >").concat(r,'<PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><CssParameter name="fill">#0000FF</CssParameter></Fill></Mark><Size>20</Size></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>')},ogcNumberField:B,ogcDateField:_,ogcListField:R,ogcBooleanField:F,ogcStringField:L,getWFSFilterData:function(e,t){return"string"==typeof e?e:"OGC"===e.filterType?W.toOGCFilter(e.featureTypeName,a(a({},e),{},{options:t}),e.ogcVersion,e.sortOptions,e.hits):W.toCQLFilter(e)},isLikeOrIlike:function(e){return"ilike"===e||"like"===e},isFilterEmpty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterFields,n=void 0===t?[]:t,r=e.spatialField,o=void 0===r?{}:r,i=e.crossLayerFilter,a=void 0===i?{}:i;return!(n.filter((function(e){return e.value||0===e.value})).length>0||o.geometry||a&&a.attribute&&a.operation)},isFilterValid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filterFields&&e.filterFields.length>0||e.simpleFilterFields&&e.simpleFilterFields.length>0||e.spatialField&&e.spatialField.geometry&&e.spatialField.operation||x(e.spatialField)&&T(e.spatialField,(function(e){return e.operation&&e.geometry}))>-1||e.crossLayerFilter&&e.crossLayerFilter.collectGeometries&&e.crossLayerFilter.collectGeometries.queryCollection&&e.crossLayerFilter.collectGeometries.queryCollection.geometryName&&e.crossLayerFilter.collectGeometries.queryCollection.typeName},composeAttributeFilters:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AND",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AND",o={id:(new Date).getTime(),index:0,logic:t};return e.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.filterFields,c=void 0===i?[]:i,l=t.groupFields,s=void 0===l?[]:l,u=t.spatialField,p=arguments.length>2?arguments[2]:void 0;return{groupFields:e.groupFields.concat(c.length>0&&s.map((function(e){return{groupId:0===e.index&&o.id||"".concat(e.groupId,"_").concat(p),logic:e.logic,id:"".concat(e.id,"_").concat(p),index:1+e.index}}))||[]),filterFields:e.filterFields.concat(c.map((function(e){return a(a({},e),{},{groupId:"".concat(e.groupId,"_").concat(p)})}))),spatialField:u?[].concat(r(e.spatialField),[u]):e.spatialField,spatialFieldOperator:n}}),{groupFields:[o],filterFields:[],spatialField:[]})},reprojectFilterInNativeCrs:function(e,t){var n,r=e.spatialField.geometry.projection,o=e.spatialField.geometry.center,i=e.spatialField.geometry.radius,c=w.reprojectGeoJson(e.spatialField.geometry,e.spatialField.geometry.projection||"EPSG:3857",t).coordinates,l=o&&[(n=w.reproject(o,r,t)).x,n.y],s=i&&w.reproject([i,0],r,t).x;return a(a({},e),{},{spatialField:a(a({},e.spatialField),{},{geometry:a(a({},e.spatialField.geometry),{},{center:l,radius:s,coordinates:c,projection:t})})})},normalizeFilterCQL:function(e,t){return e&&e.spatialField&&e.spatialField.geometry&&e.spatialField.geometry.coordinates&&e.spatialField.geometry.coordinates[0]&&(e.spatialField.projection||"EPSG:3857")!==t?t?W.reprojectFilterInNativeCrs(e,t):a(a({},e),{},{spatialField:void 0}):e},isCrossLayerFilterValid:function(e){return E(e,"operation",!1)&&E(e,"collectGeometries.queryCollection.typeName",!1)&&E(e,"collectGeometries.queryCollection.geometryName",!1)}};e.exports=W},"./MapStore2/web/client/utils/GraphUtils.js":function(e,t){var n=function(e,t,n){var r,o,i=[],a=[],c=e;for(i.push(c);i.length>0;)if(!n[c=i.shift()])for(n[c]=!0,a.push(c),r=0;r<t.length;r+=1)(o=t[r])[0]!==c||n[o[1]]?o[1]!==c||n[o[0]]||i.push(o[0]):i.push(o[1]);return a};e.exports={bfs:n,findGroups:function(e){for(var t={},r=[],o=0,i=e.length;o<i;o+=1){var a=e[o],c=a[0],l=a[1],s=null;t[c]?t[l]||(s=l):s=c,s&&r.push(n(s,e,t))}return r}}},"./MapStore2/web/client/utils/ImmutableUtils.js":function(e,t,n){var r=n("./MapStore2/node_modules/lodash/lodash.js"),o=r.get,i=r.findIndex,a=n("./MapStore2/node_modules/lodash/fp/set.js"),c=n("./MapStore2/node_modules/lodash/fp/unset.js"),l=n("./MapStore2/node_modules/lodash/fp/compose.js");e.exports={set:a,unset:c,compose:l,arrayUpsert:function(e,t,n,r){var c=e?o(r,e)||[]:r,l=i(c,n);if(l>=0){var s=c.slice();return s.splice(l,1,t),e?a(e,s,r):s}return e?a(e,c.concat(t),r):c.concat(t)},arrayUpdate:function(e,t,n,r){var c=e?o(r,e)||[]:r,l=i(c,n);if(l>=0){var s=c.slice();return s.splice(l,1,t),e?a(e,s,r):s}return r},arrayDelete:function(e,t,n){var r=e?o(n,e)||[]:n,c=i(r,t);if(c>=0){var l=r.slice();return l.splice(c,1),e?a(e,l,n):l()}return n}}},"./MapStore2/web/client/utils/LayerLocalizationUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"generateEnvString",(function(){return r}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.map((function(e){var t=e.name,n=e.value;return"".concat(t,":").concat(n)})).join(";"):""}},"./MapStore2/web/client/utils/MapInfoUtils.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./MapStore2/web/client/utils/FeatureInfoUtils.js"),s=l.INFO_FORMATS,u=l.INFO_FORMATS_BY_MIME_TYPE,p=n("./node_modules/turf-point-on-surface/index.js"),d=n("./MapStore2/node_modules/lodash/lodash.js").findIndex,f={AVAILABLE_FORMAT:["TEXT","PROPERTIES","HTML","TEMPLATE"],EMPTY_RESOURCE_VALUE:"NODATA",VIEWERS:{},getAvailableInfoFormat:function(){return Object.keys(s).filter((function(e){return-1!==f.AVAILABLE_FORMAT.indexOf(e)})).reduce((function(e,t){return e[t]=s[t],e}),{})},getLabelFromValue:function(e){return f.getAvailableInfoFormatLabels().filter((function(t){return s[t]===e}))[0]||"TEXT"},getAvailableInfoFormatLabels:function(){return Object.keys(f.getAvailableInfoFormat())},getAvailableInfoFormatValues:function(){return Object.keys(f.getAvailableInfoFormat()).map((function(e){return s[e]}))},getDefaultInfoFormatValue:function(){return s[f.AVAILABLE_FORMAT[0]]},getDefaultInfoFormatValueFromLayer:function(e,t){return e.featureInfo&&e.featureInfo.format&&s[e.featureInfo.format]||t.format||f.getDefaultInfoFormatValue()},getLayerFeatureInfoViewer:function(e){return e.featureInfo&&e.featureInfo.viewer?e.featureInfo.viewer:{}},getLayerFeatureInfo:function(e){return e&&e.featureInfo&&a({},e.featureInfo)||{}},clickedPointToGeoJson:function(e){if(!e)return[];if("Feature"===e.type){var t=[p(e)];return e&&e.geometry&&"Point"!==e.geometry.type&&t.push(e),t}return void 0===e.lng||void 0===e.lat?e.features||[]:[].concat(r(e.features||[]),[{id:"get-feature-info-point",type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.lng),parseFloat(e.lat)]},style:[{iconUrl:n("./MapStore2/web/client/components/map/openlayers/img/marker-icon.png"),iconAnchor:[12,41],iconSize:[25,41]}]}])},getMarkerLayer:function(e,t,n,r,o){return a({type:"vector",visibility:!0,name:e||"GetFeatureInfo",styleName:n||"marker",label:o,features:f.clickedPointToGeoJson(t)},r)},buildIdentifyRequest:function(e,t){if(f.services[e.type]){var n=f.getDefaultInfoFormatValueFromLayer(e,t),r=f.getLayerFeatureInfoViewer(e),o=f.getLayerFeatureInfo(e);return f.services[e.type].buildRequest(e,t,n,r,o)}return{}},getIdentifyFlow:function(e,t,n){return f.services[e.type]&&f.services[e.type].getIdentifyFlow?f.services[e.type].getIdentifyFlow(e,t,n):null},getValidator:function(e){var t={getValidResponses:function(e){return e},getNoValidResponses:function(){return[]}};return{getValidResponses:function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.reduce((function(n,i){if(i){var a;i.queryParams&&i.queryParams.hasOwnProperty("info_format")&&(a=i.queryParams.info_format),i.queryParams&&i.queryParams.hasOwnProperty("outputFormat")&&(a=i.queryParams.outputFormat);var c=(l.Validator[i.format||u[a]||u[e]]||t).getValidResponses([i],o);return[].concat(r(n),r(c))}return r(n)}),[])},getNoValidResponses:function(n){return n.reduce((function(n,o){if(o){var i;o.queryParams&&o.queryParams.hasOwnProperty("info_format")&&(i=o.queryParams.info_format),o.queryParams&&o.queryParams.hasOwnProperty("outputFormat")&&(i=o.queryParams.outputFormat);var a=(l.Validator[o.format||u[i]||u[e]]||t).getNoValidResponses([o]);return[].concat(r(n),r(a))}return r(n)}),[])}}},getViewers:function(){var e;return c(e={},l.INFO_FORMATS.PROPERTIES,n("./MapStore2/web/client/components/data/identify/viewers/JSONViewer.jsx")),c(e,l.INFO_FORMATS.JSON,n("./MapStore2/web/client/components/data/identify/viewers/JSONViewer.jsx")),c(e,l.INFO_FORMATS.HTML,n("./MapStore2/web/client/components/data/identify/viewers/HTMLViewer.jsx")),c(e,l.INFO_FORMATS.TEXT,n("./MapStore2/web/client/components/data/identify/viewers/TextViewer.jsx")),e},defaultQueryableFilter:function(e){return e.visibility&&f.services[e.type]&&(void 0===e.queryable||e.queryable)&&"background"!==e.group},services:{wfs:n("./MapStore2/web/client/utils/mapinfo/wfs.js"),wms:n("./MapStore2/web/client/utils/mapinfo/wms.js"),wmts:n("./MapStore2/web/client/utils/mapinfo/wmts.js"),vector:n("./MapStore2/web/client/utils/mapinfo/vector.js")},getViewer:function(e){return f.VIEWERS[e]?f.VIEWERS[e]:null},setViewer:function(e,t){f.VIEWERS[e]=t},filterRequestParams:function(e,t,n){var r=t||[],o=n||[];return Object.keys(e).reduce((function(t,n){if("params"!==n&&-1!==r.indexOf(n))t[n]=e[n];else if("params"===n&&o.length>0){var i=e[n];Object.keys(i).forEach((function(e){-1===d(o,(function(t){return t===e}))&&(t[e]=i[e])}),{})}return t}),{})}};e.exports=f},"./MapStore2/web/client/utils/MapUtils.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n("./MapStore2/node_modules/lodash/lodash.js"),p=u.isString,d=u.trim,f=u.isNumber,m=u.pick,g=u.get,b=u.find,y=u.mapKeys,v=u.mapValues,h=u.keys,O=u.uniq,j=u.uniqWith,w=u.isEqual,S=n("./node_modules/uuid/v1.js"),E={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},A=6378137,P=256,x=2,C={},T=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),M=n("./MapStore2/web/client/utils/ImmutableUtils.js").set,I=n("./MapStore2/web/client/utils/LayersUtils.js"),k=n("./node_modules/object-assign/index.js"),D=n("./MapStore2/node_modules/lodash/lodash.js"),N=D.isEmpty,_=D.findIndex,R=D.cloneDeep;function L(e){return C[e]}function F(e){return e*(100/2.54)}function B(e,t){var n=T.getUnits(t||"EPSG:3857");return E[n]*F(e||96)}function U(e,t,n,r,o){return 2*Math.PI*e/(t*Math.pow(n,r)/F(o||96))}function G(e,t,n,r,o,i){for(var a=[],c=r;c<=o;c++)a.push(U(e,t,n,c,i));return a}function H(e,t,n){return G(A,P,x,e,t,n)}function W(e,t,n){var r=B(n,t);return e.map((function(e){return e/r}))}function z(e,t,n){return W(H(e,t,n),"EPSG:3857",n)}function V(){return L("RESOLUTIONS_HOOK")?L("RESOLUTIONS_HOOK")():z(0,21,96)}function Q(e,t,n,r,o,i){var a=e[2]-e[0],c=e[3]-e[1],l=Math.abs(a/t.width),s=Math.abs(c/t.height),u=Math.max(l,s),p=(i||W(H(n,r,o||96),"EPSG:3857",o)).reduce((function(e,t,n){var r=Math.abs(t-u);return r>e.diff?e:{diff:r,zoom:n}}),{diff:Number.POSITIVE_INFINITY,zoom:0}).zoom;return Math.max(0,Math.min(p,r))}var q=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=R(e),n=l(l({},g(e,"map.layers",[]).reduce((function(e,t){return l(l({},e),{},s({},t.id,"annotations"===t.id?t.id:S()))}),{})),g(e,"widgetsConfig.widgets",[]).reduce((function(e,t){return l(l({},e),{},s({},t.id,S()))}),{}));return M("map.backgrounds",g(e,"map.backgrounds",[]).map((function(e){return l(l({},e),{},{id:n[e.id]})})),M("widgetsConfig",{collapsed:v(y(g(e,"widgetsConfig.collapsed",{}),(function(e,t){return n[t]})),(function(e){return l(l({},e),{},{layouts:v(e.layouts,(function(e){return l(l({},e),{},{i:n[e.i]})}))})})),layouts:v(g(e,"widgetsConfig.layouts",{}),(function(e){return e.map((function(e){return l(l({},e),{},{i:n[e.i]})}))})),widgets:g(e,"widgetsConfig.widgets",[]).map((function(e){return l(l({},e),{},{id:n[e.id],layer:l(l({},g(e,"layer",{})),{},{id:n[g(e,"layer.id")]})})}))},M("map.layers",g(e,"map.layers",[]).map((function(e){return l(l({},e),{},{id:n[e.id]})})),t)))};var K=function e(t){var n=["apiKey","time","args","fixed"],o=function(e){return n.reduce((function(t,n){return t||e===n}),!1)};Object.keys(t).forEach((function(n){var i=t[n],a=r(i);"object"!==a||null===i||o(n)?"undefined"!==a&&i&&!o(n)||delete t[n]:(e(i),Object.keys(i).length||delete t[n])}))},J=function(e,t,n){e[t]&&(Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(e,t)),delete e[t])};e.exports={createRegisterHooks:function(){var e={};return{registerHook:function(t,n){e[t]=n},getHook:function(t){return e[t]},executeHook:function(t,n,r){var o=e[t];return o?n(o):r?r():null}}},EXTENT_TO_ZOOM_HOOK:"EXTENT_TO_ZOOM_HOOK",RESOLUTIONS_HOOK:"RESOLUTIONS_HOOK",RESOLUTION_HOOK:"RESOLUTION_HOOK",COMPUTE_BBOX_HOOK:"COMPUTE_BBOX_HOOK",GET_PIXEL_FROM_COORDINATES_HOOK:"GET_PIXEL_FROM_COORDINATES_HOOK",GET_COORDINATES_FROM_PIXEL_HOOK:"GET_COORDINATES_FROM_PIXEL_HOOK",DEFAULT_SCREEN_DPI:96,ZOOM_TO_EXTENT_HOOK:"ZOOM_TO_EXTENT_HOOK",registerHook:function(e,t){C[e]=t},getHook:L,dpi2dpm:F,getSphericalMercatorScales:G,getSphericalMercatorScale:U,getGoogleMercatorScales:H,getGoogleMercatorResolutions:z,getGoogleMercatorScale:function(e,t){return U(A,P,x,e,t)},getResolutionsForScales:W,getZoomForExtent:function(e,t,n,r,o){return L("EXTENT_TO_ZOOM_HOOK")?L("EXTENT_TO_ZOOM_HOOK")(e,t,n,r,o):Q(e,t,n,r,o,L("RESOLUTIONS_HOOK")?L("RESOLUTIONS_HOOK")(e,t,n,r,o,F(o||96)):null)},defaultGetZoomForExtent:Q,getCenterForExtent:function(e,t){var n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return{x:e[0]+n,y:e[1]+r,crs:t}},getResolutions:V,getScales:function(e,t){var n=B(t,e);return V().map((function(e){return e*n}))},getBbox:function(e,t){return function(e,t,n){var r=L(e);return r?t(r):n?n():null}("COMPUTE_BBOX_HOOK",(function(n){return n(e,t)}))},mapUpdated:function(e,t){var n,r,o,i;return!(!e||N(e)||!t||N(t))&&(!(q(null==t||null===(n=t.center)||void 0===n?void 0:n.x,null==e||null===(r=e.center)||void 0===r?void 0:r.x)&&q(null==t||null===(o=t.center)||void 0===o?void 0:o.y,null==e||null===(i=e.center)||void 0===i?void 0:i.y))||(null==t?void 0:t.zoom)!==(null==e?void 0:e.zoom))},getCurrentResolution:function(e,t,n,r){return L("RESOLUTION_HOOK")?L("RESOLUTION_HOOK")(e,t,n,r):z(t,n,r)[e]},transformExtent:function(e,t,n,r){var o=T.getUnits(e);return"ft"===o?{width:n/E.ft,height:r/E.ft}:"us-ft"===o?{width:n/E["us-ft"],height:r/E["us-ft"]}:"degrees"===o?{width:n/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:r/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:n,height:r}},saveMapConfiguration:function(e,t,n,r,o,i,a){var c={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},s=t.map((function(e){return I.saveLayer(e)})),u=n.reduce((function(e,t){return e.concat(I.getGroupNodes(t))}),[].concat(n.map((function(e){return e.id})))).map((function(e){var t=I.getNode(n,e);return t&&t.nodes?function(e){return{id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded}}(t):null})).filter((function(e){return e})),p=r.filter((function(e){return!!e.thumbnail})),d=I.extractSourcesFromLayers(s),f=s.map((function(e){return k({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})})),m=_(f,(function(e){return"annotations"===e.id}));if(-1!==m){var g=f[m].features.map((function(e){return"FeatureCollection"===e.type?l(l({},e),{},{features:e.features.map((function(e){return e.properties.geometryGeodesic?M("properties.geometryGeodesic",null,e):e}))}):e.properties.geometryGeodesic?M("properties.geometryGeodesic",null,e):{}}));f[m]=M("features",g,f[m])}return l({version:2,map:k({},c,{layers:f,groups:u,backgrounds:p,text_search_config:o,bookmark_search_config:i},!N(d)&&{sources:d}||{})},a)},generateNewUUIDs:Y,mergeMapConfigs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return m(e,h(e).filter((function(t){return void 0!==e[t]})))}))},r=Y(t),o=[].concat(i(g(e,"map.backgrounds",[])),i(g(r,"map.backgrounds",[]))),a=n(g(e,"map.layers",[])),c=n(g(r,"map.layers",[])),u=b(a,(function(e){return"annotations"===e.id})),p=b(c,(function(e){return"annotations"===e.id})),d=[].concat(i(c.filter((function(e){return"annotations"!==e.id}))),i(a.filter((function(e){return"annotations"!==e.id}))),i(u||p?[l(l(l({},u||{}),p||{}),{},{features:[].concat(i(g(u,"features",[])),i(g(p,"features",[])))})]:[])),f=d.filter((function(e){return"background"===e.group})),y=_(f,(function(e){return e.visibility})),v=g(e,"map.sources",{}),w=g(r,"map.sources",{}),S=l(l({},v),w),E=g(e,"widgetsConfig",{}),A=g(r,"widgetsConfig",{});return l(l(l({},r),e),{},{catalogServices:l(l({},g(e,"catalogServices",{})),{},{services:l(l({},g(e,"catalogServices.services",{})),g(r,"catalogServices.services",{}))}),map:l(l(l({},r.map),e.map),{},{backgrounds:o,groups:j([].concat(i(g(e,"map.groups",[])),i(g(r,"map.groups",[]))),(function(e,t){return e.id===t.id})),layers:[].concat(i(f.slice(0,y+1)),i(f.slice(y+1).map((function(e){return l(l({},e),{},{visibility:!1})}))),i(d.filter((function(e){return"background"!==e.group})))),sources:N(S)?void 0:S}),widgetsConfig:{collapsed:l(l({},E.collapsed),A.collapsed),layouts:O([].concat(i(h(E.layouts)),i(h(A.layouts)))).reduce((function(e,t){return l(l({},e),{},s({},t,[].concat(i(g(E,"layouts.".concat(t),[])),i(g(A,"layouts.".concat(t),[])))))}),{}),widgets:[].concat(i(g(E,"widgets",[])),i(g(A,"widgets",[])))},timelineData:l(l({},g(e,"timelineData",{})),g(r,"timelineData",{})),dimensionData:l(l({},g(e,"dimensionData",{})),g(r,"dimensionData",{}))})},addRootParentGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup",n=g(e,"map.groups",[]),r=n.filter((function(e){return"Default"!==e.id})),a=b(n,(function(e){return"Default"===e.id})),c=a&&{id:S(),title:t,expanded:a.expanded},s=a?[].concat(i(r.map((function(e){var t=e.id,n=o(e,["id"]);return l({id:"".concat(c.id,".").concat(t)},n)}))),[c]):r;return l(l({},e),{},{map:l(l({},e.map),{},{groups:s,layers:g(e,"map.layers",[]).map((function(e){var t,n=e.group;return l(l({},o(e,["group"])),{},{group:!a||"background"===n||"Default"!==n&&n?a&&(null===(t=b(s,(function(e){var t=e.id;return t.slice(t.indexOf(".")+1)===n})))||void 0===t?void 0:t.id)||n:c.id})}))})})},isSimpleGeomType:function(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;case"Point":case"Circle":case"LineString":case"Polygon":default:return!0}},getSimpleGeomType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":return e;case"MultiPoint":case"Marker":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection";case"Text":return"Point";default:return e}},getIdFromUri:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/,n=decodeURIComponent(e),r=t.exec(n);return r&&r.length&&r.length>1?r[1]:null},parseLayoutValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return p(e)&&-1!==e.indexOf("%")?parseFloat(d(e))*t/100:f(e)?e:0},prepareMapObjectToCompare:K,updateObjectFieldKey:J,compareMapChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],r=m(R(e),n),o=m(R(t),n);return J(r.map,"text_serch_config","text_search_config"),J(o.map,"text_serch_config","text_search_config"),K(r),K(o),w(r,o)},clearHooks:function(){C={}}}},"./MapStore2/web/client/utils/NotificationUtils.js":function(e,t,n){var r=n("./MapStore2/web/client/actions/notifications.js"),o=r.error,i=r.success;e.exports={basicError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=void 0===t?"notification.warning":t,r=e.autoDismiss,i=void 0===r?6:r,a=e.position,c=void 0===a?"tc":a,l=e.message,s=void 0===l?"Error":l;return o({title:n,autoDismiss:i,position:c,message:s})},basicSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=void 0===t?"notification.success":t,r=e.autoDismiss,o=void 0===r?6:r,a=e.position,c=void 0===a?"tc":a,l=e.message,s=void 0===l?"Success":l;return i({title:n,autoDismiss:o,position:c,message:s})}}},"./MapStore2/web/client/utils/ObservableUtils.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function a(e,t,n){return(a=c()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=n("./node_modules/rxjs/Rx.js"),p=n("./MapStore2/node_modules/lodash/lodash.js").get,d=n("./node_modules/xml2js/lib/xml2js.js").parseString,f=n("./node_modules/xml2js/lib/processors.js").stripPrefix,m=n("./MapStore2/web/client/api/GeoStoreDAO.js"),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t,n,r=(t=i,n=c(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return o(this,e)});function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,e)).name="OGCError",n.code=t,n}return i}(i(Error));e.exports={parseXML:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tagNameProcessors:[f],explicitArray:!1,mergeAttrs:!0};return u.Observable.bindNodeCallback((function(e,n){return d(e,t,n)}))(e)},deleteResourceById:function(e,t){return e?m.deleteResource(e,t).then((function(e){return{data:e.data,resType:"success",error:null}})).catch((function(e){return{error:e,resType:"error"}})):u.Observable.of({resType:"success"})},interceptOGCError:function(e){return e.switchMap((function(e){return"string"==typeof e.data&&e.data.indexOf("ExceptionReport")>0?u.Observable.bindNodeCallback((function(e,t){return d(e,{tagNameProcessors:[f],explicitArray:!1,mergeAttrs:!0},t)}))(e.data).map((function(e){var t=p(e,"ExceptionReport.Exception.ExceptionText");throw new g(t||"Undefined OGC Service Error",p(e,"ExceptionReport.Exception.exceptionCode"))})):u.Observable.of(e)}))}}},"./MapStore2/web/client/utils/SearchUtils.js":function(e,t,n){var r={iconUrl:n("./MapStore2/web/client/product/assets/img/marker-icon-red.png"),shadowUrl:n("./MapStore2/web/client/product/assets/img/marker-shadow.png"),iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]};e.exports={defaultIconStyle:r,showGFIForService:function(e){return"single_layer"===(null==e?void 0:e.launchInfoPanel)&&!!(null==e?void 0:e.openFeatureInfoButtonEnabled)},layerIsVisibleForGFI:function(e,t){return(null==t?void 0:t.forceSearchLayerVisibility)||!!(null==e?void 0:e.visibility)}}},"./MapStore2/web/client/utils/ShareUtils.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=n("./node_modules/url/url.js"),l=n("./MapStore2/node_modules/lodash/lodash.js"),s=l.trimStart,u=l.replace,p={getAbsoluteURL:function(e,t){return 0===t.indexOf("http")||0===t.indexOf("//")?t:c.resolve(e,t)},getConfigUrl:function(e,t){var n=c.parse(e,!0);if(!n.hash)return null;var r=n.hash.lastIndexOf("/")+1,o=n.hash.lastIndexOf("?")>=0?n.hash.lastIndexOf("?"):n.hash.length,i=n.hash.substring(r,o);return c.resolve(p.getAbsoluteURL(e,t),"data/"+i)},getApiUrl:function(e){var t=c.parse(e,!1);return t.protocol+"//"+t.host+t.pathname},removeQueryFromUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=c.parse(e),n=t.hash,r=void 0===n?"":n,i=a(t,["hash"]),l=c.parse(r&&s(r,"#")||""),u=c.format(o(o({},l),{},{query:null,search:null}));return c.format(o(o({},i),{},{query:null,search:null,hash:u?"#".concat(u):null}))},getSharedGeostoryUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.match(/\#\/(geostory)/)){var n=e.match(/\/(geostory)\/((shared)|(newgeostory))/)?e:e.replace("/geostory/","/geostory/shared/");if(t){var r,o=null===(r=n.split("#")[1])||void 0===r?void 0:r.split("/");6===o.length&&o.includes("shared")&&(n=u(n,"/section/".concat(o[o.length-1]),"")),8===o.length&&o.includes("shared")&&(n=u(n,"/section/".concat(o[o.length-3],"/column/").concat(o[o.length-1]),""))}return n}return e}};e.exports=p},"./MapStore2/web/client/utils/StringUtils.js":function(e,t){var n={containsHTML:function(e){return new RegExp("<(.|\\n)*?>","g").test(e)},isValidEmail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)}};e.exports=n},"./MapStore2/web/client/utils/TOCUtils.js":function(e,t,n){var r=n("./MapStore2/node_modules/lodash/lodash.js"),o=r.isObject,i=r.get,a=n("./MapStore2/web/client/utils/LayersUtils.js"),c=n("./MapStore2/web/client/utils/LocaleUtils.js"),l={createFromSearch:function(e,t){var n=RegExp("^/|/$|/{2,}");if(0===t.length||e.map((function(e){return e.label})).indexOf(t)>-1||n.test(t))return null;var r=t.replace(/\./g,"${dot}").replace(/\//g,".");return{label:t,value:r}},getTooltip:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" - ";return l.getTooltipFragment(e.tooltipOptions,e,t,n)},getTooltipFragment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" - ";switch(e){case"title":var i=o(t.title)?t.title[n]||t.title.default:t.title,a=i||t.name||"";return a;case"description":var c=t.description||"";return c;case"both":var l=o(t.title)?t.title[n]||t.title.default:t.title,s=l||t.nam||"",u=t.description||"";return"".concat(s).concat(r&&u?r:"").concat(u);default:return t[e]}},getTitleAndTooltip:function(e){var t=e.node,n=e.currentLocale,r=e.tooltipOptions,o=void 0===r?{separator:" - ",maxLength:807}:r,i=l.getTooltip(t,n,o.separator)||"";return(i=i&&i.substring(0,o.maxLength)).length===o.maxLength&&(i+="..."),{title:l.getTooltipFragment("title",t,n,o.separator),tooltipText:i}},flattenGroups:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.filter((function(e){return e.nodes})).reduce((function(e,r){return e.push(n?r:{label:r.id.replace(/\./g,"/").replace(/\${dot}/g,"."),value:r.id}),r.nodes.length>0?e.concat(l.flattenGroups(r.nodes,t+1,n)):e}),[])},getLabelName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.replace(/[^\.\/]+/g,(function(e){var n=i(a.getGroupByName(e,t),"title");return o(n)?n[c.getLocale()]||n.default:t&&n||e}));return n=(n=n.replace(/\./g,"/")).replace(/\${dot}/g,".")}};e.exports=l},"./MapStore2/web/client/utils/TemplateUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"validateStringAttribute",(function(){return i})),n.d(t,"getCleanTemplate",(function(){return a})),n.d(t,"parseCustomTemplate",(function(){return c})),n.d(t,"generateTemplateString",(function(){return l})),n.d(t,"parseTemplate",(function(){return s}));var r,o=n("./MapStore2/node_modules/lodash/lodash.js"),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=Object(o.isString)(t)&&Object(o.trim)(t.substring(n,t.length-r))||"";return Object(o.has)(e,i)},a=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return""},l=Object(o.isString)(e)&&e.match(n),s=l&&l.map((function(e){var n=e.replace(/(<([^>]+)>)/gi,"");return{previous:e,next:i(t,n,r,a)?n:c(e)}}))||null;return s&&s.reduce((function(e,t){return e.replace(t.previous,t.next)}),e)||e||""},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return"".concat(Object(o.trim)(e.substring(2,e.length-1))," Not Available")};return Object(o.template)(a(e||"",t,/\$\{.*?\}/g,2,1,n))(t)},l=(r={},function(e,t){var n=r[e];return n&&!t||(n=function(n){var r=e.replace(/\$\{([\s]*[^;\s\{]+[\s]*)\}/g,(function(e,r){return(t||function(e){return e})(r.trim().split(".").reduce((function(e,t){return e&&e[t]}),n))}));return Object(o.isString)(r)&&r||""},t||(r[e]=n)),n}),s=function(e,t){n.e(18).then(function(){var r=n("./node_modules/babel-standalone/babel.js"),o="function"==typeof e?e():e;try{var i=r.transform(o,{presets:["es2015","react","stage-0"]}).code;t(i)}catch(e){t(null,e)}}.bind(null,n)).catch(n.oe)},u={generateTemplateString:l,parseTemplate:s,validateStringAttribute:i,getCleanTemplate:a,parseCustomTemplate:c};t.default=u},"./MapStore2/web/client/utils/TimeUtils.js":function(e,t,n){var r=n("./MapStore2/node_modules/lodash/lodash.js"),o=r.isString,i=r.isDate,a=r.get,c=r.castArray,l=n("./node_modules/moment/moment.js"),s=n("./MapStore2/web/client/utils/LocaleUtils.js"),u=/PT?[\d\.]+[YMWDHMS]/,p=function(e){return e?o(e)?new Date(e).getTime():(i(e)&&e.getTime(),e):null},d=function(e,t){var n=p(t),r=1/0,o=-1;return e.forEach((function(e,t){var i=p(e),a=Math.abs(i-n);a<r&&(r=a,o=t)})),o},f=function(e){var t=e.start,n=e.end,r=e.duration,o=l.duration(r).asMilliseconds();return(new Date(n).getTime()-new Date(t).getTime())/o},m=function(e){for(var t=e.start,n=e.end,r=e.duration,o=l.duration(r).asMilliseconds(),i=[],a=new Date(t),c=new Date(n);a<=c;)i.push(new Date(a).toISOString()),a.setTime(a.getTime()+o);return i},g=function(e){return e.match(u)[0]};e.exports={getDateTimeFormat:function(e,t){var n=s.getDateFormat(e);switch(t){case"time":return"HH:mm:SS";case"date":return n;default:return n+" HH:mm:SS"}},getTimezoneOffsetMillis:function(e){return 6e4*e.getTimezoneOffset()},domainsToDimensionsObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Domains,n=void 0===t?{}:t,r=arguments.length>1?arguments[1]:void 0,o=c(n.DimensionDomain||[]).concat(),i=n["@version"]||n.version,l=a(n,"SpaceDomain.BoundingBox");return l&&o.push({Identifier:"space",Domain:l}),o.map((function(e){var t=e.Identifier,n=e.Domain;return{source:{type:"multidim-extension",version:i,url:r},name:t,domain:n}}))},getUTCTimePart:function(e){var t=e;!i(e)&o(e)&&(t=new Date(e));var n=t.getUTCHours();n=n<10?"0"+n:n;var r=t.getUTCMinutes();r=r<10?"0"+r:r;var a=t.getUTCSeconds();return a=a<10?"0"+a:a,"".concat(n,":").concat(r,":").concat(a)},getUTCDatePart:function(e){var t=e;!i(e)&o(e)&&(t=new Date(e));var n=t.getUTCMonth()+1,r=t.getUTCDate();return n=n<10?"0"+n:n,r=r<10?"0"+r:r,"".concat(t.getUTCFullYear(),"-").concat(n,"-").concat(r)},timeIntervalNumber:f,timeIntervalToSequence:m,timeIntervalToIntervalSequence:function(e){var t=e.start,n=e.end,r=e.duration;return m({start:t,end:n,duration:r}).map((function(e){return{start:new Date(e),end:new Date(new Date(e).getTime()+l.duration(r).asMilliseconds())}}))},analyzeIntervalInRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,n=e.end,r=e.duration,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.start,a=o.end;if(!i||!a)return{count:f({start:t,end:n,duration:r}),start:t,end:n};var c=l.duration(r).asMilliseconds(),s=new Date(t).getTime(),u=new Date(n).getTime(),p=new Date(i).getTime(),d=new Date(a).getTime(),m=Math.ceil((p-s)/c),g=Math.floor((d-s)/c),b=Math.floor((u-s)/c);if(m>=0&&g<=b){var y=g-m;return{start:new Date(s+Math.max(0,m)*c),end:new Date(s+Math.min(b,g)*c),count:y}}return{count:f({start:t,end:n,duration:r}),start:t,end:n}},getNearestDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e[d(e,t)]},getNearestDateIndex:d,roundResolution:g,roundRangeResolution:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,n=e.end,r=arguments.length>1?arguments[1]:void 0,o=new Date(t),i=new Date(n),a=Math.floor(i.getTime()-o.getTime())/r,c=l.duration(a).toISOString(),s=g(c);return{range:{start:t,end:n},resolution:s}},isTimeDomainInterval:function(e){return e&&e.indexOf&&e.indexOf("--")>0},getStartEnd:function(e,t){var n=l(e).diff(t);return{start:n>=0?t:e,end:n>=0?e:t}}}},"./MapStore2/web/client/utils/URLUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"urlParts",(function(){return u})),n.d(t,"sameQueryParams",(function(){return p})),n.d(t,"isSameUrl",(function(){return d})),n.d(t,"getQueryParams",(function(){return f})),n.d(t,"isValidURL",(function(){return m})),n.d(t,"isValidURLTemplate",(function(){return g}));var r=n("./node_modules/url/url.js"),o=n.n(r),i=n("./MapStore2/node_modules/lodash/lodash.js"),a=n("./node_modules/query-string/index.js"),c=n.n(a);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),n=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var r=window.location;n[1]=r.protocol,n[3]=r.hostname,n[4]=r.port,n[5]=e}n[4]=""!==n[4]&&n[4]?n[4]:"https:"===n[1]?"443":"80",n[5]=n[5]?n[5]:e.slice(n[0].length);var o=l(n,6),i=o[1],a=o[3],c=o[4],s=o[5],u=0===s.indexOf("/")?s.split("/")[1]:"";return{protocol:i,domain:a,port:c,rootPath:s,applicationRootPath:u}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var n=e?e.split("&").filter((function(e){return!!e})):[],r=t?t.split("&").filter((function(e){return!!e})):[];return Object(i.isEqual)(Object(i.sortBy)(n),Object(i.sortBy)(r))},d=function(e,t){var n=Object(i.isArray)(e)?e[0]:e,r=Object(i.isArray)(t)?t[0]:t;if(n===r)return!0;if(!n||!r)return!1;if(!Object(i.isString)(n)||!Object(i.isString)(r))return!1;var a=o.a.parse(n),c=o.a.parse(r),l=u(n),s=u(r),d=l.protocol===s.protocol,f=l.domain===s.domain,m=l.port===s.port,g=a.pathname===c.pathname,b=p(a.query,c.query);return d&&m&&f&&g&&b},f=function(e){return c.a.parse(e)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,n=new RegExp(t);return n.test(e)},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/,r=new RegExp(n),o=r.test(e);if(!o)return!1;if(o&&!t)return!0;if(o&&t){var a=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return Object(i.find)(a,e)})).length}return!1}},"./MapStore2/web/client/utils/VendorParamsUtils.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/utils/FilterUtils.jsx");e.exports={optionsToVendorParams:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.layerFilter,i=t.filterObj,c=[a.isFilterValid(r)&&!r.disabled&&a.toCQLFilter(r),a.isFilterValid(i)&&a.toCQLFilter(i),t&&t.params&&t.params.CQL_FILTER,n];return(e=(c=c.filter((function(e){return!!e}))).length>1?c.map((function(e){return"(".concat(e,")")})).join(" AND "):c.pop())?o(o({},t.params),{},{CQL_FILTER:e}):t.params}}},"./MapStore2/web/client/utils/WFSLayerUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"needsReload",(function(){return u})),n.d(t,"toDescribeURL",(function(){return p})),n.d(t,"extractGeometryType",(function(){return d})),n.d(t,"extractGeometryAttributeName",(function(){return f}));var r=n("./MapStore2/web/client/utils/VendorParamsUtils.js"),o=n("./node_modules/url/url.js"),i=n.n(o),a=n("./MapStore2/node_modules/lodash/lodash.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e,t){var n=l(l({},Object(r.optionsToVendorParams)(e)||{}),{},{_v_:e._v_}),o=l(l({},Object(r.optionsToVendorParams)(t)||{}),{},{_v_:t._v_});return["_v_","CQL_FILTER","VIEWPARAMS"].reduce((function(e,t){return n[t]!==o[t]||e}),!1)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.search,r=void 0===n?{}:n,o=e.url,a=e.describeFeatureTypeURL,c=i.a.parse(a||r.url||o,!0);return i.a.format(l(l({},c),{},{search:void 0,query:l(l({},c.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))},d=function(e){var t=Object(a.get)(e,"featureTypes[0].properties")||[];return t&&Object(a.head)(t.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return e.type.split(":")[1]})))},f=function(e){var t=Object(a.get)(e,"featureTypes[0].properties")||[];return t&&Object(a.head)(t.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return e.name})))}},"./MapStore2/web/client/utils/WMTSUtils.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),c=n("./MapStore2/node_modules/lodash/lodash.js"),l=c.isString,s=c.isArray,u=c.isObject,p=c.head,d=c.castArray,f=c.slice,m=c.sortBy,g={getDefaultMatrixId:function(e){for(var t=new Array(30),n=0;n<30;++n)t[n]=e.tileMatrixPrefix+n;return t},getMatrixIds:function(e,t){return u(e)&&s(e[t])&&e[t]||s(e)&&e||[]},limitMatrix:function(e,t){return e.length>t?f(e,0,t):e.length<t?e.concat(new Array(t-e.length)):e},getTileMatrixSet:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t;return e&&l(e)?e:e?a.getEquivalentSRS(t,n).reduce((function(t,n){if(s(e)){var o=p(e.filter((function(e){return(e["ows:Identifier"]===n||a.getEPSGCode(e["ows:SupportedCRS"])===n)&&r[e["ows:Identifier"]]})));return o&&o["ows:Identifier"]?o["ows:Identifier"]:t}return u(e)&&e[n]||t}),o):o},getRequestEncoding:function(e){var t=g.getOperations(e);return g.getOperation(t,"GetTile","KVP")?"KVP":g.getOperation(t,"GetTile","RESTful")&&"RESTful"},getOperations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(e.Capabilities["ows:OperationsMetadata"]["ows:Operation"])},getOperation:function(e,t,n){return p(d(p(e.filter((function(e){return e.$.name===t})).map((function(e){return d(e["ows:DCP"]["ows:HTTP"]["ows:Get"])})))||[]).filter((function(e){return(e["ows:Constraint"]&&e["ows:Constraint"]["ows:AllowedValues"]["ows:Value"])===n})).map((function(e){return e.$["xlink:href"]})))},getGetTileURL:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ResourceURL,n=e.GetTileURL,r=e.requestEncoding;return"KVP"===r?n:t&&d(t).map((function(e){var t=e.$,n=void 0===t?{}:t;return n.template||n.value}))||n},getCapabilitiesURL:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(d(e.capabilitiesURL||e.GetTileURL))},getDefaultStyleIdentifier:function(e){return p(d(e.Style).filter((function(e){var t=e.$;return"true"===(void 0===t?{}:t).isDefault})).map((function(e){return e["ows:Identifier"]})))},getDefaultFormat:function(e){return p(d(e.Format))},sortTileMatrix:function(e,t){return e?o(o({},e),{},{TileMatrix:m(null==e?void 0:e.TileMatrix.map((function(e){return o(o({},e),{},{ScaleDenominator:Number(e.ScaleDenominator)})})),"ScaleDenominator").reverse().filter((function(e){return!t||t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.identifier;return t})).indexOf(e["ows:Identifier"])>=0}))}):e},getTileMatrix:function(e,t){var n,r,o=g.getTileMatrixSet(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),i=e.matrixIds&&g.getMatrixIds(e.matrixIds,o||t),a=g.sortTileMatrix(p(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===o}))),i),c=null==a||null===(n=(r=a.TileMatrix).map)||void 0===n?void 0:n.call(r,(function(e){return e["ows:Identifier"]}));return{matrixIds:c&&i?i.sort((function(e,t){return c.indexOf(e.identifier)-c.indexOf(t.identifier)})):i,tileMatrixSetName:o,tileMatrixSet:a}}};e.exports=g},"./MapStore2/web/client/utils/WidgetsUtils.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=n("./MapStore2/node_modules/lodash/lodash.js"),l=c.get,s=c.find,u=c.isNumber,p=c.round,d=n("./MapStore2/web/client/actions/widgets.js").WIDGETS_REGEX,f=n("./MapStore2/web/client/utils/GraphUtils.js").findGroups,m=n("./MapStore2/web/client/utils/ColorUtils.js").sameToneRangeColors,g=function(e,t){var n=o(d.exec(e),2),r=n[0],i=n[1];return r?s(t,{id:i}):null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(t,n){var o=l(n,"mapSync")&&l(n,"dependenciesMap")||{},i=Object.keys(o).map((function(t){return g(o[t],e)}))||[];return[].concat(r(t),r(i.filter((function(e){return void 0!==e})).map((function(e){return[n.id,e.id]}))))}),[])};e.exports={shortenLabel:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!u(e))return e;var o=p(e),i=o.toString().length%3;if(o>=n){var a=o.toString().length-(0===i?i+3:i),c=a/3,l=o/Math.pow(10,a);switch(c){case 1:t=" K";break;case 2:t=" M";break;case 3:t=" B";break;case 4:t=" T";break;default:t=""}o=p(l,r)+t}else o=p(e,Math.abs(4-o.toString().length));return o},getWidgetDependency:function(e,t){var n=d.exec(e),r=n&&n[2],o=g(e,t);return r?l(o,r):o},getConnectionList:b,getWidgetsGroups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=f(b(e)),n={base:190,range:340,options:{base:10,range:360,s:.67,v:.67}},r=m(n.base,n.range,t.length+1,n.options);return t.map((function(e,t){return{color:r[t],widgets:e}}))}}},"./MapStore2/web/client/utils/mapinfo/vector.js":function(e,t,n){var r=n("./MapStore2/web/client/utils/MapUtils.js");e.exports={buildRequest:function(e,t){return{request:{lat:t.point.latlng.lat,lng:t.point.latlng.lng},metadata:{fields:e.features&&e.features.length&&Object.keys(e.features[0].properties)||[],title:e.name,resolution:t.map&&t.map&&t.map.zoom&&r.getCurrentResolution(t.map.zoom,0,21,96),buffer:t.buffer||2,units:t.map&&t.map.units,rowViewer:e.rowViewer,viewer:e.viewer},url:""}}}},"./MapStore2/web/client/utils/mapinfo/wfs.js":function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n("./node_modules/rxjs/Rx.js").Observable,l=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),s=n("./MapStore2/web/client/utils/LayersUtils.js").getLayerUrl,u=n("./MapStore2/node_modules/lodash/lodash.js").isObject,p=n("./MapStore2/web/client/utils/VendorParamsUtils.js").optionsToVendorParams,d=n("./MapStore2/web/client/api/WFS.js"),f=d.describeFeatureType,m=d.getFeature,g=n("./MapStore2/web/client/utils/WFSLayerUtils.js").extractGeometryAttributeName,b=n("./MapStore2/web/client/utils/SecurityUtils.js"),y=n("./node_modules/object-assign/index.js");e.exports={buildRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.map,r=void 0===n?{}:n,o=t.point,a=t.currentLocale,c=t.params,p=t.maxItems,d=void 0===p?10:p,f=arguments.length>3?arguments[3]:void 0,m=arguments.length>4?arguments[4]:void 0;return{request:b.addAuthenticationToSLD(i({point:o,service:"WFS",version:"1.1.1",request:"GetFeature",outputFormat:"application/json",exceptions:"application/json",id:e.id,typeName:e.name,srs:l.normalizeSRS(r.projection)||"EPSG:4326",feature_count:d},y({params:c})),e),metadata:{title:u(e.title)?e.title[a]||e.title.default:e.title,regex:e.featureInfoRegex,viewer:f,featureInfo:m},url:s(e).replace(/[?].*$/g,"")}},getIdentifyFlow:function(e,t,n){var o=n.point,i=r(n,["point"]),a=function(e){var t,n,r=null==e||null===(t=e.geometricFilter)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.geometry;if(r)return r;var o=e.latlng.lng;return{coordinates:[o-360*Math.floor(o/360+.5),e.latlng.lat],projection:"EPSG:4326",type:"Point"}}(o);return c.defer((function(){return f(e.url,e.name).then((function(n){var r=g(n),o=p({layerFilter:e.layerFilter,filterObj:{spatialField:{attribute:r,operation:"INTERSECTS",geometry:a}},params:y({},e.baseParams,e.params,i)});return m(t,e.name,o)}))}))}}},"./MapStore2/web/client/utils/mapinfo/wms.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/utils/MapUtils.js"),c=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),l=n("./MapStore2/web/client/utils/LayersUtils.js").getLayerUrl,s=n("./MapStore2/node_modules/lodash/lodash.js").isObject,u=n("./MapStore2/web/client/utils/VendorParamsUtils.js").optionsToVendorParams,p=n("./MapStore2/web/client/utils/LayerLocalizationUtils.js").generateEnvString,d=n("./MapStore2/web/client/utils/SecurityUtils.js"),f=n("./node_modules/object-assign/index.js");e.exports={buildRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sizeBBox,r=t.map,i=void 0===r?{}:r,m=t.point,g=t.currentLocale,b=t.params,y=t.maxItems,v=void 0===y?10:y,h=t.env,O=arguments.length>2?arguments[2]:void 0,j=arguments.length>3?arguments[3]:void 0,w=arguments.length>4?arguments[4]:void 0,S=n&&n.height||101,E=n&&n.width||101,A=[S,E],P=0,x=a.getCurrentResolution(Math.ceil(i.zoom),0,21,96),C=m.latlng.lng,T=C-360*Math.floor(C/360+.5),M={x:T,y:m.latlng.lat},I=c.reproject(M,"EPSG:4326",i.projection),k=c.getProjectedBBox(I,x,P,A,null),D=e.name;e.queryLayers&&(D=e.queryLayers.join(","));var N=p(h),_=u({layerFilter:e.layerFilter,filterObj:e.filterObj,params:f({},e.baseParams,e.params,b)});return{request:d.addAuthenticationToSLD(o({service:"WMS",version:"1.1.1",request:"GetFeatureInfo",exceptions:"application/json",id:e.id,layers:e.name,query_layers:D,styles:e.style,x:E%2==1?Math.ceil(E/2):E/2,y:E%2==1?Math.ceil(E/2):E/2,height:S,width:E,srs:c.normalizeSRS(i.projection)||"EPSG:4326",bbox:k.minx+","+k.miny+","+k.maxx+","+k.maxy,feature_count:v,info_format:O,ENV:N},f({},_)),e),metadata:{title:s(e.title)?e.title[g]||e.title.default:e.title,regex:e.featureInfoRegex,viewer:j,featureInfo:w},url:l(e).replace(/[?].*$/g,"")}}}},"./MapStore2/web/client/utils/mapinfo/wmts.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n("./MapStore2/web/client/utils/MapUtils.js"),c=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),l=n("./MapStore2/web/client/utils/WMTSUtils.js"),s=n("./MapStore2/web/client/utils/LayersUtils.js").getLayerUrl,u=n("./MapStore2/web/client/utils/VendorParamsUtils.js").optionsToVendorParams,p=n("./MapStore2/node_modules/lodash/lodash.js").isObject,d=n("./node_modules/object-assign/index.js");e.exports={buildRequest:function(e,t){var n=a.getCurrentResolution(Math.round(t.map.zoom),0,21,96),r=e.resolutions||a.getResolutions(),i=e.tileSize||256,f=[e.originX||-20037508.3428,e.originY||20037508.3428],m=t.point.latlng.lng,g={x:m-360*Math.floor(m/360+.5),y:t.point.latlng.lat},b=c.reproject(g,"EPSG:4326",t.map.projection),y=c.normalizeSRS(e.srs||t.map.projection||"EPSG:3857",e.allowedSRS),v=l.getTileMatrixSet(e.tileMatrixSet,y,e.allowedSRS,e.matrixIds),h=(b.x-f[0])/(n*i),O=(f[1]-b.y)/(n*i),j=Math.floor(h),w=Math.floor(O),S=Math.floor((h-j)*i),E=Math.floor((O-w)*i),A=l.limitMatrix(e.matrixIds&&l.getMatrixIds(e.matrixIds,v||y)||l.getDefaultMatrixId(e),r.length),P=u({layerFilter:e.layerFilter,filterObj:e.filterObj,params:d({},e.baseParams,e.params,t.params)});return{request:o(o({service:"WMTS",request:"GetFeatureInfo",layer:e.name,infoformat:t.format,style:e.style||""},d({},P)),{},{tilecol:j,tilerow:w,tilematrix:A[Math.round(t.map.zoom)],tilematrixset:v,i:S,j:E}),metadata:{title:p(e.title)?e.title[t.currentLocale]||e.title.default:e.title,regex:e.featureInfoRegex},url:s(e).replace(/[?].*$/g,"")}}}},"./MapStore2/web/client/utils/ogc/Filter/CQL/parser.js":function(e,t){var n="INTERSECTS",r="BBOX",o="CONTAINS",i="DWITHIN",a="WITHIN",c={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,IS_NULL:/^IS NULL/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('([^']|'')*'|-?\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(e){var t=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e);if(t){var n=e.length,r=e.indexOf("(",t[0].length);if(r>-1)for(var o=1;r<n&&o>0;)switch(r++,e.charAt(r)){case"(":o++;break;case")":o--}return[e.substr(0,r+1)]}return null},END:/^$/},l={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA","IS_NULL"],BETWEEN:["VALUE"],IS_NULL:["END"],COMPARISON:["VALUE"],COMMA:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},s={"=":"=","<>":"<>","<":"<","<=":"<=",">":">",">=":">=",LIKE:"like",ILIKE:"ilike",BETWEEN:"><","IS NULL":"isNull"},u={AND:"and",OR:"or",NOT:"not"},p={RPAREN:3,LOGICAL:2,COMPARISON:1},d=function(e,t){return t instanceof RegExp?t.exec(e):t(e)},f=function(e,t){var n,r,o=t.length;for(n=0;n<o;n++){r=t[n];var i=d(e,c[r]);if(i){var a=i[0];return{type:r,text:a,remainder:e.substr(a.length).replace(/^\s*/,"")}}}var l="ERROR: In parsing: ["+e+"], expected one of: ";for(n=0;n<o;n++)l+="\n    "+(r=t[n])+": "+c[r];throw new Error(l)},m=function(e){for(var t=[],c=[];e.length;){var l=e.shift();switch(l.type){case"PROPERTY":case"GEOMETRY":case"VALUE":c.push(l);break;case"COMPARISON":case"BETWEEN":case"IS_NULL":case"LOGICAL":for(var d=p[l.type];t.length>0&&p[t[t.length-1].type]<=d;)c.push(t.pop());t.push(l);break;case"SPATIAL":case"NOT":case"LPAREN":t.push(l);break;case"RPAREN":for(;t.length>0&&"LPAREN"!==t[t.length-1].type;)c.push(t.pop());t.pop(),t.length>0&&"SPATIAL"===t[t.length-1].type&&c.push(t.pop());break;case"COMMA":case"END":break;default:throw new Error("Unknown token type "+l.type)}}for(;t.length>0;)c.push(t.pop());var f=function e(){var t=c.pop();switch(t.type){case"LOGICAL":var l=e();return{filters:[e(),l],type:u[t.text.toUpperCase()]};case"NOT":return{filters:[e()],type:u.NOT};case"BETWEEN":c.pop();var p=e(),d=e();return{property:e(),lowerBoundary:d,upperBoundary:p,type:s.BETWEEN};case"COMPARISON":var f=e();return{property:e(),value:f,type:s[t.text.toUpperCase()]};case"IS_NULL":return{property:e(),type:s[t.text.toUpperCase()]};case"VALUE":var m=t.text.match(/^'(.*)'$/);return m?m[1].replace(/''/g,"'"):Number(t.text);case"SPATIAL":switch(t.text.toUpperCase()){case"BBOX":var g=e(),b=e(),y=e(),v=e(),h=e();return{type:r,property:h,value:[v,y,b,g]};case"INTERSECTS":var O=e(),j=e();return{type:n,property:j,value:O};case"WITHIN":var w=e(),S=e();return{type:a,property:S,value:w};case"CONTAINS":var E=e(),A=e();return{type:o,property:A,value:E};case"DWITHIN":var P=e(),x=e(),C=e();return{type:i,value:x,property:C,distance:Number(P)};default:return null}case"GEOMETRY":return function(){throw new Error("WKT parsing for CQL filter not supported yet")}(t.text);default:return t.text}}();if(c.length>0){for(var m="Remaining tokens after building AST: \n",g=c.length-1;g>=0;g--)m+=c[g].type+": "+c[g].text+"\n";throw new Error(m)}return f};e.exports={read:function(e){return m(function(e){var t,n=[],r=e,o=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{if(r=(t=f(r,o)).remainder,o=l[t.type],"END"!==t.type&&!o)throw new Error("No follows list for "+t.type);n.push(t)}while("END"!==t.type);return n}(e))}}},"./MapStore2/web/client/utils/ogc/Filter/FilterBuilder.js":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n("./MapStore2/web/client/utils/ogc/Filter/operators.js"),i=o.logical,a=o.spatial,c=o.comparison,l=o.literal,s=o.propertyName,u=o.valueReference,p=o.distance,d=o.lower,f=o.upper,m=n("./MapStore2/web/client/utils/ogc/Filter/filter.js"),g=m.filter,b=m.fidFilter,y=n("./MapStore2/web/client/utils/ogc/GML/index.js").processOGCGeometry;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterNS,n=void 0===t?"ogc":t,o=e.gmlVersion,m=e.wfsVersion,v=void 0===m?"1.1.0":m,h=o||"3.1.1",O=function(e){return y(h,e)},j=function(e){return"object"===r(e)&&Date,l(n,e)},w=0===v.indexOf("2.")?u:s;return{filter:g.bind(null,n),fidFilter:b.bind(null,n),and:i.and.bind(null,n),or:i.or.bind(null,n),not:i.not.bind(null,n),property:function(e){return{equalTo:function(t){return c.equal(n,w(n,e),j(t))},greaterThen:function(t){return c.greater(n,w(n,e),j(t))},greaterThenOrEqualTo:function(t){return c.greaterOrEqual(n,w(n,e),j(t))},lessThen:function(t){return c.less(n,w(n,e),j(t))},lessThenOrEqualTo:function(t){return c.lessOrEqual(n,w(n,e),j(t))},notEqualTo:function(t){return c.notEqual(n,w(n,e),j(t))},between:function(t,r){return c.between(n,w(n,e),d(n,j(t)),f(n,j(r)))},like:function(t,r){return c.like(n,w(n,e),j(t),r)},ilike:function(t,r){return c.ilike(n,w(n,e),j(t),r)},isNull:function(){return c.isNull(n,w(n,e))},intersects:function(t){return a.intersects(n,w(n,e),O(t))},within:function(t){return a.within(n,w(n,e),O(t))},dwithin:function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return a.dwithin(n,w(n,e),O(t),p(n,r,o))},contains:function(t){return a.contains(n,w(n,e),O(t))}}}}}},"./MapStore2/web/client/utils/ogc/Filter/filter.js":function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",t=arguments.length>1?arguments[1]:void 0;return"<".concat(e,":Filter>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Filter>")};e.exports={fidFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",t=arguments.length>1?arguments[1]:void 0;return n(e,"<".concat(e,':FeatureId fid="').concat(t,'"/>'))},filter:n}},"./MapStore2/web/client/utils/ogc/Filter/fromObject.js":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n("./MapStore2/node_modules/lodash/lodash.js"),a=i.includes,c=i.isNil,l=["and","or","not"],s={"=":"equalTo","<>":"notEqualTo","><":"between","<":"lessThen","<=":"lessThenOrEqualTo",">":"greaterThen",">=":"greaterThenOrEqualTo",like:"like",ilike:"ilike"};e.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var o=n.type,i=n.filters,u=void 0===i?[]:i,p=n.value,d=n.property,f=n.lowerBoundary,m=n.upperBoundary;return a(l,o)?t[o].apply(t,r(u.map(e(t)))):t.property(d)[s[o]](c(p)?f:p,m)}}},"./MapStore2/web/client/utils/ogc/Filter/operators.js":function(e,t){var n={"=":function(e,t){return"<".concat(e,":PropertyIsEqualTo>").concat(t,"</").concat(e,":PropertyIsEqualTo>")},">":function(e,t){return"<".concat(e,":PropertyIsGreaterThan>").concat(t,"</").concat(e,":PropertyIsGreaterThan>")},"<":function(e,t){return"<".concat(e,":PropertyIsLessThan>").concat(t,"</").concat(e,":PropertyIsLessThan>")},">=":function(e,t){return"<".concat(e,":PropertyIsGreaterThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsGreaterThanOrEqualTo>")},"<=":function(e,t){return"<".concat(e,":PropertyIsLessThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsLessThanOrEqualTo>")},"<>":function(e,t){return"<".concat(e,":PropertyIsNotEqualTo>").concat(t,"</").concat(e,":PropertyIsNotEqualTo>")},"><":function(e,t){return"<".concat(e,":PropertyIsBetween>").concat(t,"</").concat(e,":PropertyIsBetween>")},like:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="true" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},ilike:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},isNull:function(e,t){return"<".concat(e,":PropertyIsNull>").concat(t,"</").concat(e,":PropertyIsNull>")}},r={AND:function(e,t){return"<".concat(e,":And>").concat(t,"</").concat(e,":And>")},OR:function(e,t){return"<".concat(e,":Or>").concat(t,"</").concat(e,":Or>")},NOR:function(e,t){return"<".concat(e,":Not><").concat(e,":Or>").concat(t,"</").concat(e,":Or></").concat(e,":Not>")},NOT:function(e,t){return"<".concat(e,":Not>").concat(t,"</").concat(e,":Not>")}},o={INTERSECTS:function(e,t){return"<".concat(e,":Intersects>").concat(t,"</").concat(e,":Intersects>")},BBOX:function(e,t){return"<".concat(e,":BBOX>").concat(t,"</").concat(e,":BBOX>")},CONTAINS:function(e,t){return"<".concat(e,":Contains>").concat(t,"</").concat(e,":Contains>")},DWITHIN:function(e,t){return"<".concat(e,":DWithin>").concat(t,"</").concat(e,":DWithin>")},WITHIN:function(e,t){return"<".concat(e,":Within>").concat(t,"</").concat(e,":Within>")}},i=function(e,t,n){return t(e,Array.isArray(n)?n.join(""):n)},a={and:function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];return o&&o.length>0?i(e,r.AND,[t].concat(o)):i(e,r.AND,t)},or:function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];return o&&o.length>0?i(e,r.OR,[t].concat(o)):i(e,r.OR,t)},not:function(e,t){return i(e,r.NOT,t)},nor:function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];return o&&o.length>0?i(e,r.NOR,[t].concat(o)):i(e,r.NOR,t)}},c={intersects:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e,o.INTERSECTS,n)},within:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e,o.WITHIN,n)},bbox:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e,o.BBOX,n)},dwithin:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e,o.DWITHIN,n)},contains:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e,o.CONTAINS,n)}},l={equal:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n["="],r)},greater:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n[">"],r)},less:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n["<"],r)},greaterOrEqual:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n[">="],r)},lessOrEqual:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n["<="],r)},notEqual:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n["<>"],r)},between:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n["><"],r)},like:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n.like,r)},ilike:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n.ilike,r)},isNull:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return i(e,n.isNull,r)}};e.exports={ogcComparisonOperators:n,ogcLogicalOperators:r,ogcSpatialOperators:o,propertyName:function(e,t){return"<".concat(e,":PropertyName>").concat(t,"</").concat(e,":PropertyName>")},valueReference:function(e,t){return"<".concat(e,":ValueReference>").concat(t,"</").concat(e,":ValueReference>")},distance:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return"<".concat(e,':Distance units="').concat(n,'">').concat(t,"</").concat(e,":Distance>")},literal:function(e,t){return"<".concat(e,":Literal>").concat(t,"</").concat(e,":Literal>")},logical:a,spatial:c,comparison:l,lower:function(e,t){return"<".concat(e,":LowerBoundary>").concat(t,"</").concat(e,":LowerBoundary>")},upper:function(e,t){return"<".concat(e,":UpperBoundary>").concat(t,"</").concat(e,":UpperBoundary>")}}},"./MapStore2/web/client/utils/ogc/GML/index.js":function(e,t,n){var r=n("./MapStore2/node_modules/lodash/lodash.js").isArray,o=function(e){return 0===e.indexOf("2.")},i=function(e){if(e.length>=3){var t=e[0],n=e[e.length-1];if(t[0]!==n[0]||t[1]!==n[1])return e.concat([e[0]])}return e},a=function(e,t,n){var r='<gml:Point srsDimension="2"';return r+=t?' srsName="'+t+'">':">",r+=o(n)?"<gml:coord><X>"+e[0]+"</X><Y>"+e[1]+"</Y></gml:coord>":"<gml:pos>"+e.join(" ")+"</gml:pos>",r+="</gml:Point>"},c=function(e,t,n){var a=o(n),c="<gml:Polygon";return c+=t?' srsName="'+t+'">':">",(e.length&&r(e[0])&&e[0].length&&r(e[0][0])?e:[e]).forEach((function(e,t){var n=i(e).map((function(e){return e[0]+(a?",":" ")+e[1]})),r=a?"outerBoundaryIs":"exterior",o=a?"innerBoundaryIs":"exterior";c+=(t<1?"<gml:"+r+">":"<gml:"+o+">")+"<gml:LinearRing>"+(a?"<gml:coordinates>":"<gml:posList>")+n.join(" ")+(a?"</gml:coordinates>":"</gml:posList>")+"</gml:LinearRing>"+(t<1?"</gml:"+r+">":"</gml:"+o+">")})),c+="</gml:Polygon>"},l=function(e,t,n){var r=o(n),i="<gml:LineString";i+=t?' srsName="'+t+'">':">";var a=e.map((function(e){return e[0]+(r?",":" ")+e[1]}));return i+=(r?"<gml:coordinates>":"<gml:posList>")+a.join(" ")+(r?"</gml:coordinates>":"</gml:posList>"),i+="</gml:LineString>"};e.exports={closePolygon:i,pointElement:a,polygonElement:c,lineStringElement:l,processOGCGeometry:function(e,t){var n="",r=t.projection||"EPSG:4326";switch(t.type){case"Point":n+=a(t.coordinates,r,e);break;case"MultiPoint":n+='<gml:MultiPoint srsName="'+(t.projection||"EPSG:4326")+'">',t.coordinates.forEach((function(t){t&&(n+="<gml:pointMember>",n+=a(t,r,e),n+="</gml:pointMember>")})),n+="</gml:MultiPoint>";break;case"LineString":n+=l(t.coordinates,r,e);break;case"MultiLineString":var o="3.2"===e?"MultiCurve":"MultiLineString",i="3.2"===e?"curveMember":"lineStringMember";n+="<gml:".concat(o,' srsName="').concat(r,'">'),t.coordinates.forEach((function(t){t&&(n+="<gml:"+i+">",n+=l(t,r,e),n+="</gml:"+i+">")})),n+="</gml:"+o+">";break;case"Polygon":n+=c(t.coordinates,r,e);break;case"MultiPolygon":var s="3.2"===e?"MultiSurface":"MultiPolygon",u="3.2"===e?"surfaceMembers":"polygonMember";n+="<gml:".concat(s,' srsName="').concat(r,'">'),t.coordinates.forEach((function(t){t&&(n+="<gml:"+u+">",n+=c(t,r,e),n+="</gml:"+u+">")})),n+="</gml:"+s+">"}return n}}},"./MapStore2/web/client/utils/ogc/WFS/base.js":function(e,t,n){var r=n("./MapStore2/node_modules/lodash/lodash.js"),o=r.head,i=r.get,a=function(e){return/[<>&'"]/.test(e)?"<![CDATA[".concat(e,"]]>"):e},c=n("./MapStore2/web/client/utils/ogc/GML/index.js").processOGCGeometry,l={"1.0.0":"2.0","1.1.0":"3.1.1","2.0":"3.2","2.0.0":"3.2"},s=function(e){return i(e,"featureTypes[0].properties")},u=function(e,t){return o((s(t)||[]).filter((function(t){return t.name===e})))},p=function(e){return e.targetNamespace},d=function(e){return 0===e.type.indexOf("gml:")},f=function(e,t){return null==t||t&&!0===t.nillable||t&&!1===t.nillable&&null!=e},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geom,n=e.properties,r=arguments.length>1?arguments[1]:void 0;return f(d(r)?t:n[r.name],r)};e.exports={schemaLocation:p,isGeometryType:d,featureTypeSchema:function(e){return"xmlns:".concat(e.targetPrefix,'="').concat(p(e),'"')},getValue:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1.1.0",o=d(u(t,n));return o?e?c(r,{type:e.type,coordinates:e.coordinates}):"":null==e?"":"string"==typeof e?a(e):e},getPropertyDesciptor:u,findGeometryProperty:function(e){return o((s(e)||[]).filter((function(e){return 0===e.type.indexOf("gml:")})))},getFeatureTypeProperties:s,getTypeName:function(e){return e.targetPrefix?e.targetPrefix+":"+e.featureTypes[0].typeName:e.featureTypes[0].typeName},wfsToGmlVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1.1.0";return l[e]},processOGCGeometry:c,isValid:function(e,t){return s(t).map((function(t){return m(e,t)}))},isValidProperty:m,isValidValueForPropertyName:function(e,t,n){return f(e,u(t,n))},isValidValue:f}},"./js/actions/gnsave.js":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"k",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"l",(function(){return m}));var r="GEONODE:SAVING_RESOURCE",o="GEONODE:SAVE_SUCCESS",i="GEONODE:SAVE_ERROR",a="GEONODE:CLEAR_SAVE",c="GEONODE:SAVE_CONTENT",l="GEONODE:UPDATE_RESOURCE_BEFORE_SAVE";function s(){return{type:r}}function u(e){return{type:o,success:e}}function p(e){return{type:i,error:e}}function d(e){return{type:a,error:e}}function f(e,t){return{type:c,metadata:e,id:t}}function m(e){return{type:l,id:e}}},"./js/epics/gnsave.js":function(e,t,n){"use strict";var r=n("./node_modules/rxjs/Rx.js"),o=n("./MapStore2/web/client/selectors/map.js"),i=n("./MapStore2/web/client/selectors/layers.js"),a=n("./MapStore2/web/client/selectors/backgroundselector.js"),c=n("./MapStore2/web/client/utils/MapUtils.js"),l=n("./node_modules/reselect/es/index.js"),s=n("./MapStore2/web/client/selectors/catalog.js"),u=n("./MapStore2/web/client/selectors/widgets.js"),p=n("./MapStore2/web/client/selectors/mapInfo.js"),d=n("./MapStore2/web/client/selectors/dimension.js"),f=n("./MapStore2/web/client/selectors/timeline.js"),m=function(e){return e.searchconfig&&e.searchconfig.textSearchConfig},g=function(e){return e.searchbookmarkconfig&&e.searchbookmarkconfig.bookmarkSearchConfig};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={},O=Object(l.createStructuredSelector)({catalogServices:Object(l.createStructuredSelector)({services:s.servicesSelector,selectedService:s.selectedServiceSelector}),widgetsConfig:Object(l.createStructuredSelector)({widgets:u.getFloatingWidgets,layouts:u.getFloatingWidgetsLayout,collapsed:u.getCollapsedState}),mapInfoConfiguration:p.mapInfoConfigurationSelector,dimensionData:Object(l.createStructuredSelector)({currentTime:d.currentTimeSelector,offsetTime:d.offsetTimeSelector}),timelineData:Object(l.createStructuredSelector)({selectedLayer:f.selectedLayerSelector})}),j=function(e){var t=Object.keys(h).reduce((function(t,n){return y(y({},t),{},v({},n,h[n](e)))}),{});return y(y({},O(e)),t)},w=n("./MapStore2/web/client/utils/ConfigUtils.js"),S=n("./MapStore2/web/client/selectors/geostory.js"),E=n("./MapStore2/web/client/selectors/security.js"),A=n("./js/api/geonode/adapter/index.js"),P=n("./js/actions/gnsave.js"),x=n("./js/actions/gnresource.js"),C=n("./js/api/geonode/v2/index.js"),T=n("./js/utils/APIUtils.js"),M=n("./node_modules/uuid/index.js"),I=n.n(M);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L={map:function(e,t,n){var r=Object(o.mapSelector)(e),l=Object(i.layersSelector)(e),s=Object(i.groupsSelector)(e),u=Object(a.backgroundListSelector)(e),p=m(e),d=g(e),f=j(e),b=Object(c.saveMapConfiguration)(r,l,s,u,p,d,f),y=t.name,v=t.description,h=t.thumbnail,O={name:y,data:b,attributes:[{type:"string",name:"title",value:y,label:"Title"},{type:"string",name:"abstract",value:v,label:"Abstract"}].concat(_(h?[{type:"string",name:"thumbnail",value:h,label:"Thumbnail"}]:[]))};return n?Object(A.c)(n,D(D({},O),{},{id:n})):Object(A.a)(O).then((function(e){return window.location.href=Object(T.a)("".concat(Object(w.getConfigProp)("geonode_url"),"maps/").concat(e.id,"/edit")),e.data}))},geostory:function(e,t,n){var r=Object(S.e)(e),o=Object(E.userSelector)(e),i={title:t.name,abstract:t.description,data:JSON.stringify(r),thumbnail_url:t.thumbnail};return n?Object(C.e)(n,i):Object(C.a)(D({name:t.name+" "+I()(),owner:o.name},i)).then((function(e){return window.location.href=Object(T.a)("".concat(Object(w.getConfigProp)("geonode_url"),"apps/").concat(e.pk,"/edit")),e.data}))}};t.a={gnSaveContent:function(e,t){return e.ofType(P.b).switchMap((function(e){var n,o=t.getState(),i=(null===(n=o.gnresource)||void 0===n?void 0:n.type)||"map";return r.Observable.defer((function(){return L[i](o,e.metadata,e.id)})).switchMap((function(t){return r.Observable.of(Object(P.j)(t),Object(x.p)({title:e.metadata.name,abstract:e.metadata.description,thumbnail_url:e.metadata.thumbnail}))})).catch((function(e){return r.Observable.of(Object(P.i)(e.data||e.message))})).startWith(Object(P.k)())}))},gnUpdateResource:function(e,t){return e.ofType(P.f).switchMap((function(e){var n,o=(null===(n=t.getState().gnresource)||void 0===n?void 0:n.data)||{};return!e.id||o.pk&&e.id&&o.pk+""==e.id+""?r.Observable.empty():r.Observable.defer((function(){return Object(C.d)(e.id)})).switchMap((function(e){return r.Observable.of(Object(x.l)(e))})).catch((function(e){return r.Observable.of(Object(x.i)(e.data||e.message))})).startWith(Object(x.j)())}))}}},"./js/geostoryPlugins.js":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"openMediaEditorForNewMedia",(function(){return Be})),n.d(r,"openWebPageComponentCreator",(function(){return Ge})),n.d(r,"editWebPageComponent",(function(){return He})),n.d(r,"saveGeoStoryResource",(function(){return We})),n.d(r,"scrollToContentEpic",(function(){return ze})),n.d(r,"editMediaForBackgroundEpic",(function(){return Ve})),n.d(r,"loadGeostoryEpic",(function(){return Qe})),n.d(r,"reloadGeoStoryOnLoginLogout",(function(){return qe})),n.d(r,"cleanUpEmptyStoryContainers",(function(){return Ye})),n.d(r,"sortContentEpic",(function(){return Ke})),n.d(r,"setFocusOnMapEditing",(function(){return Je})),n.d(r,"inlineEditorEditMap",(function(){return Ze})),n.d(r,"closeShareOnGeostoryChangeMode",(function(){return Xe})),n.d(r,"handlePendingGeoStoryChanges",(function(){return $e})),n.d(r,"urlUpdateOnScroll",(function(){return et})),n.d(r,"scrollOnLoad",(function(){return tt})),n.d(r,"loadStoryOnHistoryPop",(function(){return nt})),n.d(r,"scrollSideBar",(function(){return rt}));var o={};n.r(o),n.d(o,"loadMediaEditorDataEpic",(function(){return Ds})),n.d(o,"editorSaveUpdateMediaEpic",(function(){return Ns})),n.d(o,"mediaEditorNewMap",(function(){return _s})),n.d(o,"mediaEditorEditMap",(function(){return Rs})),n.d(o,"reloadMediaResources",(function(){return Ls})),n.d(o,"importInLocalSource",(function(){return Fs})),n.d(o,"editRemoteMap",(function(){return Bs})),n.d(o,"removeMediaEpic",(function(){return Us})),n.d(o,"updateSelectedItem",(function(){return Gs}));var i=n("./MapStore2/web/client/plugins/OmniBar.jsx"),a=n.n(i),c=n("./MapStore2/web/client/plugins/BurgerMenu.jsx"),l=n.n(c),s=n("./node_modules/react/index.js"),u=n.n(s),p=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/reselect/es/index.js"),f=n("./node_modules/webfontloader/webfontloader.js"),m=n.n(f),g=n("./MapStore2/web/client/utils/PluginsUtils.js"),b=n("./MapStore2/web/client/utils/GeoStoryUtils.js"),y=n("./MapStore2/web/client/utils/LocaleUtils.js"),v=n.n(y),h=n("./MapStore2/web/client/utils/NotificationUtils.js"),O=n("./MapStore2/web/client/actions/geostory.js"),j=n("./MapStore2/node_modules/lodash/lodash.js"),w="geostory",S="geostore",E={type:"osm",title:"Open Street Map",name:"mapnik",source:"osm",group:"background",visibility:!0,id:"mapnik__0",loading:!1,loadingError:!1},A="MEDIA_EDITOR:ADDING_MEDIA",P="MEDIA_EDITOR:EDITING_MEDIA",x="MEDIA_EDITOR:HIDE",C="MEDIA_EDITOR:SET_MEDIA_TYPE",T="MEDIA_EDITOR:SET_MEDIA_SERVICE",M="MEDIA_EDITOR:SELECT_ITEM",I="MEDIA_EDITOR:SHOW",k="MEDIA_EDITOR:UPDATE_ITEM",D="MEDIA_EDITOR:REMOVE_MEDIA",N=function(){return{type:x}},_=function(e,t,n){return{type:"MEDIA_EDITOR:LOAD_MEDIA",params:e,mediaType:t,sourceId:n}},R=function(e){return{type:"MEDIA_EDITOR:LOAD_MEDIA_SUCCESS",mediaType:e.mediaType,sourceId:e.sourceId,params:e.params,resultData:e.resultData}},L=function(e){return{type:"MEDIA_EDITOR:SAVE_MEDIA_SUCCESS",mediaType:e.mediaType,source:e.source,data:e.data,id:e.id}},F=function(e){return{type:M,id:e}},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"merge";return{type:k,item:e,mode:t}},U=function(e){return{type:A,adding:e}},G=function(e){return{type:T,id:Object(j.isObject)(e)?e.value:e}},H=function(e){return{type:C,mediaType:e}},W=function(e){return{type:P,editing:e}},z=function(e,t){return{type:I,owner:e,settings:t}},V=function(e){return{type:"MEDIA_EDITOR:LOADING_SELECTED_MEDIA",loading:e}},Q=n("./node_modules/rxjs/Rx.js"),q=n("./MapStore2/node_modules/lodash/head.js"),Y=n.n(q),K=n("./MapStore2/node_modules/lodash/isNaN.js"),J=n.n(K),Z=n("./MapStore2/node_modules/lodash/isString.js"),X=n.n(Z),$=n("./MapStore2/node_modules/lodash/isNil.js"),ee=n.n($),te=n("./MapStore2/node_modules/lodash/lastIndexOf.js"),ne=n.n(te),re=n("./MapStore2/node_modules/lodash/words.js"),oe=n.n(re),ie=n("./MapStore2/node_modules/lodash/get.js"),ae=n.n(ie),ce=n("./MapStore2/node_modules/lodash/isArray.js"),le=n.n(ce),se=n("./MapStore2/node_modules/lodash/isEmpty.js"),ue=n.n(se),pe=n("./node_modules/connected-react-router/esm/actions.js"),de=n("./node_modules/uuid/v1.js"),fe=n.n(de),me=n("./MapStore2/web/client/libs/ajax.js"),ge=n.n(me),be=n("./MapStore2/web/client/actions/controls.js"),ye=n("./MapStore2/web/client/actions/notifications.js"),ve=n("./MapStore2/web/client/actions/security.js"),he=n("./MapStore2/web/client/selectors/security.js"),Oe=n("./MapStore2/web/client/selectors/geostory.js"),je=n("./MapStore2/web/client/selectors/mediaEditor.js"),we=n("./MapStore2/web/client/observables/epics.js"),Se="MAP_EDITOR:SAVE",Ee=function(e,t){return{type:"MAP_EDITOR:SHOW",owner:e,map:t}},Ae=function(e){return{type:"MAP_EDITOR:HIDE",owner:e}};function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||ke(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ie(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){if(e){if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ne=n("./MapStore2/web/client/api/persistence/index.js"),_e=Ne.createResource,Re=Ne.updateResource,Le=Ne.getResource,Fe=function(e,t){return function(n){return n.ofType("MEDIA_EDITOR:CHOOSE_MEDIA").switchMap((function(n){var r=n.resource,o=void 0===r?{}:r,i=[],a=e.getState(),c=Object(je.c)(a),l=Object(je.p)(a),s=Y()(Object(Oe.t)(a).filter((function(e){return e.data&&(l!==w&&e.data.id||e.id)===o.id}))),u=o.id;s?u=s.id:ue()(o)?i=[].concat(Ie(i),[Object(O.M)("".concat(t)),N()]):(u=o.id||fe()(),i=[].concat(Ie(i),[Object(O.E)(u,c,o.data?o.data:o)]));var p=c===b.e.MAP?{resourceId:u,type:c,map:void 0}:{resourceId:u,type:c};return i=[].concat(Ie(i),[Object(O.bb)("".concat(t),p,"merge"),N()]),Q.Observable.from(i)}))}},Be=function(e,t){return e.ofType(O.a).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===b.a.MEDIA||Object(b.v)(n)})).switchMap((function(n){var r=n.path,o=n.element,i="";Object(b.v)(o)&&"sections"===r&&(i=".contents[0].contents[0]");var a="".concat(r,'[{"id":"').concat(o.id,'"}]').concat(i),c=Object(Oe.h)(t.getState());return Q.Observable.of(z("geostory",c)).merge(e.let(Fe(t,a)),e.ofType(x).switchMap((function(){return Q.Observable.of(Object(O.M)(a))})).takeUntil(e.ofType(O.z))).takeUntil(e.ofType("GEOSTORY:EDIT_MEDIA"))}))},Ue=function(e){return function(t){return t.ofType(O.u).switchMap((function(t){var n=t.src;return Q.Observable.of(Object(O.bb)("".concat(e),{src:n,editURL:!1},"merge"))}))}},Ge=function(e){return e.ofType(O.a).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===b.a.WEBPAGE&&!1!==n.editURL||Object(b.w)(n)})).switchMap((function(t){var n=t.path,r=t.element,o="";Object(b.w)(r)&&"sections"===n&&(o=".contents[0].contents[0]");var i="".concat(n,'[{"id":"').concat(r.id,'"}]').concat(o);return Q.Observable.of(Object(O.bb)(i,{editURL:!0},"merge")).merge(e.let(Ue(i))).takeUntil(e.ofType(O.f))}))},He=function(e){return e.ofType(O.f).switchMap((function(t){var n=t.path;return Q.Observable.of(Object(O.bb)(n,{editURL:!0},"merge")).merge(e.let(Ue(n))).takeUntil(e.ofType(O.a))}))},We=function(e){return e.ofType(O.l).exhaustMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resource,n=e.delay,r=void 0===n?1e3:n;return(t.id?Re(t):_e(t)).switchMap((function(e){return Q.Observable.of(Object(O.X)(e),Object(O.Q)(b.b.SHOW_SAVE,!1),t.id?Object(O.I)(e):Object(pe.g)("/geostory/".concat(e))).merge(Q.Observable.of(Object(ye.show)({id:"STORY_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(t.id?0:r))})).let(Object(we.wrapStartStop)(Object(O.K)(!0,"loading"),Object(O.K)(!1,"loading"))).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,n=e.statusText,r=e.data,o=e.message,i=Me(e,["status","statusText","data","message"]);return Q.Observable.of(Object(O.O)(t?{status:t,statusText:n,data:r}:o||i),Object(O.K)(!1,"loading"))}))}))},ze=function(e){return e.ofType(O.a).switchMap((function(e){var t=e.element;return Q.Observable.of(t).switchMap((function(){if(document.getElementById(t.id))return Object(b.z)(t.id,{behavior:"auto",block:"center"}),Q.Observable.empty();throw new Error("Item not mounted yet")})).retryWhen((function(e){return e.delay(200).take(10)}))}))},Ve=function(e,t){return e.ofType("GEOSTORY:EDIT_MEDIA").switchMap((function(n){var r=n.path,o=n.owner,i=Object(Oe.s)(r)(t.getState()),a=Object(Oe.r)(i)(t.getState());return Q.Observable.of(Object(je.c)(t.getState())).filter((function(e){return a&&a.type!==e})).map((function(){return H(a.type)})).merge(Q.Observable.of(z(o,Object(Oe.h)(t.getState())),F(i)).merge(e.let(Fe(t,r)).takeUntil(e.ofType(x,O.a))))}))},Qe=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O.h).switchMap((function(e){var t=e.id;return Q.Observable.defer((function(){return t&&J()(parseInt(t,10))?ge.a.get("configs/".concat(t,".json")).then((function(e){var t=e.data,n=t.sections,r=le()(n)&&n.map((function(e){return Ce(Ce({},e),{},{id:fe()()})}));return{data:r.length?Ce(Ce({},t),{},{sections:r}):t,isStatic:!0,canEdit:!0}})):Le(t)})).do((function(e){if(!e.data)throw Error("Wrong data format");return!0})).switchMap((function(e){var n=e.data,o=e.isStatic,i=void 0!==o&&o,a=Me(e,["data","isStatic"]),c=r(),l=Object(he.isAdminUserSelector)(c),s=Object(he.isLoggedIn)(c),u=X()(n)?JSON.parse(n):n;if(!s&&J()(parseInt(t,10)))return Q.Observable.of(Object(O.J)({status:403}));var p=Object(Oe.p)(c)===b.f.EDIT;return Q.Observable.from([].concat(Ie(i||p?[Object(O.S)(a&&a.canEdit||l)]:[]),[Object(O.H)(t),Object(O.R)(u),Object(O.V)(a)]))})).let(Object(we.wrapStartStop)(Object(O.K)(!0,"loading"),Object(O.K)(!1,"loading"),(function(e){var t="geostory.errors.loading.unknownError";return 403===e.status?(t="geostory.errors.loading.pleaseLogin",(Object(he.isLoggedIn)(r())||Object(Oe.n)(r()))&&(t="geostory.errors.loading.geostoryNotAccessible")):404===e.status?t="geostory.errors.loading.geostoryDoesNotExist":ee()(e.status)&&(t=e.message),Q.Observable.of(Object(ye.error)({title:"geostory.errors.loading.title",message:t}),Object(O.R)({}),Object(O.J)(Ce(Ce({},e),{},{messageId:t})))}))).startWith(Object(O.R)({}))}))},qe=function(e){return e.ofType(O.h).switchMap((function(t){var n=t.id;return e.ofType(ve.LOGIN_SUCCESS,ve.LOGOUT).switchMap((function(){return Q.Observable.of(Object(O.I)(n)).delay(500)})).takeUntil(e.ofType(pe.b))}))},Ye=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O.j).switchMap((function(e){var t=e.path,n=Object(b.r)(t,Object(Oe.e)(r())),o=ne()(n,"contents");if(o>0){var i=n.splice(0,o),a=Object(Oe.a)(i.join("."))(r());if(a&&a.contents&&0===a.contents.length)return Q.Observable.of(Object(O.M)(i.join(".")))}return Q.Observable.empty()}))},Ke=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O.i).switchMap((function(e){var t=e.source,n=e.target,o=e.position,i=r(),a=Object(Oe.a)(t)(i);return Q.Observable.of(Object(O.M)(t),Object(O.D)(n,o,a))}))},Je=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(O.z).filter((function(e){var t=e.path;return(void 0===t?"":t).endsWith("editMap")})).map((function(e){var t=e.path,n=e.element,o=Object(b.s)(t,Object(Oe.e)(r())),i=o.flatPath,a=o.path,c=i.pop(),l=i.shift(),s="background"===a[a.length-2],u=s&&"#".concat(l.id," .ms-section-background-container")||"#".concat(c.id);return Object(b.z)(c.id),Object(O.T)(n,c,u,s,t.replace(".editMap",""))}))},Ze=function(e,t){var n=t.getState;return e.ofType("MAP_EDITOR:SHOW").filter((function(e){var t=e.owner,n=e.map;return"inlineEditor"===t&&!!n})).switchMap((function(){return e.ofType(Se).switchMap((function(t){var r=t.map,o=Object(Oe.g)(n()).path;return Q.Observable.of(Object(O.bb)("".concat(o,".map"),r),Object(O.bb)("".concat(o,".editMap"),!1),Ae()).takeUntil(e.ofType("MAP_EDITOR:HIDE"))}))}))},Xe=function(e){return e.ofType(O.c).switchMap((function(){return Q.Observable.of(Object(be.setControlProperty)("share","enabled",!1))}))},$e=function(e){return Q.Observable.merge(e.ofType(O.h).switchMap((function(){return e.ofType(O.s)}))).switchMap((function(){return e.ofType(O.a,O.z,O.j,O.b,O.e,O.C).take(1).switchMap((function(){return Q.Observable.of(Object(O.U)(!0)).concat(e.ofType(O.m,pe.b,ve.LOGOUT).take(1).switchMap((function(){return Q.Observable.of(Object(O.U)(!1))})))}))}))},et=function(e,t){var n=t.getState;return e.ofType(O.A).debounceTime(50).switchMap((function(e){var t=e.sectionId,r=e.columnId;if("edit"!==Object(Oe.p)(n())&&(r||t)&&Object(Oe.z)(n())){var o,i,a=ae()(n(),"geostory.resource.id"),c=Object(b.y)(window.location.href,null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.hash,a,t,r);c&&history.pushState(null,"",c)}return Q.Observable.empty()}))},tt=function(e){return e.ofType(O.q).switchMap((function(){var e,t,n,r,o,i,a=null===(e=window)||void 0===e||null===(t=e.location)||void 0===t||null===(n=t.hash)||void 0===n?void 0:n.split("/");return(null===(r=window)||void 0===r||null===(o=r.location)||void 0===o||null===(i=o.hash)||void 0===i?void 0:i.includes("shared"))?Object(b.z)(a[7]||a[5],{block:"start",behavior:"auto"}):a.length>5?Object(b.z)(a[6],{block:"start",behavior:"auto"}):5===a.length&&Object(b.z)(a[4],{block:"start",behavior:"auto"}),Q.Observable.empty()}))},nt=function(e){return e.ofType(pe.b).switchMap((function(e){var t,n=e.payload;if((null==n||null===(t=n.location)||void 0===t?void 0:t.pathname.includes("/geostory/"))&&"POP"===n.action){var r,o=oe()(null==n||null===(r=n.location)||void 0===r?void 0:r.pathname);return o.find((function(e){return"shared"===e}))?Q.Observable.of(Object(O.I)(o[2])).delay(500):Q.Observable.of(Object(O.I)(o[1])).delay(500)}return Q.Observable.empty()}))},rt=function(e,t){var n=t.getState;return e.ofType(O.A).filter((function(e){var t=e.columnId,r=e.sectionId;return!("edit"!==Object(Oe.p)(n())||!t&&!r)})).debounceTime(50).switchMap((function(){return Q.Observable.of(Array.from(document.querySelectorAll(".ms-geostory-builder .mapstore-side-card.ms-highlight")).pop()).filter((function(e){return!!e})).withLatestFrom(Q.Observable.of(document.querySelector(".ms-geostory-builder .ms2-border-layout-body")).filter((function(e){return!!e}))).map((function(e){var t=Pe(e,2),n=t[0],r=t[1];return function(){var e=n.getBoundingClientRect(),t=e.top,o=e.bottom,i=r.getBoundingClientRect(),a=i.top,c=i.bottom;t<a?r.scrollBy({top:t-a-10,behavior:"smooth"}):o>c&&r.scrollBy({top:o-c+10,behavior:"smooth"})}})).do((function(e){return window.requestAnimationFrame(e)})).ignoreElements()}))},ot=n("./MapStore2/web/client/selectors/locale.js"),it=n("./MapStore2/web/client/utils/ImmutableUtils.js");function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e){return function(e){if(Array.isArray(e))return ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pt=function(e,t){var n=e.length,r=0;return t||0===t||(r=n),Object(j.isString)(t)?r=Object(j.findIndex)(e,{id:t})+1:Object(j.isNumber)(t)&&(r=Math.min(t,e.length)),r},dt=function e(t,n,r){var o=r.contents,i=r.background,a=r.id,c=r.resourceId,l=[],s=n+'{"id": "'.concat(a,'"}]');return c===t?[s]:(i&&i.resourceId===t&&l.push(s+".background"),o?o.reduce((function(n,r){return[].concat(st(n),st(e(t,s+".contents[",r)))}),l):l)},ft={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.a:var n=t.id,r=t.path,o=t.position,i=t.element,a=Object(b.r)("currentStory.".concat(r),e),c=Object(j.get)(e,a,[]),l=pt(c,o),s=c.slice();return s.splice(l,0,ct({id:n},i)),Object(it.set)(a,s,e);case O.b:var u=t.id,p=t.mediaType,d=t.data;return Object(it.set)("currentStory.resources",Object(j.uniqBy)([{id:u,type:p,data:d}].concat(st(e.currentStory&&e.currentStory.resources||[])),"id"),e);case O.c:return Object(it.set)("mode",t.mode,e);case O.e:var f=t.id,m=t.mediaType,g=t.data,y=Object(it.arrayUpdate)("currentStory.resources",{id:f,type:m,data:g},{id:f},e);return m===b.e.MAP&&e.currentStory.sections.reduce((function(e,t){return[].concat(st(e),st(dt(f,"sections[",t)))}),[]).map((function(t){var n=Object(b.r)("currentStory.".concat(t,".map"),e);y=Object(it.set)(n,void 0,y)})),y;case O.k:var v=t.id,h=t.mediaType,w=Object(it.arrayDelete)("currentStory.resources",{id:v},e);return e.currentStory.sections.reduce((function(e,t){return[].concat(st(e),st(dt(v,"sections[",t)))}),[]).map((function(t){var n=Object(b.r)("currentStory.".concat(t,".resourceId"),e);if(w=Object(it.unset)(n,w),h===b.e.MAP){var r=Object(b.r)("currentStory.".concat(t,".map"),e);w=Object(it.unset)(r,w)}})),w;case O.g:return Object(it.set)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,Object(it.set)("loading",t.value,e));case O.j:var S=t.path,E=Object(b.r)("currentStory.".concat(S),e),A=st(E),P=A.pop(),x=Object(j.get)(e,A);return Object(j.isArray)(x)?(Object(j.isString)(P)&&(P=parseInt(P,10)),Object(it.set)(A,[].concat(st(x.slice(0,P)),st(x.slice(P+1))),e)):Object(it.unset)(E,e);case O.q:var C,T,M,I,k,D=e.defaultSettings||{},N=t.story.settings||D,_=(null===(C=N)||void 0===C||null===(T=C.theme)||void 0===T?void 0:T.fontFamilies)||[],R=null===(M=e.currentStory)||void 0===M||null===(I=M.settings)||void 0===I||null===(k=I.theme)||void 0===k?void 0:k.fontFamilies;return R&&R.length>0&&(N=Object(it.set)("theme.fontFamilies",Object(j.uniqBy)([].concat(st(R),st(_)),"family"),N)),Object(it.set)("currentStory",ct(ct({},t.story),{},{settings:N}),e);case O.o:return Object(it.set)("selectedCard",e.selectedCard===t.card?"":t.card,e);case O.p:var L=t.control,F=t.value;return Object(it.set)("controls.".concat(L),F,e);case O.s:var B=t.resource,U=e.currentStory&&e.currentStory.settings||{};return Object(it.compose)(Object(it.set)("resource",B),Object(it.set)("currentStory.settings.storyTitle",U.storyTitle||B.name))(e);case O.m:case O.d:return Object(it.unset)("errors.save",e);case O.n:return Object(it.set)("errors.save",Object(j.castArray)(t.error),e);case O.v:return Object(it.set)("isCollapsed",!e.isCollapsed,e);case O.x:var G=Object(j.get)(e,"currentStory.settings.".concat(t.option));return Object(it.set)("currentStory.settings.".concat(t.option),!G,e);case O.y:var H=!e.isSettingsEnabled,W=e.currentStory&&e.currentStory.settings||{};return Object(it.compose)(Object(it.set)("isSettingsEnabled",H),Object(it.set)("oldSettings",H?W:{}),Object(it.set)("currentStory.settings",H?ct({},W):t.withSave?W:e.oldSettings))(e);case O.z:var z=t.path,V=t.mode,Q=t.element,q=Object(b.r)("currentStory.".concat(z),e),Y=Object(j.get)(e,q);return Object(j.isPlainObject)(Y)&&Object(j.isPlainObject)(Q)&&"merge"===V&&(Q=ct(ct({},Y),Q)),Object(j.isArray)(Y)&&Object(j.isArray)(Q)&&"merge"===V&&(Q=[].concat(st(Y),st(Q))),Object(it.set)(q,Q,e);case O.C:return Object(it.set)("currentStory.settings.".concat(t.prop),t.value,e);case O.A:if(t.columnId){var K=Object(j.find)(e.currentStory.sections,(function(e){return Object(j.find)(e.contents,{id:t.columnId})}));return K&&Object(j.find)(K.contents,{id:t.columnId})?Object(it.set)("currentPage",ct(ct({},e.currentPage),{},{columns:ct(ct({},e.currentPage.columns),{},lt({},K.id,t.columnId))}),e):e}return Object(it.set)("currentPage",ct(ct({},e.currentPage),{},{sectionId:t.sectionId}),e);case O.w:var J=t.status,Z=t.target,X=t.selector,$=void 0===X?"":X,ee=t.hideContent,te=void 0!==ee&&ee,ne=t.path,re=J?{target:Z,selector:$,hideContent:te,path:ne}:void 0;return Object(it.set)("focusedContent",re,e);case O.r:return Object(it.set)("pendingChanges",t.value,e);case O.t:return Object(it.set)("updateUrlOnScroll",t.value,e);case O.B:return Object(it.set)("mediaEditorSettings",t.mediaEditorSettings,e);default:return e}},gt=n("./MapStore2/web/client/components/layout/BorderLayout.jsx"),bt=n.n(gt),yt=n("./node_modules/react-container-dimensions/lib/index.js"),vt=n.n(yt),ht=n("./node_modules/recompose/es/Recompose.js"),Ot=n("./node_modules/recompose/rxjsObservableConfig.js"),jt=n.n(Ot);function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){Et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object(ht.setObservableConfig)(jt.a);var xt=Object(ht.compose)(Object(ht.mapPropsStream)((function(e){var t=Object(ht.createEventHandler)(),n=t.handler,r=t.stream,o="EMPTY",i="EMPTY";return Q.Observable.combineLatest(e,r.filter((function(e){var t=e.columnId,n=e.sectionId;return t&&o!==t?(o=t,!0):!(!n||i===n)&&(i=n,!0)})).withLatestFrom(e.pluck("updateCurrentPage")).do((function(e){var t=At(e,2),n=t[0],r=t[1];return r&&r(n)})).ignoreElements().startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return St(St({},t.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return St(St({},e),t)}),{})),{},{updateCurrentPage:n})}))}))),Ct=n("./MapStore2/web/client/components/misc/enhancers/emptyState.jsx"),Tt=n.n(Ct);function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object(ht.setObservableConfig)(jt.a);var Dt=Object(ht.compose)(Object(ht.mapPropsStream)((function(e){var t=Object(ht.createEventHandler)(),n=t.handler,r=t.stream;return Q.Observable.combineLatest(e,function(e,t){return t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.interceptorTime,n=e.updateCurrentPage;return{interceptorTime:t,updateCurrentPage:n}})).distinctUntilKeyChanged("interceptorTime").switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.interceptorTime,r=void 0===n?100:n,o=t.updateCurrentPage;return e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return It(It({},e),{},kt({},n,{visible:r,entry:o}))}),{}).debounceTime(r).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(j.minBy)(Object.keys(e),(function(t){return e[t].visible?Object(j.get)(e[t],"entry.boundingClientRect.top"):1/0}));return t})).do((function(e){o&&o({sectionId:e})})).ignoreElements()}))}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return It(It({},t.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return It(It({},e),t)}),{})),{},{onVisibilityChange:n})}))}))),Nt=n("./node_modules/prop-types/index.js"),_t=n.n(Nt),Rt=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),Lt=n.n(Rt),Ft=(n("./node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css"),n("./node_modules/draft-js/lib/Draft.js")),Bt=n("./node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.js"),Ut=n("./node_modules/classnames/index.js"),Gt=n.n(Ut);function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t,n){return t&&zt(e.prototype,t),n&&zt(e,n),e}function Qt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zt(e);if(t){var o=Zt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Kt(this,n)}}function Kt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?Jt(e):t}function Jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t=function(e){Qt(n,e);var t=Yt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Xt(Jt(e=t.call.apply(t,[this].concat(o))),"state",{expanded:!1}),Xt(Jt(e),"toggle",(function(){e.setState((function(e){return{expanded:!e.expanded}}))})),e}return Vt(n,[{key:"render",value:function(){var e=this.state.expanded,t=this.props,n=t.externalLinkOption,r=t.onSelectionChange,o=t.currentSelectOption,i=t.availableStorySections;return u.a.createElement("div",{className:"rdw-block-wrapper","aria-label":"rdw-block-control"},u.a.createElement(Bt.Dropdown,{className:"ms-rdw-link-options-dropdown",onChange:r,expanded:e,doExpand:this.toggle,doCollapse:this.toggle,onExpandEvent:this.toggle,title:"MSLinks"},u.a.createElement("span",null,o),u.a.createElement(Bt.DropdownOption,{active:!0,value:{value:n,label:n},key:n},"External Link"),i&&i.map((function(e){return u.a.createElement(Bt.DropdownOption,{active:e.id===o,value:{value:e.id,label:e.title||e.contents[0].title||e.contents[0].id},key:e.id},e.title||e.contents[0].title||e.contents[0].id)}))))}}]),n}(s.Component);Xt($t,"propTypes",{externalLinkOption:_t.a.string,onSelectionChange:_t.a.func,currentSelectOption:_t.a.string,availableStorySections:_t.a.array});var en=function(e){Qt(n,e);var t=Yt(n);function n(){var e;Wt(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Xt(Jt(e=t.call.apply(t,[this].concat(o))),"state",{showModal:!1,linkTarget:"",linkTitle:"",attributes:{},linkTargetOption:e.props.config.defaultTargetOption,currentSelectOption:"Select link target"}),Xt(Jt(e),"removeLink",(function(){(0,e.props.onChange)("unlink")})),Xt(Jt(e),"addLink",(function(){var t=e.props.onChange,n=e.state;t("link",n.linkTitle,n.linkTarget,n.linkTargetOption,n.attributes)})),Xt(Jt(e),"updateValue",(function(t){e.setState(Xt({},"".concat(t.target.name),t.target.value))})),Xt(Jt(e),"onSelectionChange",(function(t){"External Link"===t.value?e.setState({linkTarget:"",attributes:{},currentSelectOption:t.label}):e.setState({linkTarget:t.value,attributes:{"data-geostory-interaction-type":"scrollTo","data-geostory-interaction-params":"".concat(t.value),"data-geostory-interaction-name":t.label},currentSelectOption:t.label})})),Xt(Jt(e),"updateTargetOption",(function(t){e.setState({linkTargetOption:t.target.checked?"_blank":"_self"})})),Xt(Jt(e),"hideModal",(function(){e.setState({showModal:!1})})),Xt(Jt(e),"signalExpandShowModal",(function(){var t=e.props,n=t.onExpandEvent,r=t.currentState,o=r.link,i=r.selectionText,a=e.state.linkTargetOption;n();var c="Select link target";(null==o?void 0:o.target)&&o.target.length>0&&(c="External Link"),(null==o?void 0:o.attributes["data-geostory-interaction-name"])&&(c=o.attributes["data-geostory-interaction-name"]),e.setState({showModal:!0,linkTarget:o&&o.target||"",linkTargetOption:o&&o.targetOption||a,linkTitle:o&&o.title||i,attributes:o&&o.attributes||{},currentSelectOption:c})})),Xt(Jt(e),"forceExpandAndShowModal",(function(){var t=e.props,n=t.doExpand,r=t.currentState,o=r.link,i=r.selectionText,a=e.state.linkTargetOption;n();var c="Select link target";(null==o?void 0:o.target)&&o.target.length>0&&(c="External Link"),(null==o?void 0:o.attributes["data-geostory-interaction-name"])&&(c=o.attributes["data-geostory-interaction-name"]),e.setState({showModal:!0,linkTarget:o&&o.target,linkTargetOption:o&&o.targetOption||a,linkTitle:o&&o.title||i,attributes:o&&o.attributes||{},currentSelectOption:c})})),e}return Vt(n,[{key:"componentDidUpdate",value:function(e){e.expanded&&!this.props.expanded&&this.setState({showModal:!1,linkTarget:"",linkTitle:"",attributes:{},linkTargetOption:this.props.config.defaultTargetOption,currentSelectOption:"Select link target"})}},{key:"renderAddLinkModal",value:function(){var e=this.props,t=e.config.popupClassName,n=e.doCollapse,r=e.translations,o=e.availableStorySections,i=this.state,a=i.linkTitle,c=i.linkTarget,l=i.linkTargetOption,s=i.currentSelectOption;return u.a.createElement("div",{className:Gt()("rdw-link-modal",t),onClick:Bt.stopPropagation},u.a.createElement("label",{className:"rdw-link-modal-label",htmlFor:"linkTitle"},r["components.controls.link.linkTitle"]),u.a.createElement("input",{id:"linkTitle",className:"rdw-link-modal-input",onChange:this.updateValue,onBlur:this.updateValue,name:"linkTitle",value:a}),u.a.createElement("label",{className:"rdw-link-modal-label",htmlFor:"linkTarget"},r["components.controls.link.linkTarget"]),u.a.createElement($t,{externalLinkOption:"External Link",currentSelectOption:s,onSelectionChange:this.onSelectionChange,availableStorySections:o}),"External Link"===s&&u.a.createElement(u.a.Fragment,null,u.a.createElement("input",{id:"linkTarget",className:"rdw-link-modal-input",onChange:this.updateValue,onBlur:this.updateValue,name:"linkTarget",value:c}),u.a.createElement("label",{className:"rdw-link-modal-target-option",htmlFor:"openLinkInNewWindow"},u.a.createElement("input",{id:"openLinkInNewWindow",type:"checkbox",defaultChecked:"_blank"===l,value:"_blank",onChange:this.updateTargetOption}),u.a.createElement("span",null,r["components.controls.link.linkTargetOption"]))),u.a.createElement("span",{className:"rdw-link-modal-buttonsection"},u.a.createElement("button",{className:"rdw-link-modal-btn",onClick:this.addLink,disabled:!c||!a},r["generic.add"]),u.a.createElement("button",{className:"rdw-link-modal-btn",onClick:n},r["generic.cancel"])))}},{key:"renderInFlatList",value:function(){var e=this.props,t=e.config,n=t.options,r=t.link,o=t.unlink,i=t.className,a=e.currentState,c=e.expanded,l=e.translations,s=this.state.showModal;return u.a.createElement("div",{className:Gt()("rdw-link-wrapper",i),"aria-label":"rdw-link-control"},n.indexOf("link")>=0&&u.a.createElement(Bt.Option,{value:"unordered-list-item",className:Gt()(r.className),onClick:this.signalExpandShowModal,"aria-haspopup":"true","aria-expanded":s,title:r.title||l["components.controls.link.link"]},u.a.createElement("img",{src:r.icon,alt:""})),n.indexOf("unlink")>=0&&u.a.createElement(Bt.Option,{disabled:!a.link,value:"ordered-list-item",className:Gt()(o.className),onClick:this.removeLink,title:o.title||l["components.controls.link.unlink"]},u.a.createElement("img",{src:o.icon,alt:""})),c&&s?this.renderAddLinkModal():void 0)}},{key:"renderInDropDown",value:function(){var e=this.props,t=e.expanded,n=e.onExpandEvent,r=e.doCollapse,o=e.doExpand,i=e.onChange,a=e.config,c=e.currentState,l=e.translations,s=a.options,p=a.link,d=a.unlink,f=a.className,m=a.dropdownClassName,g=a.title,b=this.state.showModal;return u.a.createElement("div",{className:"rdw-link-wrapper","aria-haspopup":"true","aria-label":"rdw-link-control","aria-expanded":t,title:g},u.a.createElement(Bt.Dropdown,{className:Gt()("rdw-link-dropdown",f),optionWrapperClassName:Gt()(m),onChange:i,expanded:t&&!b,doExpand:o,doCollapse:r,onExpandEvent:n},u.a.createElement("img",{src:Object(Bt.getFirstIcon)(a),alt:""}),s.indexOf("link")>=0&&u.a.createElement(Bt.DropdownOption,{onClick:this.forceExpandAndShowModal,className:Gt()("rdw-link-dropdownoption",p.className),title:p.title||l["components.controls.link.link"]},u.a.createElement("img",{src:p.icon,alt:""})),s.indexOf("unlink")>=0&&u.a.createElement(Bt.DropdownOption,{onClick:this.removeLink,disabled:!c.link,className:Gt()("rdw-link-dropdownoption",d.className),title:d.title||l["components.controls.link.unlink"]},u.a.createElement("img",{src:d.icon,alt:""}))),t&&b?this.renderAddLinkModal():void 0)}},{key:"render",value:function(){return this.props.config.inDropdown?this.renderInDropDown():this.renderInFlatList()}}]),n}(s.Component);Xt(en,"propTypes",{expanded:_t.a.bool,doExpand:_t.a.func,doCollapse:_t.a.func,onExpandEvent:_t.a.func,config:_t.a.object,onChange:_t.a.func,currentState:_t.a.object,translations:_t.a.object,modalHandler:_t.a.any});var tn=en;function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=un(e);if(t){var o=un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ln(this,n)}}function ln(e,t){return!t||"object"!==nn(t)&&"function"!=typeof t?sn(e):t}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dn(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()}),t)}function fn(e){var t,n,r=e.showOpenOptionOnHover;return n=t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(a,e);var t,n,o,i=cn(a);function a(){var e;rn(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return pn(sn(e=i.call.apply(i,[this].concat(n))),"state",{showPopOver:!1}),pn(sn(e),"openLink",(function(){var t=e.props,n=t.entityKey,r=t.contentState.getEntity(n).getData().url,o=window.open(r,"blank");o&&o.focus()})),pn(sn(e),"toggleShowPopOver",(function(){var t=!e.state.showPopOver;e.setState({showPopOver:t})})),pn(sn(e),"renderDecorator",(function(){var t=e.props,n=t.children,o=t.entityKey,i=t.contentState.getEntity(o).getData(),a=i.url,c=i.targetOption,l=i.attributes,s=e.state.showPopOver;return l&&l["data-geostory-interaction-type"]?u.a.createElement("span",{className:"rdw-link-decorator-wrapper"},u.a.createElement("a",{"data-geostory-interaction-type":l["data-geostory-interaction-type"],"data-geostory-interaction-params":l["data-geostory-interaction-params"]},n)):u.a.createElement("span",{className:"rdw-link-decorator-wrapper",onMouseEnter:e.toggleShowPopOver,onMouseLeave:e.toggleShowPopOver},u.a.createElement("a",{href:a,target:c},n),s&&r?u.a.createElement("img",{src:Bt.openlink,alt:"",onClick:e.openLink,className:"rdw-link-decorator-icon"}):void 0)})),e}return t=a,(n=[{key:"render",value:function(){return this.renderDecorator()}}])&&on(t.prototype,n),o&&on(t,o),a}(s.Component),pn(t,"propTypes",{entityKey:_t.a.string.isRequired,children:_t.a.array,contentState:_t.a.object}),n}var mn=function(e){return{strategy:dn,component:fn(e)}},gn=n("./node_modules/draftjs-to-html/lib/draftjs-to-html.js"),bn=n.n(gn),yn=n("./node_modules/html-to-draftjs/dist/html-to-draftjs.js"),vn=n.n(yn),hn=function(e){var t=void 0;if(e instanceof HTMLAnchorElement){var n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=Ft.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;var r=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),o=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-name"),a={};i&&o&&r&&(a["data-geostory-interaction-type"]=r,a["data-geostory-interaction-params"]=o,a["data-geostory-interaction-name"]=i),n.attributes=a,t=Ft.Entity.__create("LINK","MUTABLE",n)}}return t},On=function(e,t){if("MENTION"===e.type)return'< href="'.concat(e.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(e.data.value,'">').concat(t,"</a>");if("LINK"===e.type){var n=e.data.targetOption||"_self",r=e.data.attributes;return r&&r["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(r["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(r["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(r["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(r["data-geostory-interaction-params"],"')\">").concat(t,"</a>"):'<a href="'.concat(e.data.url,'" target="').concat(n,'">').concat(t,"</a>")}if("IMAGE"===e.type){var o=e.data.alignment;return o&&o.length?"<div style=\"text-align:'".concat(o,';\'"><img src="').concat(e.data.src,'" alt="').concat(e.data.alt,'" style="height:\'').concat(e.data.height,"', width: '").concat(e.data.width,"'\" /></div>"):'<img src="'.concat(e.data.src,'" alt="').concat(e.data.alt,'" style="height:\'').concat(e.data.height,"', width: '").concat(e.data.width,"'\" />")}return"EMBEDDED_LINK"===e.type?'<iframe width="'.concat(e.data.width,'" height="').concat(e.data.height,'" src="').concat(e.data.src,'" frameBorder="0"></iframe>'):t};function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wn(e){return function(e){if(Array.isArray(e))return Sn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){Pn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xn=Object(ht.compose)(Object(ht.withProps)((function(e){var t=e.storyFonts,n=void 0===t?[]:t,r=e.placeholder,o=e.toolbarStyle,i=void 0===o?{}:o,a=e.className,c=void 0===a?"ms-text-editor":a,l=e.toolbar,s=void 0===l?{}:l;return{editorRef:function(e){return setTimeout((function(){return e&&e.focus&&e.focus()}),100)},stripPastedStyles:!0,placeholder:r,toolbarStyle:i,toolbar:An({options:["fontFamily","blockType","fontSize","inline","textAlign","colorPicker","list","link","remove"],fontFamily:{options:n.length>0?n:b.c,className:void 0,component:void 0,dropdownClassName:void 0},link:{inDropdown:!1,className:void 0,component:void 0,popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:void 0,className:void 0},unlink:{icon:void 0,className:void 0},linkCallback:void 0},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"],className:void 0,component:void 0,dropdownClassName:void 0},inline:{options:["bold","italic","underline","strikethrough","monospace"],bold:{className:"".concat(c,"-toolbar-btn")},italic:{className:"".concat(c,"-toolbar-btn")},underline:{className:"".concat(c,"-toolbar-btn")},strikethrough:{className:"".concat(c,"-toolbar-btn")},code:{className:"".concat(c,"-toolbar-btn")}},textAlign:{left:{className:"".concat(c,"-toolbar-btn")},center:{className:"".concat(c,"-toolbar-btn")},right:{className:"".concat(c,"-toolbar-btn")},justify:{className:"".concat(c,"-toolbar-btn")}},colorPicker:{className:"".concat(c,"-toolbar-btn")},remove:{className:"".concat(c,"-toolbar-btn")}},s),toolbarClassName:"".concat(c,"-toolbar"),wrapperClassName:"".concat(c,"-wrapper"),editorClassName:"".concat(c,"-main")}})),Object(ht.renderComponent)(Bt.Editor)),Cn=Object(ht.compose)(Object(ht.lifecycle)({componentWillUnmount:function(){var e=this.props,t=e.editorState,n=e.save;(void 0===n?function(){}:n)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=Object(Ft.convertToRaw)(e.getCurrentContent()).blocks,r=1!==n.length||Object(Ft.convertToRaw)(e.getCurrentContent()).blocks[0].text,o=bn()(Object(Ft.convertToRaw)(e.getCurrentContent()),null,null,On);return r?o:t}return t}(t,b.d))}}),Object(ht.withHandlers)({onBlur:function(e){var t=e.toggleEditing,n=void 0===t?function(){}:t;return function(){n(!1)}}}),Object(ht.withProps)((function(e){var t=e.sections;return{availableStorySections:(void 0===t?[]:t).reduce((function(e,t){var n=[];(n.push(t),t.type===b.h.PARAGRAPH||t.type===b.h.IMMERSIVE)&&t.contents.forEach((function(e){e.type===b.a.COLUMN&&n.push(e)}));return[].concat(wn(e),n)}),[])}})),Object(ht.withProps)((function(e){var t=e.availableStorySections,n=void 0===t?[]:t;return{toolbar:{link:{inDropdown:!1,className:void 0,component:function(e){return u.a.createElement(tn,jn({},e,{availableStorySections:n}))},popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:void 0,className:void 0},unlink:{icon:void 0,className:void 0},linkCallback:void 0,getLinkDecorator:mn}}}})),xn),Tn=Object(ht.compose)(Object(ht.withState)("contentEditing","setContentEditing",!1),Object(ht.withState)("editorState","onEditorStateChange"),Object(ht.withHandlers)({toggleEditing:function(e){var t=e.bubblingTextEditing,n=void 0===t?function(){}:t,r=e.sectionType,o=e.onEditorStateChange,i=void 0===o?function(){}:o,a=e.setContentEditing,c=void 0===a?function(){}:a;return function(e,t){if(e){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=vn()(e,null,hn),n=Ft.ContentState.createFromBlockArray(t.contentBlocks);return Ft.EditorState.createWithContent(n)}(t);if(r===b.h.TITLE&&"unstyled"===Ft.RichUtils.getCurrentBlockType(o)){var a=o.getCurrentContent();a=Ft.Modifier.setBlockType(a,Ft.EditorState.createWithContent(a).getSelection(),"header-one"),o=Ft.EditorState.createWithContent(a)}i(o),c(!0),n(!0)}else c(!1),n(!1)}}}),Object(ht.branch)((function(e){return!!e.contentEditing}),Cn)),Mn=Object(ht.compose)(Object(ht.withHandlers)({save:function(e){var t=e.update,n=void 0===t?function(){}:t;return function(e){return n("html",e)}}}),Object(ht.branch)((function(e){return e.mode===b.f.EDIT}),Tn),Object(ht.compose)(Object(ht.withPropsOnChange)(["sectionType"],(function(e){var t=e.sectionType;return{placeholder:b.h.TITLE===t?"geostory.builder.defaults.htmlTitlePlaceholder":"geostory.builder.defaults.htmlPlaceholder",placeholderTag:b.h.TITLE===t?"h1":"p"}})),Lt()("placeholder")))((function(e){var t=e.placeholder,n=e.placeholderTag,r=void 0===n?"p":n,o=e.id,i=e.toggleEditing,a=void 0===i?function(){}:i,c=e.html,l=e.mode;return u.a.createElement("div",{className:"ms-text-wrapper"},c!==b.d&&u.a.createElement("div",{id:o,onClick:function(){return a(!0,c)},dangerouslySetInnerHTML:{__html:c}}),(!c||c===b.d)&&l===b.f.EDIT&&u.a.createElement("div",{className:"ms-text-placeholder",id:"placeholder"+o,onClick:function(){return a(!0,c===b.d?"":c)},dangerouslySetInnerHTML:{__html:"<".concat(r,">").concat(t,"</").concat(r,">")}}))})),In=n("./node_modules/react-image-lightbox/dist/umd/react-image-lightbox.js"),kn=n.n(In),Dn=n("./node_modules/object-fit-images/dist/ofi.common-js.js"),Nn=n.n(Dn);function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wn(e);if(t){var o=Wn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(e,t){return!t||"object"!==_n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(i,e);var t,n,r,o=Gn(i);function i(){return Fn(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){Nn()(this._node)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&Nn()(this._node)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.src,o=t.fit,i=void 0===o?"cover":o,a=t.enableFullscreen,c=void 0===a||a,l=t.fullscreen,s=t.onClick,p=t.description,d=t.showCaption,f=t.caption,m=void 0===f?p:f,g=t.credits,b=t.loaderStyle,y=this.props.loaderComponent,v=this.props.errorComponent;return u.a.createElement("div",{id:n,className:"ms-media ms-media-image"},r&&"error"!==this.props.status&&u.a.createElement("img",{ref:function(t){e._node=t},src:r,onLoad:function(){return e.props.onChangeStatus("loaded")},onError:function(){return e.props.onChangeStatus("error")},onClick:c?function(){return s(!0)}:void 0,style:{objectFit:i,fontFamily:"object-fit: ".concat(i),cursor:c?"pointer":"default"}}),r&&!this.props.status&&y&&u.a.createElement(y,{style:Ln({},b)}),"error"===this.props.status&&v&&u.a.createElement(v,null),g&&u.a.createElement("div",{className:"ms-media-credits"},u.a.createElement("small",null,g)),d&&m&&u.a.createElement("div",{className:"ms-media-caption"},u.a.createElement("small",null,m)),c&&l?u.a.createElement(kn.a,{mainSrc:r,onCloseRequest:function(){return s(!1)}}):null)}}])&&Bn(t.prototype,n),r&&Bn(t,r),i}(s.Component);zn(Vn,"propTypes",{src:_t.a.string,id:_t.a.string,fit:_t.a.string,description:_t.a.string,showCaption:_t.a.bool,credits:_t.a.string,altText:_t.a.string,enableFullscreen:_t.a.bool,fullscreen:_t.a.bool,onClick:_t.a.func,onChangeStatus:_t.a.func,status:_t.a.string,loaderComponent:_t.a.element,errorComponent:_t.a.element,caption:_t.a.string,loaderStyle:_t.a.object});var Qn=Object(ht.compose)(Object(ht.withState)("fullscreen","onClick",!1),Object(ht.withState)("status","onChangeStatus",""))(Vn),qn=n("./node_modules/react-bootstrap/es/index.js"),Yn=n("./MapStore2/web/client/components/map/enhancers/mapType.js"),Kn=n.n(Yn),Jn=n("./MapStore2/web/client/components/map/enhancers/autoResize.js"),Zn=n.n(Jn),Xn=n("./MapStore2/web/client/components/map/enhancers/getProjectionDefs.js"),$n=n("./MapStore2/web/client/components/map/enhancers/onMapViewChanges.js"),er=n.n($n),tr=n("./MapStore2/web/client/components/map/enhancers/handlingUnsupportedProjection.js"),nr=n("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),rr=n.n(nr),or=n("./MapStore2/web/client/components/data/identify/enhancers/defaultViewer.js"),ir=n("./MapStore2/web/client/components/data/identify/DefaultViewer.jsx"),ar=n.n(ir),cr=n("./MapStore2/web/client/components/data/identify/SwipeHeader.jsx"),lr=n.n(cr),sr=Object(ht.compose)(Object(ht.withStateHandlers)({index:0},{setIndex:function(){return function(e){return{index:e}}}}),Object(ht.defaultProps)({index:0,responses:[]})),ur=Object(ht.compose)(Object(ht.defaultProps)({responses:[],container:function(e){var t=e.index,n=e.children;return u.a.createElement(u.a.Fragment,null,Object(j.isArray)(n)&&n[t]||n)},header:lr.a}),sr,or.defaultViewerDefaultProps,or.defaultViewerHandlers,rr()((function(e){return 0===e.responses.length})))(ar.a),pr=n("./MapStore2/web/client/api/identify.jsx"),dr=n("./MapStore2/web/client/utils/MapInfoUtils.js");function fr(){return(fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){yr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Or=function(){return-1!==Object(dr.getAvailableInfoFormatValues)().indexOf("application/json")?"application/json":Object(dr.getDefaultInfoFormatValue)()},jr=Object(ht.mapPropsStream)((function(e){var t=Object(ht.createEventHandler)(),n=t.stream,r=t.handler;return n.withLatestFrom(e.map((function(e){return{map:e.map,layers:e.layers,options:e.options}})).distinctUntilChanged((function(e,t){return Object(j.isEqual)(e,t)}))).switchMap((function(e){var t=vr(e,2),n=t[0].point,r=t[1],o=r.map,i=r.layers,a=void 0===i?[]:i,c=r.options,l=(c=void 0===c?{}:c).mapOptions,s=(l=void 0===l?{}:l).mapInfoFormat,u=void 0===s?Or():s,p=a.filter(dr.defaultQueryableFilter),d=["SLD_BODY"],f=["buffer","cql_filter","filter","propertyName"];return Q.Observable.from(p).mergeMap((function(e){var t=Object(dr.buildIdentifyRequest)(e,{format:u,map:o,point:n,currentLocale:"en-US"}),r=t.url,i=t.request,a=t.metadata,c=r,l=i,s=br(br({},Object(dr.filterRequestParams)(e,f,d)),l),p=fe()();return Object(pr.a)(c,s,e).map((function(e){return e.data.exceptions?{reqId:p,exceptions:e.data.exceptions,queryParams:l,layerMetadata:a}:{data:e.data,reqId:p,queryParams:l,layerMetadata:br(br({},a),{},{features:e.features,featuresCrs:e.featuresCrs})}})).catch((function(e){return{error:e.data||e.statusText||e.status,reqId:p,queryParams:l,layerMetadata:a}})).startWith({start:!0,reqId:p,request:s})})).scan((function(e,t){var n=e.requests,r=e.responses,o=e.validResponses;if(t.start){var i=t.reqId,a=t.request;return{requests:n.concat({reqId:i,request:a}),responses:r,validResponses:o}}var c=t.data,l=t.queryParams,s=t.layerMetadata,p=Object(dr.getValidator)(u),d=r.concat({response:c,queryParams:l,layerMetadata:s});return{requests:n,validResponses:p.getValidResponses(d,!0),responses:d}}),{requests:[],responses:[],validResponses:[]})})).startWith({requests:[],responses:[]}).combineLatest(e,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return br(br({},t),{},{mapInfo:e,getFeatureInfoHandler:r})}))})),wr=Object(ht.branch)((function(e){var t=e.map,n=(t=void 0===t?{}:t).mapInfoControl;return void 0!==n&&n}),Object(ht.compose)(jr,Object(ht.withStateHandlers)({popups:[]},{onClick:function(e,t){var n=t.getFeatureInfoHandler,r=void 0===n?function(){}:n;return function(e,t){var n=e.rawPos,o=void 0===n?[]:n,i=mr(e,["rawPos"]);return r({point:i,layerInfo:t}),{popups:[{position:{coordinates:o},id:fe()()}]}}},onPopupClose:function(){return function(){return{popups:[]}}}}),Object(ht.withPropsOnChange)(["mapInfo","popups"],(function(e){var t=e.mapInfo,n=e.popups,r=e.options,o=(r=void 0===r?{}:r).mapOptions,i=(o=void 0===o?{}:o).mapInfoFormat,a=void 0===i?Or():i,c=t.responses,l=t.requests,s=t.validResponses,p=function(){return u.a.createElement(ur,{renderEmpty:!0,responses:c,requests:l,validResponses:s,format:a,showEmptyMessageGFI:!0,missingResponses:(l||[]).length-(c||[]).length})};return{popups:n.map((function(e){return br(br({},e),{},{component:p})}))}})),Object(ht.withPropsOnChange)(["plugins","onPopupClose","popups"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=e.popups,r=e.onPopupClose,o=t.PopupSupport,i=t.tools,a=void 0===i?{}:i,c=mr(t,["PopupSupport","tools"]);if(!o)return{};var l=function(e){return u.a.createElement(o,fr({},e,{popups:n,onPopupClose:r}))};return{plugins:br(br({},c),{},{tools:br(br({},a),{},{popup:l})})}})))),Sr=Object(ht.withPropsOnChange)(["onClick","eventHandlers"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,n=void 0===t?function(){}:t,r=e.eventHandlers,o=void 0===r?{}:r;return{eventHandlers:br(br({},o),{},{onClick:n})}})),Er=n("./MapStore2/web/client/components/map/BaseMap.jsx"),Ar=n.n(Er),Pr=Object(ht.compose)(er.a,Zn()(0),Kn.a,wr,Sr,Xn.default,tr.handlingUnsupportedProjection)(Ar.a),xr=n("./MapStore2/web/client/components/misc/Portal.jsx"),Cr=n.n(xr),Tr=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),Mr=n.n(Tr),Ir=n("./node_modules/react-resize-detector/lib/esm/hoc/withResizeDetector.js");function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Rr=Mr()(qn.Button),Lr=Object(ht.compose)(Object(ht.withState)("active","setActive",!1),Ir.a)((function(e){var t=e.id,n=e.map,r=void 0===n?{layers:[E]}:n,o=e.fit,i=e.editMap,a=void 0!==i&&i,c=e.onMapViewChanges,l=e.eventHandlers,s=e.expandable,p=void 0!==s&&s,d=e.active,f=e.setActive,m=e.width,g=e.height,y=e.size,v=e.showCaption,h=e.caption,O=e.mapType,j=void 0===O?"leaflet":O,w=r.data?r.data:r,S=w.layers,A=void 0===S?[]:S,P=w.mapOptions,x=void 0===P?{}:P,C=w.description,T=_r(w,["layers","mapOptions","description"]),M=h||C,I=p?d?{zoomControl:!1,interactive:!0,mapOptions:{scrollWheelZoom:!0,interactions:{mouseWheelZoom:!0,dragPan:!0}}}:{zoomControl:!1,interactive:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!1}}}:{mapOptions:x},k=a?{mapOptions:Dr(Dr({},x),{},{interactions:Dr(Dr({},x.interactions),{},{mouseWheelZoom:T.zoomControl})})}:I,D=T.mapInfoControl&&!(p&&!d),N=u.a.createElement(u.a.Fragment,null,u.a.createElement(Pr,{key:p?"overlay":"block",onMapViewChanges:c,eventHandlers:l,map:Dr(Dr({},T),{},{id:"media-".concat(t),resize:m+"-"+g+"_"+y,className:"aaaa",style:{cursor:D?"pointer":"default"}}),layers:A,tools:D?["popup"]:[],options:Object(b.j)(k),mapType:j}),p&&!a&&u.a.createElement(Rr,{className:"ms-expand-media-button",onClick:function(){return f(!d)},tooltipId:d?"geostory.closeFullscreenMap":"geostory.showFullscreenMap",tooltipPosition:"left"},u.a.createElement(qn.Glyphicon,{glyph:d?"1-close":"1-full-screen"})));return u.a.createElement("div",{className:"ms-media ms-media-map ".concat(x.zoomPosition||""),style:{objectFit:o}},d&&p?u.a.createElement(Cr.a,null,u.a.createElement("div",{className:"ms-expanded-media-container"},N)):N,v&&M&&u.a.createElement("div",{className:"ms-media-caption"},u.a.createElement("small",null,M)))})),Fr=n("./node_modules/react-player/lib/ReactPlayer.js"),Br=n.n(Fr),Ur=n("./MapStore2/web/client/components/misc/Loader.jsx"),Gr=n.n(Ur);function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){zr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qr=Object(Ir.a)((function(e){var t=e.src,n=e.width,r=e.height,o=e.resolution,i=e.thumbnail,a=e.controls,c=e.play,l=e.onPlay,p=void 0===l?function(){}:l,d=e.onStart,f=void 0===d?function(){}:d,m=e.fit,g=e.loop,b=e.volume,y=void 0===b?1:b,v=e.muted,h=c,O=Vr(Object(s.useState)(h),2),j=O[0],w=O[1],S=Vr(Object(s.useState)(),2),E=S[0],A=S[1],P=Vr(Object(s.useState)(c),2),x=P[0],C=P[1],T="cover"===m;Object(s.useEffect)((function(){!j&&h&&(w(!0),C(!0)),j&&f(j)}),[j,h]);var M,I=(M=n/r,T?M<o?[r*o,r]:[n,n/o]:"contain"===m?M<o?[n,n/o]:[r*o,r]:[n,n/o]),k="contain"===m||T?r:I[1],D=!T&&a,N=!!T||g;return u.a.createElement("div",{className:"ms-video",style:{position:"relative",width:n,height:k,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}},t&&u.a.createElement(u.a.Fragment,null,j&&u.a.createElement(Br.a,{url:t,width:I[0],height:I[1],playing:h,loop:N,volume:y,muted:v,style:T?{left:"50%",top:"50%",transform:"translate(-50%, -50%)",position:"absolute"}:{},controls:D,pip:!1,fileConfig:{attributes:{controlsList:"nodownload",disablePictureInPicture:!0}},youtubeConfig:{playerVars:{controls:D?2:0,modestbranding:1,rel:0}},onReady:function(){return C(!1)},onError:function(e){return A(e)},onPause:function(){return p(!1)},onPlay:function(){return p(!0)}}),(!j||j&&(x||E))&&u.a.createElement("div",{className:"ms-video-cover",style:Wr(Wr({position:"absolute",width:I[0],height:I[1],display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 1.0)"},!(x||E)&&{cursor:"pointer"}),!h&&i&&{backgroundImage:"url(".concat(i,")"),backgroundSize:T?"cover":"640px auto",backgroundPosition:"center",backgroundRepeat:"no-repeat"}),onClick:function(){w(!0),C(!0),p(!0)}},x&&u.a.createElement(Gr.a,{size:70}),E&&"Error",!(x||E)&&!h&&u.a.createElement(qn.Glyphicon,{glyph:"play",style:{fontSize:I[1]/4>100?100:I[1]/4,mixBlendMode:"difference",color:"#ffffff"}}))),!D&&u.a.createElement("div",{className:"ms-video-mask-cover",style:{position:"absolute",width:I[0],height:I[1]}}))})),Yr=function(e){var t=e.id,n=e.src,r=e.resolution,o=void 0===r?16/9:r,i=e.autoplay,a=e.inView,c=e.description,l=e.showCaption,p=e.caption,d=void 0===p?c:p,f=e.thumbnail,m=e.credits,g=e.controls,y=void 0===g||g,v=e.fit,h=e.loop,O=e.muted,j=e.onPlay,w=void 0===j?function(){}:j,S=e.mode,E=e.containerInView,A=(void 0===E||E)&&a,P=Vr(Object(s.useState)(!1),2),x=P[0],C=P[1],T=function(e){C(e),w(e)};return Object(s.useEffect)((function(){S===b.f.EDIT&&T(!1)}),[S]),Object(s.useEffect)((function(){S===b.f.VIEW&&A&&(i||"cover"===v)&&T(!0)}),[A,i,v,S]),Object(s.useEffect)((function(){S===b.f.VIEW&&!A&&x&&T(!1)}),[A,x,S]),u.a.createElement("div",{id:t,key:"".concat(t,"-").concat(v,"-").concat(S),className:"ms-media ms-media-video"},u.a.createElement(qr,{src:n,play:x&&S===b.f.VIEW,resolution:o,thumbnail:f,controls:y&&S===b.f.VIEW,onPlay:T,fit:v,loop:h,muted:O}),m&&u.a.createElement("div",{className:"ms-media-credits"},u.a.createElement("small",null,m)),l&&d&&u.a.createElement("div",{className:"ms-media-caption"},u.a.createElement("small",null,d)))};function Kr(){return(Kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var $r=Qn,eo={image:Qn,map:Lr,video:Yr},to=function(e){var t=e.debounceTime,n=e.mediaViewer,r=Xr(e,["debounceTime","mediaViewer"]),o=Jr(Object(s.useState)({}),2),i=o[0],a=o[1],c=void 0===i[r.id]||i[r.id],l=n||eo[r.mediaType||r.type]||$r;return u.a.createElement(l,Kr({sectionType:r.sectionType,debounceTime:t,loading:i,isLoading:c,onLoad:a},r))};to.propTypes={id:_t.a.string,lazy:_t.a.bool,mediaType:_t.a.string,type:_t.a.string,debounceTime:_t.a.number},to.defaultProps={id:"",lazy:!0,mediaType:"",type:""};var no=to,ro=n("./MapStore2/web/client/components/misc/StandardDialog.jsx"),oo=n.n(ro),io=n("./MapStore2/web/client/components/I18N/Message.jsx"),ao=n.n(io),co=Object(ht.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.viewHeight,o=e.size;return!n||!r||!o}),Tt()((function(){return!0}),(function(){return{glyph:"code"}}))),lo=Object(ht.compose)(co)((function(e){var t=e.src,n=e.size,r=e.viewHeight;return u.a.createElement("div",{className:"ms-webpage-wrapper"},u.a.createElement("iframe",{src:t,height:"".concat(Object(b.u)(n,r),"px")}))})),so=n("./MapStore2/web/client/utils/URLUtils.js"),uo=n("./MapStore2/web/client/utils/ConfigUtils.js"),po=n("./node_modules/react-intersection-observer/react-intersection-observer.esm.js"),fo=n("./MapStore2/node_modules/lodash/debounce.js"),mo=n.n(fo);function go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?go(Object(n),!0).forEach((function(t){yo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ho(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oo=function(e){var t=e.id,n=e.onLoad,r=e.loading,o=e.debounceTime,i=e.children,a=e.loaderComponent,c=e.loaderStyle,l=vo(Object(po.b)(),2),p=l[0],d=l[1],f=Object(s.useRef)(null),m=a;return Object(s.useEffect)((function(){return f.current=mo()((function(e){n(e)}),o),function(){f.current.cancel()}}),[]),Object(s.useEffect)((function(){d&&r&&f.current(t),!d&&r&&f.current.cancel()}),[d,r,t]),u.a.createElement("div",{ref:p,className:"ms-visibility-container"},r?m?u.a.createElement(m,{style:bo({},c)}):null:Object(s.cloneElement)(i,{inView:d}))};Oo.propTypes={id:_t.a.string,debounceTime:_t.a.number,loading:_t.a.bool,onLoad:_t.a.func,loaderComponent:_t.a.element},Oo.defaultProps={id:"",debounceTime:300,loading:!0,onLoad:function(){},loaderComponent:null};var jo=Oo;function wo(e){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ao(e,t){return(Ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=To(e);if(t){var o=To(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xo(this,n)}}function xo(e,t){return!t||"object"!==wo(t)&&"function"!=typeof t?Co(e):t}function Co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function To(e){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Io=function(){return u.a.createElement("div",{className:"ms-media-loader"},u.a.createElement(Gr.a,{size:52}))},ko=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ao(e,t)}(i,e);var t,n,r,o=Po(i);function i(){var e;So(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mo(Co(e=o.call.apply(o,[this].concat(n))),"state",{url:e.props.src||"",error:!1,loading:!0}),Mo(Co(e),"updateURL",(function(t){var n=t.target.value;e.setState({url:n})})),Mo(Co(e),"save",(function(){var t=e.state.url,n=!Object(so.isValidURL)(t,Object(uo.getConfigProp)("GeoStoryValidIframeURLRegex"));e.setState({error:n}),n||e.props.onChange(t)})),e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.editURL,o=this.state,i=o.url,a=o.error;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Cr.a,null,u.a.createElement(oo.a,{modal:!0,show:r,onClickOut:function(e){return e.preventDefault()&&e.stopPropagation()},title:u.a.createElement(ao.a,{msgId:"geostory.webPageCreator.title"}),onClose:n,id:"web-page-creator",footer:u.a.createElement(qn.Button,{bsSize:"small",onClick:this.save},u.a.createElement(ao.a,{msgId:"geostory.webPageCreator.saveButton"}))},a&&u.a.createElement("div",{className:"dropzone-errorBox alert-danger"},u.a.createElement(ao.a,{msgId:"geostory.webPageCreator.error"})),u.a.createElement(qn.FormGroup,{controlId:"WEBPAGE_URL",validationState:a&&"error"},u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"geostory.webPageCreator.url.label"})),u.a.createElement(qn.FormControl,{label:"URL",type:"text",value:i,onChange:this.updateURL,required:!0})))),this.props.lazy?u.a.createElement(jo,{key:this.props.id,id:this.props.id,debounceTime:this.props.debounceTime,loading:this.state.loading,onLoad:function(){return e.setState({loading:!1})},loaderComponent:Io},u.a.createElement(lo,this.props)):u.a.createElement(lo,this.props))}}])&&Eo(t.prototype,n),r&&Eo(t,r),i}(u.a.PureComponent);Mo(ko,"propTypes",{editURL:_t.a.bool,onClose:_t.a.func,onChange:_t.a.func,src:_t.a.string,id:_t.a.string,debounceTime:_t.a.number,lazy:_t.a.bool}),Mo(ko,"defaultProps",{lazy:!0});var Do=Object(ht.compose)(Object(ht.withHandlers)({onClose:function(e){var t=e.update,n=void 0===t?function(){}:t;return function(){return n("editURL",!1,"merge")}}}))(ko),No=Object(p.connect)(null,{onChange:O.W})(Do);function _o(){return(_o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ro(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Lo=function(e){var t=e.type;return u.a.createElement("div",{className:"ms-content ms-content-unknown"},'warning: unknown content type "'.concat(t,'"'))},Fo=function(e){var t=e.type,n=Ro(e,["type"]),r=function(e){switch(e){case b.a.TEXT:return Mn;case b.a.MEDIA:case b.e.IMAGE:case b.e.MAP:case b.e.VIDEO:return no;case b.a.WEBPAGE:return No;default:return Lo}}(t);return u.a.createElement(r,_o({type:t},n))};function Bo(e){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ho(e,t){return(Ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo(e);if(t){var o=Vo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zo(this,n)}}function zo(e,t){return!t||"object"!==Bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qo=n("./node_modules/react/index.js"),Yo=n("./node_modules/prop-types/index.js"),Ko=n("./node_modules/react-bootstrap/es/index.js"),Jo=Ko.Popover,Zo=Ko.OverlayTrigger,Xo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ho(e,t)}(i,e);var t,n,r,o=Wo(i);function i(){return Uo(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this;return qo.createElement("div",{ref:function(t){e.parentNode=t&&t.parentNode},className:this.props.className,style:this.props.style},qo.createElement(Zo,{ref:function(t){e.trigger=t},trigger:["click"],container:this.parentNode,placement:this.props.placement,rootClose:!0,overlay:qo.createElement(Jo,{id:this.props.id,title:this.props.title,className:this.props.popoverClassName},this.props.content)},this.props.children))}}])&&Go(t.prototype,n),r&&Go(t,r),i}(qo.Component);Qo(Xo,"propTypes",{id:Yo.string,style:Yo.object,className:Yo.string,popoverClassName:Yo.string,placement:Yo.string,title:Yo.node,content:Yo.node}),Qo(Xo,"defaultProps",{id:""});var $o=Xo,ei=n("./MapStore2/web/client/components/misc/toolbar/Toolbar.jsx"),ti=n.n(ei);function ni(e){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(n),!0).forEach((function(t){di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ii(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ai(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function li(e,t){return(li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pi(e);if(t){var o=pi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ui(this,n)}}function ui(e,t){return!t||"object"!==ni(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pi(e){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&li(e,t)}(i,e);var t,n,r,o=si(i);function i(){return ai(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.trigger||e.containerWidth===this.props.containerWidth&&e.containerHeight===this.props.containerHeight||this.trigger.hide()}},{key:"render",value:function(){var e=this;return u.a.createElement($o,{className:"add-bar",popoverClassName:"add-bar-popover",content:u.a.createElement(ti.a,{btnDefaultProps:{className:"square-button btn-tray"},buttons:this.props.buttons.map((function(t){var n=t.onClick,r=void 0===n?function(){}:n;return oi(oi({},ii(t,["onClick"])),{},{onClick:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];r.apply(void 0,n),e.trigger.hide(),n[0]&&n[0].preventDefault&&n[0].preventDefault()}})}))}),ref:function(t){t&&(e.trigger=t.trigger)},placement:"top"},u.a.createElement(qn.Button,{className:this.props.addButtonClassName},u.a.createElement(qn.Glyphicon,{glyph:"plus"})))}}])&&ci(t.prototype,n),r&&ci(t,r),i}(u.a.Component);di(fi,"propTypes",{id:_t.a.string,type:_t.a.string,buttons:_t.a.array,containerWidth:_t.a.oneOfType([_t.a.number,_t.a.string]),containerHeight:_t.a.oneOfType([_t.a.number,_t.a.string]),addButtonClassName:_t.a.string}),di(fi,"defaultProps",{id:"",type:"",buttons:[],containerWidth:0,containerHeight:0,addButtonClassName:""});var mi=fi;function gi(e){return function(e){if(Array.isArray(e))return bi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(n),!0).forEach((function(t){hi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oi(){return(Oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ji(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var wi=function(e){var t=e.viewWidth,n=e.viewHeight,r=e.className,o=e.contentProps,i=void 0===o?{}:o,a=e.addButtons,c=void 0===a?[]:a,l=e.tools,s=void 0===l?[]:l,p=e.contents,d=void 0===p?[]:p,f=e.ContentComponent,m=void 0===f?Fo:f,g=e.mode,y=e.sectionType,v=e.editMedia,h=void 0===v?function(){}:v,O=e.editWebPage,j=void 0===O?function(){}:O,w=e.add,S=void 0===w?function(){}:w,E=e.update,A=void 0===E?function(){}:E,P=e.remove,x=void 0===P?function(){}:P,C=e.bubblingTextEditing,T=void 0===C?function(){}:C,M=e.storyTheme,I=e.sections,k=void 0===I?[]:I,D=e.storyFonts;return u.a.createElement("div",{className:r},d.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,o=r.id,a=ji(r,["id"]),l=[u.a.createElement(m,Oi({id:o,key:"".concat(o,"-content"),mode:g,viewWidth:t,sectionType:y,viewHeight:n,editMedia:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return h.apply(void 0,[{path:'contents[{"id": "'.concat(o,'"}]')+n}].concat(i))},editWebPage:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return j.apply(void 0,[{path:'contents[{"id": "'.concat(o,'"}]')+n}].concat(i))},add:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return S.apply(void 0,['contents[{"id": "'.concat(o,'"}].')+e].concat(n))},update:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return A.apply(void 0,['contents[{"id": "'.concat(o,'"}].')+e].concat(n))},remove:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x.apply(void 0,['contents[{"id": "'.concat(o,'"}]')+(e?"."+e:"")].concat(n))}},i,a,{storyTheme:M,storyFonts:D,bubblingTextEditing:T,tools:s&&s[a.type],sections:k}))];return g===b.f.EDIT&&c.length>0&&l.push(u.a.createElement(mi,{key:"".concat(o,"-content-add-buttons"),containerWidth:t,containerHeight:n,buttons:c.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return vi(vi({},e),{},{onClick:function(){return S("contents",o,e.template)}})}))})),[].concat(gi(e),l)}),[]))};n("./node_modules/intersection-observer/intersection-observer.js");function Si(){return(Si=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ei(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ai=function(e){return Object(ht.compose)(Object(ht.withHandlers)({onVisibilityChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onVisibilityChange,r=void 0===n?function(){}:n;return function(e,n){return r({id:t,visible:e,entry:n})}}}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onVisibilityChange,n=(e.rootSelector,Ei(e,["onVisibilityChange","rootSelector"]));return function(e){return function(r){var o=r.intersectionObserverOptions,i=void 0===o?{}:o,a=r.onVisibilityChange,c=Ei(r,["intersectionObserverOptions","onVisibilityChange"]),l=t||a;return u.a.createElement(po.a,Si({},n,i,{onChange:l}),(function(t){var n=t.inView,r=t.ref,o=t.entry;return u.a.createElement(e,Si({},c,{inView:n,inViewRef:r,inViewEntry:o}))}))}}}(e))},Pi=n("./MapStore2/web/client/components/misc/toolbar/ToolbarButton.jsx"),xi=n.n(Pi),Ci=n("./MapStore2/web/client/components/misc/enhancers/buttonTooltip.jsx"),Ti=n.n(Ci),Mi=n("./MapStore2/node_modules/lodash/find.js"),Ii=n.n(Mi),ki=n("./MapStore2/node_modules/lodash/isFunction.js"),Di=n.n(ki),Ni=n("./MapStore2/node_modules/lodash/isEqual.js"),_i=n.n(Ni);function Ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Li(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fi=Ti()(qn.DropdownButton);function Bi(e){var t=e.value,n=e.options,r=void 0===n?[]:n,o=e.onSelect,i=void 0===o?function(){}:o,a=e.glyph,c=void 0===a?"":a,l=e.tooltipId,p=e.pullRight,d=void 0!==p&&p,f=e.className,m=void 0===f?"square-button-md no-border":f,g=e.disabled,b=e.noTooltipWhenDisabled,y=void 0!==b&&b,v=e.hideMenuItem,h=void 0===v?function(){return!1}:v,O=e.shouldClose,j=Ri(Object(s.useState)(!1),2),w=j[0],S=j[1],E=Ri(Object(s.useState)(!1),2),A=E[0],P=E[1],x=(Ii()(r,(function(e){return _i()(e.value,t)}))||{}).glyph;return Object(s.useEffect)((function(){g&&S(!1)}),[g]),u.a.createElement(Fi,{noCaret:!0,open:w,noTooltipWhenDisabled:y,tooltipId:l,pullRight:d,className:m,disabled:g,title:u.a.createElement(qn.Glyphicon,{glyph:x||c}),onToggle:function(e,n,r){return A||"select"===(null==r?void 0:r.source)||O&&!O(t,n)?null:S(e)}},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null==e?void 0:e.Component)||qn.MenuItem;return h(t,e)?null:u.a.createElement(n,{key:e.value,selected:t,value:e.value,active:Di()(null==e?void 0:e.isActive)&&e.isActive(t)||!ee()(t)&&t===e.value,onClick:(null==e?void 0:e.Component)?i:function(){return i(e.value)},onActive:function(e){return P(e)}},e.label)})))}var Ui=n("./MapStore2/web/client/components/misc/ConfirmDialog.jsx"),Gi=n.n(Ui);function Hi(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Wi=Object(ht.compose)(Object(ht.withProps)((function(e){var t=e.setConfirming;return{onClose:function(){return t(!1)}}})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.confirmYes,n=void 0===t?u.a.createElement(ao.a,{msgId:"yes"}):t,r=e.confirmNo,o=void 0===r?u.a.createElement(ao.a,{msgId:"no"}):r,i=e.confirmTitle,a=void 0===i?u.a.createElement(ao.a,{msgId:"confirm"}):i,c=e.confirmContent,l=e.confirmButtonBSStyle,s=void 0===l?"primary":l,p=e.show,d=void 0!==p&&p,f=e.confirmModal,m=void 0===f||f,g=e.draggable,b=void 0!==g&&g,y=e.onClose,v=void 0===y?function(){}:y,h=e.onConfirm,O=void 0===h?function(){}:h;return d?u.a.createElement(Cr.a,null,u.a.createElement("div",{className:"with-confirm-modal"},u.a.createElement(Gi.a,{draggable:b,show:d,modal:m,onClose:v,onConfirm:O,title:a,confirmButtonContent:n,closeText:o,confirmButtonBSStyle:s,closeGlyph:"1-close"},c))):null})),zi=function(e){return function(t){var n=t.confirming,r=t.confirmYes,o=t.confirmNo,i=t.confirmTitle,a=t.confirmContent,c=t.confirmModal,l=t.draggable,s=t.onConfirm,p=t.setConfirming,d=Hi(t,["confirming","confirmYes","confirmNo","confirmTitle","confirmContent","confirmModal","draggable","onConfirm","setConfirming"]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(Wi,{show:n,setConfirming:p,confirmYes:r,confirmNo:o,confirmTitle:i,confirmContent:a,confirmModal:c,draggable:l,onConfirm:s}),u.a.createElement(e,d))}},Vi=function(e){return Object(ht.compose)(Object(ht.withState)("confirming","setConfirming",!1),Object(ht.withHandlers)({onClick:function(e){var t=e.setConfirming,n=void 0===t?function(){}:t,r=e.onClick,o=void 0===r?function(){}:r,i=e.confirmPredicate,a=void 0===i||i;return function(){a?n(!0):o.apply(void 0,arguments)}},onConfirm:function(e){var t=e.onClick,n=void 0===t?function(){}:t,r=e.setConfirming,o=void 0===r?function(){}:r;return function(){o(!1),n.apply(void 0,arguments)}}}),zi)(e)},Qi=n("./MapStore2/web/client/components/style/ColorSelector.jsx"),qi=n("./MapStore2/node_modules/lodash/isObject.js"),Yi=n.n(qi),Ki=n("./node_modules/tinycolor2/tinycolor.js"),Ji=n.n(Ki),Zi=n("./MapStore2/web/client/components/misc/switch/SwitchButton.jsx"),Xi=n.n(Zi),$i=n("./MapStore2/web/client/components/I18N/HTML.jsx"),ea=n.n($i);function ta(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ia=Mr()(qn.Button);function aa(e){var t=e.themeStyle,n=e.disableBackgroundPicker,r=void 0!==n&&n,o=e.disableBackgroundAlpha,i=e.disableTextColor,a=e.disableShadow,c=e.onChange,l=void 0===c?function(){}:c,p=e.onOpen,d=void 0===p?function(){}:p,f=e.placement,m=Object(s.useRef)(),g=null==t?void 0:t.backgroundColor,b=null==t?void 0:t.color,y=!i&&g&&b&&!Ji.a.isReadable(b,g)?Ji.a.mostReadable(g,[b,"#000000","#ffffff"],{includeFallbackColors:!0}).toHexString():null;return u.a.createElement(u.a.Fragment,null,!r&&u.a.createElement("div",{className:"ms-custom-theme-picker-field"},u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"geostory.customizeTheme.backgroundColorLabel"})),u.a.createElement("div",null,u.a.createElement(Qi.default,{placement:f,key:g,onOpen:d,color:g,format:o?"hex":"rgb",disableAlpha:o,presetColors:[],onChangeColor:function(e){var n=Ji()(e).isLight()?Ji()(e).darken(10).toHexString():Ji()(e).lighten(15).toHexString(),r=!i&&!(null==t?void 0:t.color)&&{color:Ji.a.mostReadable(e,["#000000","#ffffff"],{includeFallbackColors:!0}).toHexString()};l(ra(ra({},t),{},{backgroundColor:e,borderColor:n},!i&&r))}}))),!i&&u.a.createElement("div",{className:"ms-custom-theme-picker-field"},u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"geostory.customizeTheme.textColorLabel"})),u.a.createElement($o,{className:"ms-custom-theme-picker-popover",ref:function(e){e&&(m.current=e.trigger)},placement:"top",content:u.a.createElement(u.a.Fragment,null,u.a.createElement(ea.a,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:y}}),u.a.createElement(ia,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,n;l(ra(ra({},t),{},{color:y})),null===(e=m.current)||void 0===e||null===(n=e.hide)||void 0===n||n.call(e)}},u.a.createElement(ao.a,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},y&&u.a.createElement(ia,{className:"square-button-md no-border",style:{display:y?"block":"none"}},u.a.createElement(qn.Glyphicon,{glyph:"exclamation-mark"}))||u.a.createElement("div",null))),u.a.createElement("div",null,u.a.createElement(Qi.default,{placement:f,key:b,color:b,onOpen:d,format:"hex",disableAlpha:!0,presetColors:[],onChangeColor:function(e){l(ra(ra({},t),{},{color:e}))}}))),!a&&u.a.createElement("div",{className:"ms-custom-theme-picker-field"},u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"geostory.customizeTheme.shadowLabel"})),u.a.createElement("div",null,u.a.createElement(Xi.a,{checked:null==t?void 0:t.boxShadow,onChange:function(){var e=t||{},n=e.boxShadow,r=(e.MozBoxShadow,e.WebkitBoxShadow,ta(e,["boxShadow","MozBoxShadow","WebkitBoxShadow"]));l(n?ra({},r):ra(ra({},r),{},{boxShadow:"0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)"}))}}))))}function ca(e){var t=e.selected,n=e.value,r=e.storyTheme,o=e.onUpdate,i=e.onActive,a=e.disableBackgroundAlpha,c=e.disableTextColor,l=e.disableShadow,s=function(e,r){var i=Yi()(t)&&t;return o("theme",ra(ra({},i),{},r?oa({value:e},n,ra({},r)):{value:e}))},p=r||{},d=p.color,f=p.backgroundColor,m=f&&{backgroundColor:f},g=ra(ra({},!c&&d&&{color:d}),m),b=(null==t?void 0:t.value)===n,y=(null==t?void 0:t[n])||g;return u.a.createElement(u.a.Fragment,null,b?u.a.createElement("div",{className:"ms-custom-theme-picker-menuitem-header"},u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.customizeThemeLabel"})),u.a.createElement(ia,{tooltipId:"geostory.contentToolbar.customizeThemeRemoveLabel",className:"square-button-md no-border",onClick:function(e){e.stopPropagation(),s("")}},u.a.createElement(qn.Glyphicon,{glyph:"trash"}))):u.a.createElement(u.a.Fragment,null,u.a.createElement(qn.MenuItem,{active:b,onClick:function(){return s(n,y)}},u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.customizeThemeLabel"}))),b&&u.a.createElement("div",{className:"ms-custom-theme-picker-menuitem"},u.a.createElement(aa,{disableBackgroundAlpha:a,disableTextColor:c,disableShadow:l,themeStyle:y,onChange:function(e){return s(n,e)},onOpen:i})))}var la=aa;function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach((function(t){pa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function da(){return(da=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fa=Vi(xi.a),ma=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,i=e.size,a=e.update,c=void 0===a?function(){}:a,l=e.filterOptions,s=e.pullRight;return u.a.createElement(Bi,{value:i,noTooltipWhenDisabled:!0,disabled:n,glyph:"resize-horizontal",pullRight:s||("right"===r||"full"===i||"large"===i)&&!o,tooltipId:"geostory.contentToolbar.contentSize",options:[{value:"small",glyph:"size-small",label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.smallSizeLabel"})},{value:"medium",glyph:"size-medium",label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.mediumSizeLabel"})},{value:"large",glyph:"size-large",label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.largeSizeLabel"})},{value:"full",glyph:"size-extra-large",label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.fullSizeLabel"})}].filter((function(e){return!l||l(e)})),onSelect:function(e){return c("size",e)}})},ga=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,i=e.size,a=e.update,c=void 0===a?function(){}:a;return u.a.createElement(Bi,{value:r,noTooltipWhenDisabled:!0,disabled:"full"===i||n,glyph:"align-center",pullRight:("right"===r||"full"===i||"large"===i)&&!o,tooltipId:"geostory.contentToolbar.contentAlign",options:[{value:"left",label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.leftAlignLabel"}),glyph:"align-left"},{value:"center",label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.centerAlignLabel"}),glyph:"align-center"},{value:"right",label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.rightAlignLabel"}),glyph:"align-right"}],onSelect:function(e){return c("align",e)}})},ba=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.theme,o=e.storyTheme,i=e.align,a=e.sectionType,c=e.update,l=void 0===c?function(){}:c,s=e.themeProps,p=e.size;return u.a.createElement(Bi,{value:r,noTooltipWhenDisabled:!0,pullRight:("right"===i||"full"===p||"large"===p)&&!a,glyph:"dropper",tooltipId:"geostory.contentToolbar.contentTheme",disabled:n,shouldClose:function(e,t){var n,r;return Yi()(e)&&"ms-color-picker-cover"!==(null==t||null===(n=t.target)||void 0===n||null===(r=n.getAttribute)||void 0===r?void 0:r.call(n,"class"))||X()(e)||void 0===e},hideMenuItem:function(e,t){return"custom"===(null==e?void 0:e.value)&&"custom"!==(null==t?void 0:t.value)},options:[{value:"",isActive:function(e){return void 0===e||""===e||Yi()(e)&&(void 0===e.value||""===e.value)},label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.defaultThemeLabel"})},{value:"bright",isActive:function(e){return"bright"===(null==e?void 0:e.value)||"bright"===e},label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.brightThemeLabel"})},{value:"dark",isActive:function(e){return"dark"===(null==e?void 0:e.value)||"dark"===e},label:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.darkThemeLabel"})},{value:"custom",Component:function(e){return u.a.createElement(ca,da({},e,{disableBackgroundAlpha:null==s?void 0:s.disableBackgroundAlpha,disableShadow:null==s?void 0:s.disableShadow,disableTextColor:null==s?void 0:s.disableTextColor,onUpdate:l,storyTheme:o}))}}],onSelect:function(e){return l("theme",ua(ua({},Yi()(r)&&r),{},{value:e}))}})},ya=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.path,o=e.remove,i=void 0===o?function(){}:o;return u.a.createElement(fa,{glyph:"trash",visible:!0,noTooltipWhenDisabled:!0,disabled:n,className:"square-button-md no-border",tooltipId:"geostory.contentToolbar.remove",confirmTitle:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.removeConfirmTitle"}),confirmContent:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.removeConfirmContent"}),onClick:function(){i(r)}})};function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){Oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ja(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var wa={size:function(e){return{renderButton:u.a.createElement(ma,e)}},align:function(e){return{renderButton:u.a.createElement(ga,e)}},theme:function(e){return{renderButton:u.a.createElement(ba,e)}},fit:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.fit,o=e.update,i=void 0===o?function(){}:o;return{value:r,glyph:"contain"===r?"fit-cover":"fit-contain",disabled:n,visible:!0,tooltipId:"contain"===r?"geostory.contentToolbar.cover":"geostory.contentToolbar.fit",onClick:function(){return i("fit","contain"===r?"cover":"contain")}}},cover:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.cover,o=e.updateSection,i=void 0===o?function(){}:o;return{value:r,glyph:r?"height-auto":"height-view",visible:!0,disabled:n,tooltipId:r?"geostory.contentToolbar.contentHeightAuto":"geostory.contentToolbar.contentHeightView",onClick:function(){return i({cover:!r},"merge")}}},editMedia:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.path,o=e.editMedia,i=void 0===o?function(){}:o;return{glyph:"pencil","data-button":"pencil",visible:!0,disabled:n,tooltipId:"geostory.contentToolbar.editMedia",onClick:function(){i({path:r})}}},remove:function(e){return{renderButton:u.a.createElement(ya,e)}},editMap:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.update,o=void 0===r?function(){}:r;return{glyph:"map-edit",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editMap",onClick:function(){o("editMap",!n)}}},editURL:function(e){var t=e.editURL,n=void 0!==t&&t,r=e.path,o=e.editWebPage,i=void 0===o?function(){}:o;return{glyph:"pencil",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editURL",onClick:function(){i({path:r})}}},muted:function(e){var t=e.update,n=e.muted;return{glyph:n?"muted":"audio",visible:!0,active:!n,tooltipId:n?"geostory.contentToolbar.enableAudio":"geostory.contentToolbar.disableAudio",onClick:function(){t("muted",!n)}}},autoplay:function(e){var t=e.update,n=e.autoplay;return{glyph:"play-circle",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableAutoplay":"geostory.contentToolbar.enableAutoplay",onClick:function(){t("autoplay",!n)}}},loop:function(e){var t=e.update,n=e.loop;return{glyph:"loop",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableLoop":"geostory.contentToolbar.enableLoop",onClick:function(){t("loop",!n)}}},showCaption:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.update,o=e.showCaption,i=e.caption,a=e.description;return{glyph:"caption",visible:!(!i&&!a),disabled:n,active:!(!o||n),tooltipId:o?"geostory.contentToolbar.hideCaption":"geostory.contentToolbar.showCaption",onClick:function(){r("showCaption",!o)}}}};function Sa(e){var t=e.tools,n=void 0===t?[]:t,r=ja(e,["tools"]);return u.a.createElement("div",{className:"ms-content-toolbar"},u.a.createElement(ti.a,{btnDefaultProps:{className:"square-button-md no-border",noTooltipWhenDisabled:!0},buttons:n.filter((function(e){return(null==e?void 0:e.id)&&wa[e.id]||wa[e]})).map((function(e){return(null==e?void 0:e.id)&&wa[e.id](ha(ha({},r),e))||wa[e](r)}))}))}function Ea(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Aa=function(e){var t=e.id,n=e.inViewRef,r=e.children,o=e.type,i=e.contentWrapperStyle,a=e.contentToolbar,c=e.mode,l=Ea(e,["id","inViewRef","children","type","contentWrapperStyle","contentToolbar","mode"]),s=a||Sa;return u.a.createElement("div",{id:t,ref:n,style:i,className:"ms-content ms-content-".concat(o).concat(Object(b.p)(l))},u.a.createElement("div",{className:"ms-content-body",style:Object(b.t)(l)},c===b.f.EDIT&&u.a.createElement(s,l),r))};function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){Ca(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ta=Object(ht.compose)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return ht.nest.apply(void 0,t.concat([e]))}}(Aa),Object(ht.setDisplayName)("ColumnContent"))(Fo),Ma=function(e){return{id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:e}},Ia=Object(ht.compose)(Object(ht.branch)((function(e){var t=e.type;return e.sectionType===b.h.IMMERSIVE&&t===b.a.COLUMN}),Ai({threshold:[0,.25,.5,.75]})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return ht.nest.apply(void 0,t.concat([e]))}}(Aa),Object(ht.setDisplayName)("SectionContent"),Object(ht.branch)((function(e){return e.type===b.a.COLUMN}),Object(ht.renderComponent)((function(e){var t,n=e.viewWidth,r=e.viewHeight,o=e.contents,i=void 0===o?[]:o,a=e.mode,c=e.add,l=void 0===c?function(){}:c,s=e.editMedia,p=void 0===s?function(){}:s,d=e.editWebPage,f=void 0===d?function(){}:d,m=e.update,g=void 0===m?function(){}:m,y=e.remove,v=void 0===y?function(){}:y,h=e.bubblingTextEditing,O=void 0===h?function(){}:h,j=e.expandable,w=e.mediaViewer,S=e.contentToolbar,E=e.sections,A=void 0===E?[]:E,P=e.sectionType,x=e.overrideTools,C=e.storyFonts;return u.a.createElement(wi,{className:"ms-column-contents",ContentComponent:Ta,contents:i,mode:a,add:l,editMedia:p,editWebPage:f,update:g,remove:v,viewWidth:n,viewHeight:r,bubblingTextEditing:O,sectionType:P,contentProps:{expandable:j,mediaViewer:w,contentToolbar:S},sections:A,storyFonts:C,tools:xa((t={},Ca(t,b.a.TEXT,["remove"]),Ca(t,b.e.IMAGE,["editMedia",Ma(),"showCaption","remove"]),Ca(t,b.e.MAP,["editMedia","editMap",Ma(!0),"showCaption","remove"]),Ca(t,b.a.WEBPAGE,["editURL",Ma(!0),"remove"]),Ca(t,b.e.VIDEO,["editMedia","muted","autoplay","loop","showCaption","remove"]),t),x),addButtons:[{glyph:"sheet",tooltipId:"geostory.addTextContent",template:b.a.TEXT},{glyph:"picture",tooltipId:"geostory.addMediaContent",template:b.a.MEDIA},{glyph:"webpage",tooltipId:"geostory.addWebPageContent",template:b.a.WEBPAGE}]})}))))(Fo),ka=Object(ht.compose)(Object(ht.defaultProps)({ContentComponent:Ia}),Object(ht.withHandlers)({editMedia:function(e){var t=e.editMedia,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},editWebPage:function(e){var t=e.editWebPage,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},add:function(e){var t=e.add,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},update:function(e){var t=e.update,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},remove:function(e){var t=e.remove,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}}}),Object(ht.setDisplayName)("SectionContents"))(wi);function Da(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Na(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(n),!0).forEach((function(t){La(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function La(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object(ht.setObservableConfig)(jt.a);var Fa=Object(ht.withProps)((function(e){var t=e.id,n=e.backgroundId,r=e.contents,o=function(e,t){var n=Object(j.findIndex)(e,{id:t});return e[-1!==n&&n?n:0]}(void 0===r?[]:r,n)||{},i=o&&o.id;return{background:Object(j.get)(o,"background")||{type:"none"},contentId:i,sectionId:t,path:'sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(i,'"}].background')}})),Ba=Object(ht.withHandlers)({updateBackground:function(e){var t=e.sectionId,n=e.contentId,r=e.update,o=void 0===r?function(){}:r;return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return o.apply(void 0,['sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(n,'"}].background.')+e].concat(i))}},updateSection:function(e){var t=e.sectionId,n=e.update,r=void 0===n?function(){}:n;return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(void 0,['sections[{"id": "'.concat(t,'"}]')].concat(n))}}}),Ua=Object(ht.compose)(Fa,Ba),Ga=Object(ht.compose)(Object(ht.mapPropsStream)((function(e){var t=Object(ht.createEventHandler)(),n=t.handler,r=t.stream;return Q.Observable.combineLatest(e,function(e,t){var n=e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return Ra(Ra({},e),{},La({},n,{visible:r,entry:o}))}),{}).debounceTime(100).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(j.maxBy)(Object.keys(e),(function(t){return e[t].visible?Object(j.get)(e[t],"entry.intersectionRatio"):-1/0}));return{maxItem:t,items:e}}));return Q.Observable.merge(n.pluck("maxItem").distinctUntilChanged().map((function(e){return{backgroundId:e}})),n.map((function(e){var t=e.maxItem,n=e.items;return 0===Object(j.get)(n[t],"entry.intersectionRatio")?"EMPTY":t})).withLatestFrom(t.pluck("updateCurrentPage")).do((function(e){var t=Da(e,2),n=t[0],r=t[1];return r&&r({columnId:n})})).ignoreElements())}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ra(Ra({},t.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Ra(Ra({},e),t)}),{})),{},{onVisibilityChange:n})}))})),Ua),Ha=n("./node_modules/stickybits/dist/stickybits.es.js");function Wa(e){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function za(){return(za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(n),!0).forEach((function(t){ec(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ja(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$a(e);if(t){var o=$a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Za(this,n)}}function Za(e,t){return!t||"object"!==Wa(t)&&"function"!=typeof t?Xa(e):t}function Xa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $a(e){return($a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ec(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tc=n("./node_modules/react-overlays/es/index.js"),nc=n("./MapStore2/web/client/components/geostory/layouts/sections/patterns/grid.svg"),rc=n.n(nc);function oc(e){return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ic(Object(n),!0).forEach((function(t){mc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ic(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(){return(cc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uc(e,t){return(uc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fc(e);if(t){var o=fc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dc(this,n)}}function dc(e,t){return!t||"object"!==oc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fc(e){return(fc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uc(e,t)}(i,e);var t,n,r,o=pc(i);function i(){return lc(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=Object(b.t)(this.props),t=!this.props.disableToolbarPortal&&this.refs&&this.refs.div&&this.refs.div.parentNode,n=this.props.sectionType===b.h.TITLE?["editMedia","cover"]:["editMedia"],r=this.props.contentToolbar||Sa,o=u.a.createElement(r,cc({},this.props,{themeProps:{disableBackgroundAlpha:!0,disableTextColor:!0,disableShadow:!0},tools:this.props.tools&&this.props.type&&this.props.tools[this.props.type]||this.props.sectionType===b.h.BANNER&&[].concat(n,["cover","remove"])||n})),i="".concat(this.props.sectionId||"ms","-media-").concat(this.props.id||this.props.resourceId);return u.a.createElement("div",{ref:"div",className:"ms-section-background",style:ac({},this.props.style)},u.a.createElement("div",{className:"ms-section-background-container".concat(Object(b.p)(this.props)),style:ac(ac({height:this.props.height},e),(null==eo?void 0:eo[this.props.type])?{}:this.props.backgroundPlaceholder)},u.a.createElement(no,cc({id:i},this.props,{enableFullscreen:!1,descriptionEnabled:!1,mediaViewer:this.props.mediaViewer,containerInView:this.props.inView})),this.props.mode===b.f.EDIT&&(t?u.a.createElement(tc.Portal,{container:t},o):o)))}}])&&sc(t.prototype,n),r&&sc(t,r),i}(s.Component);mc(gc,"propTypes",{id:_t.a.string,resourceId:_t.a.string,sectionId:_t.a.string,mode:_t.a.string,fit:_t.a.string,size:_t.a.string,path:_t.a.string,credits:_t.a.string,description:_t.a.string,height:_t.a.number,width:_t.a.number,tools:_t.a.object,style:_t.a.object,add:_t.a.func,editMedia:_t.a.func,update:_t.a.func,updateSection:_t.a.func,remove:_t.a.func,type:_t.a.oneOf(b.x.MediaTypes),disableToolbarPortal:_t.a.bool,backgroundPlaceholder:_t.a.object,sectionType:_t.a.string,src:_t.a.string,theme:_t.a.string,mediaViewer:_t.a.func,contentToolbar:_t.a.func,inView:_t.a.bool}),mc(gc,"defaultProps",{height:0,size:"full",width:0,style:{},backgroundPlaceholder:{background:"url(".concat(rc.a,")"),backgroundSize:"256px auto"}});var bc,yc,vc,hc=(bc=gc,vc=yc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(i,e);var t,n,r,o=Ja(i);function i(){var e;qa(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ec(Xa(e=o.call.apply(o,[this].concat(n))),"state",{style:{}}),ec(Xa(e),"update",(function(t){if(e._stickybits){var n=document.querySelector(t);-1===e._stickybits.definePosition().indexOf("sticky")&&n&&(e._stickybits.update(),setTimeout((function(){var t=n.getBoundingClientRect(),r=t.top,o=t.left;e.setState({style:{top:r,left:o,width:n.scrollWidth-2}})})))}})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this._stickybits=this._node&&Object(Ha.a)(this._node,{scrollEl:this.props.scrollContainerSelector,noStyles:!0,useGetBoundingClientRect:!0}),this.update(this.props.scrollContainerSelector)}},{key:"componentWillReceiveProps",value:function(e){!this._stickybits||e.viewWidth===this.props.viewWidth&&e.viewHeight===this.props.viewHeight||this.update(e.scrollContainerSelector)}},{key:"componentWillUnmount",value:function(){this._stickybits&&this._stickybits.cleanup()}},{key:"render",value:function(){var e=this;return u.a.createElement(bc,za({ref:function(t){t&&t.refs&&t.refs[e.props.refId]&&(e._node=t.refs[e.props.refId])},style:Qa({},this.state.style)},this.props),this.props.children)}}])&&Ya(t.prototype,n),r&&Ya(t,r),i}(s.Component),ec(yc,"propTypes",{scrollContainerSelector:_t.a.string,height:_t.a.number,width:_t.a.number,refId:_t.a.string}),ec(yc,"defaultProps",{scrollContainerSelector:"body",height:0,width:0,refId:"div"}),vc),Oc=n("./MapStore2/web/client/components/geostory/layouts/sections/patterns/world.svg"),jc=n.n(Oc);function wc(){return(wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ec=Object(ht.compose)(Ga,Object(ht.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t,n=e.add,r=void 0===n?function(){}:n,o=e.editMedia,i=void 0===o?function(){}:o,a=e.editWebPage,c=void 0===a?function(){}:a,l=e.onVisibilityChange,s=void 0===l?function(){}:l,p=e.update,d=void 0===p?function(){}:p,f=e.updateBackground,m=void 0===f?function(){}:f,g=e.updateCurrentPage,y=void 0===g?function(){}:g,v=e.remove,h=void 0===v?function(){}:v,O=e.id,w=e.background,S=void 0===w?{}:w,E=e.path,A=e.contents,P=void 0===A?[]:A,x=e.mode,C=e.sectionType,T=e.inViewRef,M=e.viewWidth,I=e.viewHeight,k=e.focusedContent,D=e.contentId,N=e.bubblingTextEditing,_=void 0===N?function(){}:N,R=e.textEditorActiveClass,L=void 0===R?"":R,F=e.expandableMedia,B=void 0!==F&&F,U=e.storyTheme,G=e.mediaViewer,H=e.contentToolbar,W=e.inView,z=e.sections,V=void 0===z?[]:z,Q=e.storyFonts,q=k&&k.hideContent&&Object(j.get)(k,"target.id")===D,Y=q?"hidden":"visible",K=B&&S&&"map"===S.type?" ms-expandable-background":"",J=(null==U?void 0:U.overlay)||{},Z=(null==U?void 0:U.general)||{};return u.a.createElement("section",{className:"ms-section ms-section-immersive".concat(K),id:O,ref:T},u.a.createElement(hc,wc({},S,{mode:x,disableToolbarPortal:!0,tools:(t={},Sc(t,b.e.IMAGE,["editMedia","fit","size","align","theme"]),Sc(t,b.e.MAP,["editMedia","editMap","size","align","theme"]),Sc(t,b.e.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),t),scrollContainerSelector:"#ms-sections-container",add:r,editMedia:i,expandable:B,path:E,update:m,updateCurrentPage:y,remove:h,sectionType:C,sectionId:O,backgroundId:S.id,key:S.id,width:M,height:I,backgroundPlaceholder:{background:"url(".concat(jc.a,")"),backgroundSize:"600px auto"},storyTheme:Z,mediaViewer:G,contentToolbar:H,inView:W})),u.a.createElement(ka,{tools:Sc({},b.a.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(L),contents:P,mode:x,add:r,updateCurrentPage:y,editMedia:i,editWebPage:c,update:d,remove:h,sectionId:O,viewWidth:M,viewHeight:I,contentProps:{onVisibilityChange:s,contentWrapperStyle:{minHeight:I,visibility:Y},expandable:B,mediaViewer:G,contentToolbar:H},focusedContent:k,bubblingTextEditing:_,sectionType:C,storyTheme:J,sections:V,storyFonts:Q}),x===b.f.EDIT&&!q&&u.a.createElement(mi,{containerWidth:M,containerHeight:I,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){r("sections",O,b.h.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){r("sections",O,b.h.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){r("sections",O,b.h.PARAGRAPH)}},{glyph:"story-immersive-content",tooltipId:"geostory.addImmersiveContent",onClick:function(){r('sections[{"id": "'.concat(O,'"}].contents'),void 0,b.a.COLUMN)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){r("sections",O,b.g.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){r("sections",O,b.g.WEBPAGE)}}]}))}));function Ac(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pc=function(e){var t,n=e.id,r=e.contents,o=e.mode,i=e.add,a=void 0===i?function(){}:i,c=e.update,l=void 0===c?function(){}:c,s=e.editMedia,p=void 0===s?function(){}:s,d=e.editWebPage,f=void 0===d?function(){}:d,m=e.remove,g=void 0===m?function(){}:m,y=e.inViewRef,v=e.viewWidth,h=e.viewHeight,O=e.expandableMedia,j=e.mediaViewer,w=e.contentToolbar,S=e.sections,E=void 0===S?[]:S,A=e.sectionType,P=e.storyFonts;return u.a.createElement("section",{className:"ms-section ms-section-paragraph",id:n,ref:y},u.a.createElement(ka,{className:"ms-section-contents",contents:r,mode:o,add:a,editMedia:p,editWebPage:f,update:l,remove:g,sectionId:n,viewWidth:v,viewHeight:h,sectionType:A,contentProps:{expandable:O,mediaViewer:j,contentToolbar:w,overrideTools:Ac({},b.a.TEXT,[(t=!0,{id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:t}),"remove"])},sections:E,storyFonts:P}),o===b.f.EDIT&&u.a.createElement(mi,{containerWidth:v,containerHeight:h,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){a("sections",n,b.h.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){a("sections",n,b.h.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){a("sections",n,b.h.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){a("sections",n,b.h.IMMERSIVE)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){a("sections",n,b.g.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){a("sections",n,b.g.WEBPAGE)}}]}))},xc=n("./MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png"),Cc=n.n(xc);function Tc(){return(Tc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ic=Object(ht.compose)(Ua,Object(ht.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.contents,i=void 0===o?[]:o,a=e.mode,c=e.contentId,l=e.path,s=e.sectionType,p=e.cover,d=e.viewWidth,f=e.viewHeight,m=e.inViewRef,g=e.add,y=void 0===g?function(){}:g,v=e.update,h=void 0===v?function(){}:v,O=e.updateSection,w=void 0===O?function(){}:O,S=e.remove,E=void 0===S?function(){}:S,A=e.updateBackground,P=void 0===A?function(){}:A,x=e.editMedia,C=void 0===x?function(){}:x,T=e.focusedContent,M=e.bubblingTextEditing,I=void 0===M?function(){}:M,k=e.textEditorActiveClass,D=void 0===k?"":k,N=e.expandableMedia,_=void 0!==N&&N,R=e.storyTheme,L=e.mediaViewer,F=e.contentToolbar,B=e.inView,U=e.sections,G=void 0===U?[]:U,H=e.storyFonts,W=Object(j.get)(T,"target.id")===c,z=W?"hidden":"visible",V=_&&r&&"map"===r.type?" ms-expandable-background":"",Q=(null==R?void 0:R.overlay)||{},q=(null==R?void 0:R.general)||{};return u.a.createElement("section",{ref:m,className:"ms-section ms-section-title".concat(V),id:t},u.a.createElement(vt.a,null,(function(e){var t,n=e.height;return u.a.createElement(hc,Tc({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:a,id:c,path:l,update:P,add:y,editMedia:C,expandable:_,updateSection:w,cover:p,remove:E,width:d,sectionType:s,backgroundPlaceholder:{background:"url(".concat(p?rc.a:Cc.a,")"),backgroundSize:"".concat(p?64:600,"px auto")},tools:(t={},Mc(t,b.e.IMAGE,["editMedia","cover","fit","size","align","theme"]),Mc(t,b.e.MAP,["editMedia","cover","editMap","size","align","theme"]),Mc(t,b.e.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop"]),t),height:n>=f?f:n,storyTheme:q,mediaViewer:L,contentToolbar:F,inView:B}))})),u.a.createElement(ka,{className:"ms-section-contents".concat(D),contents:i,mode:a,add:y,sectionType:s,update:h,remove:E,sectionId:t,contentProps:{contentWrapperStyle:p?{minHeight:f,visibility:z}:{visibility:z},mediaViewer:L,contentToolbar:F},tools:Mc({},b.a.TEXT,["size","align","theme","remove"]),focusedContent:T,bubblingTextEditing:I,storyTheme:Q,sections:G,storyFonts:H}),a===b.f.EDIT&&!W&&u.a.createElement(mi,{containerWidth:d,containerHeight:f,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){y("sections",t,b.h.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){y("sections",t,b.h.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){y("sections",t,b.h.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){y("sections",t,b.h.IMMERSIVE)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){y("sections",t,b.g.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){y("sections",t,b.g.WEBPAGE)}}]}))}));function kc(){return(kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nc,_c=Object(ht.compose)(Ua,Object(ht.withStateHandlers)({textEditorActive:!1}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.mode,i=e.contentId,a=e.path,c=e.sectionType,l=void 0===c?b.h.BANNER:c,s=e.cover,p=e.viewWidth,d=e.viewHeight,f=e.inViewRef,m=e.add,g=void 0===m?function(){}:m,y=e.updateSection,v=void 0===y?function(){}:y,h=e.remove,O=void 0===h?function(){}:h,w=e.updateBackground,S=void 0===w?function(){}:w,E=e.editMedia,A=void 0===E?function(){}:E,P=e.focusedContent,x=e.expandableMedia,C=void 0!==x&&x,T=e.storyTheme,M=e.mediaViewer,I=e.contentToolbar,k=e.inView,D=Object(j.get)(P,"target.id")===i,N=C&&r&&"map"===r.type?" ms-expandable-background":"",_=a.replace(".background","");return u.a.createElement("section",{ref:f,className:"ms-section ms-section-banner".concat(N),id:t},u.a.createElement(vt.a,null,(function(e){var t,n=e.height;return u.a.createElement(hc,kc({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:o,id:i,path:a,update:S,add:g,editMedia:A,expandable:C,updateSection:v,cover:s,remove:function(){return O(_)},width:p,sectionType:l,backgroundPlaceholder:{background:"url(".concat(s?rc.a:Cc.a,")"),backgroundSize:"".concat(s?64:600,"px auto")},tools:(t={},Dc(t,b.e.IMAGE,["editMedia","cover","fit","size","align","theme","remove"]),Dc(t,b.e.MAP,["editMedia","cover","editMap","size","align","theme","remove"]),Dc(t,b.e.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop","remove"]),t),height:n>=d?d:n,storyTheme:T,mediaViewer:M,contentToolbar:I,inView:k}))})),u.a.createElement("div",{style:{minHeight:s?d:300,pointerEvents:"none"}}),o===b.f.EDIT&&!D&&u.a.createElement(mi,{containerWidth:p,containerHeight:d,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){g("sections",t,b.h.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){g("sections",t,b.h.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){g("sections",t,b.h.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){g("sections",t,b.h.IMMERSIVE)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){g("sections",t,b.g.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){g("sections",t,b.g.WEBPAGE)}}]}))}));function Rc(e){return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bc(e,t){return(Bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wc(e);if(t){var o=Wc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gc(this,n)}}function Gc(e,t){return!t||"object"!==Rc(t)&&"function"!=typeof t?Hc(e):t}function Hc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wc(e){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vc=(zc(Nc={},b.h.IMMERSIVE,Ec),zc(Nc,b.h.PARAGRAPH,Pc),zc(Nc,b.g.MEDIA,Pc),zc(Nc,b.g.WEBPAGE,Pc),zc(Nc,b.h.TITLE,Ic),zc(Nc,b.h.BANNER,_c),zc(Nc,"UNKNOWN",(function(e){var t=e.type,n=e.inViewRef;return u.a.createElement("div",{ref:n,className:"ms-section ms-section-unknown"},"WARNING: unknown session of type ",t)})),Nc),Qc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bc(e,t)}(i,e);var t,n,r,o=Uc(i);function i(){var e;Lc(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zc(Hc(e=o.call.apply(o,[this].concat(n))),"state",{height:0}),e}return t=i,(n=[{key:"render",value:function(){var e=Vc[this.props.type]||Vc.UNKNOWN;return u.a.createElement(e,{sectionType:this.props.type,id:this.props.id,add:this.props.add,update:this.props.update,inViewRef:this.props.inViewRef,editMedia:this.props.editMedia,expandableMedia:this.props.expandableMedia,editWebPage:this.props.editWebPage,updateCurrentPage:this.props.updateCurrentPage,remove:this.props.remove,mode:this.props.mode,cover:this.props.cover,contents:this.props.contents,viewWidth:this.props.viewWidth,viewHeight:this.props.viewHeight,focusedContent:this.props.focusedContent,storyTheme:this.props.storyTheme,mediaViewer:this.props.mediaViewer,contentToolbar:this.props.contentToolbar,inView:this.props.inView,sections:this.props.sections,storyFonts:this.props.storyFonts})}}])&&Fc(t.prototype,n),r&&Fc(t,r),i}(u.a.Component);zc(Qc,"propTypes",{id:_t.a.string,type:_t.a.oneOf(b.x.SectionTypes),storyType:_t.a.oneOf(b.x.StoryTypes),add:_t.a.func,update:_t.a.func,editMedia:_t.a.func,editWebPage:_t.a.func,remove:_t.a.func,updateCurrentPage:_t.a.func,mode:_t.a.oneOf(b.x.Modes),contents:_t.a.array,viewHeight:_t.a.number,viewWidth:_t.a.number,inViewRef:_t.a.func,excludeClassName:_t.a.string,cover:_t.a.bool,focusedContent:_t.a.object,expandableMedia:_t.a.bool,storyTheme:_t.a.object,mediaViewer:_t.a.func,contentToolbar:_t.a.func,inView:_t.a.bool,sections:_t.a.array,storyFonts:_t.a.array}),zc(Qc,"defaultProps",{id:"",add:function(){},update:function(){},editMedia:function(){},editWebPage:function(){},updateCurrentPage:function(){},remove:function(){},storyType:b.i.CASCADE,viewHeight:0,viewWidth:0,mode:b.f.VIEW,expandableMedia:!1,sections:[],storyFonts:[]});var qc=Ai({threshold:[0,.25,.5,.75,1],rootMargin:"-200px 0px 0px 0px"})(Qc);function Yc(e){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zc(e,t){return(Zc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tl(e);if(t){var o=tl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $c(this,n)}}function $c(e,t){return!t||"object"!==Yc(t)&&"function"!=typeof t?el(e):t}function el(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tl(e){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zc(e,t)}(i,e);var t,n,r,o=Xc(i);function i(){var e;Kc(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nl(el(e=o.call.apply(o,[this].concat(n))),"getAdjustedSelector",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/#\d|^#-\d/g,(function(e,t){return t?"#\\"+t[1]+t[2]:"#\\3"+e[1]+" "}))})),nl(el(e),"getFocusedTarget",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.targets,n=e.props.padding,r=void 0===n?{}:n;return t.map((function(t){var n=t.selector,o=null;try{var i=window.document.querySelector(e.getAdjustedSelector(n));if(i){var a=i.getBoundingClientRect(),c=a.top,l=a.right,s=a.bottom,u=a.left;o={x:u-r,y:c-r,w:l-u+2*r,h:s-c+2*r}}}catch(e){console.warn(e)}finally{return o}})).filter((function(e){return e}))})),nl(el(e),"getHolePath",(function(t){var n=t.x,r=t.y,o=t.w,i=t.h,a=e.props.borderRadius,c=void 0===a?8:a;return"M ".concat(n," ").concat(r+c," q 0 -").concat(c," ").concat(c," -").concat(c," h ").concat(o-2*c," q ").concat(c," 0 ").concat(c," ").concat(c," v ").concat(i-2*c," q 0 ").concat(c," -").concat(c," ").concat(c," h-").concat(o-2*c," q -").concat(c," 0 -").concat(c," -").concat(c," v-").concat(i-2*c)})),nl(el(e),"getPath",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getFocusedTarget(),o="M 0 0 h ".concat(n," v ").concat(t," h -").concat(n," v -").concat(t),i=r.map(e.getHolePath);return o+i.join(" ")})),e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.onMaskClicked,r=t.stopEventsOnTargets,o=void 0!==r&&r,i=t.targets,a=this.getFocusedTarget(i.filter((function(e){var t=e.stopEventsOnTarget;return o||t})));return u.a.createElement("div",{style:{position:"fixed",height:"100vh",width:"100vw",top:0,left:0,zIndex:1e6,pointerEvents:"none"}},u.a.createElement(vt.a,null,(function(t){var r=t.width,o=t.height;return u.a.createElement("svg",{width:r,height:o,xmlns:"http://www.w3.org/2000/svg"},u.a.createElement("path",{d:e.getPath(o,r),fill:"rgba(0,0,0,0.7)",fillRule:"evenodd",pointerEvents:"visiblePainted",onClick:n}),a.map((function(t,n){return u.a.createElement("path",{key:n,d:e.getHolePath(t),fill:"transparent",pointerEvents:"visiblePainted"})})))})))}}])&&Jc(t.prototype,n),r&&Jc(t,r),i}(u.a.Component);nl(rl,"propTypes",{targets:_t.a.arrayOf(_t.a.shape({selector:_t.a.string,stopEventsOnTarget:_t.a.bool})),padding:_t.a.number,borderRadius:_t.a.number,onMaskClicked:_t.a.func,stopEventsOnTargets:_t.a.bool}),nl(rl,"defaultProps",{targets:[],padding:0,borderRadius:8,onMaskClicked:function(){},stopEventsOnTargets:!1});function ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ol(Object(n),!0).forEach((function(t){al(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function al(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cl=Tt()((function(e){var t=e.sections;return 0===(void 0===t?[]:t).length}),(function(e){var t=e.add,n=void 0===t?function(){}:t;return{iconFit:!1,style:{position:"relative",width:"50%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},glyph:"geostory",title:u.a.createElement(ao.a,{msgId:"geostory.emptyTitle"}),description:u.a.createElement(ao.a,{msgId:"geostory.emptyDescription"}),content:u.a.createElement(mi,{addButtonClassName:"square-button-md",containerWidth:"100%",containerHeight:"100%",buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){n("sections",0,b.h.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){n("sections",0,b.h.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){n("sections",0,b.h.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveContent",onClick:function(){n("sections",0,b.h.IMMERSIVE)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){n("sections",0,b.g.MEDIA)}},{glyph:"code",tooltipId:"geostory.addWebPageSection",onClick:function(){n("sections",0,b.g.WEBPAGE)}}]})}}))(vt.a),ll=function(e){var t=e.width;return e.mode===b.f.EDIT?"":t<640?"sm":t>=640&&t<1024?"md":""},sl=Object(ht.compose)(xt,Dt,function(e){var t=e.showFocusMask,n=void 0===t?function(){}:t,r=e.defaultTargets,o=void 0===r?{selector:".ms-geostory-map-editor"}:r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.padding,c=void 0===a?0:a,l=i.borderRadius,s=void 0===l?8:l,p=i.stopEventsOnTargets,d=void 0!==p&&p,f=i.onMaskClicked,m=void 0===f?function(){}:f;return Object(ht.branch)(n,(function(e){return Object(ht.nest)((function(e){var t=e.focusedContent,n=e.children;return u.a.createElement(u.a.Fragment,null,n,u.a.createElement(rl,{targets:[t,o],padding:c,borderRadius:s,stopEventsOnTargets:d,onMaskClicked:m}))}),e)}))}({showFocusMask:function(e){var t=e.focusedContent,n=(t=void 0===t?{}:t).target;return(void 0===n?{}:n).id}}))((function(e){var t=e.mode,n=void 0===t?b.f.VIEW:t,r=e.sections,o=void 0===r?[]:r,i=e.add,a=void 0===i?function(){}:i,c=e.onVisibilityChange,l=void 0===c?function(){}:c,s=e.updateCurrentPage,p=void 0===s?function(){}:s,d=e.editMedia,f=void 0===d?function(){}:d,m=e.editWebPage,g=void 0===m?function(){}:m,y=e.update,v=void 0===y?function(){}:y,h=e.remove,O=void 0===h?function(){}:h,j=e.focusedContent,w=e.isContentFocused,S=void 0!==w&&w,E=e.getSize,A=void 0===E?ll:E,P=e.theme,x=void 0===P?{}:P,C=e.mediaViewer,T=e.contentToolbar,M=e.storyFonts;return u.a.createElement(bt.a,{className:"ms-cascade-story ms-".concat(n)},u.a.createElement(cl,{sections:o,add:a},(function(e){var t,r=e.width,i=e.height,c=A({width:r,height:i,mode:n}),s=c?" ms-".concat(c):"",d="sm"===c,m=x&&Yi()(x)&&x||{};return u.a.createElement("div",{id:"ms-sections-container",className:"ms-sections-container".concat(s," ms-sections-hyperlinks"),style:il(il({},null==m?void 0:m.general),S&&{overflow:"hidden"})},(null==m||null===(t=m.link)||void 0===t?void 0:t.color)&&u.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n        .ms-sections-hyperlinks .ms-text-editor-main a,\n        .ms-sections-hyperlinks .ms-text-wrapper a,\n        .ms-sections-hyperlinks .ms-text-editor-main a:link,\n        .ms-sections-hyperlinks .ms-text-wrapper a:link,\n        .ms-sections-hyperlinks .ms-text-editor-main a:visited,\n        .ms-sections-hyperlinks .ms-text-wrapper a:visited,\n        .ms-sections-hyperlinks .ms-text-editor-main a:active,\n        .ms-sections-hyperlinks .ms-text-wrapper a:active {\n            color: ".concat(m.link.color,";\n            opacity: 1;\n        }\n        .ms-sections-hyperlinks .ms-text-editor-main a:hover,\n        .ms-sections-hyperlinks .ms-text-wrapper a:hover {\n            color: ").concat(m.link.color,";\n            opacity: 0.75;\n        }\n    ")}}),o.map((function(e){var t=e.contents,c=void 0===t?[]:t,s=e.id,b=e.type,y=e.cover;return u.a.createElement(qc,{focusedContent:j,onVisibilityChange:l,add:a,editMedia:f,expandableMedia:d,editWebPage:g,updateCurrentPage:p,update:v,remove:O,key:s,id:s,viewHeight:i,viewWidth:r,type:b,mode:n,contents:c,cover:y,storyTheme:m,mediaViewer:C,contentToolbar:T,sections:o,storyFonts:M})})))})))})),ul=n("./node_modules/uuid/index.js"),pl=n.n(ul),dl=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/handleNodeSelection.js"),fl=n.n(dl);function ml(e){return function(e){if(Array.isArray(e))return gl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return gl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gl(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bl(){return(bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yl(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(n),!0).forEach((function(t){Ol(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ol(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jl=Vi(xi.a),wl=Object(ht.compose)(Object(p.connect)(Object(d.createSelector)(Oe.t,Oe.k,(function(e,t){return{resources:e,isContentFocused:t}}))),Object(ht.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.map,o=void 0===r?{}:r,i=hl(hl({},o),{},{layers:(o.layers||[]).map((function(e){return e||void 0}))}),a=Object(j.find)(t,{id:n})||{};return{map:Object(b.k)(a.data,i)}}))),Sl=Object(ht.compose)(Object(p.connect)(Object(d.createSelector)(Oe.f,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{focusedEl:e}}))),Object(ht.withProps)((function(e){var t=e.focusedEl,n=(t=void 0===t?{}:t).resourceId,r=t.map;return{map:r||{},resourceId:n,disableReset:!r}}))),El=Object(ht.withHandlers)({onChangeMap:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){t("".concat(r.path,".map.").concat(e),n,"merge")}},onChange:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){t(r.path+".".concat(e),n,"merge")}}}),Al=Object(ht.compose)(Object(p.connect)(null,{toggleAdvancedEditing:Ee}),Object(ht.withHandlers)({toggleAdvancedEditing:function(e){var t=e.toggleAdvancedEditing,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(){var e=o.id,t=yl(o,["id"]);n("inlineEditor",{data:t,id:e})}}})),Pl=Object(ht.withHandlers)({toggleEditing:function(e){var t=e.editMap,n=e.update,r=e.focusedContent;return function(){return n(r.path+".editMap",!t)}},onReset:function(e){var t=e.update,n=e.focusedContent,r=(n=void 0===n?{}:n).path,o=void 0===r?"":r;return function(){t(o+".map",void 0)}},discardAndClose:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e){t(r.path+".map",e),t(r.path+".editMap",!1)}}}),xl=function(e){return u.a.createElement(jl,bl({glyph:"repeat",bsStyle:"primary",className:"square-button-md no-border",tooltipId:"geostory.contentToolbar.resetMap",confirmTitle:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.resetMapConfirm"}),confirmContent:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.resetConfirmContent"})},e))},Cl=Object(ht.compose)(Object(ht.withProps)((function(e){var t=e.pendingChanges,n=e.toggleEditing,r=e.disableReset,o=e.onReset,i=e.toggleAdvancedEditing,a=void 0===i?function(){}:i;return{buttons:[{glyph:"floppy-disk",disabled:!t,tooltipId:"geostory.contentToolbar.saveChanges",onClick:n},{renderButton:u.a.createElement(xl,{disabled:r,onClick:o})},{glyph:"pencil",tooltipId:"geostory.contentToolbar.advancedMapEditor",onClick:a}]}})),fl.a,Object(ht.withStateHandlers)((function(){return{editNode:void 0}}),{setEditNode:function(){return function(e){return{editNode:e}}},closeNodeEditor:function(){return function(){return{editNode:void 0}}}}),Object(ht.branch)((function(e){return!!e.editNode}),Object(ht.withProps)((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.closeNodeEditor,o=void 0===r?function(){}:r;return{buttons:[{visible:1===n.length,tooltipId:"close",glyph:"1-close",onClick:o}]}})),Object(ht.withProps)((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.setEditNode,o=void 0===r?function(){}:r,i=e.buttons,a=void 0===i?[]:i;return{buttons:[{visible:1===n.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){o(n[0])}}].concat(ml(a))}})))),Tl=Object(ht.compose)(Object(ht.withPropsOnChange)(["focusedContent"],(function(e){var t=e.map,n=e.focusedEl;return{contentMap:(n=void 0===n?{}:n).map,lastSavedMap:t}})),Object(ht.withPropsOnChange)(["map"],(function(e){var t=e.map,n=e.lastSavedMap;return{pendingChanges:!Object(j.isEqual)(n,t)}}))),Ml=Object(ht.compose)(Object(ht.withProps)((function(e){var t=e.toggleEditing;return{CloseBtn:function(e){return u.a.createElement(xi.a,bl({onClick:t},e))}}})),Object(ht.branch)((function(e){return e.pendingChanges}),Object(ht.withProps)((function(e){var t=e.discardAndClose,n=e.contentMap;return{CloseBtn:function(e){return u.a.createElement(jl,bl({onClick:function(){return t(n)},confirmTitle:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.confirmCloseMapEditing"}),confirmContent:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.pendingChangesDiscardConfirm"})},e))}}})))),Il=Object(ht.mapPropsStream)((function(e){var t=Object(ht.createEventHandler)(),n=t.stream,r=t.handler;return e.pluck("map").distinctUntilChanged((function(e,t){return Object(j.isEqual)(e,t)})).switchMap((function(e){return n.map((function(t){return{map:hl(hl({},e),t)}})).startWith({map:e})})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return hl(hl({},n),{},{onMapViewLocalChanges:r,map:t})}))})),kl=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},Dl=Object(ht.withHandlers)({onMapViewChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.update,n=e.editMap,r=void 0!==n&&n,o=e.onMapViewLocalChanges,i=e.map,a=(i=void 0===i?{}:i).center,c=void 0===a?{}:a,l=i.zoom;return function(e){var n=e.center,i=void 0===n?{}:n,a=e.zoom,s=e.mapStateSource,u=kl(c.x,i.x)&&kl(c.y,i.y);!r||u&&l===a?o({center:i,zoom:a,mapStateSource:s}):t("map",{center:i,zoom:a,mapStateSource:pl()()},"merge")}}}),Nl=n("./MapStore2/web/client/components/misc/enhancers/localizeStringMap.js"),_l=n.n(Nl),Rl=n("./MapStore2/web/client/components/widgets/builder/wizard/map/NodeEditor.jsx"),Ll=n.n(Rl),Fl=n("./MapStore2/web/client/components/widgets/builder/wizard/map/enhancers/nodeEditor.js"),Bl=n.n(Fl);function Ul(){return(Ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gl(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Hl=Mr()(qn.NavItem),Wl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tabs,n=void 0===t?[]:t,r=e.activeTab,o=(e.width,e.setActiveTab),i=void 0===o?function(){}:o,a=Gl(e,["tabs","activeTab","width","setActiveTab"]);return u.a.createElement("div",{key:"ms-geostory-map-settings-navbar",className:"ms-row-tab"},u.a.createElement("div",null,u.a.createElement(qn.Nav,{bsStyle:"tabs",activeKey:r,justified:!0},n.map((function(e){return u.a.createElement(Hl,{key:"ms-tab-settings-"+e.id,tooltipId:e.tooltipId,eventKey:e.id,onClick:function(){return i(e.id)}},u.a.createElement(qn.Glyphicon,{glyph:e.glyph}))})))),u.a.createElement("div",null,n.filter((function(e){return e.id&&e.id===r})).filter((function(e){return e.Component})).map((function(e){return u.a.createElement(e.Component,Ul({},a,{key:"ms-geostory-tab-settings-body-"+e.id}))}))))},zl=n("./MapStore2/web/client/components/misc/enhancers/withControllableState.js"),Vl=n.n(zl),Ql=n("./node_modules/react-select/dist/react-select.es.js"),ql=n("./MapStore2/web/client/components/misc/FeatureInfoFormatSelector.jsx"),Yl=Lt()(["placeholder","options"])(Ql.default),Kl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{zoomControl:!0,mapInfoControl:!1}:t,r=e.onChangeMap,o=void 0===r?function(){}:r,i=n&&n.mapOptions||{},a=Object(b.j)({mapOptions:i,zoomControl:!!Object(j.isNil)(n.zoomControl)||n.zoomControl,mapInfoControl:!Object(j.isNil)(n.mapInfoControl)&&n.mapInfoControl});return u.a.createElement(qn.Form,{className:"ms-geostory-map-controls"},u.a.createElement(qn.FormGroup,null,u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"geostory.mapEditor.zoom"})),u.a.createElement(Xi.a,{onChange:function(){var e=!a.zoomControl;o("zoomControl",e),o("mapOptions.interactions",{doubleClickZoom:e,shiftDragZoom:e,pinchZoom:e})},className:"ms-geostory-map-controls-switch",checked:a.zoomControl}),u.a.createElement(Yl,{options:[{label:"geostory.mapEditor.topLeft",value:"topLeft"},{label:"geostory.mapEditor.topRight",value:"topRight"},{label:"geostory.mapEditor.bottomLeft",value:"bottomLeft"},{label:"geostory.mapEditor.bottomRight",value:"bottomRight"}],wrapperStyle:{marginTop:"10px"},value:a.mapOptions&&a.mapOptions.zoomPosition||"topLeft",clearable:!1,disabled:!a.zoomControl,onChange:function(e){return o("mapOptions.zoomPosition",e&&e.value?e.value:"topLeft")},placeholder:"geostory.builder.settings.titlePlaceholder"})),u.a.createElement(qn.FormGroup,null,u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"geostory.mapEditor.pan"})),u.a.createElement(Xi.a,{onChange:function(){var e=!(a.mapOptions&&a.mapOptions.interactions&&a.mapOptions.interactions.dragPan);o("mapOptions.interactions",{dragPan:e,keyboardPan:e})},className:"ms-geostory-map-controls-switch",checked:a.mapOptions&&a.mapOptions.interactions&&a.mapOptions.interactions.dragPan})),u.a.createElement(qn.FormGroup,null,u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"geostory.mapEditor.identify"})),u.a.createElement(Xi.a,{onChange:function(){var e=!a.mapInfoControl;o("mapInfoControl",e)},className:"ms-geostory-map-controls-switch",checked:a.mapInfoControl}),a.mapInfoControl&&u.a.createElement(ql.default,{disabled:!a.mapInfoControl,popoverMessage:"geostory.builder.settings.templateTooltip",infoFormat:a.mapOptions&&a.mapOptions.mapInfoFormat||"application/json",onInfoFormatChange:function(e){return o("mapOptions.mapInfoFormat",e)},selectProps:{wrapperStyle:{marginTop:10}}})))},Jl=n("./MapStore2/web/client/components/widgets/builder/wizard/map/TOC.jsx"),Zl=n.n(Jl),Xl=Object(ht.withProps)((function(e){return{tabs:e.tabs||[{id:"toc",titleId:"geostory.mapEditor.toc",tooltipId:"geostory.mapEditor.toc",glyph:"1-layer",visible:!0,Component:Zl.a},{id:"settings",titleId:"geostory.mapEditor.settings",tooltipId:"geostory.mapEditor.settings",glyph:"wrench",visible:!0,Component:Kl}]}})),$l=Object(ht.compose)(Vl()("activeTab","setActiveTab","toc"),Xl),es=Object(ht.compose)(Bl.a,Object(ht.withProps)((function(e){var t=e.selectedNode;return{title:t&&t.title}})),_l()("title"))((function(e){var t=e.title,n=e.description;return u.a.createElement("div",{className:"text-center"},u.a.createElement("div",{className:"mapstore-step-title"},t),u.a.createElement("div",{className:"mapstore-step-description"},n))})),ts=Bl()(Ll.a),ns=$l(Wl),rs=Object(ht.branch)((function(e){var t=e.focusedContent;return(t=void 0===t?{}:t).path}),Object(ht.compose)(Object(ht.defaultProps)({isFocused:!0,editMap:!0}),Sl,wl,Tl,El,Pl,Al,Cl,Ml))((function(e){var t=e.mode,n=void 0===t?b.f.VIEW:t,r=e.isFocused,o=void 0!==r&&r,i=e.map,a=void 0===i?{}:i,c=e.onChange,l=void 0===c?function(){}:c,s=e.onChangeMap,p=void 0===s?function(){}:s,d=e.onNodeSelect,f=void 0===d?function(){}:d,m=e.selectedNodes,g=e.buttons,y=void 0===g?[]:g,v=e.editNode,h=e.closeNodeEditor,O=e.CloseBtn,j=void 0===O?function(){return null}:O;return n===b.f.EDIT&&o?u.a.createElement("div",{key:"left-column",style:{order:-1,width:400,position:"relative"}},u.a.createElement(bt.a,{className:"ms-geostory-map-editor",header:u.a.createElement("div",{className:"ms-geostory-map-editor-header text-center"},u.a.createElement(qn.Row,null,u.a.createElement(qn.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},u.a.createElement(j,{glyph:"1-close",className:"pull-left on-close-btn square-button no-border ",tooltipId:"geostory.contentToolbar.closeMapEditing"}),u.a.createElement("div",{className:"mapstore-step-title"},u.a.createElement(ao.a,{msgId:"geostory.mapEditor.configureMapOptions"})))),u.a.createElement(ti.a,{transitionProps:!1,btnGroupProps:{className:"ms-geostory-map-editor-toolbar"},btnDefaultProps:{className:"square-button-md no-border",bsStyle:"primary",noTooltipWhenDisabled:!0},buttons:y}))},!!v&&[u.a.createElement(es,{map:a,editNode:v}),u.a.createElement(ts,{closeNodeEditor:h,editNode:v,map:a,onChange:l})]||[u.a.createElement(ns,{map:a,onChange:l,onChangeMap:p,selectedNodes:m,onSelect:f})])):null}));function os(){return(os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ls=function(e){var t=function(){return u.a.createElement("div",{className:"ms-media-error"},u.a.createElement(qn.Glyphicon,{glyph:"exclamation-sign"}))},n=function(e){var t=e.style,n=void 0===t?{}:t;return u.a.createElement("div",{style:n,className:"ms-media-loader"},u.a.createElement(Gr.a,{size:52}))};return function(r){var o={},i=r.sectionType;if((i===b.h.PARAGRAPH||i===b.h.IMMERSIVE)&&r.type===b.e.IMAGE){var a=((null==r?void 0:r.imgHeight)||9)/((null==r?void 0:r.imgWidth)||16)*100;o={paddingTop:"".concat(a,"%")}}return r.lazy?u.a.createElement(jo,{key:r.id,id:r.id,debounceTime:r.debounceTime,loading:r.isLoading,onLoad:function(e){return r.onLoad(as(as({},r.loading),{},cs({},e,!1)))},loaderComponent:n,loaderStyle:o},u.a.createElement(e,os({},r,{type:r.type,loaderComponent:n,loaderStyle:o,errorComponent:t}))):u.a.createElement(e,os({},r,{key:r.id,type:r.mediaType||r.type,loaderComponent:n,errorComponent:t}))}},ss=n("./MapStore2/web/client/components/map/enhancers/autoMapType.js"),us=n.n(ss);function ps(){return(ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gs(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var bs={image:Object(ht.branch)((function(e){return e.resourceId}),Object(ht.compose)(Object(p.connect)(Object(d.createSelector)(Oe.t,(function(e){return{resources:e}}))),Object(ht.withProps)((function(e){var t=e.resources,n=e.resourceId;return(Ii()(t,{id:n})||{}).data}))),Tt()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==b.h.TITLE&&r!==b.h.IMMERSIVE}),(function(){return{glyph:"picture"}})))(ls(Qn)),map:Object(ht.compose)(Object(ht.branch)((function(e){return e.resourceId}),wl),us.a,Il,Dl)(ls(Lr)),video:Object(ht.branch)((function(e){return e.resourceId}),Object(ht.compose)(Object(p.connect)(Object(d.createSelector)(Oe.t,(function(e){return{resources:e}}))),Object(ht.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.autoplay,o=(Ii()(t,{id:n})||{}).data||{},i=o.autoplay;return fs(fs({},gs(o,["autoplay"])),{},{autoplay:void 0!==r?r:i})}))),Tt()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==b.h.TITLE&&r!==b.h.IMMERSIVE}),(function(){return{glyph:"play"}})))(ls(Yr))},ys=function(e){var t=e.type,n=gs(e,["type"]),r=bs[t];return r?u.a.createElement(r,ps({type:t},n)):null};function vs(){return(vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function hs(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Os=Object(p.connect)(Object(d.createSelector)(Oe.t,(function(e){return{resources:e}})))((function(e){var t=e.resources,n=hs(e,["resources"]);if(n.resourceId){var r=(Ii()(t,{id:n.resourceId})||{}).data||{};return u.a.createElement(Sa,vs({},r,n))}return u.a.createElement(Sa,n)}));function js(){return(js=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ws(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ss=function(e){var t=e.story,n=e.mode,r=void 0===n?b.f.VIEW:n,o=e.onAdd,i=e.messages,a=e.fontFamilies,c=void 0===a?[]:a,l=e.storyFonts,p=void 0===l?[]:l,d=e.webFont,f=void 0===d?m.a:d,g=e.onUpdate,v=void 0===g?function(){}:g,h=e.onBasicError,O=void 0===h?function(){}:h,j=e.onUpdateMediaEditorSetting,w=e.mediaEditorSettings,S=ws(e,["story","mode","onAdd","messages","fontFamilies","storyFonts","webFont","onUpdate","onBasicError","onUpdateMediaEditorSetting","mediaEditorSettings"]),E=Object(s.useCallback)((function(e){return Object(y.getMessageById)(i,e)}),[i]),A=function(e,t,n){return o(e,t,n,E)};return Object(s.useEffect)((function(){window.__geostory_interaction=function(e,t){"scrollTo"===e&&Object(b.z)(t,{behavior:"smooth"})}}),[]),Object(s.useEffect)((function(){v("settings.theme.fontFamilies",c,"merge"),w&&j(w)}),[]),Object(s.useEffect)((function(){p.length>0&&(p.filter((function(e){var t=e.src;return t&&!document.head.querySelector("link[href='".concat(t,"']"))})).length>0&&f.load(Object(b.l)(p,(function(){}),(function(){return O({message:"geostory.builder.settings.webFontLoadError"})}))))}),[p]),u.a.createElement(bt.a,{className:"ms-geostory",columns:[u.a.createElement(rs,js({},S,{add:A,update:v,mode:r}))]},u.a.createElement(sl,js({},t,S,{storyFonts:Object(b.m)(p),add:A,update:v,mode:r,mediaViewer:ys,contentToolbar:Os})))};Ss.defaultProps={storyFonts:[],fontFamilies:[],onUpdateMediaEditorSetting:function(){}};var Es=Object(g.createPlugin)("GeoStory",{component:Object(p.connect)(Object(d.createStructuredSelector)({mode:Oe.p,story:Oe.e,messages:ot.currentMessagesSelector,focusedContent:Oe.g,isContentFocused:Oe.k,theme:function(e){var t;return(null===(t=Object(Oe.x)(e))||void 0===t?void 0:t.theme)||{}},storyFonts:Oe.d}),{onAdd:O.D,onUpdate:O.bb,updateCurrentPage:O.cb,onUpdateSetting:O.eb,remove:O.M,editMedia:function(e){var t=e.path,n=e.owner;return{type:"GEOSTORY:EDIT_MEDIA",path:t,owner:void 0===n?"geostory":n}},editWebPage:O.G,onBasicError:h.basicError,onUpdateMediaEditorSetting:O.db})(Ss),reducers:{geostory:mt},epics:r}),As=n("./MapStore2/node_modules/lodash/findKey.js"),Ps=n.n(As),xs=n("./MapStore2/web/client/api/media/index.js");function Cs(e){return function(e){if(Array.isArray(e))return Ts(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ts(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){ks(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ks(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ds=function(e,t){return e.ofType(I,"MEDIA_EDITOR:LOAD_MEDIA",C,T).switchMap((function(e){var n,r=t.getState(),o=e.sourceId||Object(je.p)(r),i=e.mediaType||Object(je.c)(r),a=Is(Is({},e.params),{},{page:(null===(n=e.params)||void 0===n?void 0:n.page)?e.params.page:1,pageSize:10});return Object(xs.a)(o).load(t,{mediaType:i,sourceId:o,params:a}).switchMap((function(e){return e?Q.Observable.of(R({mediaType:i,sourceId:o,params:Is(Is({},a),{},{mediaType:i}),resultData:e})):Q.Observable.empty()})).startWith({type:"MEDIA_EDITOR:LOADING_MEDIA_LIST"})}))},Ns=function(e,t){return e.ofType("MEDIA_EDITOR:SAVE_MEDIA").switchMap((function(e){var n=e.mediaType,r=void 0===n?"image":n,o=e.source,i=e.data,a=Object(je.e)(t.getState()),c=Object(je.p)(t.getState()),l=a?Object(xs.a)(c).edit(r,o,i,t):Object(xs.a)(c).save(r,o,i,t),s=a?W(!1):U(!1);return l.switchMap((function(e){var t=e.id;return Q.Observable.of(L({mediaType:r,source:o,data:i,id:t}),s,F(t))}))}))},_s=function(e,t){var n=t.getState;return e.ofType("MAP_EDITOR:SHOW").filter((function(e){var t=e.owner,n=e.map;return"mediaEditor"===t&&!n})).switchMap((function(){var t=e.ofType(Se).switchMap((function(e){var t=e.map,r=Object(je.d)(n())||[],o=pl()();return Q.Observable.from([R({mediaType:b.e.MAP,sourceId:w,params:{mediaType:b.e.MAP},resultData:{resources:[{id:o,type:"map",data:Is({type:"map",id:o},t)}].concat(Cs(r)),totalCount:r.length+1}}),F(o),Ae()])})).takeUntil(e.ofType("MAP_EDITOR:HIDE")),r=e.ofType("MAP_EDITOR:HIDE").map((function(){return U(!1)})).takeUntil(e.ofType(Se));return Q.Observable.merge(r,t)}))},Rs=function(e,t){var n=t.getState;return e.ofType("MAP_EDITOR:SHOW").filter((function(e){var t=e.owner,n=e.map;return"mediaEditor"===t&&!!n})).switchMap((function(){return e.ofType(Se).switchMap((function(e){var t=e.map,r=Object(je.n)(n());return Q.Observable.from([B(Is(Is({},r),{},{data:Is({},t)}),"replace"),Ae()])})).takeUntil(e.ofType("MAP_EDITOR:HIDE"))}))},Ls=function(e,t){var n=t.getState;return e.ofType(P,A).filter((function(e){var t=e.editing,n=void 0===t||t,r=e.adding;return!1===n||!1===(void 0===r||r)})).map((function(){return _(void 0,Object(je.c)(n()),w)}))},Fs=function(e,t){return e.ofType("MEDIA_EDITOR:IMPORT_IN_LOCAL").switchMap((function(e){var n=e.resource,r=e.sourceType,o=Object(je.q)(t.getState()),i=Ps()(o,(function(e){var t=e.type;return r===t}));return Object(xs.a)(i).save(n.type,o[i],n,t).switchMap((function(e){var t=e.id;return Q.Observable.of(G(i),L({mediaType:n.type,source:o[i],data:n,id:t}),_(void 0,n.type,i),F(t))}))}))},Bs=function(e,t){return e.ofType("MAP_EDITOR:SHOW").filter((function(e){var t=e.owner,n=e.map;return"mediaEditorEditRemote"===t&&!!n})).switchMap((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.map,o=(r=void 0===r?{}:r).data;return e.ofType(Se).switchMap((function(e){var n=e.map,r=Object(je.q)(t.getState()),i=Ps()(r,(function(e){var t=e.type;return w===t}));return Object(xs.a)(i).save(o.type,r[i],Is(Is({},o),n),t).switchMap((function(e){var t=e.id;return Q.Observable.of(G(i),L({mediaType:o.type,source:r[i],data:o,id:t}),_(void 0,o.type,i),F(t),Ae())}))})).takeUntil(e.ofType("MAP_EDITOR:HIDE"))}))},Us=function(e,t){return e.ofType(D).switchMap((function(e){var n=e.mediaType,r=Object(je.p)(t.getState());return Object(xs.a)(r).remove(n,t).switchMap((function(){return Q.Observable.of(_(void 0,Object(je.c)(t.getState()),w))}))}))},Gs=function(e,t){return e.ofType(M).switchMap((function(){var e=t.getState(),n=Object(je.n)(e),r=Object(je.p)(e);return Object(xs.a)(r).getData(t,{selectedItem:n}).switchMap((function(e){return null===e?Q.Observable.of(V(!1)):Q.Observable.of(B(Is(Is({},n),{},{data:Is({},e)}),"replace"),V(!1))})).catch((function(){return Q.Observable.of(V(!1))})).startWith(V(!0))}))};function Hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(n),!0).forEach((function(t){zs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vs={open:!1,data:{},settings:{mediaType:b.e.IMAGE,sourceId:"geostory",mediaTypes:{image:{defaultSource:"geostory",sources:["geostory"]},video:{defaultSource:"geostory",sources:["geostory"]},map:{defaultSource:"geostory",sources:["geostory","geostoreMap"]}},sources:{geostory:{name:"Current story",type:w},geostoreMap:{name:"geostory.geostoreMap",type:S,baseURL:"rest/geostore/",category:"MAP"}}}},Qs=Object(ht.compose)(Object(ht.defaultProps)({confirmContent:u.a.createElement(ao.a,{msgId:"mediaEditor.confirmExitContent"}),confirmTitle:u.a.createElement(ao.a,{msgId:"mediaEditor.confirmExitTitle"})}),Object(ht.withPropsOnChange)(["adding"],(function(e){return{confirmPredicate:e.adding}})),Object(ht.withHandlers)({onClick:function(e){var t=e.hide,n=e.owner;return function(){return t(n)}}}),Vi,Object(ht.withHandlers)({hide:function(e){var t=e.onClick;return function(){return t.apply(void 0,arguments)}}})),qs=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),Ys=n.n(qs),Ks=Tt()((function(e){var t=e.mediaType,n=e.selectedItem;return t===b.e.IMAGE&&!n}),{style:{width:"100%",height:"100%",boxShadow:"inset 0px 0px 30px -5px rgba(0,0,0,0.16)"},iconFit:!0,glyph:"picture",imageStyle:{display:"flex",flexDirection:"column",justifyContent:"center"}})((function(e){var t=e.selectedItem,n=t&&t.data&&t.data.src;return n&&u.a.createElement("img",{src:n,style:{objectFit:"contain",width:"100%",height:"100%"}})})),Js=Tt()((function(e){var t=e.mediaType,n=e.selectedItem;return t===b.e.VIDEO&&!n}),{style:{width:"100%",height:"100%",boxShadow:"inset 0px 0px 30px -5px rgba(0,0,0,0.16)"},iconFit:!0,glyph:"play",imageStyle:{display:"flex",flexDirection:"column",justifyContent:"center"}})((function(e){var t,n,r=e.selectedItem,o=null==r||null===(t=r.data)||void 0===t?void 0:t.src,i=null==r||null===(n=r.data)||void 0===n?void 0:n.thumbnail;return u.a.createElement("div",{key:"preview",className:"ms-video-preview",style:{width:"100%",height:"100%",boxShadow:"inset 0px 0px 30px -5px rgba(0,0,0,0.16)"}},o&&u.a.createElement(Yr,{key:o,thumbnail:i,fit:"contain",src:o,inView:!0,mode:b.f.VIEW}))})),Zs=n("./MapStore2/web/client/components/widgets/builder/wizard/map/PreviewMap.jsx"),Xs=n.n(Zs);function $s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(n),!0).forEach((function(t){tu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nu(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ru=Tt()((function(e){var t=e.mediaType,n=e.selectedItem;return t===b.e.MAP&&(!n||Object(j.isEmpty)(n))}),{iconFit:!0,glyph:"1-map",imageStyle:{display:"flex",flexDirection:"column",justifyContent:"center"}})((function(e){var t=e.selectedItem,n=t.data?t.data:t,r=n.layers,o=void 0===r?[]:r,i=(n.mapOptions,nu(n,["layers","mapOptions"]));return[u.a.createElement(Xs.a,{key:i.id||i.mapId,styleMap:{height:"100%"},map:eu(eu({},i),{},{id:"map"+i.id}),id:"preview"+t.id,layers:o||[E],options:Object(b.j)({})})]})),ou=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.mediaType&&u.a.createElement("div",{className:"ms-media-preview",key:"preview",style:{width:"100%",height:"100%",boxShadow:"inset 0px 0px 30px -5px rgba(0,0,0,0.16)"}},e.mediaType===b.e.IMAGE&&u.a.createElement(Ks,e),e.mediaType===b.e.VIDEO&&u.a.createElement(Js,e),e.mediaType===b.e.MAP&&u.a.createElement(ru,e))||null},iu=Lt()(["placeholder","clearValueText","noResultsText"])(Ql.default),au=Object(ht.compose)(Object(p.connect)(null,{openMapEditor:Ee,importInLocal:function(e){var t=e.resource,n=e.sourceType,r=void 0===n?w:n,o=e.owner;return{type:"MEDIA_EDITOR:IMPORT_IN_LOCAL",resource:t,sourceType:r,owner:void 0===o?"geostory":o}}}),Object(ht.withHandlers)({setAddingMedia:function(e){var t=e.setAddingMedia,n=e.openMapEditor,r=e.mediaType;return function(e,o){r===b.e.MAP&&n("mediaEditor",o),t(e)}},editRemoteMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openMapEditor,n=e.selectedItem,r=void 0===n?{}:n;return function(){t("mediaEditorEditRemote",r)}}})),cu=Object(ht.compose)(Object(p.connect)((function(e){return{isUsed:Object(Oe.l)(e,Object(je.m)(e))}}),{removeMedia:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geostory";return{type:D,mediaType:e,owner:t}}}),Object(ht.withHandlers)({onClick:function(e){var t=e.removeMedia,n=e.mediaType;return function(){t(n)}}}),Object(ht.withProps)((function(e){var t=e.isUsed;return{confirmTitle:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaList.removeResourceTitle"}),confirmContent:u.a.createElement(ao.a,{msgId:t?"mediaEditor.mediaList.confirmRemoveUsedResource":"mediaEditor.mediaList.confirmRemoveResource"})}})),Vi,Object(ht.renameProp)("onClick","removeMedia")),lu=n("./MapStore2/web/client/components/misc/Filter.jsx"),su=n.n(lu),uu=n("./MapStore2/web/client/components/misc/cardgrids/SideGrid.jsx"),pu=n.n(uu);function du(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?du(Object(n),!0).forEach((function(t){mu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):du(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yu,vu=function(e,t){return function(n){function r(r){var o,i=Object(s.useRef)(),a=gu(Object(s.useState)(r[t]),2),c=a[0],l=a[1],p=Object(s.useRef)();p.current=c,Object(s.useEffect)((function(){p.current!==r[t]&&l(r[t])}),[r[t]]),Object(s.useEffect)((function(){return i.current=mo()((function(t){var n=t.newProps,r=t.newValue;n[e](r)}),r.debounceTime),function(){i.current.cancel()}}),[r.debounceTime]);var d=fu(fu({},r),{},(mu(o={},t,c),mu(o,e,(function(e){l(e),i.current&&(i.current.cancel(),i.current({newProps:r,newValue:e}))})),o));return u.a.createElement(n,d)}return r.defaultProps={debounceTime:300},r.displayName=n.displayName+"WithDebounceOnCallback",r}},hu=n("./MapStore2/web/client/components/misc/enhancers/infiniteScroll/withScrollSpy.js"),Ou=n.n(hu),ju=n("./MapStore2/web/client/components/misc/FitIcon.jsx"),wu=n.n(ju);function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){Au(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Au(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pu=Ou()()(pu.a),xu=Lt()("filterPlaceholder")(vu("onFilter","filterText")(su.a)),Cu=(Au(yu={},b.e.IMAGE,{glyph:"image",emptyMessageId:"mediaEditor.imageList.emptyList",filterPlaceholderMessageId:"mediaEditor.mediaPicker.imageFilter"}),Au(yu,b.e.VIDEO,{glyph:"play",emptyMessageId:"mediaEditor.videoList.emptyList",filterPlaceholderMessageId:"mediaEditor.mediaPicker.videoFilter"}),Au(yu,b.e.MAP,{glyph:"1-map",emptyMessageId:"mediaEditor.mapList.emptyList",filterPlaceholderMessageId:"mediaEditor.mediaPicker.mapFilter"}),yu),Tu=Object(ht.compose)(au,cu)((function(e){var t=e.resources,n=void 0===t?[]:t,r=e.selectedItem,o=e.selectedSource,i=void 0===o?{}:o,a=e.selectedService,c=e.mediaType,l=e.selectItem,s=void 0===l?function(){}:l,p=e.setAddingMedia,d=void 0===p?function(){}:p,f=e.setEditingMedia,m=void 0===f?function(){}:f,g=e.editRemoteMap,y=void 0===g?function(){}:g,v=e.removeMedia,h=void 0===v?function(){}:v,O=e.params,E=e.totalCount,A=e.onLoad,P=e.loadingSelected,x=e.loading,C=e.disableAddMedia,T=e.disableEditMedia,M=e.buttons,I=void 0===M?[{glyph:"plus",tooltipId:"mediaEditor.mediaPicker.add",visible:!(null==C?void 0:C[c])&&i.type===w,onClick:function(){return d(!0)}},{glyph:"pencil",tooltipId:"mediaEditor.mediaPicker.edit",visible:!(null==T?void 0:T[c])&&i.type===w&&!Object(j.isNil)(r),onClick:function(){return m(!0)}},{glyph:"pencil",tooltipId:"mediaEditor.mediaPicker.edit",visible:i.type===S&&c===b.e.MAP&&!Object(j.isNil)(r),onClick:y},{glyph:"trash",tooltipId:"mediaEditor.mediaPicker.trash",visible:i.type===w&&!Object(j.isNil)(r),onClick:h}]:M,k=(null==O?void 0:O.q)||"";function D(e){A(Eu(Eu({},O),e),c,a)}var N=Cu[c]||{},_=N.glyph,R=N.emptyMessageId,L=N.filterPlaceholderMessageId,F=0===n.length&&x;return u.a.createElement("div",{style:{position:"relative"},className:"ms-media-list"},I.filter((function(e){return!!Object(j.isNil)(e.visible)||e.visible})).length>0&&u.a.createElement("div",{className:"ms-media-toolbar",key:"toolbar"},u.a.createElement(ti.a,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:I})),u.a.createElement(xu,{filterPlaceholder:L,filterText:k,onFilter:function(e){D({page:1,q:e})}}),n.length>0?u.a.createElement(Pu,{loading:x,scrollOptions:{pageSize:O.pageSize},items:n.map((function(e){var t=e.id,n=e.data,o=void 0===n?{}:n;return{preview:o.thumbnail||c===b.e.IMAGE&&o.src?u.a.createElement("div",{style:{backgroundImage:'url("'.concat(o.thumbnail||o.src,'")'),backgroundSize:"cover",backgroundPosition:"center",height:"100%",overflow:"hidden"}}):u.a.createElement(wu.a,{glyph:_,padding:20}),title:o.title||o.name,onClick:function(){return s(t)},selected:r&&r.id&&t===r.id,description:o.description}})),hasMore:function(){return E>n.length},onLoadMore:function(e){D({page:e+1})}}):!F&&u.a.createElement("div",{className:"msEmptyListMessage"},u.a.createElement(ea.a,{msgId:R})),u.a.createElement("div",{className:"ms-media-list-pagination"},u.a.createElement("div",null,n.length&&E?u.a.createElement(ea.a,{msgId:"mediaEditor.mediaList.resultsCount",msgParams:{count:n.length,total:E}}):null),x&&u.a.createElement(Gr.a,{size:20})),(P||F)&&u.a.createElement("div",{className:"ms-media-list-loading"},u.a.createElement(Gr.a,{size:70})))}));function Mu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mu(Object(n),!0).forEach((function(t){ku(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Du=[{placeholder:"mediaEditor.mediaPicker.sourcePlaceholder",type:"text",id:"src",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.source"}),validation:function(e){var t=e.src;return void 0!==t&&""===t?"error":t?"success":void 0}},{placeholder:"mediaEditor.mediaPicker.titlePlaceholder",type:"text",id:"title",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.title"}),validation:function(e){var t=e.title;return void 0!==t&&""===t?"error":t?"success":void 0}},{placeholder:"mediaEditor.mediaPicker.altTextPlaceholder",type:"text",id:"alt",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.altText"})},{placeholder:"mediaEditor.mediaPicker.descriptionPlaceholder",type:"text",id:"description",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.description"})},{placeholder:"mediaEditor.mediaPicker.creditsPlaceholder",type:"text",id:"credits",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.credits"})}],Nu=Object(ht.compose)(Object(ht.defaultProps)({confirmTitle:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaform.confirmExitTitle"}),confirmContent:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaform.confirmExitContent"}),getImageDimensionsFunc:function(e,t){var n=new Image;n.onload=function(){t({imgWidth:n.naturalWidth,imgHeight:n.naturalHeight})},n.onerror=function(){t({})},n.src=e}}),Object(ht.withStateHandlers)((function(e){var t=e.selectedItem,n=void 0===t?{}:t;return{properties:e.editing?Iu({},n.data):{},confirmPredicate:!1}}),{setProperties:function(e){return function(t){return{properties:Iu(Iu({},e.properties),t),confirmPredicate:!0}}}}),Object(ht.withHandlers)({onClick:function(e){var t=e.setAddingMedia,n=e.setEditingMedia,r=e.editing;return function(){r&&n(!1)||t(!1)}}}),Vi,Object(ht.getContext)({messages:{}}))((function(e){var t=e.properties,n=void 0===t?{}:t,r=e.onClick,o=void 0===r?function(){}:r,i=e.setProperties,a=void 0===i?function(){}:i,c=e.onSave,l=void 0===c?function(){}:c,s=e.messages,p=e.getImageDimensionsFunc;return u.a.createElement(bt.a,{className:"ms-imageForm",header:u.a.createElement("div",{className:"text-center",key:"toolbar",style:{borderBottom:"1px solid #ddd",padding:8}},u.a.createElement(ti.a,{btnGroupProps:{style:{marginBottom:8}},btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:[{glyph:"arrow-left",tooltipId:"mediaEditor.mediaPicker.back",onClick:o},{glyph:"floppy-disk",tooltipId:"mediaEditor.mediaPicker.save",disabled:!n.src||!n.title,onClick:function(){p(n.src,(function(e){return l(Iu(Iu({},n),e))}))}}]}))},u.a.createElement(qn.Form,{style:{padding:8}},Du.map((function(e){return u.a.createElement(qn.FormGroup,{key:e.id,validationState:e.validation&&e.validation(n)},u.a.createElement(qn.ControlLabel,null,e.label),u.a.createElement(qn.FormControl,{type:e.type,placeholder:v.a.getMessageById(s,e.placeholder),value:n[e.id]||"",onChange:function(t){a(Iu(Iu({},n),{},ku({},e.id,t.target.value)))}}))}))))})),_u=n("./MapStore2/web/client/components/misc/Thumbnail.jsx");function Ru(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lu(Object(n),!0).forEach((function(t){Bu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uu(){return(Uu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Gu=Vi(xi.a),Hu=function(e){return u.a.createElement(Gu,Uu({confirmTitle:u.a.createElement(ao.a,{msgId:"mediaEditor.mapForm.confirmMapSaveTitle"}),confirmContent:u.a.createElement(ao.a,{msgId:"mediaEditor.mapForm.confirmMapSaveContent"})},e))},Wu=[{placeholder:"mediaEditor.mediaPicker.titlePlaceholder",type:"text",id:"name",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.title"}),validation:function(e){var t=e.name;return void 0!==t&&""===t?"error":t?"success":void 0}},{placeholder:"mediaEditor.mediaPicker.descriptionPlaceholder",type:"text",id:"description",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.description"})}],zu=Object(ht.compose)(Object(p.connect)((function(e,t){var n=(t||{}).selectedItem,r=(n=void 0===n?{}:n).id;return{isResourceUsed:n.type===b.e.MAP&&Object(Oe.l)(e,r)}}),{openMapEditor:Ee}),Object(ht.defaultProps)({confirmTitle:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaform.confirmExitTitle"}),confirmContent:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaform.confirmExitContent"})}),Object(ht.withState)("properties","setProperties",(function(e){var t=e.selectedItem,n=(t=void 0===t?{}:t).data;return{name:(n=void 0===n?{}:n).name,thumbnail:n.thumbnail,description:n.description}})),Object(ht.withState)("initialResource",null,(function(e){var t=e.properties,n=e.selectedItem,r=(n=void 0===n?{}:n).data;return Fu(Fu({},void 0===r?{}:r),t)})),Object(ht.withHandlers)({openMapEditor:function(e){var t=e.selectedItem,n=e.openMapEditor;return function(){var e=t.data,r=e.id,o=Ru(e,["id"]);n("mediaEditor",{data:o,id:r})}},onSave:function(e){var t=e.onSave,n=e.selectedItem,r=(n=void 0===n?{}:n).data,o=void 0===r?{}:r,i=e.properties;return function(){return t(Fu(Fu({},o),i))}},updateThumb:function(e){var t=e.setProperties,n=e.properties;return function(e){return t(Fu(Fu({},n),{},{thumbnail:e}))}},onClick:function(e){var t=e.setAddingMedia,n=e.setEditingMedia,r=e.editing;return function(){r&&n(!1)||t(!1)}}}),Object(ht.withPropsOnChange)(["selectedItem","initialResource","properties"],(function(e){var t=e.initialResource,n=e.selectedItem,r=(n=void 0===n?{}:n).data,o=void 0===r?{}:r,i=e.properties;return{confirmPredicate:!Object(j.isEqual)(t,Fu(Fu({},o),i))}})),Vi,Object(ht.defaultProps)({errorMessages:{FORMAT:u.a.createElement(ao.a,{msgId:"map.errorFormat"}),SIZE:u.a.createElement(ao.a,{msgId:"map.errorCustomSize",msgParams:{maxFileSize:"50kb"}})}}),Object(ht.withState)("thumbnailErrors","setErrors",(function(){return[]})),Object(ht.getContext)({messages:{}}))((function(e){var t=e.properties,n=void 0===t?{}:t,r=e.setProperties,o=void 0===r?function(){}:r,i=e.onSave,a=void 0===i?function(){}:i,c=e.updateThumb,l=void 0===c?function(){}:c,s=e.messages,p=e.openMapEditor,d=e.setErrors,f=e.thumbnailErrors,m=void 0===f?[]:f,g=e.errorMessages,b=e.onClick,y=void 0===b?function(){}:b,h=e.confirmPredicate,O=e.isResourceUsed,j=void 0!==O&&O;return u.a.createElement(bt.a,{className:"ms-mapForm",header:u.a.createElement("div",{className:"text-center",key:"toolbar",style:{borderBottom:"1px solid #ddd",padding:8}},u.a.createElement(ti.a,{btnGroupProps:{style:{marginBottom:8}},btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:[{glyph:"arrow-left",tooltipId:"mediaEditor.mediaPicker.back",onClick:y},{renderButton:u.a.createElement(Hu,{glyph:"floppy-disk",tooltipId:"mediaEditor.mediaPicker.save",disabled:!n.name||!h,onClick:a,bsStyle:"primary",className:"square-button-md",confirmPredicate:h&&j})},{glyph:"pencil",tooltipId:"mediaEditor.mediaPicker.edit",onClick:p}]}))},u.a.createElement(qn.Form,{style:{padding:8}},u.a.createElement(_u.default,{thumbnail:n.thumbnail,thumbnailOptions:{width:300,height:180,type:"image/jpeg",quality:.5},message:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.thumbnail"}),onUpdate:function(e){l(e),d(void 0)},onRemove:function(){l(void 0),d(void 0)},onError:function(e){return d(e)}}),m&&m.length>0&&u.a.createElement(qn.Alert,{bsStyle:"danger",className:"text-center"},u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"map.error"})),m.map((function(e){return u.a.createElement("div",null," ",g[e])}))),Wu.map((function(e){return u.a.createElement(qn.FormGroup,{key:e.id,validationState:e.validation&&e.validation(n)},u.a.createElement(qn.ControlLabel,null,e.label),u.a.createElement(qn.FormControl,{type:e.type,placeholder:v.a.getMessageById(s,e.placeholder),value:n[e.id]||"",onChange:function(t){o(Fu(Fu({},n),{},Bu({},e.id,t.target.value)))}}))}))))})),Vu=n("./MapStore2/web/client/utils/ThumbnailUtils.js");function Qu(){return(Qu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qu(Object(n),!0).forEach((function(t){Ku(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ju(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xu=[{placeholder:"mediaEditor.mediaPicker.videoUrlPlaceholder",type:"text",id:"src",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.videoUrl"}),validation:function(e){var t=e.src;return void 0!==t&&""===t?"error":t?"success":void 0}},{placeholder:"mediaEditor.mediaPicker.titlePlaceholder",type:"text",id:"title",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.title"}),validation:function(e){var t=e.title;return void 0!==t&&""===t?"error":t?"success":void 0}},{placeholder:"mediaEditor.mediaPicker.descriptionPlaceholder",type:"text",id:"description",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.description"})},{placeholder:"mediaEditor.mediaPicker.creditsPlaceholder",type:"text",id:"credits",label:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.credits"})}],$u=function(e){var t=e.src,n=e.thumbnail,r=e.onUpdate,o=Object(s.useRef)();Object(s.useEffect)((function(){return o.current=!0,function(){o.current=!1}}),[]);var i=Ju(Object(s.useState)(),2),a=i[0],c=i[1],l=Ju(Object(s.useState)(),2),p=l[0],d=l[1],f=Ju(Object(s.useState)(!n),2),m=f[0],g=f[1];return Object(s.useEffect)((function(){t&&m&&(c(void 0),d(!0),Object(Vu.b)(t,{width:640,height:360,type:"image/jpeg",quality:.5}).then((function(e){o.current&&(r(e),g(!1),d(!1))})).catch((function(){o.current&&(g(!1),c(["CREATE"]),d(!1))})))}),[t,m]),u.a.createElement(u.a.Fragment,null,u.a.createElement(_u.default,{thumbnail:n,thumbnailOptions:{width:640,height:360,type:"image/jpeg",quality:.5},loading:p,message:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.thumbnail"}),onUpdate:function(e){r(e),c(void 0)},onError:function(e){return c(e)},toolbarButtons:[{glyph:"refresh",tooltipId:"mediaEditor.mediaPicker.createVideoThumbnail",visible:!n,onClick:function(e){e.stopPropagation(),g(!0)}},{glyph:"trash",tooltipId:"removeThumbnail",visible:!!n,onClick:function(e){e.stopPropagation(),r(void 0),c(void 0)}}]}),a&&a.length>0&&u.a.createElement(qn.Alert,{bsStyle:"danger",className:"text-center"},-1===a.indexOf("CREATE")&&u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"map.error"})),-1!==a.indexOf("FORMAT")&&u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"map.errorFormat"})),-1!==a.indexOf("SIZE")&&u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"map.errorSize"})),-1!==a.indexOf("CREATE")&&u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.thumbnailCreateError"}))))},ep=function(e,t){var n=e.properties,r=e.setProperties,o=void 0===r?function(){}:r,i=e.onSave,a=void 0===i?function(){}:i,c=e.onClick,l=void 0===c?function(){}:c,s=(t||{}).messages,p=void 0===s?{}:s,d=n.src,f=n.thumbnail;return u.a.createElement(bt.a,{className:"ms-video-form",header:u.a.createElement("div",{className:"text-center",key:"toolbar",style:{borderBottom:"1px solid #ddd",padding:8}},u.a.createElement(ti.a,{btnGroupProps:{style:{marginBottom:8}},btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:[{glyph:"arrow-left",tooltipId:"mediaEditor.mediaPicker.back",onClick:l},{glyph:"floppy-disk",tooltipId:"mediaEditor.mediaPicker.save",disabled:!n.src||!n.title,onClick:function(){return a(n)}}]}))},u.a.createElement(qn.Form,{style:{padding:8}},u.a.createElement($u,{src:d,thumbnail:f,onUpdate:function(e){return o(Yu(Yu({},n),{},{thumbnail:e}))}}),Xu.map((function(e){return u.a.createElement(qn.FormGroup,{key:e.id,validationState:e.validation&&e.validation(n)},u.a.createElement(qn.ControlLabel,null,e.label),u.a.createElement(qn.FormControl,{type:e.type,placeholder:v.a.getMessageById(p,e.placeholder),value:n[e.id]||"",onChange:function(t){o(Yu(Yu({},n),{},Ku({},e.id,t.target.value)))}}))}))))};ep.contextTypes={messages:_t.a.object};var tp,np=Vi(ep);function rp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var op=(rp(tp={},b.e.IMAGE,Nu),rp(tp,b.e.MAP,zu),rp(tp,b.e.VIDEO,(function(e){var t=Ju(Object(s.useState)(!1),2),n=t[0],r=t[1],o=Ju(Object(s.useState)((null==e?void 0:e.editing)?Yu({},null==e?void 0:e.selectedItem.data):{}),2),i=o[0],a=o[1];return u.a.createElement(np,Qu({},e,{confirmTitle:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaform.confirmExitTitle"}),confirmContent:u.a.createElement(ao.a,{msgId:"mediaEditor.mediaform.confirmExitContent"}),confirmPredicate:n,properties:i,setProperties:function(e){a(e),r(!0)},onClick:function(){return(null==e?void 0:e.editing)&&(null==e?void 0:e.setEditingMedia(!1))||(null==e?void 0:e.setAddingMedia(!1))}}))})),tp),ip=Object(ht.compose)(Object(ht.withHandlers)({onSave:function(e){var t=e.mediaType,n=e.source,r=e.saveMedia,o=void 0===r?function(){}:r;return function(e){return o({type:t,source:n,data:e})}}}),Object(ht.branch)((function(e){return e.addingMedia}),Object(ht.renderComponent)((function(e){var t=op[e.mediaType||b.e.IMAGE];return u.a.createElement(t,e)}))))(Tu);function ap(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lp=Object(p.connect)(Object(d.createSelector)([je.d,je.n,je.p,je.o,je.e,je.f,je.g,je.i,je.h,je.l,je.b],(function(e,t,n,r,o,i,a,c,l,s,u){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ap(Object(n),!0).forEach((function(t){cp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ap(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({resources:e,selectedItem:t,selectedService:n,selectedSource:r,editing:o,services:u,params:i,totalCount:a,loadingSelected:c,loading:l},s)})),{selectItem:F,setAddingMedia:U,setEditingMedia:W,saveMedia:function(e){return{type:"MEDIA_EDITOR:SAVE_MEDIA",mediaType:e.type,source:e.source,data:e.data}},onLoad:_,setMediaService:G})(ip),sp=Object(p.connect)(Object(d.createStructuredSelector)({selectedItem:je.n,selectedService:je.p,services:je.b,editing:je.e,saveState:je.l}),{setMediaService:G,setMediaType:H})((function(e){var t=e.mediaType,n=void 0===t?"image":t,r=e.saveState,o=e.selectedItem,i=e.selectedService,a=e.services,c=void 0===a?[{name:"Currently used",id:"geostory"},{name:"Geostore",id:"geostore"}]:a,l=e.setMediaType,s=void 0===l?function(){}:l,p=e.setMediaService,d=void 0===p?function(){}:p,f=e.mediaSelector;return u.a.createElement(bt.a,{className:"ms-mediaEditor",header:u.a.createElement("div",{className:"ms-border-layout-header",style:{padding:4,zIndex:2}},u.a.createElement(ti.a,{btnDefaultProps:{bsSize:"sm"},buttons:[{text:u.a.createElement(ao.a,{msgId:"mediaEditor.images"}),active:"image"===n,bsStyle:"image"===n?"primary":"default",onClick:function(){s("image")},disabled:r&&r.addingMedia},{text:u.a.createElement(ao.a,{msgId:"mediaEditor.videos"}),active:"video"===n,bsStyle:"video"===n?"primary":"default",onClick:function(){s("video")},disabled:r&&r.addingMedia},{text:u.a.createElement(ao.a,{msgId:"mediaEditor.maps"}),active:"map"===n,bsStyle:"map"===n?"primary":"default",onClick:function(){s("map")},disabled:r&&r.addingMedia}]}),u.a.createElement("div",{className:"ms-mediaEditor-services"},u.a.createElement("div",{className:"ms-mediaEditor-label"},u.a.createElement("strong",null,u.a.createElement(ao.a,{msgId:"mediaEditor.mediaPicker.services"}))),u.a.createElement(iu,{disabled:r&&r.addingMedia,noResultsText:"mediaEditor.mediaPicker.noResults",placeholder:"mediaEditor.mediaPicker.selectService",options:c.map((function(e){return{label:u.a.createElement(ao.a,{msgId:e.name}),value:e.id}})),onChange:d,value:i,clearable:!1}))),columns:[u.a.createElement("div",{key:"selector",className:"ms-mediaSelector"},f)]},u.a.createElement(ou,{selectedItem:o,mediaType:n}))})),up=Qs((function(e){var t=e.open,n=e.mediaType,r=e.chooseMedia,o=e.selectedItem,i=e.editing,a=e.adding,c=e.hide,l=void 0===c?function(){}:c,s=e.disableAddMedia,p=e.disableEditMedia;return u.a.createElement(Cr.a,null,u.a.createElement(Ys.a,{title:u.a.createElement(ao.a,{msgId:"mediaEditor.modalTitle"}),show:t,clickOutEnabled:!1,onClose:l,size:"lg",modalClassName:"media-editor-modal",buttons:[{text:u.a.createElement(ao.a,{msgId:"mediaEditor.apply"}),bsSize:"sm",disabled:a||i,onClick:function(){return r(o)}}]},u.a.createElement(sp,{mediaType:n,mediaSelector:u.a.createElement(lp,{mediaType:n,disableAddMedia:s,disableEditMedia:p})})))})),pp=Object(g.createPlugin)("MediaEditor",{component:Object(p.connect)(Object(d.createStructuredSelector)({mediaType:je.c,editing:je.e,adding:je.a,open:je.j,selectedItem:je.n}),{hide:N,chooseMedia:function(e){return{type:"MEDIA_EDITOR:CHOOSE_MEDIA",resource:e}}})(up),reducers:{mediaEditor:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vs,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case A:return Object(it.compose)(Object(it.set)("saveState.addingMedia",n.adding),Object(it.set)("selected",""))(t);case P:return Object(it.compose)(Object(it.set)("saveState.addingMedia",n.editing),Object(it.set)("saveState.editing",n.editing))(t);case x:return Object(it.compose)(Object(it.set)("open",!1),Object(it.set)("owner",void 0),Object(it.set)("saveState.addingMedia",!1),Object(it.set)("saveState.editing",!1),Object(it.set)("settings",Ws(Ws({},t.stashedSettings||Vs.settings),(null===(e=t.settings)||void 0===e?void 0:e.mediaType)&&{mediaType:t.settings.mediaType})),Object(it.set)("stashedSettings",void 0),Object(it.unset)("selected"))(t);case"MEDIA_EDITOR:LOAD_MEDIA_SUCCESS":var r=n.resultData,o=n.params,i=n.mediaType,a=n.sourceId;return Object(it.compose)(Object(it.set)('data["'.concat(i,'"]["').concat(a,'"]'),{params:o,resultData:r}),Object(it.set)("loadingList",!1))(t);case k:var c=n.item,l=n.mode,s=Object(je.p)({mediaEditor:t}),u=Object(je.c)({mediaEditor:t}),p=Object(je.k)({mediaEditor:t}).resources,d=Object(j.findIndex)(p,{id:c.id}),f=Object(j.find)(p,{id:c.id}),m="merge"===l?Object(j.merge)({},Object(j.merge)({},f),Object(j.merge)({},c)):c;return Object(it.set)('data["'.concat(u,'"]["').concat(s,'"].resultData.resources[').concat(d,"]"),m,t);case M:return n.id===t.selected?Object(it.set)("selected","",t):Object(it.set)("selected",n.id,t);case C:var g=Object(j.get)(t,"settings.mediaTypes[".concat(n.mediaType,"].defaultSource"),"geostory");return Object(it.compose)(Object(it.set)("settings.sourceId",g),Object(it.set)("settings.mediaType",n.mediaType))(t);case T:return Object(it.set)("settings.sourceId",n.id,t);case I:var b=n.settings&&Ws(Ws({},n.settings),t.settings.mediaType&&{mediaType:t.settings.mediaType});return Object(it.compose)(Object(it.set)("open",!0),Object(it.set)("owner",n.owner),Object(it.set)("settings",b||t.settings),Object(it.set)("stashedSettings",t.settings))(t);case pe.b:return Ws(Ws({},Vs),{},{settings:Ws(Ws({},t.settings),{},{mediaType:Vs.settings.mediaType})});case"MEDIA_EDITOR:LOADING_SELECTED_MEDIA":return Object(it.set)("loadingSelected",n.loading,t);case"MEDIA_EDITOR:LOADING_MEDIA_LIST":return Object(it.set)("loadingList",!0,t);default:return t}}},epics:o}),dp=n("./MapStore2/web/client/components/misc/cardgrids/SideCard.jsx"),fp=n.n(dp),mp=n("./MapStore2/web/client/components/misc/enhancers/draggableComponent.jsx"),gp=n.n(mp),bp=n("./MapStore2/web/client/components/misc/enhancers/draggableContainer.jsx"),yp=n.n(bp),vp=n("./node_modules/react-contenteditable/lib/react-contenteditable.js"),hp=n.n(vp),Op=Object(ht.compose)(Object(ht.withState)("text","setText",(function(e){return e.title})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=e.className,r=void 0===n?"ms-story-title-editable":n,o=e.onUpdate,i=void 0===o?function(){}:o,a=e.setText,c=void 0===a?function(){}:a;return u.a.createElement(hp.a,{className:r,html:t,onClick:function(e){e.stopPropagation()},onChange:function(e){c(e.target.value)},onBlur:function(e){i(e.target.innerText)}})}));function jp(){return(jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var wp=yp()(pu.a),Sp=gp()((function(e){return u.a.createElement(fp.a,jp({},e,{dragSymbol:u.a.createElement(qn.Glyphicon,{glyph:"menu-hamburger"})}))})),Ep=function(e,t){return function(n){n.stopPropagation(),t(e)}},Ap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.src,r=e.thumbnail,o={text:"sheet",image:"picture",title:"story-title-section",banner:"story-banner-section",paragraph:"story-paragraph-section",immersive:"story-immersive-section",media:"story-media-section",map:"1-map",columnleft:"align-left",columnright:"align-right",columncenter:"align-center",webPage:"story-webpage-section",video:"play"},i=r||"image"===t&&n;return i?u.a.createElement("img",{src:i}):u.a.createElement(qn.Glyphicon,{glyph:o[t]||"picture"})},Pp=Object(ht.compose)(Object(p.connect)(Object(d.createSelector)(Oe.t,(function(e){return{resources:e}}))),Object(ht.withProps)((function(e){var t=e.resources,n=e.resourceId;return(Object(j.find)(t,{id:n})||{}).data})))(Ap),xp={title:function(){return null},paragraph:function(e){var t=e.id,n=e.contents,r=e.isCollapsed,o=e.scrollTo,i=e.onSort,a=e.sectionId,c=e.onUpdate;return u.a.createElement("div",{style:{position:"relative"}},u.a.createElement(wp,{containerId:t,isDraggable:!0,onSort:function(e,r,o,a){if(o.containerId===a.containerId){var c='sections[{ "id": "'.concat(t,'" }].contents[{"id":"').concat(n[0].id,'"}].contents[{"id":"').concat(a.id,'"}]'),l='sections[{ "id": "'.concat(t,'" }].contents[{"id":"').concat(n[0].id,'"}].contents'),s=e,u=pl()();i(c,l,s,u,'sections[{ "id": "'.concat(t,'" }].contents[{"id":"').concat(n[0].id,'"}].contents[{"id":"').concat(u,'"}]'))}},cardComponent:Sp,items:n[0].contents.map((function(e){var l="column"===e.type?"".concat(e.type).concat(e.align||"center"):e.type,s=xp[e.type];return{id:e.id,preview:u.a.createElement(Pp,{type:l,resourceId:e.resourceId}),tools:u.a.createElement(ti.a,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"zoom-to",tooltipId:"geostory.zoomToContent",onClick:Ep(e.id,o)}]}),title:u.a.createElement(Op,{title:e.title||Object(j.capitalize)(e.type),onUpdate:function(t){return c('sections[{"id": "'.concat(a,'"}].contents[{"id": "').concat(n[0].id,'"}].contents[{"id": "').concat(e.id,'"}]'),{title:t},"merge")}}),description:"type: ".concat(e.type),body:s&&u.a.createElement(s,{id:t,onSort:i,scrollTo:o,isCollapsed:r,contents:e.contents})}}))}))},column:function(e){var t=e.sectionId,n=e.id,r=e.contents,o=e.isCollapsed,i=e.scrollTo,a=e.onSort,c=e.onUpdate;return u.a.createElement("div",{style:{position:"relative"}},u.a.createElement(wp,{containerId:n,isDraggable:!0,onSort:function(e,r,o,i){if(o.containerId===i.containerId){var c='sections[{ "id": "'.concat(t,'" }].contents[{"id":"').concat(n,'"}].contents[{"id":"').concat(i.id,'"}]'),l='sections[{ "id": "'.concat(t,'" }].contents[{"id":"').concat(n,'"}].contents'),s=e,u=pl()();a(c,l,s,u,'sections[{ "id": "'.concat(t,'" }].contents[{"id":"').concat(n,'"}].contents[{"id":"').concat(u,'"}]'))}},cardComponent:Sp,items:r.map((function(e){var r="column"===e.type?"".concat(e.type).concat(e.align||"center"):e.type,l=xp[e.type];return{id:e.id,preview:u.a.createElement(Pp,{type:r,resourceId:e.resourceId}),tools:u.a.createElement(ti.a,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"zoom-to",tooltipId:"geostory.zoomToContent",onClick:Ep(e.id,i)}]}),title:u.a.createElement(Op,{title:e.title||Object(j.capitalize)(e.type),onUpdate:function(r){return c('sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(n,'"}].contents[{"id": "').concat(e.id,'"}]'),{title:r},"merge")}}),description:"type: ".concat(e.type),body:!o&&l&&u.a.createElement(l,{id:n,onSort:a})}}))}))},immersive:function(e){var t=e.id,n=e.contents,r=e.isCollapsed,o=e.scrollTo,i=e.onUpdate,a=e.onSort,c=e.currentPage;return u.a.createElement("div",{style:{position:"relative"}},u.a.createElement(wp,{containerId:t,isDraggable:!0,onSort:function(e,n,r,o){if(r.containerId===o.containerId){var i='sections[{ "id": "'.concat(t,'" }].contents[{"id":"').concat(o.id,'"}]'),c='sections[{ "id": "'.concat(t,'" }].contents'),l=e,s=pl()();a(i,c,l,s,'sections[{ "id": "'.concat(t,'" }].contents[{"id":"').concat(s,'"}]'))}},cardComponent:Sp,items:n.map((function(e){var n="column"===e.type?"".concat(e.type).concat(e.align||"center"):e.type,l=xp[e.type];return{className:c&&c.columns&&c.columns[t]&&c.columns[t]===e.id&&c.sectionId===t?"ms-highlight":"",id:e.id,preview:u.a.createElement(Ap,{type:n}),tools:u.a.createElement(ti.a,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"zoom-to",tooltipId:"geostory.zoomToContent",onClick:Ep(e.id,o)}]}),title:u.a.createElement(Op,{title:e.title||Object(j.capitalize)(e.type),onUpdate:function(n){return i('sections[{"id": "'.concat(t,'"}].contents[{"id":"').concat(e.id,'"}]'),{title:n},"merge")}}),description:"type: ".concat(e.type),body:l&&u.a.createElement(l,{id:e.id,sectionId:t,onSort:a,onUpdate:i,scrollTo:o,isCollapsed:r,contents:e.contents})}}))}))}},Cp=function(e){var t=e.scrollTo,n=e.isCollapsed,r=void 0!==n&&n,o=e.currentPage,i=e.onSort,a=e.onSelect,c=e.onUpdate,l=e.selected,s=void 0===l?"title_section_id1":l;return function(e){var n=e.contents,l=e.type,p=e.title,d=e.id,f=xp[l];return{id:d,preview:u.a.createElement(Pp,{type:l,resourceId:Object(j.get)(n[0],"background.resourceId")}),className:o&&o.sectionId===d?"ms-highlight":"",onClick:function(){return a(d)},selected:d===s,tools:u.a.createElement(ti.a,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{onClick:Ep(d,t),glyph:"zoom-to",tooltipId:"geostory.zoomToContent"}]}),title:u.a.createElement(Op,{title:p,onUpdate:function(e){return c('sections[{"id": "'.concat(d,'"}]'),{title:e},"merge")}}),description:"type: ".concat(l),body:r?null:f&&u.a.createElement(f,{id:d,sectionId:d,onSort:i,onUpdate:c,onSelect:a,currentPage:o,selected:s,scrollTo:t,isCollapsed:r,contents:n})}}},Tp=function(e){var t=e.sections,n=void 0===t?[]:t,r=e.scrollTo,o=e.onSelect,i=void 0===o?function(){}:o,a=e.isCollapsed,c=e.currentPage,l=e.selected,s=e.onSort,p=e.onUpdate;return u.a.createElement(wp,{isDraggable:!0,onSort:function(e,t,n,r){if("story-sections"===n.containerId&&"story-sections"===r.containerId){var o=pl()(),i='sections[{ "id": "'.concat(r.id,'" }]');s(i,"sections",e,o,'sections[{ "id": "'.concat(o,'" }]'))}},containerId:"story-sections",cardComponent:Sp,size:"sm",items:n.map(Cp({currentPage:c,onSelect:i,isCollapsed:a,scrollTo:r,selected:l,onUpdate:p,onSort:s}))})},Mp=n("./node_modules/react-checkbox-tree/lib/index.browser.js"),Ip=n.n(Mp);n("./node_modules/react-checkbox-tree/lib/react-checkbox-tree.css");function kp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kp(Object(n),!0).forEach((function(t){Np(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Np(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lp=Lt()("placeholder")(qn.FormControl),Fp=[{value:"14px",label:"14px"},{value:"16px",label:"16px"},{value:"18px",label:"18px"},{value:"24px",label:"24px"},{value:"28px",label:"28px"}],Bp=function(e){var t,n,r,o,i,a,c,l,p=e.items,d=void 0===p?[]:p,f=e.settings,m=e.storyFonts,g=e.onToggleSettings,y=void 0===g?function(){}:g,v=e.onUpdateSettings,h=void 0===v?function(){}:v,O=_p(Object(s.useState)(f.storyTitle),2),j=O[0],w=O[1],S=_p(Object(s.useState)(f.expanded||[]),2),E=S[0],A=S[1],P=m.length>0?m:b.c;return u.a.createElement(qn.Form,{className:"ms-geostory-settings"},u.a.createElement("div",null,u.a.createElement("h4",null,u.a.createElement(ao.a,{msgId:"geostory.builder.settings.storyTheme"})),u.a.createElement("hr",null)),u.a.createElement(qn.FormGroup,null,u.a.createElement("div",{style:{marginBottom:"10px"}},u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"geostory.builder.settings.theme"}))),u.a.createElement(la,{themeStyle:null==f||null===(t=f.theme)||void 0===t?void 0:t.general,placement:"right",disableBackgroundAlpha:!0,disableShadow:!0,onChange:function(e){return h("theme",Dp(Dp({},null==f?void 0:f.theme),{},{general:e}))}})),u.a.createElement(qn.FormGroup,null,u.a.createElement("div",{className:"ms-font-select"},u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"geostory.builder.settings.fontFamily"})),u.a.createElement("div",null,u.a.createElement(Ql.default,{value:null==f||null===(n=f.theme)||void 0===n||null===(r=n.general)||void 0===r?void 0:r.fontFamily,onChange:function(e){var t;return h("theme",Dp(Dp({},null==f?void 0:f.theme),{},{general:Dp(Dp({},null==f||null===(t=f.theme)||void 0===t?void 0:t.general),{},{fontFamily:e.value})}))},options:(l=P,l.map((function(e){return{label:e,value:e}})))})))),u.a.createElement(qn.FormGroup,null,u.a.createElement("div",{style:{marginBottom:"10px"}},u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"geostory.builder.settings.overlay"}))),u.a.createElement(la,{themeStyle:null==f||null===(o=f.theme)||void 0===o?void 0:o.overlay,placement:"right",onChange:function(e){return h("theme",Dp(Dp({},null==f?void 0:f.theme),{},{overlay:e}))}})),u.a.createElement(qn.FormGroup,null,u.a.createElement("div",{style:{marginBottom:"10px"}},u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"Links"}))),u.a.createElement(la,{disableBackgroundPicker:!0,disableShadow:!0,themeStyle:null==f||null===(i=f.theme)||void 0===i?void 0:i.link,placement:"right",onChange:function(e){return h("theme",Dp(Dp({},null==f?void 0:f.theme),{},{link:e}))}})),u.a.createElement("div",null,u.a.createElement("h4",null,u.a.createElement(ao.a,{msgId:"geostory.builder.settings.storyHeader"})),u.a.createElement("hr",null)),u.a.createElement(qn.FormGroup,null,u.a.createElement("div",{style:{marginBottom:"10px"}},u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"geostory.builder.settings.title"})),u.a.createElement(Xi.a,{onChange:function(){return y("isTitleEnabled")},className:"ms-geostory-settings-switch",checked:f.isTitleEnabled})),u.a.createElement(Lp,{disabled:!f.isTitleEnabled,value:j,onChange:function(e){return w(e.target.value)},onBlur:function(e){return h("storyTitle",e.target.value)},placeholder:"geostory.builder.settings.titlePlaceholder",style:{marginTop:"10px"}})),u.a.createElement(qn.FormGroup,null,u.a.createElement("div",{className:"ms-font-select"},u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"geostory.builder.settings.fontSize"})),u.a.createElement("div",null,u.a.createElement(Ql.default,{disabled:!f.isTitleEnabled,value:f.storyTitleFontSize,onChange:function(e){return h("storyTitleFontSize",e.value)},options:Fp,clearable:!1})))),u.a.createElement(qn.FormGroup,null,u.a.createElement("div",{style:{marginBottom:"10px"}},u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"geostory.builder.settings.logo"})),u.a.createElement(Xi.a,{onChange:function(){return y("isLogoEnabled")},className:"ms-geostory-settings-switch",checked:f.isLogoEnabled})),f.isLogoEnabled&&u.a.createElement(u.a.Fragment,null,u.a.createElement(_u.default,{thumbnail:(null==f||null===(a=f.thumbnail)||void 0===a?void 0:a.data)||(null==f||null===(c=f.thumbnail)||void 0===c?void 0:c.url),onUpdate:function(e,t){var n;h("thumbnail",{data:e,url:null==t||null===(n=t[0])||void 0===n?void 0:n.preview}),h("thumbnailErrors",void 0)},onRemove:function(){h("thumbnail",void 0),h("thumbnailErrors",void 0)},onError:function(e){return h("thumbnailErrors",e)},message:u.a.createElement(ao.a,{msgId:"geostory.builder.settings.logoPlaceholder"}),thumbnailOptions:{width:300,height:150,type:"image/png",contain:!0}}),f.thumbnailErrors&&f.thumbnailErrors.length>0&&u.a.createElement(qn.Alert,{bsStyle:"danger",className:"text-center"},u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"map.error"})),-1!==f.thumbnailErrors.indexOf("FORMAT")&&u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"map.errorFormat"})),-1!==f.thumbnailErrors.indexOf("SIZE")&&u.a.createElement("div",null,u.a.createElement(ao.a,{msgId:"map.errorSize"}))))),u.a.createElement(qn.FormGroup,null,u.a.createElement("div",{style:{marginBottom:"10px"}},u.a.createElement(qn.ControlLabel,null,u.a.createElement(ao.a,{msgId:"geostory.builder.settings.navbar"})),u.a.createElement(Xi.a,{onChange:function(){return y("isNavbarEnabled")},className:"ms-geostory-settings-switch",checked:f.isNavbarEnabled})),f.isNavbarEnabled&&u.a.createElement(Ip.a,{showNodeIcon:!1,nativeCheckboxes:!0,nodes:d,checked:f.checked||[],expanded:E,onCheck:function(e){return h("checked",e)},onExpand:function(e){return A(e)}})))};function Up(e){return(Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wp(e,t){return(Wp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qp(e);if(t){var o=Qp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vp(this,n)}}function Vp(e,t){return!t||"object"!==Up(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qp(e){return(Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yp=Vi(xi.a),Kp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wp(e,t)}(i,e);var t,n,r,o=zp(i);function i(){return Gp(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.story,n=e.settings,r=e.scrollTo,o=e.setEditing,i=e.mode,a=e.isCollapsed,c=e.isToolbarEnabled,l=e.isSettingsEnabled,s=e.isSettingsChanged,p=e.settingsItems,d=e.onToggleCardPreview,f=e.onToggleSettingsPanel,m=e.onToggleSettings,g=e.onUpdateSettings,y=e.currentPage,v=e.selected,h=e.onRemove,O=e.onSort,j=e.onUpdate,w=e.onSelect,S=e.storyFonts,E=s?Yp:xi.a;return u.a.createElement(bt.a,{className:"ms-geostory-builder",header:u.a.createElement("div",{className:"text-center ms-geostory-builder-header"},u.a.createElement(ti.a,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},transitionProps:!1,buttons:[{visible:!l,Element:function(){return u.a.createElement(Yp,{glyph:"trash",bsStyle:"primary",className:"square-button-md no-border",tooltipId:"geostory.builder.delete",confirmTitle:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.removeConfirmTitle"}),disabled:!c||!v,confirmContent:u.a.createElement(ao.a,{msgId:"geostory.contentToolbar.removeConfirmContent"}),onClick:function(){h(v&&'sections[{ "id": "'.concat(v,'" }]')||"")}})}},{tooltipId:"geostory.builder.preview",glyph:"preview",visible:!l,disabled:!c,onClick:function(){return o(i===b.f.VIEW)}},{tooltipId:"geostory.builder.settings.tooltip",glyph:"cog",id:"geostory-builder-settings-button",visible:!l,onClick:function(){return f()}},{tooltipId:"geostory.builder.".concat(a?"expandAll":"collapseAll"),glyph:a?"chevron-left":"chevron-down",bsStyle:"primary",disabled:!c,visible:!l,onClick:function(){return d()}},{visible:l,Element:function(){return u.a.createElement(E,{bsStyle:"primary",glyph:"arrow-left",className:"square-button-md no-border",tooltipId:"geostory.builder.settings.back",confirmTitle:u.a.createElement(ao.a,{msgId:"geostory.builder.settings.backConfirmTitle"}),confirmContent:u.a.createElement(ao.a,{msgId:"geostory.builder.settings.backConfirmBody"}),confirmNo:u.a.createElement(ao.a,{msgId:"geostory.builder.settings.backConfirmNo"}),confirmYes:u.a.createElement(ao.a,{msgId:"geostory.builder.settings.backConfirmYes"}),onClick:function(){f()}})}},{tooltipId:"geostory.builder.settings.save",glyph:"floppy-disk",visible:l,onClick:function(){return f(!0)}}]}))},l&&u.a.createElement(Bp,{items:p,settings:n,onToggleSettings:m,onUpdateSettings:g,storyFonts:S}),c&&!l?u.a.createElement(Tp,{currentPage:y,scrollTo:r,onSelect:w,selected:v,onUpdate:j,isCollapsed:a,sections:t&&t.sections,onSort:O}):l?null:u.a.createElement("div",{className:"ms-story-empty-content-parent"},u.a.createElement("div",{className:"ms-story-empty-content-child"},u.a.createElement(ao.a,{msgId:"geostory.builder.noContents"}))))}}])&&Hp(t.prototype,n),r&&Hp(t,r),i}(u.a.Component);qp(Kp,"propTypes",{currentPage:_t.a.object,settingsItems:_t.a.array,story:_t.a.object,settings:_t.a.object,mode:_t.a.oneOf(b.x.Modes),onToggleCardPreview:_t.a.func,onToggleSettingsPanel:_t.a.func,onToggleSettings:_t.a.func,onUpdateSettings:_t.a.func,isCollapsed:_t.a.bool,isToolbarEnabled:_t.a.bool,isSettingsEnabled:_t.a.bool,isSettingsChanged:_t.a.bool,scrollTo:_t.a.func,setEditing:_t.a.func,onSort:_t.a.func,onSelect:_t.a.func,onRemove:_t.a.func,onUpdate:_t.a.func,selected:_t.a.string,storyFonts:_t.a.array}),qp(Kp,"defaultProps",{mode:b.f.VIEW,setEditing:function(){},onToggleCardPreview:function(){},onToggleSettingsPanel:function(){},story:{},settings:{},isCollapsed:!0,isToolbarEnabled:!0,isSettingsEnabled:!1,onSort:function(){}});var Jp=Kp,Zp=n("./node_modules/react-router/es/index.js"),Xp=n("./MapStore2/web/client/utils/ShareUtils.js"),$p=Mr()(qn.Button),ed=Object(p.connect)(Object(d.createStructuredSelector)({isEditAllowed:Oe.j}),{setEditingMode:O.S})((function(e){var t=e.isEditAllowed,n=e.setEditingMode,r=void 0===n?function(){}:n,o=e.location,i=e.history;return t?u.a.createElement($p,{id:"edit-story",className:"square-button-md no-border",onClick:function(){r(!0);var e=o.pathname;if(e.includes("/geostory/shared")){var t=Object(Xp.removeQueryFromUrl)(e.replace("/geostory/shared","/geostory"));i.push(t)}},tooltipId:"geostory.navigation.edit",tooltipPosition:"bottom"},u.a.createElement(qn.Glyphicon,{glyph:"pencil"})):null})),td=Object(g.createPlugin)("GeoStoryEditor",{component:Object(p.connect)(Object(d.createStructuredSelector)({isCollapsed:Oe.i,mode:Oe.p,story:Oe.e,currentPage:Oe.b,settingsItems:Oe.w,settings:Oe.x,isSettingsChanged:Oe.v,isToolbarEnabled:Oe.o,selected:Oe.u,isSettingsEnabled:Oe.m,isFocused:Oe.k,storyFonts:Oe.d}),{setEditingMode:O.S,onUpdateSettings:O.eb,onToggleCardPreview:O.Y,onToggleSettingsPanel:O.ab,onToggleSettings:O.Z,onRemove:O.M,onSelect:O.P,onSort:O.L,onUpdate:O.bb,onBasicError:h.basicError})((function(e){var t=e.currentPage,n=e.isCollapsed,r=e.isSettingsChanged,o=void 0!==r&&r,i=e.isSettingsEnabled,a=e.isToolbarEnabled,c=e.isFocused,l=void 0!==c&&c,s=e.mode,p=void 0===s?b.f.VIEW:s,d=e.story,f=void 0===d?{}:d,m=e.settings,g=void 0===m?{}:m,y=e.settingsItems,v=e.selected,h=e.storyFonts,O=void 0===h?[]:h,j=e.setEditingMode,w=void 0===j?function(){}:j,S=e.onToggleCardPreview,E=void 0===S?function(){}:S,A=e.onToggleSettingsPanel,P=void 0===A?function(){}:A,x=e.onToggleSettings,C=void 0===x?function(){}:x,T=e.onUpdateSettings,M=void 0===T?function(){}:T,I=e.onSelect,k=void 0===I?function(){}:I,D=e.onRemove,N=void 0===D?function(){}:D,_=e.onUpdate,R=void 0===_?function(){}:_,L=e.onSort,F=void 0===L?function(){}:L;return p!==b.f.EDIT||l?null:u.a.createElement("div",{key:"left-column",className:"ms-geostory-editor",style:{order:-1,width:400,position:"relative"}},u.a.createElement(Jp,{currentPage:t,isCollapsed:n,isSettingsChanged:o,isSettingsEnabled:i,isToolbarEnabled:a,mode:p,scrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};Object(b.z)(e,t)},selected:v,settings:g,settingsItems:y,story:f,storyFonts:Object(b.m)(O),setEditing:w,onRemove:N,onSelect:k,onSort:F,onToggleCardPreview:E,onToggleSettings:C,onToggleSettingsPanel:P,onUpdate:R,onUpdateSettings:M}))})),containers:{GeoStoryNavigation:{tool:Object(Zp.d)(ed)}},reducers:{geostory:mt}}),nd=n("./MapStore2/web/client/selectors/router.js"),rd=n("./node_modules/react-swipeable/es/index.js");function od(){return(od=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ad(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?id(Object(n),!0).forEach((function(t){cd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ld(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ud=function(e){var t=e.tabindex,n=e.text,r=e.selected,o=e.style;return u.a.createElement(qn.Button,{tabindex:t,className:"".concat(r?"active":"btn-tray"," btn-xs btn-default"),style:o},n)},pd=Object(Ir.a)((function(e){var t=e.currentPage,n=e.items,r=e.scrollTo,o=void 0===r?function(){}:r,i=e.width,a=e.height,c=e.deltaSwipeSize,l=void 0===c?200:c,p=e.transition,d=void 0===p?300:p,f=e.updateTimeDebounceTime,m=void 0===f?500:f,g=e.getItemStyle,b=void 0===g?function(){return{}}:g,y=function(e){var t=e.direction,n=void 0===t?"horizontal":t,r=e.deltaScroll,o=e.width,i=e.height,a=e.transition,c=ld(Object(s.useState)(0),2),l=c[0],u=c[1],p=ld(Object(s.useState)(0),2),d=p[0],f=p[1],m=Object(s.useRef)({x:0,y:0}),g=ld(Object(s.useState)(!1),2),b=g[0],y=g[1],v=ld(Object(s.useState)("start"),2),h=v[0],O=v[1],j=ld(Object(s.useState)(),2),w=j[0],S=j[1],E=Object(s.useRef)(),A=Object(s.useRef)({});function P(e,t){S("move:start");var r=E.current,o=r.parentNode,i=r.getBoundingClientRect(),c=o.getBoundingClientRect();if("horizontal"===n){var l=e+i.width;e<0&&l>c.width?(u(e),m.current.x=e,O("center")):e>=0?(u(0),m.current.x=0,O("start")):l<=c.width&&(u(c.width-i.width),m.current.x=c.width-i.width,O("end"))}if("vertical"===n){var s=t+i.height;t<0&&s>c.height?(f(t),m.current.y=t,O("center")):t>=0?(f(0),m.current.y=0,O("start")):s<=c.height&&(f(c.height-i.height),m.current.y=c.height-i.height,O("end"))}setTimeout((function(){S("move:end")}),a)}function x(){var e=E.current,t=e.parentNode,r=e.getBoundingClientRect(),o=t.getBoundingClientRect();return!("horizontal"===n&&o.width>=r.width||"vertical"===n&&o.height>=r.height)}Object(s.useEffect)((function(){function e(e){var t=x();return y(x()),t?P(m.current.x-(e.deltaY>0?r:-r),m.current.y-(e.deltaY>0?r:-r)):null}var t=x();y(t);var n=E.current.parentNode;return t&&P(m.current.x,m.current.y),t&&n&&n.addEventListener&&n.addEventListener("wheel",e),function(){t&&n&&n.removeEventListener&&n.removeEventListener("wheel",e)}}),[o,i]);var C=Object(rd.a)({onSwiping:function(e){e.event.stopPropagation();var t=x();return y(x()),t?P(l-e.deltaX*e.velocity,d-e.deltaY*e.velocity):null},trackTouch:!0,trackMouse:!0});function T(e,t){A.current=ad(ad({},A.current),{},cd({},e,t))}function M(e){var t=A.current[e];if(t){var r=E.current,o=(r&&r.parentNode).getBoundingClientRect(),i=t.getBoundingClientRect();if("horizontal"===n){var a=o.width,c=o.left,l=i.width,s=i.left,u=c+a,p=s+l;return c<=s&&u>=s||c<=p&&u>=p}}return!1}return{status:w,canSwipe:b,isStartControlActive:b&&("end"===h||"center"===h),isEndControlActive:b&&("start"===h||"center"===h),positionLabel:h,coordinates:{x:l,y:d},containerPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t;return ad(ad({},C),{},{style:ad({position:"relative",overflow:"hidden",width:"100%",height:"100%"},n)})},contentPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t;return{ref:E,style:ad(ad(ad(ad({position:"absolute",display:"flex"},a&&{transition:"transform ".concat(a,"ms ease 0s")}),{},{flexDirection:"horizontal"===n?"row":"column"},b&&"horizontal"===n&&{transform:"translateX(".concat(l,"px)")}),b&&"vertical"===n&&{transform:"translateY(".concat(d,"px)")}),r)}},itemPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onClick;return ad({key:t,ref:function(e){return e&&T(t,e)}},n?{onClick:n,tabindex:M(t)?0:-1,onKeyDown:function(e){"Enter"===e.key&&n()}}:{tabindex:-1})},updateCoordinates:P,moveItemInViewById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.margin,o=void 0===r?0:r,i=A.current[e];if(i){var a=E.current,c=a&&a.parentNode,l=c.getBoundingClientRect(),s=i.getBoundingClientRect();if("horizontal"===n){var u=l.width,p=l.left,d=s.width,f=s.left,m=p+u,g=f+d,b=p<=f&&m>=g;if(!b){var y=a.getBoundingClientRect(),v=y.left;P(-(f-v)+o,void 0)}}}},moveToDeltaSize:function(e){P(l+e,d+e)}}}({direction:"horizontal",width:i,height:a,transition:d,deltaScroll:l}),v=y.isStartControlActive,h=y.isEndControlActive,O=y.containerPropsHandlers,j=y.contentPropsHandlers,w=y.itemPropsHandlers,S=y.moveToDeltaSize,E=y.moveItemInViewById,A=t&&t.columns&&t.sectionId&&t.columns[t.sectionId]||t&&t.sectionId,P=Object(s.useRef)(null);return Object(s.useEffect)((function(){return P.current=mo()((function(e){E(e,{margin:32})}),m),function(){P.current&&(P.current.cancel(),P.current=null)}}),[]),Object(s.useEffect)((function(){P.current&&(P.current.cancel(),P.current(A))}),[A]),u.a.createElement("div",od({},O(),{className:"ms-horizontal-menu"}),u.a.createElement("div",j(),n.map((function(e){var n=e.title,r=e.id,i=w({id:r,onClick:function(){t&&t.sectionId!==r&&o(r)}});return u.a.createElement("div",od({},i,{className:"ms-menu-item"}),u.a.createElement(ud,{tabindex:"-1",id:r,text:n||"title",selected:r===A,style:b(r===A)}))}))),v&&u.a.createElement(qn.Button,{className:"square-button-md no-border",style:{position:"absolute"},onClick:function(){return S(l)}},u.a.createElement(qn.Glyphicon,{glyph:"chevron-left"})),h&&u.a.createElement(qn.Button,{className:"square-button-md no-border",style:{position:"absolute",right:0},onClick:function(){return S(-l)}},u.a.createElement(qn.Glyphicon,{glyph:"chevron-right"})))})),dd=n("./MapStore2/web/client/components/home/Home.jsx"),fd=n.n(dd);function md(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?md(Object(n),!0).forEach((function(t){bd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yd=function(e){var t,n=e.settings,r=e.scrollTo,o=void 0===r?function(){}:r,i=e.navigableItems,a=void 0===i?[]:i,c=e.currentPage,l=void 0===c?{}:c,s=e.totalItems,p=void 0===s?1:s,d=e.currentPosition,f=void 0===d?0:d,m=e.router,g=e.buttons,b=void 0===g?[]:g,y=null==n||null===(t=n.theme)||void 0===t?void 0:t.general,v=Yi()(y)&&y||{},h=v.fontFamily,O=v.borderColor,j=v.color,w=v.backgroundColor,S=n||{},E=S.isTitleEnabled,A=S.isLogoEnabled,P=S.isNavbarEnabled,x=b.length>0,C=m&&m.pathname&&m.search&&"true"===Object(so.getQueryParams)(m.search).showHome&&m.pathname.includes("/geostory/shared"),T=P&&(null==a?void 0:a.length)>0,M=E||A||T||x||C;return u.a.createElement("div",{className:"ms-geostory-navigation-bar",style:gd(gd({color:j,backgroundColor:w},O&&{borderBottom:"1px solid ".concat(O)}),{},{fontFamily:h})},u.a.createElement("div",{className:"progress-bar",key:"progress-bar",style:{backgroundColor:O}},u.a.createElement("div",{className:"progress-percent",style:{width:"".concat((f+1)/p*100,"%"),backgroundColor:j}})),M&&u.a.createElement("div",{className:"ms-geostory-navigation-tools"},u.a.createElement("div",{className:"ms-geostory-navigation-toolbar"},u.a.createElement(ti.a,{buttons:b}),C&&u.a.createElement(fd.a,{bsStyle:"default",className:"square-button-md no-border",tooltipPosition:"right",renderUnsavedMapChangesDialog:!1})),u.a.createElement("div",{className:"ms-geostory-navigation-elements"},T?u.a.createElement("div",{className:"ms-geostory-navigation-navigable-items"},u.a.createElement(pd,{items:a,currentPage:l,scrollTo:o,getItemStyle:function(e){return e?{color:w,backgroundColor:j}:{outlineColor:j,borderColor:j}}})):null,u.a.createElement("div",{className:"ms-geostory-navigation-metadata"},E&&u.a.createElement("div",{className:"ms-geostory-navigation-title",style:{fontSize:n.storyTitleFontSize||"14px"}},n.storyTitle),A&&u.a.createElement("div",{className:"ms-geostory-navigation-logo"},u.a.createElement("img",{src:n.thumbnail&&(n.thumbnail.data||n.thumbnail.url)||"",height:32}))))))},vd=Object(g.createPlugin)("GeoStoryNavigation",{component:Object(p.connect)(Object(d.createStructuredSelector)({mode:Oe.p,settings:Oe.x,currentPage:Oe.b,currentPosition:Oe.c,totalItems:Oe.y,navigableItems:Object(Oe.q)({includeAlways:!1}),pathname:nd.pathnameSelector,search:nd.searchSelector}))((function(e){var t=e.mode,n=void 0===t?b.f.VIEW:t,r=e.currentPage,o=e.currentPosition,i=e.totalItems,a=e.settings,c=e.navigableItems,l=void 0===c?[]:c,s=e.pathname,p=e.search,d=e.items,f=(void 0===d?[]:d).filter((function(e){return e.tool})).map((function(e){return{Element:e.tool}}));return n===b.f.VIEW?u.a.createElement("div",{key:"geostory-navigation",className:"ms-geostory-navigation",style:{width:"100%",position:"relative"}},u.a.createElement(yd,{settings:a,currentPage:r,currentPosition:o,totalItems:i,scrollTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};Object(b.z)(e,t)},navigableItems:l,router:{pathname:s,search:p},buttons:f})):null})),reducers:{geostory:mt}}),hd=n("./MapStore2/web/client/plugins/Notifications.jsx"),Od=n.n(hd),jd=n("./js/plugins/Save.jsx"),wd=n("./js/plugins/SaveAs.jsx");n.d(t,"plugins",(function(){return Sd})),n.d(t,"requires",(function(){return Ed}));var Sd={OmniBarPlugin:a.a,BurgerMenuPlugin:l.a,GeoStoryPlugin:Es,MediaEditorPlugin:pp,GeoStoryEditorPlugin:td,GeoStoryNavigationPlugin:vd,NotificationsPlugin:Od.a,SavePlugin:jd.default,SaveAsPlugin:wd.default},Ed={};t.default={plugins:Sd,requires:Ed}},"./js/plugins/Save.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),c=n("./MapStore2/web/client/utils/PluginsUtils.js"),l=n("./MapStore2/web/client/actions/controls.js"),s=n("./MapStore2/web/client/components/I18N/Message.jsx"),u=n.n(s),p=n("./node_modules/react-bootstrap/es/index.js"),d=n("./MapStore2/web/client/selectors/map.js"),f=n("./js/actions/gnsave.js"),m=n("./MapStore2/web/client/selectors/security.js"),g=n("./MapStore2/web/client/reducers/controls.js"),b=n("./js/reducers/gnresource.js"),y=n("./js/reducers/gnsave.js"),v=n("./js/epics/gnsave.js"),h=n("./js/plugins/save/SaveModal.jsx");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S=Object(i.connect)(Object(a.createSelector)([function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.save)||void 0===n?void 0:n.enabled},d.mapInfoSelector,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,n,r,o,i,a,c){return{enabled:e,contentId:c||(null==t?void 0:t.id),resource:n,loading:r,saving:o,error:i,success:a}})),{onClose:l.toggleControl.bind(null,"save",null),onInit:f.l,onSave:f.h,onClear:f.g})((function(e){return o.a.createElement(h.a,w({},e,{update:!0,labelId:"save"}))}));t.default=Object(c.createPlugin)("Save",{component:S,containers:{BurgerMenu:{name:"save",position:30,text:o.a.createElement(u.a,{msgId:"save"}),icon:o.a.createElement(p.Glyphicon,{glyph:"floppy-open"}),action:l.toggleControl.bind(null,"save",null),selector:Object(a.createSelector)(m.isLoggedIn,(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t,n;return null==e||null===(t=e.gnresource)||void 0===t||null===(n=t.permissions)||void 0===n?void 0:n.canEdit}),(function(e){var t,n;return null==e||null===(t=e.gnresource)||void 0===t||null===(n=t.permissions)||void 0===n?void 0:n.type}),(function(e,t,n,r){return{style:!e||t||!n&&r?{display:"none"}:{}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},v.a),reducers:{gnresource:b.a,gnsave:y.a,controls:g.default}})},"./js/plugins/SaveAs.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/es/index.js"),c=n("./MapStore2/web/client/utils/PluginsUtils.js"),l=n("./MapStore2/web/client/actions/controls.js"),s=n("./MapStore2/web/client/components/I18N/Message.jsx"),u=n.n(s),p=n("./node_modules/react-bootstrap/es/index.js"),d=n("./MapStore2/web/client/selectors/map.js"),f=n("./MapStore2/web/client/selectors/security.js"),m=n("./js/actions/gnsave.js"),g=n("./MapStore2/web/client/reducers/controls.js"),b=n("./js/reducers/gnresource.js"),y=n("./js/reducers/gnsave.js"),v=n("./js/epics/gnsave.js"),h=n("./js/plugins/save/SaveModal.jsx");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S=Object(i.connect)(Object(a.createSelector)([function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.saveAs)||void 0===n?void 0:n.enabled},d.mapInfoSelector,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,n,r,o,i,a,c){return{enabled:e,contentId:c||(null==t?void 0:t.id),resource:n,loading:r,saving:o,error:i,success:a}})),{onClose:l.toggleControl.bind(null,"saveAs",null),onInit:m.l,onSave:m.h,onClear:m.g})((function(e){return o.a.createElement(h.a,w({},e,{labelId:"saveAs"}))}));t.default=Object(c.createPlugin)("SaveAs",{component:S,containers:{BurgerMenu:{name:"saveAs",position:30,text:o.a.createElement(u.a,{msgId:"saveAs"}),icon:o.a.createElement(p.Glyphicon,{glyph:"floppy-open"}),action:l.toggleControl.bind(null,"saveAs",null),selector:Object(a.createSelector)(f.isLoggedIn,(function(e){return{style:e?{}:{display:"none"}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},v.a),reducers:{gnresource:b.a,gnsave:y.a,controls:g.default}})},"./js/plugins/save/SaveModal.jsx":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),c=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),l=n.n(c),s=n("./MapStore2/web/client/components/misc/Thumbnail.jsx"),u=n("./MapStore2/web/client/components/I18N/Message.jsx"),p=n.n(u),d=n("./node_modules/react-bootstrap/es/index.js"),f=n("./MapStore2/web/client/components/misc/enhancers/localizedProps.js"),m=n.n(f),g=n("./MapStore2/web/client/components/misc/Loader.jsx"),b=n.n(g);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=m()("placeholder")(d.FormControl);function O(e){var t=e.update,n=e.error,i=e.success,a=e.labelId,c=e.resource,u=e.contentId,f=e.saving,m=e.loading,g=e.enabled,v=e.onClose,O=e.onSave,j=e.onInit,w=e.onClear,S=y(Object(r.useState)(),2),E=S[0],A=S[1],P=y(Object(r.useState)(),2),x=P[0],C=P[1],T=y(Object(r.useState)(""),2),M=T[0],I=T[1],k=y(Object(r.useState)(""),2),D=k[0],N=k[1],_=y(Object(r.useState)(!1),2),R=_[0],L=_[1],F=Object(r.useRef)();F.current={contentId:u,resource:c},Object(r.useEffect)((function(){g?j(F.current.contentId):w()}),[g]),Object(r.useEffect)((function(){if(!m){var e=F.current.resource||{};A(e.thumbnail_url),I(e.title),N(e.abstract),C(!1),L(e.title?void 0:"error")}}),[g,m]);var B=m||f;return o.a.createElement(l.a,{title:o.a.createElement(p.a,{msgId:a}),show:g,fitContent:!0,clickOutEnabled:!1,buttons:B?[]:[{text:o.a.createElement(p.a,{msgId:"close"}),onClick:function(){return v()}},{text:o.a.createElement(p.a,{msgId:a}),disabled:!!R,onClick:function(){return O({thumbnail:E,name:M,description:D},t?u:void 0)}}],onClose:B?null:function(){return v()}},n&&o.a.createElement(d.Alert,{bsStyle:"danger",style:{margin:0}},o.a.createElement("div",null,o.a.createElement(p.a,{msgId:"map.mapError.errorDefault"}))),i&&o.a.createElement(d.Alert,{bsStyle:"success",style:{margin:0}},o.a.createElement("div",null,o.a.createElement(p.a,{msgId:"saveDialog.saveSuccessMessage"}))),o.a.createElement(d.Form,null,o.a.createElement(d.FormGroup,{validationState:x?"error":void 0},o.a.createElement(d.ControlLabel,null,o.a.createElement(p.a,{msgId:"map.thumbnail"})),o.a.createElement(s.default,{thumbnail:E,thumbnailOptions:{width:300,height:250,type:"image/jpeg",quality:.5,contain:!1},message:o.a.createElement(p.a,{msgId:"map.message"}),onUpdate:function(e){A(e),C(!1)},onError:function(e){C(e)}}),x&&o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(p.a,{msgId:"map.error"})),o.a.createElement("div",null,x.indexOf&&-1!==x.indexOf("FORMAT")&&o.a.createElement("small",null,o.a.createElement(p.a,{msgId:"map.errorFormat"}))),o.a.createElement("div",null,x.indexOf&&-1!==x.indexOf("SIZE")&&o.a.createElement("small",null,o.a.createElement(p.a,{msgId:"map.errorSize"}))))),o.a.createElement(d.FormGroup,{validationState:R},o.a.createElement(d.ControlLabel,null,o.a.createElement(p.a,{msgId:"saveDialog.name"})),o.a.createElement(h,{placeholder:"saveDialog.namePlaceholder",value:M,onChange:function(e){I(e.target.value),L(e.target.value?void 0:"error")},onBlur:function(e){L(e.target.value?void 0:"error")}})),o.a.createElement(d.FormGroup,null,o.a.createElement(d.ControlLabel,null,o.a.createElement(p.a,{msgId:"saveDialog.description"})),o.a.createElement(h,{placeholder:"saveDialog.descriptionPlaceholder",value:D,onChange:function(e){return N(e.target.value)}}))),B&&o.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},o.a.createElement(b.a,{size:70})))}O.propTypes={update:a.a.bool,labelId:a.a.string,contentId:a.a.oneOfType([a.a.string,a.a.number]),resource:a.a.object,loading:a.a.bool,enabled:a.a.bool,onClose:a.a.func,onSave:a.a.func,onInit:a.a.func,onClear:a.a.func,error:a.a.oneOfType([a.a.string,a.a.object]),success:a.a.oneOfType([a.a.string,a.a.object])},O.defaultProps={update:!1,resource:{},loading:!1,enabled:!1,onClose:function(){},onSave:function(){},onInit:function(){},onClear:function(){}},t.a=O},"./js/reducers/gnresource.js":function(e,t,n){"use strict";var r=n("./js/actions/gnresource.js");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.b:return i(i({},e),{},{loading:!0});case r.d:return i(i({},e),{},{error:null,data:t.data,loading:!1});case r.a:return i(i({},e),{},{data:null,error:t.error,loading:!1});case r.h:return i(i({},e),{},{data:i(i({},e.data),t.properties)});case r.g:return i(i({},e),{},{type:t.resourceType});case r.c:return i(i({},e),{},{isNew:!0});case r.e:return i(i({},e),{},{id:t.id});case r.f:return i(i({},e),{},{permissions:t.permissions});default:return e}}},"./js/reducers/gnsave.js":function(e,t,n){"use strict";var r=n("./js/actions/gnsave.js");t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.e:return{saving:!0};case r.d:return{success:t.success,saving:!1};case r.c:return{error:t.error,saving:!1};case r.a:return{};default:return e}}},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/css/toc.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,"",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/groupchildren.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .toc-group-children {\r\n    margin-left: 15px;\r\n}\r\n\r\n.msgapi .TOC-Node-enter, .msgapi .TOC-Node-leave {\r\n    transition: all 250ms ease-out;\r\n    -o-transition: all 250ms ease-out;\r\n    -moz-transition: all 250ms ease-out;\r\n    -webkit-transition: all 250ms ease-out;\r\n    overflow: hidden;\r\n}\r\n.msgapi .TOC-Node-enter,.msgapi .TOC-Node-leave.TOC-Node-leave-active {\r\n    opacity: 0;\r\n    transform: scale(1, 0);\r\n    transform-origin: top;\r\n}\r\n.msgapi .TOC-Node-leave, .msgapi .TOC-Node-enter.TOC-Node-enter-active {\r\n    opacity: 1;\r\n    transform: scale(1, 1);\r\n    transform-origin: top;\r\n}\r\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/TOC/fragments/css/toctitle.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .toc-title {\r\n    display: inline-block;\r\n    max-width: 150px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/misc/style/filter.css":function(e,t,n){(e.exports=n("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .mapstore-filter input::-ms-clear,\r\n.msgapi .mapstore-filter input::-ms-reveal {\r\n  display: none;\r\n}\r\n",""])},"./node_modules/moment/locale sync recursive ^\\.\\/.*$":function(e,t,n){var r={"./af":"./node_modules/moment/locale/af.js","./af.js":"./node_modules/moment/locale/af.js","./ar":"./node_modules/moment/locale/ar.js","./ar-dz":"./node_modules/moment/locale/ar-dz.js","./ar-dz.js":"./node_modules/moment/locale/ar-dz.js","./ar-kw":"./node_modules/moment/locale/ar-kw.js","./ar-kw.js":"./node_modules/moment/locale/ar-kw.js","./ar-ly":"./node_modules/moment/locale/ar-ly.js","./ar-ly.js":"./node_modules/moment/locale/ar-ly.js","./ar-ma":"./node_modules/moment/locale/ar-ma.js","./ar-ma.js":"./node_modules/moment/locale/ar-ma.js","./ar-sa":"./node_modules/moment/locale/ar-sa.js","./ar-sa.js":"./node_modules/moment/locale/ar-sa.js","./ar-tn":"./node_modules/moment/locale/ar-tn.js","./ar-tn.js":"./node_modules/moment/locale/ar-tn.js","./ar.js":"./node_modules/moment/locale/ar.js","./az":"./node_modules/moment/locale/az.js","./az.js":"./node_modules/moment/locale/az.js","./be":"./node_modules/moment/locale/be.js","./be.js":"./node_modules/moment/locale/be.js","./bg":"./node_modules/moment/locale/bg.js","./bg.js":"./node_modules/moment/locale/bg.js","./bm":"./node_modules/moment/locale/bm.js","./bm.js":"./node_modules/moment/locale/bm.js","./bn":"./node_modules/moment/locale/bn.js","./bn.js":"./node_modules/moment/locale/bn.js","./bo":"./node_modules/moment/locale/bo.js","./bo.js":"./node_modules/moment/locale/bo.js","./br":"./node_modules/moment/locale/br.js","./br.js":"./node_modules/moment/locale/br.js","./bs":"./node_modules/moment/locale/bs.js","./bs.js":"./node_modules/moment/locale/bs.js","./ca":"./node_modules/moment/locale/ca.js","./ca.js":"./node_modules/moment/locale/ca.js","./cs":"./node_modules/moment/locale/cs.js","./cs.js":"./node_modules/moment/locale/cs.js","./cv":"./node_modules/moment/locale/cv.js","./cv.js":"./node_modules/moment/locale/cv.js","./cy":"./node_modules/moment/locale/cy.js","./cy.js":"./node_modules/moment/locale/cy.js","./da":"./node_modules/moment/locale/da.js","./da.js":"./node_modules/moment/locale/da.js","./de":"./node_modules/moment/locale/de.js","./de-at":"./node_modules/moment/locale/de-at.js","./de-at.js":"./node_modules/moment/locale/de-at.js","./de-ch":"./node_modules/moment/locale/de-ch.js","./de-ch.js":"./node_modules/moment/locale/de-ch.js","./de.js":"./node_modules/moment/locale/de.js","./dv":"./node_modules/moment/locale/dv.js","./dv.js":"./node_modules/moment/locale/dv.js","./el":"./node_modules/moment/locale/el.js","./el.js":"./node_modules/moment/locale/el.js","./en-au":"./node_modules/moment/locale/en-au.js","./en-au.js":"./node_modules/moment/locale/en-au.js","./en-ca":"./node_modules/moment/locale/en-ca.js","./en-ca.js":"./node_modules/moment/locale/en-ca.js","./en-gb":"./node_modules/moment/locale/en-gb.js","./en-gb.js":"./node_modules/moment/locale/en-gb.js","./en-ie":"./node_modules/moment/locale/en-ie.js","./en-ie.js":"./node_modules/moment/locale/en-ie.js","./en-il":"./node_modules/moment/locale/en-il.js","./en-il.js":"./node_modules/moment/locale/en-il.js","./en-nz":"./node_modules/moment/locale/en-nz.js","./en-nz.js":"./node_modules/moment/locale/en-nz.js","./eo":"./node_modules/moment/locale/eo.js","./eo.js":"./node_modules/moment/locale/eo.js","./es":"./node_modules/moment/locale/es.js","./es-do":"./node_modules/moment/locale/es-do.js","./es-do.js":"./node_modules/moment/locale/es-do.js","./es-us":"./node_modules/moment/locale/es-us.js","./es-us.js":"./node_modules/moment/locale/es-us.js","./es.js":"./node_modules/moment/locale/es.js","./et":"./node_modules/moment/locale/et.js","./et.js":"./node_modules/moment/locale/et.js","./eu":"./node_modules/moment/locale/eu.js","./eu.js":"./node_modules/moment/locale/eu.js","./fa":"./node_modules/moment/locale/fa.js","./fa.js":"./node_modules/moment/locale/fa.js","./fi":"./node_modules/moment/locale/fi.js","./fi.js":"./node_modules/moment/locale/fi.js","./fo":"./node_modules/moment/locale/fo.js","./fo.js":"./node_modules/moment/locale/fo.js","./fr":"./node_modules/moment/locale/fr.js","./fr-ca":"./node_modules/moment/locale/fr-ca.js","./fr-ca.js":"./node_modules/moment/locale/fr-ca.js","./fr-ch":"./node_modules/moment/locale/fr-ch.js","./fr-ch.js":"./node_modules/moment/locale/fr-ch.js","./fr.js":"./node_modules/moment/locale/fr.js","./fy":"./node_modules/moment/locale/fy.js","./fy.js":"./node_modules/moment/locale/fy.js","./gd":"./node_modules/moment/locale/gd.js","./gd.js":"./node_modules/moment/locale/gd.js","./gl":"./node_modules/moment/locale/gl.js","./gl.js":"./node_modules/moment/locale/gl.js","./gom-latn":"./node_modules/moment/locale/gom-latn.js","./gom-latn.js":"./node_modules/moment/locale/gom-latn.js","./gu":"./node_modules/moment/locale/gu.js","./gu.js":"./node_modules/moment/locale/gu.js","./he":"./node_modules/moment/locale/he.js","./he.js":"./node_modules/moment/locale/he.js","./hi":"./node_modules/moment/locale/hi.js","./hi.js":"./node_modules/moment/locale/hi.js","./hr":"./node_modules/moment/locale/hr.js","./hr.js":"./node_modules/moment/locale/hr.js","./hu":"./node_modules/moment/locale/hu.js","./hu.js":"./node_modules/moment/locale/hu.js","./hy-am":"./node_modules/moment/locale/hy-am.js","./hy-am.js":"./node_modules/moment/locale/hy-am.js","./id":"./node_modules/moment/locale/id.js","./id.js":"./node_modules/moment/locale/id.js","./is":"./node_modules/moment/locale/is.js","./is.js":"./node_modules/moment/locale/is.js","./it":"./node_modules/moment/locale/it.js","./it.js":"./node_modules/moment/locale/it.js","./ja":"./node_modules/moment/locale/ja.js","./ja.js":"./node_modules/moment/locale/ja.js","./jv":"./node_modules/moment/locale/jv.js","./jv.js":"./node_modules/moment/locale/jv.js","./ka":"./node_modules/moment/locale/ka.js","./ka.js":"./node_modules/moment/locale/ka.js","./kk":"./node_modules/moment/locale/kk.js","./kk.js":"./node_modules/moment/locale/kk.js","./km":"./node_modules/moment/locale/km.js","./km.js":"./node_modules/moment/locale/km.js","./kn":"./node_modules/moment/locale/kn.js","./kn.js":"./node_modules/moment/locale/kn.js","./ko":"./node_modules/moment/locale/ko.js","./ko.js":"./node_modules/moment/locale/ko.js","./ky":"./node_modules/moment/locale/ky.js","./ky.js":"./node_modules/moment/locale/ky.js","./lb":"./node_modules/moment/locale/lb.js","./lb.js":"./node_modules/moment/locale/lb.js","./lo":"./node_modules/moment/locale/lo.js","./lo.js":"./node_modules/moment/locale/lo.js","./lt":"./node_modules/moment/locale/lt.js","./lt.js":"./node_modules/moment/locale/lt.js","./lv":"./node_modules/moment/locale/lv.js","./lv.js":"./node_modules/moment/locale/lv.js","./me":"./node_modules/moment/locale/me.js","./me.js":"./node_modules/moment/locale/me.js","./mi":"./node_modules/moment/locale/mi.js","./mi.js":"./node_modules/moment/locale/mi.js","./mk":"./node_modules/moment/locale/mk.js","./mk.js":"./node_modules/moment/locale/mk.js","./ml":"./node_modules/moment/locale/ml.js","./ml.js":"./node_modules/moment/locale/ml.js","./mr":"./node_modules/moment/locale/mr.js","./mr.js":"./node_modules/moment/locale/mr.js","./ms":"./node_modules/moment/locale/ms.js","./ms-my":"./node_modules/moment/locale/ms-my.js","./ms-my.js":"./node_modules/moment/locale/ms-my.js","./ms.js":"./node_modules/moment/locale/ms.js","./mt":"./node_modules/moment/locale/mt.js","./mt.js":"./node_modules/moment/locale/mt.js","./my":"./node_modules/moment/locale/my.js","./my.js":"./node_modules/moment/locale/my.js","./nb":"./node_modules/moment/locale/nb.js","./nb.js":"./node_modules/moment/locale/nb.js","./ne":"./node_modules/moment/locale/ne.js","./ne.js":"./node_modules/moment/locale/ne.js","./nl":"./node_modules/moment/locale/nl.js","./nl-be":"./node_modules/moment/locale/nl-be.js","./nl-be.js":"./node_modules/moment/locale/nl-be.js","./nl.js":"./node_modules/moment/locale/nl.js","./nn":"./node_modules/moment/locale/nn.js","./nn.js":"./node_modules/moment/locale/nn.js","./pa-in":"./node_modules/moment/locale/pa-in.js","./pa-in.js":"./node_modules/moment/locale/pa-in.js","./pl":"./node_modules/moment/locale/pl.js","./pl.js":"./node_modules/moment/locale/pl.js","./pt":"./node_modules/moment/locale/pt.js","./pt-br":"./node_modules/moment/locale/pt-br.js","./pt-br.js":"./node_modules/moment/locale/pt-br.js","./pt.js":"./node_modules/moment/locale/pt.js","./ro":"./node_modules/moment/locale/ro.js","./ro.js":"./node_modules/moment/locale/ro.js","./ru":"./node_modules/moment/locale/ru.js","./ru.js":"./node_modules/moment/locale/ru.js","./sd":"./node_modules/moment/locale/sd.js","./sd.js":"./node_modules/moment/locale/sd.js","./se":"./node_modules/moment/locale/se.js","./se.js":"./node_modules/moment/locale/se.js","./si":"./node_modules/moment/locale/si.js","./si.js":"./node_modules/moment/locale/si.js","./sk":"./node_modules/moment/locale/sk.js","./sk.js":"./node_modules/moment/locale/sk.js","./sl":"./node_modules/moment/locale/sl.js","./sl.js":"./node_modules/moment/locale/sl.js","./sq":"./node_modules/moment/locale/sq.js","./sq.js":"./node_modules/moment/locale/sq.js","./sr":"./node_modules/moment/locale/sr.js","./sr-cyrl":"./node_modules/moment/locale/sr-cyrl.js","./sr-cyrl.js":"./node_modules/moment/locale/sr-cyrl.js","./sr.js":"./node_modules/moment/locale/sr.js","./ss":"./node_modules/moment/locale/ss.js","./ss.js":"./node_modules/moment/locale/ss.js","./sv":"./node_modules/moment/locale/sv.js","./sv.js":"./node_modules/moment/locale/sv.js","./sw":"./node_modules/moment/locale/sw.js","./sw.js":"./node_modules/moment/locale/sw.js","./ta":"./node_modules/moment/locale/ta.js","./ta.js":"./node_modules/moment/locale/ta.js","./te":"./node_modules/moment/locale/te.js","./te.js":"./node_modules/moment/locale/te.js","./tet":"./node_modules/moment/locale/tet.js","./tet.js":"./node_modules/moment/locale/tet.js","./tg":"./node_modules/moment/locale/tg.js","./tg.js":"./node_modules/moment/locale/tg.js","./th":"./node_modules/moment/locale/th.js","./th.js":"./node_modules/moment/locale/th.js","./tl-ph":"./node_modules/moment/locale/tl-ph.js","./tl-ph.js":"./node_modules/moment/locale/tl-ph.js","./tlh":"./node_modules/moment/locale/tlh.js","./tlh.js":"./node_modules/moment/locale/tlh.js","./tr":"./node_modules/moment/locale/tr.js","./tr.js":"./node_modules/moment/locale/tr.js","./tzl":"./node_modules/moment/locale/tzl.js","./tzl.js":"./node_modules/moment/locale/tzl.js","./tzm":"./node_modules/moment/locale/tzm.js","./tzm-latn":"./node_modules/moment/locale/tzm-latn.js","./tzm-latn.js":"./node_modules/moment/locale/tzm-latn.js","./tzm.js":"./node_modules/moment/locale/tzm.js","./ug-cn":"./node_modules/moment/locale/ug-cn.js","./ug-cn.js":"./node_modules/moment/locale/ug-cn.js","./uk":"./node_modules/moment/locale/uk.js","./uk.js":"./node_modules/moment/locale/uk.js","./ur":"./node_modules/moment/locale/ur.js","./ur.js":"./node_modules/moment/locale/ur.js","./uz":"./node_modules/moment/locale/uz.js","./uz-latn":"./node_modules/moment/locale/uz-latn.js","./uz-latn.js":"./node_modules/moment/locale/uz-latn.js","./uz.js":"./node_modules/moment/locale/uz.js","./vi":"./node_modules/moment/locale/vi.js","./vi.js":"./node_modules/moment/locale/vi.js","./x-pseudo":"./node_modules/moment/locale/x-pseudo.js","./x-pseudo.js":"./node_modules/moment/locale/x-pseudo.js","./yo":"./node_modules/moment/locale/yo.js","./yo.js":"./node_modules/moment/locale/yo.js","./zh-cn":"./node_modules/moment/locale/zh-cn.js","./zh-cn.js":"./node_modules/moment/locale/zh-cn.js","./zh-hk":"./node_modules/moment/locale/zh-hk.js","./zh-hk.js":"./node_modules/moment/locale/zh-hk.js","./zh-tw":"./node_modules/moment/locale/zh-tw.js","./zh-tw.js":"./node_modules/moment/locale/zh-tw.js"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="./node_modules/moment/locale sync recursive ^\\.\\/.*$"}}]);