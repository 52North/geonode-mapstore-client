(window.webpackJsonp=window.webpackJsonp||[]).push([["plugins/share-plugin"],{"./MapStore2/web/client/reducers/controls.js":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/actions/controls.js"),o=n("./node_modules/object-assign/index.js"),i=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.TOGGLE_CONTROL:var n=t.property||"enabled";return i()({},e,a({},t.control,i()({},e[t.control],a({},n,!(e[t.control]||{})[n]))));case r.SET_CONTROL_PROPERTY:return!0===t.toggle&&e[t.control]&&e[t.control][t.property]===t.value?i()({},e,a({},t.control,i()({},e[t.control],a({},t.property,void 0)))):i()({},e,a({},t.control,i()({},e[t.control],a({},t.property,t.value))));case r.SET_CONTROL_PROPERTIES:return i()({},e,a({},t.control,i()({},e[t.control],t.properties)));case r.RESET_CONTROLS:var o=Object.keys(e).filter((function(e){return-1===(t.skip||[]).indexOf(e)})),u=o.reduce((function(t,n){return i()(t,a({},n,i()({},e[n],!0===e[n].enabled?{enabled:!1}:{})))}),{});return i()({},e,u);default:return e}}},"./MapStore2/web/client/selectors/map.js":function(e,t,n){"use strict";n.r(t),n.d(t,"mapSelector",(function(){return a})),n.d(t,"projectionSelector",(function(){return u})),n.d(t,"stateMapIdSelector",(function(){return c})),n.d(t,"mapIdSelector",(function(){return l})),n.d(t,"mapInfoSelector",(function(){return s})),n.d(t,"mapInfoLoadingSelector",(function(){return f})),n.d(t,"mapSaveErrorsSelector",(function(){return d})),n.d(t,"mapInfoDetailsUriFromIdSelector",(function(){return p})),n.d(t,"mapInfoDetailsSettingsFromIdSelector",(function(){return m})),n.d(t,"mapIsEditableSelector",(function(){return b})),n.d(t,"projectionDefsSelector",(function(){return y})),n.d(t,"mapConstraintsSelector",(function(){return g})),n.d(t,"configuredRestrictedExtentSelector",(function(){return h})),n.d(t,"configuredExtentCrsSelector",(function(){return v})),n.d(t,"configuredMinZoomSelector",(function(){return x})),n.d(t,"mapLimitsSelector",(function(){return S})),n.d(t,"minZoomSelector",(function(){return j})),n.d(t,"resolutionsSelector",(function(){return O})),n.d(t,"scalesSelector",(function(){return E})),n.d(t,"mapVersionSelector",(function(){return P})),n.d(t,"mapNameSelector",(function(){return w})),n.d(t,"mouseMoveListenerSelector",(function(){return G})),n.d(t,"isMouseMoveActiveSelector",(function(){return C})),n.d(t,"isMouseMoveCoordinatesActiveSelector",(function(){return M})),n.d(t,"isMouseMoveIdentifyActiveSelector",(function(){return I}));var r=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),o=n("./node_modules/reselect/es/index.js"),i=n("./node_modules/lodash/lodash.js"),a=function(e){return e.map&&e.map.present||e.map||e.config&&e.config.map||null},u=Object(o.createSelector)([a],(function(e){return e&&e.projection})),c=function(e){return Object(i.get)(a(e),"mapId")&&parseInt(Object(i.get)(a(e),"mapId"),10)||null},l=function(e){return Object(i.get)(e,"mapInitialConfig.mapId")&&parseInt(Object(i.get)(e,"mapInitialConfig.mapId"),10)||c(e)},s=function(e){return Object(i.get)(a(e),"info")},f=function(e){return Object(i.get)(a(e),"loadingInfo",!1)},d=function(e){return Object(i.get)(a(e),"mapSaveErrors")},p=function(e){return Object(i.get)(s(e),"details")},m=function(e){return Object(i.get)(s(e),"detailsSettings")},b=function(e){var t=Object(i.get)(s(e),"canEdit");return void 0===t?Object(i.get)(e,"context.resource.canEdit"):t},y=function(e){return e.localConfig&&e.localConfig.projectionDefs||[]},g=function(e){return e.localConfig&&e.localConfig.mapConstraints||{}},h=function(e){return g(e).restrictedExtent},v=function(e){return g(e).crs},x=function(e){var t=g(e),n=u(e);return n&&Object(i.get)(t,'projectionsConstraints["'.concat(n,'"].minZoom'))||Object(i.get)(t,"minZoom")},S=function(e){return Object(i.get)(a(e),"limits")},j=function(e){return Object(i.get)(S(e),"minZoom")},O=function(e){return Object(i.get)(a(e),"resolutions")},E=Object(o.createSelector)([O,u],(function(e,t){if(e&&t){var n=r.default.getUnits(t);return e.map((function(e){return e*(100/2.54*96)*("degrees"===n?111194.87428468118:1)}))}return[]})),P=function(e){return e.map&&e.map.present&&e.map.present.version||1},w=function(e){return e.map&&e.map.present&&e.map.present.info&&e.map.present.info.name||""},G=function(e){return Object(i.get)(a(e),"eventListeners.mousemove",[])},C=function(e){return!!G(e).length},M=function(e){return G(e).includes("mouseposition")},I=function(e){return G(e).includes("identifyFloatingTool")}},"./MapStore2/web/client/utils/CoordinatesUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"FORMULAS",(function(){return N})),n.d(t,"getProjUrl",(function(){return T})),n.d(t,"determineCrs",(function(){return R})),n.d(t,"normalizePoint",(function(){return F})),n.d(t,"reproject",(function(){return z})),n.d(t,"reprojectExtent",(function(){return B})),n.d(t,"getPolygonFromExtent",(function(){return D})),n.d(t,"getExtentFromNormalized",(function(){return V})),n.d(t,"crsCodeTable",(function(){return $})),n.d(t,"setCrsLabels",(function(){return J})),n.d(t,"getUnits",(function(){return W})),n.d(t,"getProjectedBBox",(function(){return Z})),n.d(t,"createBBox",(function(){return q})),n.d(t,"reprojectGeoJson",(function(){return X})),n.d(t,"lineIntersectPolygon",(function(){return Y})),n.d(t,"normalizeLng",(function(){return H})),n.d(t,"reprojectBbox",(function(){return K})),n.d(t,"getCompatibleSRS",(function(){return Q})),n.d(t,"getEquivalentSRS",(function(){return ee})),n.d(t,"getEPSGCode",(function(){return te})),n.d(t,"normalizeSRS",(function(){return ne})),n.d(t,"isAllowedSRS",(function(){return re})),n.d(t,"getAvailableCRS",(function(){return oe})),n.d(t,"filterCRSList",(function(){return ie})),n.d(t,"calculateAzimuth",(function(){return ae})),n.d(t,"calculateDistance",(function(){return ue})),n.d(t,"extendExtent",(function(){return ce})),n.d(t,"getGeoJSONExtent",(function(){return le})),n.d(t,"isValidExtent",(function(){return se})),n.d(t,"calculateCircleCoordinates",(function(){return fe})),n.d(t,"transformLineToArcs",(function(){return de})),n.d(t,"transformArcsToLine",(function(){return pe})),n.d(t,"coordsOLtoLeaflet",(function(){return me})),n.d(t,"mergeToPolyGeom",(function(){return be})),n.d(t,"getViewportGeometry",(function(){return ye})),n.d(t,"getExtentFromViewport",(function(){return ge})),n.d(t,"fetchProjRemotely",(function(){return he})),n.d(t,"parseURN",(function(){return ve})),n.d(t,"parseString",(function(){return xe})),n.d(t,"getWMSBoundingBox",(function(){return Se})),n.d(t,"isSRSAllowed",(function(){return je})),n.d(t,"getNormalizedLatLon",(function(){return Oe})),n.d(t,"isInsideVisibleArea",(function(){return Ee})),n.d(t,"centerToVisibleArea",(function(){return Pe})),n.d(t,"calculateCircleRadiusFromPixel",(function(){return we})),n.d(t,"roundCoord",(function(){return Ge})),n.d(t,"midpoint",(function(){return Ce})),n.d(t,"pointObjectToArray",(function(){return Me})),n.d(t,"isPointInsideExtent",(function(){return Ie})),n.d(t,"isBboxCompatible",(function(){return Ne})),n.d(t,"extractCrsFromURN",(function(){return Ae})),n.d(t,"makeNumericEPSG",(function(){return Te})),n.d(t,"makeBboxFromOWS",(function(){return Le}));var r=n("./node_modules/node-geo-distance/index.js"),o=n.n(r),i=n("./MapStore2/web/client/libs/proj4.js"),a=n.n(i),u=n("./MapStore2/web/client/libs/ajax.js"),c=n.n(u),l=n("./node_modules/object-assign/index.js"),s=n.n(l),f=n("./node_modules/lodash/lodash.js"),d=n("./node_modules/@turf/line-intersect/index.js"),p=n.n(d),m=n("./node_modules/@turf/polygon-to-linestring/index.js"),b=n.n(m),y=n("./node_modules/@turf/great-circle/main.es.js"),g=n("./node_modules/turf-point/index.js"),h=n.n(g),v=n("./node_modules/@turf/bbox-polygon/main.es.js"),x=n("./node_modules/@turf/boolean-overlap/main.es.js"),S=n("./node_modules/@turf/boolean-contains/main.es.js");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M,I=a.a,N={vincenty:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],i=e[n+1],a=w(r,2),u=a[0],c=a[1],l=w(i,2),s=l[0],f=l[1];t+=parseFloat(o.a.vincentySync({longitude:u,latitude:c},{longitude:s,latitude:f}))}return t},haversine:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],i=e[n+1],a=w(r,2),u=a[0],c=a[1],l=w(i,2),s=l[0],f=l[1];t+=parseFloat(o.a.haversineSync({longitude:u,latitude:c},{longitude:s,latitude:f}))}return t}};function A(e,t){return(n=e).length>=2&&"number"==typeof n[0]&&"number"==typeof n[1]?t(e):e.map((function(e){return A(e,t)}));var n}var T=function(e){return"http://spatialreference.org/ref/epsg/".concat(e,"/proj4/")};function L(e,t,n){if(null===e)return e;var r=Object(f.cloneDeep)(e);return"Feature"===e.type?r.geometry=L(e.geometry,t,n):"FeatureCollection"===e.type?r.features=r.features.map((function(e){return L(e,t,n)})):"GeometryCollection"===e.type?r.geometries=r.geometries.map((function(e){return L(e,t,n)})):t&&t(r),n&&n(r),r}function R(e){return"string"==typeof e||e instanceof String?a.a.defs(e)?new a.a.Proj(e):null:e}var _={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"},F=function(e){return{x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}},U=function(e){var t=e;return Object(f.isNumber)(e.x)||(t.x=parseFloat(e.x)),Object(f.isNumber)(e.y)||(t.y=parseFloat(e.y)),t},z=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t&&a.a.defs(t)?new a.a.Proj(t):null,i=n&&a.a.defs(n)?new a.a.Proj(n):null;if(o&&i){var u=Object(f.isArray)(e)?a.a.toPoint(e):a.a.toPoint([e.x,e.y]),c=s()({},t===n?U(u):a.a.transform(o,i,U(u)),{srs:n});return r?F(c):c}return null},k=["EPSG:900913","EPSG:4326","EPSG:3857"],B=function(e,t,n){return"EPSG:4326"===t?e:n?e.map((function(e){return[z([e[0],e[1]],"EPSG:4326",t),z([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(P(e),[t.x,t.y])}),[])})):[z([e[0],e[1]],"EPSG:4326",t),z([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(P(e),[t.x,t.y])}),[])},D=function(e){return e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:Object(v.a)(e):null},V=function(e,t){var n=function(e,t){var n="EPSG:4326"!==t?[z([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),z([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce((function(e,t){return[].concat(P(e),[t.x,t.y])}),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)],r=!1;return"EPSG:4326"===t?r=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(r=Math.abs(e.maxx-e.minx)>=40075016.68557849),r?[0,n[1],360,n[3]]:[(n[0]+180)%360,n[1],(n[2]+180)%360,n[3]].map((function(e,t){return t%2==0&&e<0?360+e:e}))}(e,t),r=n[2]<n[0];return r?{extent:B([[-180,n[1],n[2]-180,n[3]],[n[0]-180,n[1],180,n[3]]],t,r),isIDL:r}:{extent:B([n[0]-180,n[1],n[2]-180,n[3]],t,r),isIDL:r}},$={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},J=function(e){_=s()({},_,e)},W=function(e){return new a.a.Proj(e).units||"degrees"},Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=t*r[0]/2,i=t*r[1]/2,a=Math.cos(n),u=Math.sin(n),c=o*a,l=o*u,s=i*a,f=i*u,d=e.x,p=e.y,m=d-c+f,b=d-c-f,y=d+c-f,g=d+c+f,h=p-l-s,v=p-l+s,x=p+l+s,S=p+l-s,j=M.createBBox(Math.min(m,b,y,g),Math.min(h,v,x,S),Math.max(m,b,y,g),Math.max(h,v,x,S));return j},q=function(e,t,n,r){return{minx:e,miny:t,maxx:n,maxy:r}},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326",r=t,o=n;"string"==typeof r&&(r=R(r)),"string"==typeof o&&(o=R(o));var i=I(r,o);return L(e,(function(e){e.crs&&delete e.crs,e.coordinates=A(e.coordinates,(function(e){var t=w(e,2),n=t[0],r=t[1];return i.forward([n,r])}))}),(function(e){var t,n;e.bbox&&(e.bbox=(t=[Number.MAX_VALUE,Number.MAX_VALUE],n=[-Number.MAX_VALUE,-Number.MAX_VALUE],L(e,(function(e){A(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),n[0]=Math.max(n[0],e[0]),n[1]=Math.max(n[1],e[1])}))})),[t[0],t[1],n[0],n[1]]))}))},Y=function(e,t){var n=b()(t).features[0];return 0!==p()(e,n).features.length},H=function(e){var t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},K=function(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r=Object(f.isArray)(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};var i=[];for(var a in r)if(r.hasOwnProperty(a)){var u=M.reproject(r[a],t,n,o);if(!u)return null;var c=u.x,l=u.y;i.push(c),i.push(l)}return i},Q=function(e,t){return"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e},ee=function(e){return"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e]},te=function(e){return-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e},ne=function(e,t){var n="EPSG:900913"===e?"EPSG:3857":e;return t&&!t[n]?M.getCompatibleSRS(n,t):n},re=function(e,t){return t[M.getCompatibleSRS(e,t)]},oe=function(){var e={};for(var t in a.a.defs)a.a.defs.hasOwnProperty(t)&&(e[t]={label:_[t]||t});return e},ie=function(e,t,n,r){var o=Object.keys(e).reduce((function(n,r){return s()({},-1===t.indexOf(r)?n:O(O({},n),{},E({},r,e[r])))}),{}),i=r.map((function(e){return e.code})),a=Object.keys(n).reduce((function(e,t){return s()({},-1===i.indexOf(t)?e:O(O({},e),{},E({},t,n[t])))}),{});return s()({},o,a)},ae=function(e,t,n){var r=M.reproject(e,n,"EPSG:4326"),o=M.reproject(t,n,"EPSG:4326"),i=r.x*Math.PI/180,a=r.y*Math.PI/180,u=o.x*Math.PI/180,c=o.y*Math.PI/180,l=u-i,s=Math.sin(l)*Math.cos(c),f=Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(l);return(180*Math.atan2(s,f)/Math.PI+360)%360},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(N).indexOf(t)?N[t](e):0},ce=function(e,t){var n=e.slice();return t[0]<e[0]&&(n[0]=t[0]),t[2]>e[2]&&(n[2]=t[2]),t[1]<e[1]&&(n[1]=t[1]),t[3]>e[3]&&(n[3]=t[3]),n},le=function(e){var t=this,n=[1/0,1/0,-1/0,-1/0],r=function(e,n){var r=M.getGeoJSONExtent(n);return t.isValidExtent(r)?t.extendExtent(r,e):r};if(e.coordinates){if("Point"===e.type){var o=e.coordinates;n[0]=o[0]-.01*o[0],n[1]=o[1]-.01*o[1],n[2]=o[0]+.01*o[0],n[3]=o[1]+.01*o[1]}return Object(f.chunk)(Object(f.flattenDeep)(e.coordinates),2).reduce((function(e,t){return[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]}),n)}if("GeometryCollection"===e.type)return e.geometries.reduce(r,n);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(r,n);if("Feature"===e.type&&e.geometry)return M.getGeoJSONExtent(e.geometry)}return n},se=function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},fe=function(e,t,n,r){var o,i,a,u=Math.PI*(1/n-.5);r&&(u+=r/180*Math.PI);for(var c=[[]],l=0;l<n;l++)o=u+2*l*Math.PI/n,i=e.x+t*Math.cos(o),a=e.y+t*Math.sin(o),c[0].push([i,a]);return c[0].push(c[0][0]),c},de=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},n=[],r=0;r<e.length-1;++r){var o=e[r],i=e[r+1],a=h()(o),u=h()(i);if(o[0]!==i[0]||o[1]!==i[1]){var c=Object(y.a)(a,u,t);n=[].concat(P(n),P(c.geometry.coordinates))}}return n},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[Object(f.head)(e),Object(f.last)(e)]:e.length>t?[Object(f.head)(e)].concat(M.transformArcsToLine(Object(f.slice)(e,t))):[]},me=function(e){var t=e.coordinates;switch(e.type){case"Polygon":return t.map((function(e){return e.map((function(e){return e.reverse()}))}));case"LineString":return t.map((function(e){return e.reverse()}));case"Point":return t.reverse();default:return[]}},be=function(e){return 1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((function(e){return e.geometry}))}},ye=function(e,t){if(Object(f.head)(k.filter((function(e){return e===t})))){var n=V(e,t),r=n.extent,o=n.isIDL,i=(o?r:[r]).map((function(e){var t=[e[0],e[1]],n=[e[2],e[3]];return[[t,[t[0],n[1]],n,[n[0],t[1]],t]]}));if(o){var a=r[1][0]+(Math.abs(r[0][0]-r[0][2])+Math.abs(r[1][0]-r[1][2]))/2;return{type:"MultiPolygon",radius:0,projection:t,coordinates:i,extent:r,center:[a=a>180?a-360:a,(r[0][1]+r[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:i[0],extent:r,center:[(r[0]+r[2])/2,(r[1]+r[3])/2]}}var u=[e.minx,e.miny,e.maxx,e.maxy],c=[u[0],u[1]],l=[u[2],u[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[c,[c[0],l[1]],l,[l[0],c[1]],c]],extent:u,center:[(u[0]+u[2])/2,(u[1]+u[3])/2]}},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bounds,n=e.crs,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!t||!n)return null;var o=M.getViewportGeometry(t,n),i=o.extent;if(4===i.length)return M.reprojectBbox(i,n,r);var a=i.map((function(e){return e[2]-e[0]})),u=w(a,2),c=u[0],l=u[1];return c>l?M.reprojectBbox(i[0],n,r):M.reprojectBbox(i[1],n,r)},he=function(e,t){var n=2===e.split(":").length?e.split(":")[1]:"3857";return c.a.get(t||T(n),null,{timeout:2e3})},ve=function(e){var t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e,n=t&&Object(f.last)(t.split(":"));return"WGS 1984"===n||"WGS84"===n?"EPSG:4326":n?"EPSG:"+n:null},xe=function(e){var t=e.split(" "),n=parseFloat(t[0]),r=parseFloat(t[1]);return!isNaN(n)&&!isNaN(r)&&{x:n,y:r}||null},Se=function(e,t){var n=t||"EPSG:3857",r=e&&Object(f.isArray)(e)&&Object(f.head)(e.filter((function(e){return e&&e.$&&e.$.SRS===n&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny})).map((function(e){return e&&e.$&&M.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],n,"EPSG:4326")})));return Object(f.isArray)(r)&&{minx:r[0],miny:r[1],maxx:r[2],maxy:r[3]}||null},je=function(e){return!!a.a.defs(e)},Oe=function(e){var t=e.lng,n=void 0===t?1:t,r=e.lat;return{lat:void 0===r?1:r,lng:M.normalizeLng(n)}},Ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=M.getNormalizedLatLon(e),i=z([o.lng,o.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;var a=M.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),u=O({left:0,right:0,top:0,bottom:0},n),c={minx:a[0]+u.left*r,miny:a[1]+u.bottom*r,maxx:a[2]-u.right*r,maxy:a[3]-u.top*r},l=M.getViewportGeometry(c,t.projection),s=4===l.extent.length?[P(l.extent)]:P(l.extent);return Object(f.head)(s.map((function(e){return i.x>=e[0]&&i.y>=e[1]&&i.x<=e[2]&&i.y<=e[3]})).filter((function(e){return e})))||!1},Pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=M.getNormalizedLatLon(e),i=z([o.lng,o.lat],"EPSG:4326",t.projection),a=O({left:0,right:0,top:0,bottom:0},n),u={width:(t.size.width-a.right-a.left)*r,height:(t.size.height-a.top-a.bottom)*r},c={minx:i.x-u.width/2-a.left*r,miny:i.y-u.height/2-a.bottom*r,maxx:i.x+u.width/2+a.right*r,maxy:i.y+u.height/2+a.top*r},l=M.getViewportGeometry(c,t.projection);if(4===l.extent.length)return{pos:z([l.extent[0]+t.size.width/2*r,l.extent[1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(l.extent[0][2]-l.extent[0][0])>Math.abs(l.extent[1][2]-l.extent[1][0])){var s=z([l.extent[0][2]-t.size.width/2*r,l.extent[0][3]-t.size.height/2*r],t.projection,"EPSG:4326"),f=O(O({},s),{},{x:s.x+(o.lng>s.x?360:0)});return{pos:f,zoom:t.zoom,crs:"EPSG:4326"}}return{pos:z([l.extent[1][0]+t.size.width/2*r,l.extent[1][1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,i=Object(f.isArray)(n)?n:[n.x,n.y];if(Object(f.isNumber)(i[0])&&!isNaN(i[0])&&Object(f.isNumber)(i[1])&&!isNaN(i[1])&&Object(f.isNumber)(t.x)&&!isNaN(t.x)&&Object(f.isNumber)(t.y)&&!isNaN(t.y)){var a=Object(f.isFunction)(e)?e([t.x,t.y>=r?t.y-r:t.y+r]):null,u=a&&(Object(f.isArray)(a)?a:[a.x,a.y]);return Object(f.isArray)(u)?Math.sqrt((i[0]-u[0])*(i[0]-u[0])+(i[1]-u[1])*(i[1]-u[1])):o}return o},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roundingBehaviour,n=void 0===t?"round":t,r=e.value,o=void 0===r?0:r,i=e.maximumFractionDigits,a=void 0===i?0:i;return 0===a&&Math[n]?Math[n](o):o},Ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(f.isArray)(e)?{x:e[0],y:e[1]}:e,o=Object(f.isArray)(t)?{x:t[0],y:t[1]}:t,i={x:.5*(r.x+o.x),y:.5*(r.y+o.y)};return n?[i.x,i.y]:i},Me=function(e){return Object(f.isObject)(e)&&Object(f.isNumber)(e.x)&&Object(f.isNumber)(e.y)?[e.x,e.y]:e},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return Object(S.a)(D(t),h()([e.lng,e.lat]))},Ne=function(e,t){return Object(x.a)(e,t)||Object(S.a)(e,t)||Object(S.a)(t,e)},Ae=function(e){if(e){var t=e.split(":");if(!("urn"!==t[0]||"ogc"!==t[1]&&"x-ogc"!==t[1]||"def"!==t[2]||"crs"!==t[3]||!t[4]&&!t[6])){var n=t[4],r=t[6];return n?"".concat(n,":").concat(r):r}}return null},Te=function(e){if(!e||"EPSG:"!==e.slice(0,5))return null;var t=e.slice(5),n=parseInt(t,10);if(n>=1024&&n<=32767)return e;var r=t.replace(" ","").replace(":","").toLowerCase(),o=$[r];return o>=1024&&o<=32767?"EPSG:".concat(o):null},Le=function(e,t){var n=[e[0],e[1]],r=[t[0],t[1]];if(n[1]>r[1]){var o=n;n=r,r=o}if(n[0]>r[0]){var i=n.slice(),a=r.slice();n=[a[0],i[1]],r=[i[0],a[1]]}return[n[0],n[1],r[0],r[1]]};M={setCrsLabels:J,getUnits:W,reproject:z,getProjectedBBox:Z,createBBox:q,reprojectGeoJson:X,lineIntersectPolygon:Y,normalizePoint:F,normalizeLng:H,reprojectBbox:K,getCompatibleSRS:Q,getEquivalentSRS:ee,getEPSGCode:te,normalizeSRS:ne,isAllowedSRS:re,getAvailableCRS:oe,filterCRSList:ie,calculateAzimuth:ae,calculateDistance:ue,FORMULAS:N,extendExtent:ce,getGeoJSONExtent:le,isValidExtent:se,calculateCircleCoordinates:fe,transformLineToArcs:de,transformArcsToLine:pe,coordsOLtoLeaflet:me,mergeToPolyGeom:be,getViewportGeometry:ye,getProjUrl:T,getExtentFromViewport:ge,fetchProjRemotely:he,parseURN:ve,determineCrs:R,parseString:xe,getWMSBoundingBox:Se,isSRSAllowed:je,getNormalizedLatLon:Oe,isInsideVisibleArea:Ee,centerToVisibleArea:Pe,calculateCircleRadiusFromPixel:we,roundCoord:Ge,midpoint:Ce,pointObjectToArray:Me,getExtentFromNormalized:V,getPolygonFromExtent:D,isPointInsideExtent:Ie,isBboxCompatible:Ne,extractCrsFromURN:Ae,crsCodeTable:$,makeNumericEPSG:Te,makeBboxFromOWS:Le},t.default=M},"./js/plugins/Share.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),u=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/reselect/es/index.js"),l=n("./MapStore2/web/client/utils/PluginsUtils.js"),s=n("./MapStore2/web/client/actions/controls.js"),f=n("./MapStore2/web/client/components/I18N/Message.jsx"),d=n("./node_modules/react-bootstrap/es/index.js"),p=n("./MapStore2/web/client/reducers/controls.js"),m=n("./node_modules/react-copy-to-clipboard/lib/index.js"),b=n.n(m),y=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),g=n.n(y)()(b.a),h=function(e){var t=e.shareUrl,n=void 0===t?"":t,r=e.copied,i=void 0!==r&&r,a=e.onCopy,u=void 0===a?function(){}:a,c=e.onMouseLeave,l=void 0===c?function(){}:c;return o.a.createElement(g,{text:n,tooltipId:i?"share.msgCopiedUrl":"share.msgToCopyUrl",tooltipPosition:"bottom",key:i.toString(),onCopy:function(){return u(n)}},o.a.createElement(d.Button,{bsStyle:"primary",onMouseLeave:function(){return l()}},o.a.createElement(d.Glyphicon,{glyph:"copy"})))},v=n("./node_modules/url/url.js"),x=n.n(v);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,n,r,i=P(a);function a(){var e;j(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return M(G(e=i.call.apply(i,[this].concat(n))),"state",{copied:!1,forceDrawer:!1}),M(G(e),"renderTools",(function(){return e.props.showTOCToggle?o.a.createElement(d.Checkbox,{checked:e.state.forceDrawer,onChange:function(){return e.setState({forceDrawer:!e.state.forceDrawer})}},o.a.createElement(f.default,{msgId:"share.forceDrawer"})):null})),M(G(e),"generateUrl",(function(){var t=x.a.parse(e.props.shareUrl,!0);return e.state.forceDrawer&&(t.query.forceDrawer=!0),x.a.format(t)})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t='<iframe style="border: none;" height="400" width="600" src="'+this.generateUrl(this.props.shareUrl)+'"></iframe>';return o.a.createElement("div",{className:"input-link"},o.a.createElement("div",{className:"input-link-head"},o.a.createElement("h4",null,o.a.createElement(f.default,{msgId:"share.embeddedLinkTitle"})),o.a.createElement(h,{copied:this.state.copied,shareUrl:t,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),o.a.createElement("div",{className:"input-link-tools"},this.renderTools()),o.a.createElement("pre",null,o.a.createElement("code",null,t)))}}])&&O(t.prototype,n),r&&O(t,r),a}(o.a.Component);M(I,"propTypes",{shareUrl:a.a.string,showTOCToggle:a.a.bool}),M(I,"defaultProps",{showTOCToggle:!0,shareUrl:""});var N=I;function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var o=z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(a,e);var t,n,r,i=_(a);function a(){var e;T(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(U(e=i.call.apply(i,[this].concat(n))),"state",{copied:!1}),e}return t=a,(n=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"input-link"},o.a.createElement("div",{className:"input-link-head"},o.a.createElement("h4",null,o.a.createElement(f.default,{msgId:"share.directLinkTitle"})),o.a.createElement(h,{copied:this.state.copied,shareUrl:this.props.shareUrl,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),o.a.createElement("pre",{style:{padding:0}},o.a.createElement(d.FormControl,{readOnly:!0,type:"text",value:this.props.shareUrl,onFocus:function(e){return e.target.select()}})))}}])&&L(t.prototype,n),r&&L(t,r),a}(o.a.Component);k(B,"propTypes",{shareUrl:a.a.string});var D=B,V=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),$=n("./MapStore2/web/client/selectors/map.js");function J(e){var t=e.resourceId,n=e.pathTemplate,r=e.enabled,i=e.onClose,a=function(e){var t=e.resourceId,n=e.pathTemplate,r=x.a.parse(location.href),o=r.host,i=r.protocol,a=n.replace(/\{id\}/g,t);return x.a.format({host:o,protocol:i,pathname:a})}({resourceId:t,pathTemplate:n});return o.a.createElement(V.default,{modalClassName:"gn-share-modal",title:o.a.createElement(f.default,{msgId:"share.title"}),show:r,fitContent:!0,clickOutEnabled:!1,onClose:function(){return i()}},o.a.createElement(D,{shareUrl:a}),o.a.createElement(N,{showTOCToggle:!1,shareUrl:a}))}J.propTypes={resourceId:a.a.oneOfType([a.a.number,a.a.string]),pathTemplate:a.a.string,enabled:a.a.bool,onClose:a.a.func},J.defaultProps={resourceId:null,pathTemplate:"/apps/{id}/embed",enabled:!1,onClose:function(){}};var W=Object(u.connect)(Object(c.createSelector)([function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.share)||void 0===n?void 0:n.enabled},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id},$.mapInfoSelector],(function(e,t,n){return{enabled:e,resourceId:t||(null==n?void 0:n.id)}})),{onClose:s.toggleControl.bind(null,"share",null)})(J);t.default=Object(l.createPlugin)("Share",{component:W,containers:{BurgerMenu:{name:"share",position:1e3,text:o.a.createElement(f.default,{msgId:"share.title"}),icon:o.a.createElement(d.Glyphicon,{glyph:"share-alt"}),action:s.toggleControl.bind(null,"share",null),selector:Object(c.createSelector)((function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}),$.mapInfoSelector,(function(e,t,n){return{style:e||!t&&!(null==n?void 0:n.id)?{display:"none"}:{}}}))}},epics:{},reducers:{controls:p.default}})}}]);