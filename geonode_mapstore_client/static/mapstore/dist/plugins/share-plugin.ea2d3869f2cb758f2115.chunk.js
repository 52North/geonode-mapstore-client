(window.webpackJsonp=window.webpackJsonp||[]).push([["plugins/share-plugin"],{"./MapStore2/web/client/reducers/controls.js":function(e,t,n){"use strict";n.r(t);var r=n("./MapStore2/web/client/actions/controls.js"),o=n("./MapStore2/node_modules/object-assign/index.js"),i=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.TOGGLE_CONTROL:var n=t.property||"enabled";return i()({},e,a({},t.control,i()({},e[t.control],a({},n,!(e[t.control]||{})[n]))));case r.SET_CONTROL_PROPERTY:return!0===t.toggle&&e[t.control]&&e[t.control][t.property]===t.value?i()({},e,a({},t.control,i()({},e[t.control],a({},t.property,void 0)))):i()({},e,a({},t.control,i()({},e[t.control],a({},t.property,t.value))));case r.SET_CONTROL_PROPERTIES:return i()({},e,a({},t.control,i()({},e[t.control],t.properties)));case r.RESET_CONTROLS:var o=Object.keys(e).filter((function(e){return-1===(t.skip||[]).indexOf(e)})),c=o.reduce((function(t,n){return i()(t,a({},n,i()({},e[n],!0===e[n].enabled?{enabled:!1}:{})))}),{});return i()({},e,c);default:return e}}},"./MapStore2/web/client/selectors/map.js":function(e,t,n){"use strict";n.r(t),n.d(t,"mapSelector",(function(){return c})),n.d(t,"projectionSelector",(function(){return u})),n.d(t,"stateMapIdSelector",(function(){return l})),n.d(t,"mapIdSelector",(function(){return s})),n.d(t,"mapInfoSelector",(function(){return f})),n.d(t,"mapInfoLoadingSelector",(function(){return p})),n.d(t,"mapSaveErrorsSelector",(function(){return d})),n.d(t,"mapInfoDetailsUriFromIdSelector",(function(){return m})),n.d(t,"mapInfoDetailsSettingsFromIdSelector",(function(){return y})),n.d(t,"mapIsEditableSelector",(function(){return g})),n.d(t,"projectionDefsSelector",(function(){return b})),n.d(t,"mapConstraintsSelector",(function(){return h})),n.d(t,"configuredRestrictedExtentSelector",(function(){return v})),n.d(t,"configuredExtentCrsSelector",(function(){return x})),n.d(t,"configuredMinZoomSelector",(function(){return S})),n.d(t,"mapLimitsSelector",(function(){return j})),n.d(t,"minZoomSelector",(function(){return E})),n.d(t,"resolutionsSelector",(function(){return P})),n.d(t,"scalesSelector",(function(){return w})),n.d(t,"mapVersionSelector",(function(){return O})),n.d(t,"mapNameSelector",(function(){return C})),n.d(t,"mouseMoveListenerSelector",(function(){return M})),n.d(t,"isMouseMoveActiveSelector",(function(){return G})),n.d(t,"isMouseMoveCoordinatesActiveSelector",(function(){return _})),n.d(t,"isMouseMoveIdentifyActiveSelector",(function(){return I}));var r=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),o=n.n(r),i=n("./node_modules/reselect/es/index.js"),a=n("./MapStore2/node_modules/lodash/lodash.js"),c=function(e){return e.map&&e.map.present||e.map||e.config&&e.config.map||null},u=Object(i.createSelector)([c],(function(e){return e&&e.projection})),l=function(e){return Object(a.get)(c(e),"mapId")&&parseInt(Object(a.get)(c(e),"mapId"),10)||null},s=function(e){return Object(a.get)(e,"mapInitialConfig.mapId")&&parseInt(Object(a.get)(e,"mapInitialConfig.mapId"),10)||l(e)},f=function(e){return Object(a.get)(c(e),"info")},p=function(e){return Object(a.get)(c(e),"loadingInfo",!1)},d=function(e){return Object(a.get)(c(e),"mapSaveErrors")},m=function(e){return Object(a.get)(f(e),"details")},y=function(e){return Object(a.get)(f(e),"detailsSettings")},g=function(e){var t=Object(a.get)(f(e),"canEdit");return void 0===t?Object(a.get)(e,"context.resource.canEdit"):t},b=function(e){return e.localConfig&&e.localConfig.projectionDefs||[]},h=function(e){return e.localConfig&&e.localConfig.mapConstraints||{}},v=function(e){return h(e).restrictedExtent},x=function(e){return h(e).crs},S=function(e){var t=h(e),n=u(e);return n&&Object(a.get)(t,'projectionsConstraints["'.concat(n,'"].minZoom'))||Object(a.get)(t,"minZoom")},j=function(e){return Object(a.get)(c(e),"limits")},E=function(e){return Object(a.get)(j(e),"minZoom")},P=function(e){return Object(a.get)(c(e),"resolutions")},w=Object(i.createSelector)([P,u],(function(e,t){if(e&&t){var n=o.a.getUnits(t);return e.map((function(e){return e*(100/2.54*96)*("degrees"===n?111194.87428468118:1)}))}return[]})),O=function(e){return e.map&&e.map.present&&e.map.present.version||1},C=function(e){return e.map&&e.map.present&&e.map.present.info&&e.map.present.info.name||""},M=function(e){return Object(a.get)(c(e),"eventListeners.mousemove",[])},G=function(e){return!!M(e).length},_=function(e){return M(e).includes("mouseposition")},I=function(e){return M(e).includes("identifyFloatingTool")}},"./MapStore2/web/client/utils/CoordinatesUtils.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=n("./node_modules/node-geo-distance/index.js"),f=n("./MapStore2/web/client/libs/proj4.js").default,p=f,d=n("./MapStore2/web/client/libs/ajax.js"),m=n("./MapStore2/node_modules/object-assign/index.js"),y=n("./MapStore2/node_modules/lodash/lodash.js"),g=y.isArray,b=y.isObject,h=y.isFunction,v=y.flattenDeep,x=y.chunk,S=y.cloneDeep,j=y.isNumber,E=y.slice,P=y.head,w=y.last,O=n("./node_modules/@turf/line-intersect/index.js"),C=n("./node_modules/@turf/polygon-to-linestring/index.js"),M=n("./node_modules/@turf/great-circle/main.es.js").default,G=n("./node_modules/turf-point/index.js"),_=n("./node_modules/@turf/bbox-polygon/main.es.js").default,I=n("./node_modules/@turf/boolean-overlap/main.es.js").default,T=n("./node_modules/@turf/boolean-contains/main.es.js").default,R={vincenty:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],o=e[n+1],i=c(r,2),a=i[0],u=i[1],l=c(o,2),f=l[0],p=l[1];t+=parseFloat(s.vincentySync({longitude:a,latitude:u},{longitude:f,latitude:p}))}return t},haversine:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],o=e[n+1],i=c(r,2),a=i[0],u=i[1],l=c(o,2),f=l[0],p=l[1];t+=parseFloat(s.haversineSync({longitude:a,latitude:u},{longitude:f,latitude:p}))}return t}};function D(e,t){return(n=e).length>=2&&"number"==typeof n[0]&&"number"==typeof n[1]?t(e):e.map((function(e){return D(e,t)}));var n}var N=function(e){return"http://spatialreference.org/ref/epsg/".concat(e,"/proj4/")};function A(e,t,n){if(null===e)return e;var r=S(e);return"Feature"===e.type?r.geometry=A(e.geometry,t,n):"FeatureCollection"===e.type?r.features=r.features.map((function(e){return A(e,t,n)})):"GeometryCollection"===e.type?r.geometries=r.geometries.map((function(e){return A(e,t,n)})):t&&t(r),n&&n(r),r}function L(e){return"string"==typeof e||e instanceof String?f.defs(e)?new f.Proj(e):null:e}var k={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"},U=function(e){return{x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}},F=function(e){var t=e;return j(e.x)||(t.x=parseFloat(e.x)),j(e.y)||(t.y=parseFloat(e.y)),t},z=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t&&f.defs(t)?new f.Proj(t):null,i=n&&f.defs(n)?new f.Proj(n):null;if(o&&i){var a=g(e)?f.toPoint(e):f.toPoint([e.x,e.y]),c=m({},t===n?F(a):f.transform(o,i,F(a)),{srs:n});return r?U(c):c}return null},B=["EPSG:900913","EPSG:4326","EPSG:3857"],V=function(e,t,n){return"EPSG:4326"===t?e:n?e.map((function(e){return[z([e[0],e[1]],"EPSG:4326",t),z([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(a(e),[t.x,t.y])}),[])})):[z([e[0],e[1]],"EPSG:4326",t),z([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(a(e),[t.x,t.y])}),[])},$=function(e){return e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:_(e):null},J=function(e,t){var n=function(e,t){var n="EPSG:4326"!==t?[z([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),z([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce((function(e,t){return[].concat(a(e),[t.x,t.y])}),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)],r=!1;return"EPSG:4326"===t?r=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(r=Math.abs(e.maxx-e.minx)>=40075016.68557849),r?[0,n[1],360,n[3]]:[(n[0]+180)%360,n[1],(n[2]+180)%360,n[3]].map((function(e,t){return t%2==0&&e<0?360+e:e}))}(e,t),r=n[2]<n[0];return r?{extent:V([[-180,n[1],n[2]-180,n[3]],[n[0]-180,n[1],180,n[3]]],t,r),isIDL:r}:{extent:V([n[0]-180,n[1],n[2]-180,n[3]],t,r),isIDL:r}},W={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},X={setCrsLabels:function(e){k=m({},k,e)},getUnits:function(e){return new f.Proj(e).units||"degrees"},reproject:z,getProjectedBBox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=t*r[0]/2,i=t*r[1]/2,a=Math.cos(n),c=Math.sin(n),u=o*a,l=o*c,s=i*a,f=i*c,p=e.x,d=e.y,m=p-u+f,y=p-u-f,g=p+u-f,b=p+u+f,h=d-l-s,v=d-l+s,x=d+l+s,S=d+l-s,j=X.createBBox(Math.min(m,y,g,b),Math.min(h,v,x,S),Math.max(m,y,g,b),Math.max(h,v,x,S));return j},createBBox:function(e,t,n,r){return{minx:e,miny:t,maxx:n,maxy:r}},reprojectGeoJson:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326",r=t,o=n;"string"==typeof r&&(r=L(r)),"string"==typeof o&&(o=L(o));var i=p(r,o);return A(e,(function(e){e.crs&&delete e.crs,e.coordinates=D(e.coordinates,(function(e){var t=c(e,2),n=t[0],r=t[1];return i.forward([n,r])}))}),(function(e){var t,n;e.bbox&&(e.bbox=(t=[Number.MAX_VALUE,Number.MAX_VALUE],n=[-Number.MAX_VALUE,-Number.MAX_VALUE],A(e,(function(e){D(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),n[0]=Math.max(n[0],e[0]),n[1]=Math.max(n[1],e[1])}))})),[t[0],t[1],n[0],n[1]]))}))},lineIntersectPolygon:function(e,t){var n=C(t).features[0];return 0!==O(e,n).features.length},normalizePoint:U,normalizeLng:function(e){var t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},reprojectBbox:function(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r=g(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};var i=[];for(var a in r)if(r.hasOwnProperty(a)){var c=X.reproject(r[a],t,n,o);if(!c)return null;var u=c.x,l=c.y;i.push(u),i.push(l)}return i},getCompatibleSRS:function(e,t){return"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e},getEquivalentSRS:function(e){return"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e]},getEPSGCode:function(e){return-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e},normalizeSRS:function(e,t){var n="EPSG:900913"===e?"EPSG:3857":e;return t&&!t[n]?X.getCompatibleSRS(n,t):n},isAllowedSRS:function(e,t){return t[X.getCompatibleSRS(e,t)]},getAvailableCRS:function(){var e={};for(var t in f.defs)f.defs.hasOwnProperty(t)&&(e[t]={label:k[t]||t});return e},filterCRSList:function(e,t,n,r){var a=Object.keys(e).reduce((function(n,r){return m({},-1===t.indexOf(r)?n:o(o({},n),{},i({},r,e[r])))}),{}),c=r.map((function(e){return e.code})),u=Object.keys(n).reduce((function(e,t){return m({},-1===c.indexOf(t)?e:o(o({},e),{},i({},t,n[t])))}),{});return m({},a,u)},calculateAzimuth:function(e,t,n){var r=X.reproject(e,n,"EPSG:4326"),o=X.reproject(t,n,"EPSG:4326"),i=r.x*Math.PI/180,a=r.y*Math.PI/180,c=o.x*Math.PI/180,u=o.y*Math.PI/180,l=c-i,s=Math.sin(l)*Math.cos(u),f=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(l);return(180*Math.atan2(s,f)/Math.PI+360)%360},calculateDistance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(R).indexOf(t)?R[t](e):0},FORMULAS:R,extendExtent:function(e,t){var n=e.slice();return t[0]<e[0]&&(n[0]=t[0]),t[2]>e[2]&&(n[2]=t[2]),t[1]<e[1]&&(n[1]=t[1]),t[3]>e[3]&&(n[3]=t[3]),n},getGeoJSONExtent:function(e){var t=this,n=[1/0,1/0,-1/0,-1/0],r=function(e,n){var r=X.getGeoJSONExtent(n);return t.isValidExtent(r)?t.extendExtent(r,e):r};if(e.coordinates){if("Point"===e.type){var o=e.coordinates;n[0]=o[0]-.01*o[0],n[1]=o[1]-.01*o[1],n[2]=o[0]+.01*o[0],n[3]=o[1]+.01*o[1]}return x(v(e.coordinates),2).reduce((function(e,t){return[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]}),n)}if("GeometryCollection"===e.type)return e.geometries.reduce(r,n);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(r,n);if("Feature"===e.type&&e.geometry)return X.getGeoJSONExtent(e.geometry)}return n},isValidExtent:function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},calculateCircleCoordinates:function(e,t,n,r){var o,i,a,c=Math.PI*(1/n-.5);r&&(c+=r/180*Math.PI);for(var u=[[]],l=0;l<n;l++)o=c+2*l*Math.PI/n,i=e.x+t*Math.cos(o),a=e.y+t*Math.sin(o),u[0].push([i,a]);return u[0].push(u[0][0]),u},transformLineToArcs:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},n=[],r=0;r<e.length-1;++r){var o=e[r],i=e[r+1],c=G(o),u=G(i);if(o[0]!==i[0]||o[1]!==i[1]){var l=M(c,u,t);n=[].concat(a(n),a(l.geometry.coordinates))}}return n},transformArcsToLine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[P(e),w(e)]:e.length>t?[P(e)].concat(X.transformArcsToLine(E(e,t))):[]},coordsOLtoLeaflet:function(e){var t=e.coordinates;switch(e.type){case"Polygon":return t.map((function(e){return e.map((function(e){return e.reverse()}))}));case"LineString":return t.map((function(e){return e.reverse()}));case"Point":return t.reverse();default:return[]}},mergeToPolyGeom:function(e){return 1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((function(e){return e.geometry}))}},getViewportGeometry:function(e,t){if(P(B.filter((function(e){return e===t})))){var n=J(e,t),r=n.extent,o=n.isIDL,i=(o?r:[r]).map((function(e){var t=[e[0],e[1]],n=[e[2],e[3]];return[[t,[t[0],n[1]],n,[n[0],t[1]],t]]}));if(o){var a=r[1][0]+(Math.abs(r[0][0]-r[0][2])+Math.abs(r[1][0]-r[1][2]))/2;return{type:"MultiPolygon",radius:0,projection:t,coordinates:i,extent:r,center:[a=a>180?a-360:a,(r[0][1]+r[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:i[0],extent:r,center:[(r[0]+r[2])/2,(r[1]+r[3])/2]}}var c=[e.minx,e.miny,e.maxx,e.maxy],u=[c[0],c[1]],l=[c[2],c[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[u,[u[0],l[1]],l,[l[0],u[1]],u]],extent:c,center:[(c[0]+c[2])/2,(c[1]+c[3])/2]}},getProjUrl:N,getExtentFromViewport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bounds,n=e.crs,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!t||!n)return null;var o=X.getViewportGeometry(t,n),i=o.extent;if(4===i.length)return X.reprojectBbox(i,n,r);var a=i.map((function(e){return e[2]-e[0]})),u=c(a,2),l=u[0],s=u[1];return l>s?X.reprojectBbox(i[0],n,r):X.reprojectBbox(i[1],n,r)},fetchProjRemotely:function(e,t){var n=2===e.split(":").length?e.split(":")[1]:"3857";return d.get(t||N(n),null,{timeout:2e3})},parseURN:function(e){var t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e,n=t&&w(t.split(":"));return"WGS 1984"===n||"WGS84"===n?"EPSG:4326":n?"EPSG:"+n:null},determineCrs:L,parseString:function(e){var t=e.split(" "),n=parseFloat(t[0]),r=parseFloat(t[1]);return!isNaN(n)&&!isNaN(r)&&{x:n,y:r}||null},getWMSBoundingBox:function(e,t){var n=t||"EPSG:3857",r=e&&g(e)&&P(e.filter((function(e){return e&&e.$&&e.$.SRS===n&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny})).map((function(e){return e&&e.$&&X.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],n,"EPSG:4326")})));return g(r)&&{minx:r[0],miny:r[1],maxx:r[2],maxy:r[3]}||null},isSRSAllowed:function(e){return!!f.defs(e)},getNormalizedLatLon:function(e){var t=e.lng,n=void 0===t?1:t,r=e.lat;return{lat:void 0===r?1:r,lng:X.normalizeLng(n)}},isInsideVisibleArea:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=X.getNormalizedLatLon(e),c=z([i.lng,i.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;var u=X.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),l=o({left:0,right:0,top:0,bottom:0},n),s={minx:u[0]+l.left*r,miny:u[1]+l.bottom*r,maxx:u[2]-l.right*r,maxy:u[3]-l.top*r},f=X.getViewportGeometry(s,t.projection),p=4===f.extent.length?[a(f.extent)]:a(f.extent);return P(p.map((function(e){return c.x>=e[0]&&c.y>=e[1]&&c.x<=e[2]&&c.y<=e[3]})).filter((function(e){return e})))||!1},centerToVisibleArea:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=X.getNormalizedLatLon(e),a=z([i.lng,i.lat],"EPSG:4326",t.projection),c=o({left:0,right:0,top:0,bottom:0},n),u={width:(t.size.width-c.right-c.left)*r,height:(t.size.height-c.top-c.bottom)*r},l={minx:a.x-u.width/2-c.left*r,miny:a.y-u.height/2-c.bottom*r,maxx:a.x+u.width/2+c.right*r,maxy:a.y+u.height/2+c.top*r},s=X.getViewportGeometry(l,t.projection);if(4===s.extent.length)return{pos:z([s.extent[0]+t.size.width/2*r,s.extent[1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(s.extent[0][2]-s.extent[0][0])>Math.abs(s.extent[1][2]-s.extent[1][0])){var f=z([s.extent[0][2]-t.size.width/2*r,s.extent[0][3]-t.size.height/2*r],t.projection,"EPSG:4326"),p=o(o({},f),{},{x:f.x+(i.lng>f.x?360:0)});return{pos:p,zoom:t.zoom,crs:"EPSG:4326"}}return{pos:z([s.extent[1][0]+t.size.width/2*r,s.extent[1][1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},calculateCircleRadiusFromPixel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,i=g(n)?n:[n.x,n.y];if(j(i[0])&&!isNaN(i[0])&&j(i[1])&&!isNaN(i[1])&&j(t.x)&&!isNaN(t.x)&&j(t.y)&&!isNaN(t.y)){var a=h(e)?e([t.x,t.y>=r?t.y-r:t.y+r]):null,c=a&&(g(a)?a:[a.x,a.y]);return g(c)?Math.sqrt((i[0]-c[0])*(i[0]-c[0])+(i[1]-c[1])*(i[1]-c[1])):o}return o},roundCoord:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roundingBehaviour,n=void 0===t?"round":t,r=e.value,o=void 0===r?0:r,i=e.maximumFractionDigits,a=void 0===i?0:i;return 0===a&&Math[n]?Math[n](o):o},midpoint:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(e)?{x:e[0],y:e[1]}:e,o=g(t)?{x:t[0],y:t[1]}:t,i={x:.5*(r.x+o.x),y:.5*(r.y+o.y)};return n?[i.x,i.y]:i},pointObjectToArray:function(e){return b(e)&&j(e.x)&&j(e.y)?[e.x,e.y]:e},getExtentFromNormalized:J,getPolygonFromExtent:$,isPointInsideExtent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return T($(t),G([e.lng,e.lat]))},isBboxCompatible:function(e,t){return I(e,t)||T(e,t)||T(t,e)},extractCrsFromURN:function(e){if(e){var t=e.split(":");if(!("urn"!==t[0]||"ogc"!==t[1]&&"x-ogc"!==t[1]||"def"!==t[2]||"crs"!==t[3]||!t[4]&&!t[6])){var n=t[4],r=t[6];return n?"".concat(n,":").concat(r):r}}return null},crsCodeTable:W,makeNumericEPSG:function(e){if(!e||"EPSG:"!==e.slice(0,5))return null;var t=e.slice(5),n=parseInt(t,10);if(n>=1024&&n<=32767)return e;var r=t.replace(" ","").replace(":","").toLowerCase(),o=W[r];return o>=1024&&o<=32767?"EPSG:".concat(o):null},makeBboxFromOWS:function(e,t){var n=[e[0],e[1]],r=[t[0],t[1]];if(n[1]>r[1]){var o=n;n=r,r=o}if(n[0]>r[0]){var i=n.slice(),a=r.slice();n=[a[0],i[1]],r=[i[0],a[1]]}return[n[0],n[1],r[0],r[1]]}};e.exports=X},"./js/plugins/Share.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/prop-types/index.js"),a=n.n(i),c=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/reselect/es/index.js"),l=n("./MapStore2/web/client/utils/PluginsUtils.js"),s=n("./MapStore2/web/client/actions/controls.js"),f=n("./MapStore2/web/client/components/I18N/Message.jsx"),p=n("./node_modules/react-bootstrap/es/index.js"),d=n("./MapStore2/web/client/reducers/controls.js"),m=n("./node_modules/react-copy-to-clipboard/lib/index.js"),y=n.n(m),g=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx"),b=n.n(g)()(y.a),h=function(e){var t=e.shareUrl,n=void 0===t?"":t,r=e.copied,i=void 0!==r&&r,a=e.onCopy,c=void 0===a?function(){}:a,u=e.onMouseLeave,l=void 0===u?function(){}:u;return o.a.createElement(b,{text:n,tooltipId:i?"share.msgCopiedUrl":"share.msgToCopyUrl",tooltipPosition:"bottom",key:i.toString(),onCopy:function(){return c(n)}},o.a.createElement(p.Button,{bsStyle:"primary",onMouseLeave:function(){return l()}},o.a.createElement(p.Glyphicon,{glyph:"copy"})))},v=n("./node_modules/url/url.js"),x=n.n(v);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,i=w(a);function a(){var e;j(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return G(C(e=i.call.apply(i,[this].concat(n))),"state",{copied:!1,forceDrawer:!1}),G(C(e),"renderTools",(function(){return e.props.showTOCToggle?o.a.createElement(p.Checkbox,{checked:e.state.forceDrawer,onChange:function(){return e.setState({forceDrawer:!e.state.forceDrawer})}},o.a.createElement(f.default,{msgId:"share.forceDrawer"})):null})),G(C(e),"generateUrl",(function(){var t=x.a.parse(e.props.shareUrl,!0);return e.state.forceDrawer&&(t.query.forceDrawer=!0),x.a.format(t)})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t='<iframe style="border: none;" height="400" width="600" src="'+this.generateUrl(this.props.shareUrl)+'"></iframe>';return o.a.createElement("div",{className:"input-link"},o.a.createElement("div",{className:"input-link-head"},o.a.createElement("h4",null,o.a.createElement(f.default,{msgId:"share.embeddedLinkTitle"})),o.a.createElement(h,{copied:this.state.copied,shareUrl:t,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),o.a.createElement("div",{className:"input-link-tools"},this.renderTools()),o.a.createElement("pre",null,o.a.createElement("code",null,t)))}}])&&E(t.prototype,n),r&&E(t,r),a}(o.a.Component);G(_,"propTypes",{shareUrl:a.a.string,showTOCToggle:a.a.bool}),G(_,"defaultProps",{showTOCToggle:!0,shareUrl:""});var I=_;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,e);var t,n,r,i=A(a);function a(){var e;R(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return F(k(e=i.call.apply(i,[this].concat(n))),"state",{copied:!1}),e}return t=a,(n=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"input-link"},o.a.createElement("div",{className:"input-link-head"},o.a.createElement("h4",null,o.a.createElement(f.default,{msgId:"share.directLinkTitle"})),o.a.createElement(h,{copied:this.state.copied,shareUrl:this.props.shareUrl,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),o.a.createElement("pre",{style:{padding:0}},o.a.createElement(p.FormControl,{readOnly:!0,type:"text",value:this.props.shareUrl,onFocus:function(e){return e.target.select()}})))}}])&&D(t.prototype,n),r&&D(t,r),a}(o.a.Component);F(z,"propTypes",{shareUrl:a.a.string});var B=z,V=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),$=n("./MapStore2/web/client/selectors/map.js");function J(e){var t=e.resourceId,n=e.pathTemplate,r=e.enabled,i=e.onClose,a=function(e){var t=e.resourceId,n=e.pathTemplate,r=x.a.parse(location.href),o=r.host,i=r.protocol,a=n.replace(/\{id\}/g,t);return x.a.format({host:o,protocol:i,pathname:a})}({resourceId:t,pathTemplate:n});return o.a.createElement(V.default,{modalClassName:"gn-share-modal",title:o.a.createElement(f.default,{msgId:"share.title"}),show:r,fitContent:!0,clickOutEnabled:!1,onClose:function(){return i()}},o.a.createElement(B,{shareUrl:a}),o.a.createElement(I,{showTOCToggle:!1,shareUrl:a}))}J.propTypes={resourceId:a.a.oneOfType([a.a.number,a.a.string]),pathTemplate:a.a.string,enabled:a.a.bool,onClose:a.a.func},J.defaultProps={resourceId:null,pathTemplate:"/apps/{id}/embed",enabled:!1,onClose:function(){}};var W=Object(c.connect)(Object(u.createSelector)([function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.share)||void 0===n?void 0:n.enabled},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id},$.mapInfoSelector],(function(e,t,n){return{enabled:e,resourceId:t||(null==n?void 0:n.id)}})),{onClose:s.toggleControl.bind(null,"share",null)})(J);t.default=Object(l.createPlugin)("Share",{component:W,containers:{BurgerMenu:{name:"share",position:1e3,text:o.a.createElement(f.default,{msgId:"share.title"}),icon:o.a.createElement(p.Glyphicon,{glyph:"share-alt"}),action:s.toggleControl.bind(null,"share",null),selector:Object(u.createSelector)((function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}),$.mapInfoSelector,(function(e,t,n){return{style:e||!t&&!(null==n?void 0:n.id)?{display:"none"}:{}}}))}},epics:{},reducers:{controls:d.default}})},"./node_modules/copy-to-clipboard/index.js":function(e,t,n){"use strict";var r=n("./node_modules/toggle-selection/index.js"),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,a,c,u,l,s=!1;t||(t={}),n=t.debug||!1;try{if(a=r(),c=document.createRange(),u=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=o[t.format]||o.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(l),c.selectNodeContents(l),u.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),s=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),l&&document.body.removeChild(l),a()}return s}},"./node_modules/react-copy-to-clipboard/lib/Component.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n("./node_modules/react/index.js")),a=c(n("./node_modules/copy-to-clipboard/index.js"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.CopyToClipboard=function(e){function t(){var e,n,r;u(this,t);for(var o=arguments.length,c=Array(o),s=0;s<o;s++)c[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.onClick=function(e){var t=r.props,n=t.text,o=t.onCopy,c=t.children,u=t.options,l=i.default.Children.only(c),s=(0,a.default)(n,u);o&&o(n,s),l&&l.props&&"function"==typeof l.props.onClick&&l.props.onClick(e)},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["text","onCopy","options","children"]),o=i.default.Children.only(t);return i.default.cloneElement(o,r({},n,{onClick:this.onClick}))}}]),t}(i.default.PureComponent)},"./node_modules/react-copy-to-clipboard/lib/index.js":function(e,t,n){"use strict";var r=n("./node_modules/react-copy-to-clipboard/lib/Component.js").CopyToClipboard;e.exports=r},"./node_modules/toggle-selection/index.js":function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}}}]);