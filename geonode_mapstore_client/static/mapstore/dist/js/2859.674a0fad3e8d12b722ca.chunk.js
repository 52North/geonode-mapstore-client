(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2859],{33528:(t,e,r)=>{"use strict";r.d(e,{gJ:()=>n,Oj:()=>o,jp:()=>i,CM:()=>a,DU:()=>u,aO:()=>c,v6:()=>l,K8:()=>f,IN:()=>s,zh:()=>p,AH:()=>b,Ub:()=>y,_9:()=>v,JB:()=>d,oh:()=>m,AY:()=>E,yi:()=>g,SW:()=>O,Hk:()=>S,iQ:()=>h,dY:()=>R,$:()=>w,_u:()=>T,gG:()=>A,DI:()=>P,dZ:()=>D,qw:()=>j,f$:()=>I,bZ:()=>U,$O:()=>_,sF:()=>F,Gk:()=>G,vO:()=>C,ut:()=>L,MK:()=>x,VV:()=>M,B8:()=>N,VM:()=>k,a3:()=>V,Xp:()=>Y,DA:()=>Z,sK:()=>B,yA:()=>H,r:()=>W,iB:()=>z,WB:()=>K,EH:()=>$,Yd:()=>Q,Hg:()=>J,Lz:()=>X,ye:()=>q,Jb:()=>tt,d:()=>et,fT:()=>rt,Ib:()=>nt,Pl:()=>ot,UB:()=>it,Uh:()=>at,QT:()=>ut,oL:()=>ct,Ap:()=>lt,KD:()=>ft,Z_:()=>st,Vw:()=>pt,sY:()=>bt,kA:()=>yt,gr:()=>vt,pX:()=>dt,F5:()=>mt,MO:()=>Et,dq:()=>gt,DY:()=>Ot,oO:()=>St,uF:()=>ht,a8:()=>Rt,Pv:()=>wt,an:()=>Tt,lg:()=>At,nY:()=>Pt,nG:()=>Dt,lx:()=>jt,$S:()=>It,gc:()=>Ut,Uz:()=>_t,fO:()=>Ft,$E:()=>Gt,cE:()=>Ct,JK:()=>Lt,YV:()=>xt,t9:()=>Mt,YG:()=>Nt,HT:()=>kt,MY:()=>Vt,ve:()=>Yt,hB:()=>Zt,Ox:()=>Bt,zd:()=>Ht,aT:()=>Wt,VH:()=>zt,Yb:()=>Kt,Jr:()=>$t,pP:()=>Qt,gL:()=>Jt});var n="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",i="FEATUREGRID:DESELECT_FEATURES",a="FEATUREGRID:CLEAR_SELECTION",u="FEATUREGRID:SET_SELECTION_OPTIONS",c="FEATUREGRID:TOGGLE_MODE",l="FEATUREGRID:TOGGLE_FEATURES_SELECTION",f="FEATUREGRID:FEATURES_MODIFIED",s="FEATUREGRID:NEW_FEATURE",p="FEATUREGRID:SAVE_CHANGES",b="FEATUREGRID:SAVING",y="FEATUREGRID:START_EDITING_FEATURE",v="FEATUREGRID:START_DRAWING_FEATURE",d="FEATUREGRID:DELETE_GEOMETRY",m="FEATUREGRID:DELETE_GEOMETRY_FEATURE",E="FEATUREGRID:SAVE_SUCCESS",g="FEATUREGRID:CLEAR_CHANGES",O="FEATUREGRID:SAVE_ERROR",S="FEATUREGRID:DELETE_SELECTED_FEATURES",h="SET_FEATURES",R="FEATUREGRID:SORT_BY",w="FEATUREGRID:SET_LAYER",T="QUERY:UPDATE_FILTER",A="FEATUREGRID:CHANGE_PAGE",P="FEATUREGRID:GEOMETRY_CHANGED",D="DOCK_SIZE_FEATURES",j="FEATUREGRID:TOGGLE_TOOL",I="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",U="ASK_CLOSE_FEATURE_GRID_CONFIRM",_="FEATUREGRID:OPEN_GRID",F="FEATUREGRID:CLOSE_GRID",G="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",C="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",L="FEATUREGRID:SET_PERMISSION",x="FEATUREGRID:DISABLE_TOOLBAR",M="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",N="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",k="FEATUREGRID:ADVANCED_SEARCH",V="FEATUREGRID:ZOOM_ALL",Y="FEATUREGRID:INIT_PLUGIN",Z="FEATUREGRID:SIZE_CHANGE",B="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",H="FEATUREGRID:HIDE_SYNC_POPOVER",W="FEATUREGRID:UPDATE_EDITORS_OPTIONS",z="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",K="FEATUREGRID:SET_SYNC_TOOL",$={EDIT:"EDIT",VIEW:"VIEW"},Q="FEATUREGRID:START_SYNC_WMS",J="FEATUREGRID:STOP_SYNC_WMS",X="STORE_ADVANCED_SEARCH_FILTER",q="LOAD_MORE_FEATURES",tt="FEATUREGRID:QUERY_RESULT",et="FEATUREGRID:SET_TIME_SYNC",rt="FEATUREGRID:SET_PAGINATION";function nt(){return{type:B}}function ot(){return{type:H}}function it(t,e){return{type:tt,features:t,pages:e}}function at(t){return{type:X,filterObj:t}}function ut(){return{type:Y,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function ct(){return{type:G}}function lt(){return{type:C}}function ft(t,e){return{type:o,features:t,append:e}}function st(t){return{type:n,options:t}}function pt(t){return{type:P,features:t}}function bt(){return{type:y}}function yt(){return{type:v}}function vt(t){return{type:i,features:t}}function dt(){return{type:d}}function mt(t){return{type:m,features:t}}function Et(){return{type:a}}function gt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.multiselect,r=t.showCheckbox;return{type:u,multiselect:e,showCheckbox:r}}function Ot(t,e){return{type:R,sortBy:t,sortOrder:e}}function St(t,e){return{type:A,page:t,size:e}}function ht(t){return{type:w,id:t}}function Rt(t){return{type:T,update:t,append:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}function wt(t,e){return{type:j,tool:t,value:e}}function Tt(t,e,r){return{type:I,name:t,key:e,value:r}}function At(){return{type:c,mode:$.EDIT}}function Pt(){return{type:c,mode:$.VIEW}}function Dt(t,e){return{type:f,features:t,updated:e}}function jt(t){return{type:s,features:t}}function It(){return{type:p}}function Ut(){return{type:E}}function _t(){return{type:S}}function Ft(){return{type:b}}function Gt(){return{type:g}}function Ct(){return{type:O}}function Lt(){return{type:U}}function xt(){return{type:F}}function Mt(){return{type:_}}function Nt(t){return{type:x,disabled:t}}function kt(t){return{type:L,permission:t}}function Vt(){return{type:k}}function Yt(){return{type:V}}function Zt(){return{type:Q}}function Bt(t,e){return{type:Z,size:t,dockProps:e}}var Ht=function(t){return{type:q,pages:t}},Wt=function(t){return{type:M,activated:t}},zt=function(t){return{type:N,deactivated:t}},Kt=function(t){return{type:et,value:t}},$t=function(t){return{type:rt,size:t}},Qt=function(t){return{type:z,updateFilterAction:t}},Jt=function(t){return{type:K,syncWmsFilter:t}}},64152:(t,e,r)=>{"use strict";r.d(e,{Z:()=>yt});var n={};r.r(n),r.d(n,{getRecords:()=>K,testService:()=>J,textSearch:()=>$,validate:()=>Q});var o={};r.r(o),r.d(o,{getRecords:()=>ut,parseUrl:()=>at,textSearch:()=>ct});var i=r(59551),a=r(67007),u=r(3475),c=r(37275),l=r(5055),f=r.n(l),s=r(75875),p=r.n(s),b=r(27361),y=r.n(b),v=r(84596),d=r.n(v),m=r(33044),E=r(93201);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===g(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var R={},w=function(t,e){return t===e||"EPSG:3857"===t&&"EPSG:900913"===e||"EPSG:900913"===t&&"EPSG:3857"===e},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=d()(y()(t,"TileMapService.TileMaps.TileMap",[])),a=o.projection,u=y()(o,"options.service.allSRS"),c=i.map((function(e){var r=e.$,n=void 0===r?{}:r;return S(S({},n),{},{href:(0,m.cleanAuthParamsFromURL)(n.href),identifier:(0,m.cleanAuthParamsFromURL)(n.href),format:(0,E.A)(n.href),tmsUrl:(0,m.cleanAuthParamsFromURL)(t.url)})})).filter((function(t){var e=t.srs;return!(a&&!u)||w(e,a)})).filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.title,r=void 0===e?"":e,o=t.srs,i=void 0===o?"":o;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:c.length,numberOfRecordsReturned:Math.min(r,c.length),nextRecord:e+Math.min(r,c.length)+1,records:c.filter((function(t,n){return n>=e-1&&n<e-1+r}))}},A=function(t){return t},P=function(t,e,r,n,o){var i=R[t];return i&&(new Date).getTime()<i.timestamp+1e3*(c.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(t){t(T(i.data,e,r,n,o))})):p().get(t).then((function(i){var a;return f().parseString(i.data,{explicitArray:!1},(function(e,r){a=S(S({},r),{},{url:t})})),R[t]={timestamp:(new Date).getTime(),data:a},T(a,e,r,n,o)}))},D=r(36882),j=r(49977),I=r.n(j),U=r(11847);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){C(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function C(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===_(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var L="custom",x=function(t,e,r,n,o){var i,a,u,c=y()(o,"options.service"),l=[];if(c.provider&&c.provider!==L){var f=(i=c.provider,Object.keys(null!==(a=null===D.Z||void 0===D.Z||null===(u=D.Z[i])||void 0===u?void 0:u.variants)&&void 0!==a?a:{}));0===f.length?l.push({provider:"".concat(c.provider),title:"".concat(c.provider)}):l=f.map((function(t){return{provider:"".concat(c.provider,".").concat(t)}}))}else c.url&&(l=[G(G({},c),{},{title:c.title,type:"tileprovider",url:c.url,attribution:c.attribution,options:c.options||{},provider:L})]);return new Promise((function(t){t(function(t,e,r,n){var o=t.filter((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===t?"":t).toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(t,n){return n>=e-1&&n<e-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:e+Math.min(r,o.length)+1,records:i}}(l,e,r,n))}))};function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function N(t){var e="function"==typeof Map?new Map:void 0;return N=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return k(t,arguments,Z(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Y(n,t)},N(t)}function k(t,e,r){return k=V()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&Y(o,r.prototype),o},k.apply(null,arguments)}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Y(t,e){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y(t,e)}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(i,t);var e,r,n,o=(r=i,n=V(),function(){var t,e=Z(r);if(n){var o=Z(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t)).name="ServiceValidationError",r.notification=e,r}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(N(Error)),H=function(t){return I().Observable.of(t)},W=function(t){return""===t.title||""===t.url?I().Observable.throw(new B("Validation Error","catalog.notification.warningAddCatalogService")):I().Observable.of(t)},z=function(t){var e=t.parseUrl;return function(t){var r="catalog.notification.errorServiceUrl";return I().Observable.defer((function(){return p().get(e(t.url))})).catch((function(){throw new B("Service Test error",r)})).switchMap((function(e){if(e.error||""===e.data)throw new B("Service Test error",r);return I().Observable.of(t)}))}},K=function(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=(o.options||{}).service;return"tms"===(void 0===i?{}:i).provider&&P(t,e,r,n,o),x(t,e,r,n,o)},$=function(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=(o.options||{}).service;return"tms"===(void 0===i?{}:i).provider?P(t,e,r,n,o):x(t,e,r,n,o)},Q=function(t){return"tms"===t.provider?W(t):function(t){var e,r=t.provider&&"custom"!==t.provider?!!t.provider:(e=t.url,(0,U.Nw)(e));if(t.title&&r)return j.Observable.of(t);throw new Error("catalog.config.notValidURLTemplate")}(t)},J=function(t){return"tms"===t.provider?z({parseUrl:A})(t):function(t){return j.Observable.of(t)}(t)},X=r(32420);function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(r),!0).forEach((function(e){rt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===q(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ot={},it=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=d()(y()(t,'["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType',[])).map((function(e){var r,n=e.Name,o=e.Title,i=e.Abstract,a=e.DefaultSRS,u=e.OtherSRS,c=void 0===u?[]:u,l=e["ows:WGS84BoundingBox"],f=l["ows:LowerCorner"].split(" "),s=l["ows:UpperCorner"].split(" "),p={minx:parseFloat(f[0]),miny:parseFloat(f[1]),maxx:parseFloat(s[0]),maxy:parseFloat(s[1])};return{featureType:e,type:"wfs",url:(0,m.cleanAuthParamsFromURL)(t.url),name:n,title:o,description:i,SRS:[a].concat((r=c,function(t){if(Array.isArray(t))return nt(t)}(r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),defaultSRS:a,boundingBox:{bounds:p,crs:"EPSG:4326"}}})).filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.title,r=void 0===e?"":e,o=t.name,i=void 0===o?"":o,a=t.description;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())||-1!==a.toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(t,n){return n>=e-1&&n<e-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:Math.min(r,i.length),nextRecord:e+Math.min(r,o.length)+1,records:i}},at=X.dN,ut=function(t,e,r,n,o){var i=ot[t];return i&&(new Date).getTime()<i.timestamp+1e3*(c.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(t){t(it(i.data,e,r,n,o))})):(0,X.FU)(t).then((function(i){var a;return f().parseString(i.data,{explicitArray:!1,stripPrefix:!0},(function(e,r){a=et(et({},r),{},{url:t})})),ot[t]={timestamp:(new Date).getTime(),data:a},it(a,e,r,n,o)}))},ct=function(t,e,r,n,o){return ut(t,e,r,n,o)},lt=r(32354);function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function st(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(Object(r),!0).forEach((function(e){bt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ft(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ft(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const yt={csw:pt({preprocess:H,validate:W,testService:z(i.ZP)},i.ZP),wfs:pt({preprocess:H,validate:W,testService:z(o)},o),wms:pt({preprocess:H,validate:W,testService:z(a.ZP)},a.ZP),tms:n,wmts:pt({preprocess:H,validate:W,testService:z(u.Z)},u.Z),backgrounds:pt({preprocess:H,validate:W,testService:z(lt.Z)},lt.Z)}},56175:(t,e,r)=>{"use strict";r.d(e,{Z:()=>X});var n=r(49977),o=r(9669),i=r.n(o),a=r(37691),u=r.n(a),c=r(30647),l=r(91175),f=r.n(l),s=r(27361),p=r.n(s),b=r(13311),y=r.n(b),v=r(1469),d=r.n(v),m=r(47037),E=r.n(m),g=r(13218),O=r.n(g),S=r(3674),h=r.n(S),R=r(93220),w=r.n(R),T=r(82492),A=r.n(T),P=r(31273),D=r(80416),j=r(97395),I=r(82904),U=r(33528),_=r(21914),F=r(53001),G=r(88113),C=r(31935),L=r(8316),x=r(75110),M=r(76712),N=r(86267),k=r(37275),V=r(24262),Y=r(89919),Z=r(1550),B=["format","url","text","layerOptions"];function H(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||W(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){if(t){if("string"==typeof t)return z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(t,e):void 0}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){J(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function J(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==K(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===K(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const X=function(t){return{recordSearchEpic:function(e,r){return e.ofType(P.V3).switchMap((function(e){var o=e.format,i=e.url,a=e.startPosition,u=e.maxRecords,c=e.text,l=e.options,f=p()(l,"service.filter")||p()(l,"filter");return n.Observable.defer((function(){return t[o].textSearch(i,a,u,c,Q({options:l,filter:f},(0,G.HN)(r.getState())))})).switchMap((function(t){return t.error?n.Observable.of((0,P.m)(t)):n.Observable.of((0,P.nX)({url:i,startPosition:a,maxRecords:u,text:c},t))})).startWith((0,P.K4)(!0)).catch((function(t){return n.Observable.of((0,P.m)(t))}))}))},addLayersFromCatalogsEpic:function(e,r){return e.ofType(P.WX).filter((function(t){var e=t.layers,r=t.sources;return d()(e)&&d()(r)&&e.length&&e.length===r.length})).switchMap((function(e){var o=e.layers,i=e.sources,a=e.options,u=e.startPosition,c=void 0===u?1:u,l=e.maxRecords,s=void 0===l?4:l,b=r.getState(),y=(0,G.b6)(b),v=o.filter((function(t,e){return!!y[i[e]]||"object"===K(i[e])})).map((function(e,r){var u=p()(a,r,(0,G.bA)(b)),l=i[r],f="object"===K(l)?l:y[l],v=f.type.toLowerCase(),d=f.url,m=o[r];return n.Observable.defer((function(){return t[v].textSearch(d,c,s,m,Q(Q({},u),f)).catch((function(){return{results:[]}}))})).map((function(t){return Q(Q({},t),{},{format:v,url:d,text:m,layerOptions:u})}))}));return n.Observable.forkJoin(v).switchMap((function(t){return d()(t)&&t.length?n.Observable.of(t.map((function(t){var e=t.format,r=t.url,o=t.text,i=t.layerOptions,a=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,B),u=(0,L.Ps)(b),c=(0,M.eL)(e,a,i,u)||[],l=f()(c.filter((function(t){return t.identifier||t.name===o}))),s=(0,M.tW)(l),p=s.wms,y=s.wmts,v=s.wfs,d={},m={},E=(0,G.kS)(b);if(p){var g=(0,M.n0)(p.SRS);if(p.SRS.length>0&&!N.default.isAllowedSRS("EPSG:3857",g))return n.Observable.empty();d=(0,M.ll)(l,"wms",{removeParams:E,catalogURL:"csw"===e&&r?r+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+l.identifier:r},m)}else if(y){d={};var O=(0,M.n0)(y.SRS);if(y.SRS.length>0&&!N.default.isAllowedSRS("EPSG:3857",O))return n.Observable.empty();d=(0,M.ll)(l,"wmts",{removeParams:E},m)}else v?d=(0,M.LZ)(l):(0,M.FJ)(l).esri&&(d=(0,M.AD)(l,m));return l?[d,i]:[o]}))):n.Observable.empty()}))})).mergeMap((function(t){if(t){var e=t.filter((function(t){return E()(t[0])})).join(" "),r=[];return e&&(r=[(0,P.E9)(e)]),r=[].concat(H(r),H(t.filter((function(t){return O()(t[0])})).map((function(t){return(0,P.A4)(A()({},t[0],t[1]))})))),n.Observable.from(r)}return n.Observable.empty()})).catch((function(){return n.Observable.empty()}))},addLayerAndDescribeEpic:function(e,r){return e.ofType(P.r7).mergeMap((function(e){var o=e.layer,i=e.zoomToLayer,a=[],u=r.getState(),c=(0,x.l2)(u),l=(0,V.R8)(o,c||[]);return a.push((0,D.A4)(Q(Q({},o),{},{id:l}))),i&&o.bbox&&a.push((0,Z.Px)(o.bbox.bounds,o.bbox.crs)),"wms"===o.type?n.Observable.defer((function(){return t.wms.describeLayers((0,V.Hi)(o),o.name)})).switchMap((function(t){if(t){var e=y()(t,(function(t){return t.name===o.name}));if(e&&"WFS"===e.owsType){var r=k.ZP.filterUrlParams(k.ZP.cleanDuplicatedQuestionMarks(e.owsURL),(0,G.kS)(u));return n.Observable.of((0,D.He)(l,{search:{url:r,type:"wfs"}}))}}return n.Observable.empty()})).merge(n.Observable.from(a)).catch((function(t){return n.Observable.of((0,P.bu)(o,t))})):n.Observable.from(a)})).catch((function(){return n.Observable.empty()}))},newCatalogServiceAdded:function(e,r){return e.ofType(P.mh).switchMap((function(){var e=r.getState(),o=(0,G._S)(e);return n.Observable.of(o).switchMap((function(e){var r,o,i;return null!==(r=null===(o=t[e.type])||void 0===o||null===(i=o.preprocess)||void 0===i?void 0:i.call(o,e))&&void 0!==r?r:n.Observable.of(e)})).switchMap((function(e){var r,o,i;return null!==(r=null===(o=t[e.type])||void 0===o||null===(i=o.validate)||void 0===i?void 0:i.call(o,e))&&void 0!==r?r:n.Observable.of(e)})).switchMap((function(e){var r,o,i;return null!==(r=null===(o=t[e.type])||void 0===o||null===(i=o.testService)||void 0===i?void 0:i.call(o,e))&&void 0!==r?r:n.Observable.of(e)})).switchMap((function(){return n.Observable.of((0,P.N3)(o),(0,j.Vp)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}))})).startWith((0,P.Rc)(!0)).catch((function(t){return n.Observable.of((0,j.vU)({exception:t,title:"notification.warning",message:t.notification||"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))})).concat(n.Observable.of((0,P.Rc)(!1)))}))},deleteCatalogServiceEpic:function(t,e){return t.ofType(P.$Y).switchMap((function(){var t=e.getState(),r=(0,G.Cb)(t),o=(0,G.b6)(t),i=o[r]?(0,j.Vp)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):(0,j.vU)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),a=(0,P.SU)(r);return o[r]?n.Observable.of(i,a):n.Observable.of(i)}))},openCatalogEpic:function(t){return t.ofType(I.At).filter((function(t){return"metadataexplorer"===t.control&&t.value})).switchMap((function(){return n.Observable.of((0,U.YV)(),(0,_.g)(),(0,_.aN)())}))},getMetadataRecordById:function(e,r){return e.ofType(P.UT).switchMap((function(e){var o=e.metadataOptions,a=void 0===o?{}:o,l=r.getState(),f=(0,x.Iz)(l);return n.Observable.defer((function(){return t.wms.getCapabilities((0,V.Fh)(f))})).switchMap((function(e){var r=p()(e,"capability.layer.layer",[]),o=1===r.length?r[0].metadataURL:y()(r,(function(t){return t.name===f.name.split(":")[1]})),l=p()(y()(o,(function(t){return E()(t.type)&&"iso19115:2003"===t.type.toLowerCase()&&("application/xml"===t.format||"text/xml"===t.format)})),"onlineResource.href"),s=p()(y()(o,(function(t){return E()(t.type)&&"iso19115:2003"===t.type.toLowerCase()&&"text/html"===t.format})),"onlineResource.href"),b=y()(p()(a,"extractors",[]),(function(t){var e=t.properties,r=t.layersRegex,n=r?new RegExp(r):null;return O()(e)&&(!r||n.test(f.name))})),v=s?{metadataUrl:s}:{},d=n.Observable.defer((function(){return t.csw.getRecordById(f.catalogURL)})).switchMap((function(t){return t&&t.error?n.Observable.of((0,j.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,D.c9)(v,!1)):t&&t.dc?n.Observable.of((0,D.c9)(Q(Q({},v),t.dc),!1)):n.Observable.empty()})),m=n.Observable.defer((function(){return i().get(l,{headers:{Accept:"application/xml"}})})).pluck("data").map((function(t){return(new c.a).parseFromString(t)})).map((function(t){var e=u().useNamespaces(a.xmlNamespaces||{});return function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return w()(r).reduce((function(r,o){var i,a,u,c=(u=2,function(t){if(Array.isArray(t))return t}(a=o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(a,u)||W(a,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=c[0],f=c[1];if(O()(f)&&E()(f.xpath)&&O()(f.properties)&&h()(f.properties).length>0)0===(i=e(f.xpath,n).map((function(e){return t(f.properties,e)}))).length&&(i=null);else{var s,b=e(f,n);1===b.length?i=null!==(s=p()(b[0],"nodeValue"))&&void 0!==s?s:p()(b[0],"childNodes[0].nodeValue"):b.length>1&&(i=b.map((function(t){return p()(t,"childNodes[0].nodeValue")})).filter((function(t){return!!t})))}return Q(Q({},r),i?J({},l,i):{})}),{})}(b.properties,t)})).switchMap((function(t){return n.Observable.of((0,D.c9)(Q(Q({},v),t),!1))}));return l&&b?m:f.catalogURL?d:n.Observable.of((0,D.c9)(v,!1))})).startWith((0,D.c9)({},!0)).catch((function(){return n.Observable.of((0,j.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,D.c9)({},!1))}))}))},autoSearchEpic:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===e?function(){}:e;return t.ofType(P.CO).debounce((function(){var t=r(),e=(0,G.l2)(t);return n.Observable.timer(e)})).switchMap((function(t){var e=t.text,o=r(),i=(0,G.y)(o),a=(0,G.R7)(o),u=a.type,c=a.url,l=a.filter;return n.Observable.of((0,P.tt)({format:u,url:c,startPosition:1,maxRecords:i,text:e,options:{filter:l}}))}))},catalogCloseEpic:function(t,e){return t.ofType(P.ur).switchMap((function(){var t,r=e.getState(),o=(0,C.YL)(r),i=(0,G.b6)(r);return(t=n.Observable).of.apply(t,H([(0,I.pu)("metadataexplorer","enabled",!1,"group",null),(0,P.In)("view"),(0,P.ye)()].concat("backgroundSelector"===o?[(0,P.Dw)(f()(h()(i))),(0,F.vw)(!0)]:[])))}))},getSupportedFormatsEpic:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===e?function(){}:e;return t.ofType(P.xM).filter((function(t){return(0,G.CK)(r())!==(null==t?void 0:t.url)})).switchMap((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).url,e=void 0===t?"":t;return n.Observable.defer((function(){return(0,M.T6)(e,!0)})).switchMap((function(t){return n.Observable.of((0,P.nx)(t,e))})).let((0,Y.hP)((0,P.We)(!0),(0,P.We)(!1),(function(){return n.Observable.of((0,j.vU)({title:"layerProperties.format.error.title",message:"layerProperties.format.error.message"}),(0,P.We)(!1))})))}))},updateGroupSelectedMetadataExplorerEpic:function(t,e){return t.ofType(D.c7).filter((function(){return(0,G.$t)(e.getState())})).switchMap((function(t){var r=t.nodeType,o=t.id,i=e.getState(),a=0===(0,x.NP)(i).length||"group"!==r?"Default":o;return n.Observable.of((0,I.Xg)("metadataexplorer","group",a))}))}}}},88113:(t,e,r)=>{"use strict";r.d(e,{b6:()=>p,PG:()=>b,_x:()=>y,Mm:()=>v,dP:()=>d,SX:()=>m,ZL:()=>E,_S:()=>g,iH:()=>O,R7:()=>S,Q7:()=>h,n7:()=>R,bA:()=>w,hm:()=>T,E2:()=>A,Cb:()=>P,eK:()=>D,Im:()=>j,e8:()=>I,$t:()=>U,kS:()=>_,y:()=>F,l2:()=>G,HN:()=>C,BM:()=>L,am:()=>x,LV:()=>M,CK:()=>N});var n=r(22222),o=r(27361),i=r.n(o),a=r(827),u=r(76712);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){return i()(t,"catalog.services")},b=(0,n.P1)((function(t){return i()(t,"catalog.default.staticServices")}),p,(function(t,e){var r=null==t?void 0:t.default_map_backgrounds;return r?(r.readOnly=!0,f(f({},e),{},{default_map_backgrounds:r})):e})),y=function(t){return i()(t,"catalog.default.tileSizes",[256,512])},v=function(t){return i()(t,"controls.metadataexplorer.group")},d=function(t){return i()(t,"catalog.saving")},m=function(t){return i()(t,"catalog.result")},E=function(t){return i()(t,"catalog.openCatalogServiceList")},g=function(t){return i()(t,"catalog.newService")},O=function(t){return i()(t,"catalog.newService.type","csw")},S=function(t){return i()(t,'catalog.services["'.concat(i()(t,"catalog.selectedService"),'"]'))},h=function(t){return i()(t,'catalog.services["'.concat(i()(t,"catalog.selectedService"),'"].type'),function(t){return i()(t,'catalog.default.staticServices["'.concat(i()(t,"catalog.selectedService"),'"].type'),"csw")}(t))},R=function(t){return i()(t,'catalog.services["'.concat(i()(t,"catalog.selectedService"),'"].layerOptions'),{})},w=function(t){return i()(t,"catalog.searchOptions")},T=function(t){return i()(t,"catalog.loadingError")},A=function(t){return i()(t,"catalog.loading",!1)},P=function(t){return i()(t,"catalog.selectedService")},D=function(t){return i()(t,"catalog.mode","view")},j=function(t){return i()(t,"catalog.layerError")},I=function(t){return i()(t,"catalog.searchOptions.text","")},U=function(t){return"metadataexplorer"===i()(t,"controls.toolbar.active")||i()(t,"controls.metadataexplorer.enabled")},_=function(t){return(i()(t,"localConfig.authenticationRules")||[]).filter((function(t){return"authkey"===t.method})).map((function(t){return t.authkeyParamName}))||[]},F=function(t){return i()(t,"catalog.pageSize",4)},G=function(t){return i()(t,"catalog.delayAutoSearch",1e3)},C=(0,n.zB)({projection:a.uy}),L=function(t){return i()(t,"catalog.formatsLoading",!1)},x=function(t){return i()(t,"catalog.newService.supportedFormats.imageFormats",u.QQ)},M=function(t){return i()(t,"catalog.newService.supportedFormats.infoFormats",(0,u.B8)())},N=function(t){return i()(t,"catalog.newService.formatUrlUsed","")}},38842:(t,e,r)=>{"use strict";r.d(e,{wk:()=>s,Yf:()=>p,c3:()=>b,fY:()=>y});var n=r(18721),o=r.n(n),i=r(27361),a=r.n(i),u=r(13311),c=r.n(u),l=r(22222),f=r(8316),s=function(t){return o()(t,"localConfig.localizedLayerStyles")},p=function(t){var e=a()(t,"localConfig.plugins.dashboard",[]),r=c()(e,(function(t){return"DashboardEditor"===t.name}))||{};return a()(r,"cfg.catalog.localizedLayerStyles",!1)},b=function(t){return a()(t,"localConfig.localizedLayerStyles.name","mapstore_language")},y=(0,l.P1)(s,b,f.KV,(function(t,e,r){var n=[];return t&&n.push({name:e,value:r}),n}))},93201:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(64721),o=r.n(n),i=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("?")[0].split("@");if(t.length>1){var e=t[t.length-1];if(o()(["png","png8","jpeg","vnd.jpeg-png","gif"],e))return e}return null}}}]);