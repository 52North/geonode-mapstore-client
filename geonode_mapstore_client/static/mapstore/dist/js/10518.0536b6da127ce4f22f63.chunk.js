(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[10518,82582,65417],{610518:(t,r,n)=>{"use strict";n.d(r,{Z:()=>x});var e=n(55608);function i(t,r,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!r)throw new Error("polygon is required");var i=(0,e.c9)(t),a=(0,e.wA)(r),h=a.type,u=r.bbox,s=a.coordinates;if(u&&!1===function(t,r){return r[0]<=t[0]&&r[1]<=t[1]&&r[2]>=t[0]&&r[3]>=t[1]}(i,u))return!1;"Polygon"===h&&(s=[s]);for(var l=!1,c=0;c<s.length&&!l;c++)if(o(i,s[c][0],n.ignoreBoundary)){for(var f=!1,p=1;p<s[c].length&&!f;)o(i,s[c][p],!n.ignoreBoundary)&&(f=!0),p++;f||(l=!0)}return l}function o(t,r,n){var e=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var i=0,o=r.length-1;i<r.length;o=i++){var a=r[i][0],h=r[i][1],u=r[o][0],s=r[o][1];if(t[1]*(a-u)+h*(u-t[0])+s*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(h-t[1])*(s-t[1])<=0)return!n;h>t[1]!=s>t[1]&&t[0]<(u-a)*(t[1]-h)/(s-h)+a&&(e=!e)}return e}var a=n(427244),h=n(798574);const u=function(t){if(!t)throw new Error("geojson is required");var r=[];return(0,h.nG)(t,(function(t){!function(t,r){var n=[],i=t.geometry;if(null!==i){switch(i.type){case"Polygon":n=(0,e.r7)(i);break;case"LineString":n=[(0,e.r7)(i)]}n.forEach((function(n){var e=function(t,r){var n=[];return t.reduce((function(t,e){var i,o,h,u,s,l,c=(0,a.Tu)([t,e],r);return c.bbox=(o=e,h=(i=t)[0],u=i[1],[h<(s=o[0])?h:s,u<(l=o[1])?u:l,h>s?h:s,u>l?u:l]),n.push(c),e})),n}(n,t.properties);e.forEach((function(t){t.id=r.length,r.push(t)}))}))}}(t,r)})),(0,a.uf)(r)};var s=n(78109);function l(t,r){var n=(0,e.r7)(t),i=(0,e.r7)(r);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],h=n[0][1],u=n[1][0],s=n[1][1],l=i[0][0],c=i[0][1],f=i[1][0],p=i[1][1],m=(p-c)*(u-o)-(f-l)*(s-h);if(0===m)return null;var d=((f-l)*(h-c)-(p-c)*(o-l))/m,v=((u-o)*(h-c)-(s-h)*(o-l))/m;if(d>=0&&d<=1&&v>=0&&v<=1){var g=o+d*(u-o),x=h+d*(s-h);return(0,a.xm)([g,x])}return null}const c=function(t,r){var n={},i=[];if("LineString"===t.type&&(t=(0,a.zL)(t)),"LineString"===r.type&&(r=(0,a.zL)(r)),"Feature"===t.type&&"Feature"===r.type&&null!==t.geometry&&null!==r.geometry&&"LineString"===t.geometry.type&&"LineString"===r.geometry.type&&2===t.geometry.coordinates.length&&2===r.geometry.coordinates.length){var o=l(t,r);return o&&i.push(o),(0,a.uf)(i)}var c=s();return c.load(u(r)),(0,h.By)(u(t),(function(t){(0,h.By)(c.search(t),(function(r){var o=l(t,r);if(o){var a=(0,e.r7)(o).join(",");n[a]||(n[a]=!0,i.push(o))}}))})),(0,a.uf)(i)};function f(t,r){void 0===r&&(r={});var n=(0,e.wA)(t);switch(r.properties||"Feature"!==t.type||(r.properties=t.properties),n.type){case"Polygon":return function(t,r){return void 0===r&&(r={}),p((0,e.wA)(t).coordinates,r.properties?r.properties:"Feature"===t.type?t.properties:{})}(n,r);case"MultiPolygon":return function(t,r){void 0===r&&(r={});var n=(0,e.wA)(t).coordinates,i=r.properties?r.properties:"Feature"===t.type?t.properties:{},o=[];return n.forEach((function(t){o.push(p(t,i))})),(0,a.uf)(o)}(n,r);default:throw new Error("invalid poly")}}function p(t,r){return t.length>1?(0,a._R)(t,r):(0,a.Tu)(t[0],r)}function m(t,r){for(var n=0;n<t.coordinates.length-1;n++)if(v(t.coordinates[n],t.coordinates[n+1],r.coordinates))return!0;return!1}function d(t,r){for(var n=0,e=r.coordinates;n<e.length;n++)if(i(e[n],t))return!0;return c(r,f(t)).features.length>0}function v(t,r,n){var e=n[0]-t[0],i=n[1]-t[1],o=r[0]-t[0],a=r[1]-t[1];return 0==e*a-i*o&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=r[0]:r[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=r[1]:r[1]<=n[1]&&n[1]<=t[1])}const g=function(t,r){var n=!0;return(0,h.nG)(t,(function(t){(0,h.nG)(r,(function(r){if(!1===n)return!1;n=function(t,r){switch(t.type){case"Point":switch(r.type){case"Point":return n=t.coordinates,e=r.coordinates,!(n[0]===e[0]&&n[1]===e[1]);case"LineString":return!m(r,t);case"Polygon":return!i(t,r)}break;case"LineString":switch(r.type){case"Point":return!m(t,r);case"LineString":return!(c(t,r).features.length>0);case"Polygon":return!d(r,t)}break;case"Polygon":switch(r.type){case"Point":return!i(r,t);case"LineString":return!d(t,r);case"Polygon":return!function(t,r){for(var n=0,e=t.coordinates[0];n<e.length;n++)if(i(e[n],r))return!0;for(var o=0,a=r.coordinates[0];o<a.length;o++)if(i(a[o],t))return!0;return c(f(t),f(r)).features.length>0}(r,t)}}var n,e;return!1}(t.geometry,r.geometry)}))})),n};function x(t,r){var n=!1;return(0,h.nG)(t,(function(t){(0,h.nG)(r,(function(r){if(!0===n)return!0;n=!g(t.geometry,r.geometry)}))})),n}},78109:(t,r,n)=>{var e=n(382582),i=n(608531),o=n(609564),a=n(813292).default,h=o.featureEach,u=(o.coordEach,i.polygon,i.featureCollection);function s(t){var r=new e(t);return r.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),e.prototype.insert.call(this,t)},r.load=function(t){var r=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),r.push(t)})):h(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),r.push(t)})),e.prototype.load.call(this,r)},r.remove=function(t,r){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),e.prototype.remove.call(this,t,r)},r.clear=function(){return e.prototype.clear.call(this)},r.search=function(t){var r=e.prototype.search.call(this,this.toBBox(t));return u(r)},r.collides=function(t){return e.prototype.collides.call(this,this.toBBox(t))},r.all=function(){var t=e.prototype.all.call(this);return u(t)},r.toJSON=function(){return e.prototype.toJSON.call(this)},r.fromJSON=function(t){return e.prototype.fromJSON.call(this,t)},r.toBBox=function(t){var r;if(t.bbox)r=t.bbox;else if(Array.isArray(t)&&4===t.length)r=t;else if(Array.isArray(t)&&6===t.length)r=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)r=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");r=a(t)}return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}},r}t.exports=s,t.exports.default=s},382582:function(t){t.exports=function(){"use strict";function t(t,e,i,o,a){!function t(n,e,i,o,a){for(;o>i;){if(o-i>600){var h=o-i+1,u=e-i+1,s=Math.log(h),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(h-l)/h)*(u-h/2<0?-1:1);t(n,e,Math.max(i,Math.floor(e-u*l/h+c)),Math.min(o,Math.floor(e+(h-u)*l/h+c)),a)}var f=n[e],p=i,m=o;for(r(n,i,e),a(n[o],f)>0&&r(n,i,o);p<m;){for(r(n,p,m),p++,m--;a(n[p],f)<0;)p++;for(;a(n[m],f)>0;)m--}0===a(n[i],f)?r(n,i,m):r(n,++m,o),m<=e&&(i=m+1),e<=m&&(o=m-1)}}(t,e,i||0,o||t.length-1,a||n)}function r(t,r,n){var e=t[r];t[r]=t[n],t[n]=e}function n(t,r){return t<r?-1:t>r?1:0}var e=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,r,n){if(!n)return r.indexOf(t);for(var e=0;e<r.length;e++)if(n(t,r[e]))return e;return-1}function o(t,r){a(t,0,t.children.length,r,t)}function a(t,r,n,e,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=r;o<n;o++){var a=t.children[o];h(i,t.leaf?e(a):a)}return i}function h(t,r){return t.minX=Math.min(t.minX,r.minX),t.minY=Math.min(t.minY,r.minY),t.maxX=Math.max(t.maxX,r.maxX),t.maxY=Math.max(t.maxY,r.maxY),t}function u(t,r){return t.minX-r.minX}function s(t,r){return t.minY-r.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,r){return t.minX<=r.minX&&t.minY<=r.minY&&r.maxX<=t.maxX&&r.maxY<=t.maxY}function p(t,r){return r.minX<=t.maxX&&r.minY<=t.maxY&&r.maxX>=t.minX&&r.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(r,n,e,i,o){for(var a=[n,e];a.length;)if(!((e=a.pop())-(n=a.pop())<=i)){var h=n+Math.ceil((e-n)/i/2)*i;t(r,h,n,e,o),a.push(n,h,h,e)}}return e.prototype.all=function(){return this._all(this.data,[])},e.prototype.search=function(t){var r=this.data,n=[];if(!p(t,r))return n;for(var e=this.toBBox,i=[];r;){for(var o=0;o<r.children.length;o++){var a=r.children[o],h=r.leaf?e(a):a;p(t,h)&&(r.leaf?n.push(a):f(t,h)?this._all(a,n):i.push(a))}r=i.pop()}return n},e.prototype.collides=function(t){var r=this.data;if(!p(t,r))return!1;for(var n=[];r;){for(var e=0;e<r.children.length;e++){var i=r.children[e],o=r.leaf?this.toBBox(i):i;if(p(t,o)){if(r.leaf||f(t,o))return!0;n.push(i)}}r=n.pop()}return!1},e.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var r=0;r<t.length;r++)this.insert(t[r]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var e=this.data;this.data=n,n=e}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},e.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},e.prototype.clear=function(){return this.data=m([]),this},e.prototype.remove=function(t,r){if(!t)return this;for(var n,e,o,a=this.data,h=this.toBBox(t),u=[],s=[];a||u.length;){if(a||(a=u.pop(),e=u[u.length-1],n=s.pop(),o=!0),a.leaf){var l=i(t,a.children,r);if(-1!==l)return a.children.splice(l,1),u.push(a),this._condense(u),this}o||a.leaf||!f(a,h)?e?(n++,a=e.children[n],o=!1):a=null:(u.push(a),s.push(n),n=0,e=a,a=a.children[0])}return this},e.prototype.toBBox=function(t){return t},e.prototype.compareMinX=function(t,r){return t.minX-r.minX},e.prototype.compareMinY=function(t,r){return t.minY-r.minY},e.prototype.toJSON=function(){return this.data},e.prototype.fromJSON=function(t){return this.data=t,this},e.prototype._all=function(t,r){for(var n=[];t;)t.leaf?r.push.apply(r,t.children):n.push.apply(n,t.children),t=n.pop();return r},e.prototype._build=function(t,r,n,e){var i,a=n-r+1,h=this._maxEntries;if(a<=h)return o(i=m(t.slice(r,n+1)),this.toBBox),i;e||(e=Math.ceil(Math.log(a)/Math.log(h)),h=Math.ceil(a/Math.pow(h,e-1))),(i=m([])).leaf=!1,i.height=e;var u=Math.ceil(a/h),s=u*Math.ceil(Math.sqrt(h));d(t,r,n,s,this.compareMinX);for(var l=r;l<=n;l+=s){var c=Math.min(l+s-1,n);d(t,l,c,u,this.compareMinY);for(var f=l;f<=c;f+=u){var p=Math.min(f+u-1,c);i.children.push(this._build(t,f,p,e-1))}}return o(i,this.toBBox),i},e.prototype._chooseSubtree=function(t,r,n,e){for(;e.push(r),!r.leaf&&e.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,h=0;h<r.children.length;h++){var u=r.children[h],s=l(u),c=(f=t,p=u,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-s);c<o?(o=c,i=s<i?s:i,a=u):c===o&&s<i&&(i=s,a=u)}r=a||r.children[0]}var f,p;return r},e.prototype._insert=function(t,r,n){var e=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(e,this.data,r,i);for(o.children.push(t),h(o,e);r>=0&&i[r].children.length>this._maxEntries;)this._split(i,r),r--;this._adjustParentBBoxes(e,i,r)},e.prototype._split=function(t,r){var n=t[r],e=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,e);var a=this._chooseSplitIndex(n,i,e),h=m(n.children.splice(a,n.children.length-a));h.height=n.height,h.leaf=n.leaf,o(n,this.toBBox),o(h,this.toBBox),r?t[r-1].children.push(h):this._splitRoot(n,h)},e.prototype._splitRoot=function(t,r){this.data=m([t,r]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},e.prototype._chooseSplitIndex=function(t,r,n){for(var e,i,o,h,u,s,c,f=1/0,p=1/0,m=r;m<=n-r;m++){var d=a(t,0,m,this.toBBox),v=a(t,m,n,this.toBBox),g=(i=d,o=v,void 0,void 0,void 0,void 0,h=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),s=Math.min(i.maxX,o.maxX),c=Math.min(i.maxY,o.maxY),Math.max(0,s-h)*Math.max(0,c-u)),x=l(d)+l(v);g<f?(f=g,e=m,p=x<p?x:p):g===f&&x<p&&(p=x,e=m)}return e||n-r},e.prototype._chooseSplitAxis=function(t,r,n){var e=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:s;this._allDistMargin(t,r,n,e)<this._allDistMargin(t,r,n,i)&&t.children.sort(e)},e.prototype._allDistMargin=function(t,r,n,e){t.children.sort(e);for(var i=this.toBBox,o=a(t,0,r,i),u=a(t,n-r,n,i),s=c(o)+c(u),l=r;l<n-r;l++){var f=t.children[l];h(o,t.leaf?i(f):f),s+=c(o)}for(var p=n-r-1;p>=r;p--){var m=t.children[p];h(u,t.leaf?i(m):m),s+=c(u)}return s},e.prototype._adjustParentBBoxes=function(t,r,n){for(var e=n;e>=0;e--)h(r[e],t)},e.prototype._condense=function(t){for(var r=t.length-1,n=void 0;r>=0;r--)0===t[r].children.length?r>0?(n=t[r-1].children).splice(n.indexOf(t[r]),1):this.clear():o(t[r],this.toBBox)},e}()}}]);