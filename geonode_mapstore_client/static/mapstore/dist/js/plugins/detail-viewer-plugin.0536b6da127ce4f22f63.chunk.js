(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[95121],{643892:(e,r,n)=>{"use strict";n.d(r,{W:()=>t,Zf:()=>o,Eu:()=>i,Vy:()=>u,YB:()=>a,xm:()=>c,_f:()=>l,ek:()=>s,cd:()=>f,pt:()=>p,ww:()=>E,tR:()=>d,Js:()=>O,p2:()=>y,ZH:()=>m,eQ:()=>b,ql:()=>v,$X:()=>g,nS:()=>S,ih:()=>R,J5:()=>_,uA:()=>P,Pv:()=>h,_Z:()=>T,dh:()=>C,IH:()=>D,e3:()=>w,Oq:()=>N,Y0:()=>j,sA:()=>A,ip:()=>I,li:()=>U,F_:()=>G,pG:()=>L,Q$:()=>k,DF:()=>M,id:()=>B,Br:()=>x,bI:()=>Z,U5:()=>V,e5:()=>F,b3:()=>H,mN:()=>$,QN:()=>W,HV:()=>Q,xe:()=>X,vA:()=>q,gw:()=>z,qs:()=>Y,CB:()=>K,vg:()=>J,Z0:()=>ee,lf:()=>re,jQ:()=>ne,nk:()=>te,X7:()=>oe,nO:()=>ie,F4:()=>ue,EU:()=>ae,Rk:()=>ce,V1:()=>le,rg:()=>se,v6:()=>fe,d7:()=>pe,Rx:()=>Ee,as:()=>de,iL:()=>Oe});var t="GEONODE:RESOURCE_LOADING",o="GEONODE:SET_RESOURCE",i="GEONODE:RESOURCE_ERROR",u="GEONODE:UPDATE_RESOURCE_PROPERTIES",a="GEONODE:SET_RESOURCE_TYPE",c="GEONODE:SET_NEW_RESOURCE",l="GEONODE:SET_RESOURCE_ID",s="GEONODE:SET_RESOURCE_PERMISSIONS",f="GEONODE:EDIT_TITLE_RESOURCE",p="GEONODE:EDIT_ABSTRACT_RESOURCE",E="GEONODE:EDIT_THUMBNAIL_RESOURCE",d="GEONODE:SET_FAVORITE_RESOURCE",O="GEONODE:SET_MAP_THUMBNAIL",y="GEONODE:SET_SELECTED_DATASET_PERMISSIONS",m="GEONODE:REQUEST_RESOURCE_CONFIG",b="GEONODE:REQUEST_NEW_RESOURCE_CONFIG",v="GEONODE:LOADING_RESOURCE_CONFIG",g="GEONODE:RESET_RESOURCE_STATE",S="GEONODE:RESOURCE_CONFIG_ERROR",R="GEONODE:SET_RESOURCE_COMPACT_PERMISSIONS",_="GEONODE:UPDATE_RESOURCE_COMPACT_PERMISSIONS",P="GEONODE:RESET_GEO_LIMITS",h="GEONODE:PROCESS_RESOURCES",T="GEONODE_SET_RESOURCE_THUMBNAIL",C="GEONODE_ENABLE_MAP_THUMBNAIL_VIEWER",D="GEONODE_DOWNLOAD_RESOURCE",w="GEONODE_DOWNLOAD_COMPLETE",N="GEONODE_UPDATE_SINGLE_RESOURCE",j="GEONODE_SET_RESOURCE_EXTENT",A="GEONODE:SET_RESOURCE_PATH_PARAMETERS",I="GEONODE:SET_MAP_VIEWER_LINKED_RESOURCE",U="GEONODE:MANAGE_LINKED_RESOURCE",G="GEONODE:SET_DEFAULT_VIEWER_PLUGINS",L="GEONODE:SET_SELECTED_LAYER_DATASET";function k(){return{type:t}}function M(e,r){return{type:o,data:e,pending:r}}function B(e){return{type:N,data:e}}function x(e){return{type:f,title:e}}function Z(e){return{type:p,abstract:e}}function V(e){return{type:E,thumbnailUrl:e,thumbnailChanged:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"false"}}function F(){return{type:T}}function H(e){return{type:a,resourceType:e}}function $(e){return{type:i,error:e}}function W(e){return{type:u,properties:e}}function Q(){return{type:c}}function X(e){return{type:l,id:e}}function q(e){return{type:y,permissions:e}}function z(e){return{type:d,favorite:e}}function Y(e){return{type:C,enabled:e}}function K(e){return{type:O,bbox:e}}function J(e,r,n){return{type:m,resourceType:e,pk:r,options:n}}function ee(e,r){return{type:b,resourceType:e,options:r}}function re(e){return{type:v,loading:e}}function ne(e){return{type:S,message:e}}function te(){return{type:g}}function oe(e){return{type:R,compactPermissions:e}}function ie(e){return{type:_,compactPermissions:e}}function ue(){return{type:P}}function ae(e,r,n){return{type:h,processType:e,resources:r,redirectTo:n}}function ce(e){return{type:D,resource:e}}function le(e){return{type:w,resource:e}}function se(e){return{type:j,coords:e}}function fe(e){return{type:A,params:e}}function pe(e){return{type:U,payload:e}}function Ee(e){return{type:I,resource:e}}function de(e){return{type:G,plugins:e}}function Oe(e){return{type:L,layer:e}}},678833:(e,r,n)=>{"use strict";n.d(r,{Z:()=>d});var t=n(124852),o=n.n(t),i=n(598611),u=n.n(i),a=n(322843);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?l(Object(n),!0).forEach((function(r){f(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function f(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=c(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function p(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return E(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}const d=function(e){var r=e.items,n=e.loadedPlugins,i=e.loaderComponent,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=(0,t.useRef)({});l.current={items:r,loadedPlugins:n,loaderComponent:i};var f=u()(Object.keys(n||{}),","),E=(0,t.useMemo)((function(){return function(e){return p(e.items).sort((function(e,r){return e.position>r.position?1:-1})).map((function(r){return s(s({},r),{},{Component:r.Component||(0,a.KB)(r,e.loadedPlugins,e.loaderComponent||o().createElement("div",null))})}))||[]}(l.current)}),[f].concat(p(c)));return E}},94228:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>k});var t=n(124852),o=n.n(t),i=n(322843),u=n(171703),a=n(22222),c=n(737275),l=n(398288),s=n(274621),f=n(643892),p=n(452992),E=n(17594),d=n(925108),O=n(782904),y=n(572036),m=n(482100),b=n(303744);var v=n(100824),g=n(625635),S=n(877593),R=n(805346),_=n(675110),P=n(800827),h=n(770058),T=n(807461),C=n(678833),D=n(535721),w=["hide"];function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function j(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function A(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=N(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var I=(0,u.connect)((0,a.P1)([function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data)||null},function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.loading)||!1},function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.favorite)||!1},function(e){var r;return(null==e||null===(r=e.gnsave)||void 0===r?void 0:r.savingThumbnailMap)||!1},_.l2,m.km,m.Bs,P.Od,function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.showMapThumbnail)||!1},p.WB],(function(e,r,n,t,o,i,u,a,c,l){return{layers:o,resource:e,loading:r,savingThumbnailMap:t,favorite:n,isThumbnailChanged:i,resourceThumbnailUpdating:u,initialBbox:null==a?void 0:a.bbox,enableMapViewer:c,downloading:l,resourceId:e.pk}})),{closePanel:O.Xg.bind(null,"rightOverlay","enabled",!1),onFavorite:f.gw,onMapThumbnail:f.CB,onResourceThumbnail:f.e5,onClose:f.qs,onSetExtent:f.rg})(l.Z),U=(0,u.connect)((0,a.P1)([m.V$,m.fg,m.L4],(function(e,r,n){return{hide:e||!r,resourceType:n}})),{onClick:O.Xg.bind(null,"rightOverlay","enabled","DetailViewer")})((function(e){var r=e.onClick,n=e.hide,t=e.variant,i=e.size,u=e.showMessage,a=e.resourceType,c=((0,D.NN)()[a]||{}).icon,l=void 0===c?"info-circle":c;return n?null:o().createElement(b.Z,{variant:t,size:i,onClick:function(){r()}},u?o().createElement(R.Z,{msgId:"gnviewer.viewInfo"}):o().createElement(E.Z,{name:l}))}));function G(e,r){var n=e.location,i=e.enabled,u=e.onEditResource,a=e.onEditAbstractResource,c=e.onEditThumbnail,l=e.canEdit,s=e.user,f=e.onClose,p=e.monitoredState,E=e.queryPathname,d=void 0===E?"/":E,O=e.tabs,y=void 0===O?[]:O,m=e.items,b=e.resourceId,g=(0,h._y)(p,{tabs:y}),R=function(e){var r=e.disabled,n=e.onClickOut,o=(0,t.useRef)();return(0,t.useEffect)((function(){function e(e){var t;!r&&(null==o||null===(t=o.current)||void 0===t?void 0:t.contains)&&!o.current.contains(e.target)&&n()}return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[r,o,n]),o}({disabled:!i,onClickOut:function(){f()}}),_=r.loadedPlugins,P=(0,C.Z)({items:m,loadedPlugins:_},[b]).filter((function(e){return"toolbar"===e.target}));return o().createElement(v.Z,{enabled:i,ref:R,className:"gn-overlay-wrapper"},o().createElement(I,{editTitle:function(e){u(e)},editAbstract:function(e){a(e)},editThumbnail:function(e){c(e,!0)},activeEditMode:i&&l,enableFavorite:!!s,formatHref:function(e){return(0,S.nz)(function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?j(Object(n),!0).forEach((function(r){A(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({location:n},e))},tabs:g.tabs,pathname:d,toolbarItems:P}))}var L=(0,u.connect)((0,a.P1)([function(e){var r,n;return"DetailViewer"===(null==e||null===(r=e.controls)||void 0===r||null===(n=r.rightOverlay)||void 0===n?void 0:n.enabled)},m.il,m.V$,m.fg,s.np,function(e){return(0,i.bh)(e,(0,c.u8)("monitorState"))},function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data)||null}],(function(e,r,n,t,o,i,u){return{enabled:e,canEdit:r,hide:n||!t,user:o,monitoredState:i,resourceId:null==u?void 0:u.pk}})),{onEditResource:f.Br,onEditAbstractResource:f.bI,onEditThumbnail:f.U5,onClose:O.Xg.bind(null,"rightOverlay","enabled",!1)})((0,g.EN)((function(e){var r=e.hide,n=function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,w);return r?null:o().createElement(G,n)})));const k=(0,i.rx)("DetailViewer",{component:L,containers:{ActionNavbar:{name:"DetailViewerButton",Component:U}},epics:T.Z,reducers:{gnresource:y.Z,controls:d.Z}})},572036:(e,r,n)=>{"use strict";n.d(r,{Z:()=>S});var t=n(618446),o=n.n(t),i=n(441609),u=n.n(i),a=n(414293),c=n.n(a),l=n(643892),s=n(535721),f=["data"],p=["features"],E=["features"],d=["features"];function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function y(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.indexOf(t)>=0)continue;n[t]=e[t]}return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function m(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function b(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?m(Object(n),!0).forEach((function(r){v(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function v(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=O(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var g={selectedLayerPermissions:[],data:{},permissions:[]};const S=function(){var e,r,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case l.$X:return g;case l.ql:return b(b({},t),{},{configError:void 0,loadingResourceConfig:i.loading});case l.nS:return b(b({},t),{},{loading:!1,configError:i.message});case l.W:return b(b({},t),{},{loading:!0});case l.Zf:var a,O,m=i.data||{},v=(m.data,b({},y(m,f))),S=null===(a=t.data)||void 0===a?void 0:a.linkedResources;return u()(S)||v.pk!==(null===(O=t.data)||void 0===O?void 0:O.pk)||(v.linkedResources=S),b(b({},t),{},{error:null,initialResource:b({},i.data),data:v,loading:!1,isNew:!1});case l.Eu:return b(b({},t),{},{initialResource:null,data:null,error:i.error,loading:!1});case l.Vy:return b(b({},t),{},{data:b(b({},t.data),i.properties)});case l.YB:return b(b({},t),{},{type:i.resourceType});case l.xm:return b(b({},g),{},{isNew:!0});case l._f:return b(b({},t),{},{id:i.id});case l.ek:return b(b({},t),{},{permissions:i.permissions});case l.cd:return b(b({},t),{},{data:b(b({},null==t?void 0:t.data),{},{title:null==i?void 0:i.title,name:null==i?void 0:i.title})});case l.pt:return b(b({},t),{},{data:b(b({},null==t?void 0:t.data),{},{abstract:null==i?void 0:i.abstract})});case l.ww:return b(b({},t),{},{data:b(b({},null==t?void 0:t.data),{},{thumbnail_url:null==i?void 0:i.thumbnailUrl,thumbnailChanged:null==i?void 0:i.thumbnailChanged})});case l._Z:return b(b({},t),{},{data:b(b({},null==t?void 0:t.data),{},{updatingThumbnail:!0})});case l.dh:return b(b({},t),{},{showMapThumbnail:i.enabled});case l.p2:return b(b({},t),{},{selectedLayerPermissions:i.permissions});case l.ih:return b(b({},t),{},{initialCompactPermissions:i.compactPermissions,compactPermissions:i.compactPermissions,isCompactPermissionsChanged:!1,geoLimits:[]});case l.J5:return b(b({},t),{},{compactPermissions:i.compactPermissions,isCompactPermissionsChanged:!o()((0,s.go)(t.initialCompactPermissions),(0,s.go)(i.compactPermissions)),geoLimits:(0,s.vB)(i.compactPermissions)});case l.uA:if(t.compactPermissions){var R=t.compactPermissions,_=R.users,P=R.organizations,h=R.groups;return b(b({},t),{},{compactPermissions:{users:_.map((function(e){return e.features,y(e,p)})),organizations:P.map((function(e){return e.features,y(e,E)})),groups:h.map((function(e){return e.features,y(e,d)}))},geoLimits:[]})}return t;case l.Y0:return b(b({},t),{},{data:b(b({},t.data),{},{extent:b(b({},null===(e=t.data)||void 0===e?void 0:e.extent),{},{coords:i.coords})})});case l.sA:return b(b({},t),{},{params:i.params});case l.ip:return b(b({},t),{},{viewerLinkedResource:i.resource});case l.F_:return b(b({},t),{},{defaultViewerPlugins:i.plugins});case l.pG:return b(b({},t),{},{selectedLayerIsDataset:!c()(null===(r=i.layer)||void 0===r||null===(n=r.extendedParams)||void 0===n?void 0:n.pk)});default:return t}}},770058:(e,r,n)=>{"use strict";n.d(r,{gj:()=>p,QH:()=>E,mk:()=>d,BK:()=>O,bH:()=>y,_y:()=>m});var t=n(227361),o=n.n(t),i=n(414293),u=n.n(i),a=n(322843),c=n(368523);function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=i.call(n)).done)&&(a.push(t.value),a.length!==r);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return s(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,r,n){var t=r?r.filter((function(e){return e.type===n})):void 0;return void 0===t||t&&0===t.length||t&&t.some((function(r){return e&&e.includes(null==r?void 0:r.value)}))}function E(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",t=r.split(n).map((function(r){return function(e,r){return 0===(null==r?void 0:r.indexOf("${"))?o()(e,r.replace(/^\$\{(.*)\}$/,"$1")):r}(e,r)}));return t.join(n)}var d=function(e){return!(""===e||u()(e))},O=function(e){return function r(n){return n&&"object"===f(n)?Array.isArray(n)?n.map(r):Object.fromEntries(Object.entries(n).map((function(e){var n=l(e,2),t=n[0],o=n[1];return[t,r(o)]}))):e(n)}},y=function e(r,n){return r&&r.reduce((function(r,t){var o=t;return Object.entries(t).forEach((function(r){var i=l(r,2),u=i[0],a=i[1];Array.isArray(a)&&(o[u]=e(t[u],n))})),n(o)&&r.push(o),r}),[])},m=function(e,r){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).filterFunc,t=void 0===n?function(e){return!e.disableIf}:n;return l(y([O((function(r){return(0,a.CU)((function(r){return o()(e,r)}),(0,c.z)(),r)}))(r)],t),1)[0]}}}]);