(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1701],{67007:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>M});var n=r(72500),o=r.n(n),i=r(1469),a=r.n(i),l=r(84596),s=r.n(l),c=r(27361),u=r.n(c),f=r(63105),p=r.n(f),y=r(27418),d=r.n(y),b=r(5055),m=r.n(b),v=r(75875),g=r.n(v),h=r(37275),O=r(86267),S=r(49977),w=r.n(S);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===j(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N={},x=function(e){var t=(a()(e)&&e||e.split(","))[0],r=o().parse(t,!0);return o().format(d()({},r,{search:null},{query:d()({service:"WMS",version:"1.3.0",request:"GetCapabilities"},r.query)}))},T=function(e){var t=e&&e.Title,r=e.LogoURL&&E(E({},u()(e,"LogoURL.$")||{}),{},{format:u()(e,"LogoURL.Format")}),n=u()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:r,imageUrl:u()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:n}},k=function e(t){return t.Layer?(a()(t.Layer)&&t.Layer||[t.Layer]).reduce((function(t,r){return t.concat(e(r)).concat(r.Layer&&r.Name?[r]:[])}),[]):t.Name&&[t]||[]},R=function(e){return e.Request&&e.Request.GetMap&&e.Request.GetMap.DCPType&&e.Request.GetMap.DCPType.HTTP&&e.Request.GetMap.DCPType.HTTP.Get&&e.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&e.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0},D=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,s=(n.WMS_Capabilities||n.WMT_MS_Capabilities||{}).Capability,c=(n.WMS_Capabilities||n.WMT_MS_Capabilities||{}).Service,u=R(s),f=s.Layer&&(null===(e=s.Layer.SRS||s.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],p=s.Layer&&s.Layer.Attribution&&T(s.Layer.Attribution),y=s.Request&&s.Request.GetMap&&s.Request.GetMap.Format||[],b=k(s),m=(a()(b)?b:[b]).filter((function(e){return!l||-1!==e.Name.toLowerCase().indexOf(l.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(l.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(l.toLowerCase())}));return{numberOfRecordsMatched:m.length,numberOfRecordsReturned:Math.min(i,m.length),nextRecord:o+Math.min(i,m.length)+1,service:c,layerOptions:{version:(null===(t=n.WMS_Capabilities||n.WMT_MS_Capabilities)||void 0===t||null===(r=t.$)||void 0===r?void 0:r.version)||"1.3.0"},records:m.filter((function(e,t){return t>=o-1&&t<o-1+i})).map((function(e){return d()({},e,{formats:y,onlineResource:u,SRS:f,credits:e.Attribution?T(e.Attribution):p})}))}},L=function(e,t,r,n){var o=N[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,h.u8)("cacheExpire")||60)?new Promise((function(e){e(D(o.data,t,r,n))})):g().get(x(e)).then((function(o){var i;return m().parseString(o.data,{explicitArray:!1},(function(e,t){i=t})),N[e]={timestamp:(new Date).getTime(),data:i},D(i,t,r,n)}))};const M={flatLayers:k,parseUrl:x,getDimensions:function(e){return s()(e.Dimension||e.dimension||[]).map((function(t,r){var n=e.Extent&&s()(e.Extent)[r]||e.extent&&s()(e.extent)[r];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||n&&n.$.default,values:t._&&t.split(",")||n&&n._&&n.split(",")}}))},getCapabilities:function(e,t){var n=o().parse(e,!0),i=o().format(d()({},n,{query:d()({service:"WMS",version:"1.1.1",request:"GetCapabilities"},n.query)}));return new Promise((function(e){Promise.all([r.e(9942),r.e(7260)]).then(function(){var n=r(67260).unmarshaller;e(g().get(x(i)).then((function(e){var r;if(t)return m().parseString(e.data,{explicitArray:!1},(function(e,t){r=t})),r;var o=n.unmarshalString(e.data);return o&&o.value})))}.bind(null,r)).catch(r.oe)}))},describeLayer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o().parse(e,!0),a=o().format(d()({},i,{query:d()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},i.query,n.query||{})}));return new Promise((function(e){Promise.all([r.e(9942),r.e(7260)]).then(function(){var t=r(67260).unmarshaller;e(g().get(x(a)).then((function(e){var r=t.unmarshalString(e.data);return r&&r.value&&r.value.layerDescription&&r.value.layerDescription[0]})))}.bind(null,r)).catch(r.oe)}))},getRecords:L,describeLayers:function(e,t){var r=o().parse(e,!0),n=o().format(d()({},r,{query:d()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},r.query)}));return g().get(x(n)).then((function(e){var t;return m().parseString(e.data,{explicitArray:!1},(function(e,r){t=r&&r.WMS_DescribeLayerResponse&&r.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return E(E({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:E({},e&&e.query&&e.query.$||{})})}))}))},textSearch:function(e,t,r,n){return L(e,t,r,n)},parseLayerCapabilities:function e(t,r,n){return s()(n||u()(t,"capability.layer.layer")).reduce((function(n,o){return n||(!o.name&&o.layer?e(t,r,s()(o.layer)):2===r.name.split(":").length&&o.name&&2===o.name.split(":").length?r.name===o.name&&o:o.name&&2===o.name.split(":").length?r.name===o.name.split(":")[1]&&o:2===r.name.split(":").length?r.name.split(":")[1]===o.name&&o:r.name===o.name&&o)}),null)},getBBox:function(e,t){for(var r=e,n=r.EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,O.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;!n&&r.Layer&&r.Layer.length;)n=(r=r.Layer[0]).EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,O.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;n||(n={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[n.westBoundLongitude||n.minx,n.southBoundLatitude||n.miny,n.eastBoundLongitude||n.maxx,n.northBoundLatitude||n.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},reset:function(){Object.keys(N).forEach((function(e){delete N[e]}))},preprocess:function(e){var t=e.domainAliases;return e.domainAliases=p()(t),w().Observable.of(e)}}},7472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(27418),o=r.n(n),i=r(45697),a=r.n(i),l=r(24852),s=r.n(l),c=r(85294),u=r.n(c),f=r(72986),p=r.n(f),y=r(5346);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function S(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(i){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(h(e=a.call.apply(a,[this].concat(r))),"renderLoading",(function(){return e.props.maskLoading?s().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},s().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},s().createElement(y.Z,{msgId:"loading"}),s().createElement(p(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),S(h(e),"renderRole",(function(t){return s().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),S(h(e),"hasRole",(function(t){return s().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),S(h(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=l,(r=[{key:"render",value:function(){var e=this,t=s().createElement("div",{id:this.props.id,style:m({zIndex:3},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},s().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),s().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?s().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):s().createElement("span",null)),r=this.props.draggable?s().createElement(u(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?s().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(s().Component);S(j,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),S(j,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const P=j},52595:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(61365).Z)(r(80681).Overlay)},99534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(61365),o=r(56936);const i=(0,n.Z)(o.h_)},94745:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(24852),o=r.n(n),i=r(94184),a=r.n(i),l=r(80681),s=r(7472),c=r(80717),u=r(67076),f=r(19081),p=r.n(f),y=r(75480),d={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},b={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const m=(0,u.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,r=void 0!==t&&t,n=e.loading,i=e.loadingText,u=e.onClose,f=void 0===u?function(){}:u,m=e.title,v=void 0===m?"":m,g=e.clickOutEnabled,h=void 0===g||g,O=e.showClose,S=void 0===O||O,w=e.disabledClose,j=void 0!==w&&w,P=e.showFullscreen,E=void 0!==P&&P,C=e.fullscreenType,N=void 0===C?"full":C,x=e.buttons,T=void 0===x?[]:x,k=e.size,R=void 0===k?"":k,D=e.bodyClassName,L=void 0===D?"":D,M=e.children,A=e.draggable,B=void 0!==A&&A,_=e.fullscreenState,U=e.onFullscreen,I=e.fade,Z=void 0!==I&&I,W=e.fitContent,$=e.modalClassName,q=void 0===$?"":$,F=e.dialogClassName,z=void 0===F?"":F,V=e.enableFooter,G=void 0===V||V,X=d[R]||"",H=E&&"expanded"===_&&b.className[N]||"",J=r?o().createElement("div",{className:"modal-fixed ".concat(q," ")+(B?"ms-draggable":"")},o().createElement(s.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:h?f:function(){},containerClassName:"ms-resizable-modal",draggable:B,modal:!0,className:a()("modal-dialog modal-content",X,H,z,{"ms-fit-content":W})},o().createElement("span",{role:"header"},o().createElement("h4",{className:"modal-title"},o().createElement("div",{className:"ms-title"},v),E&&b.className[N]&&o().createElement(l.Glyphicon,{className:"ms-header-btn",onClick:function(){return U("expanded"===_?"collapsed":"expanded")},glyph:b.glyph[_][N]}),S&&f&&o().createElement(l.Glyphicon,{glyph:"1-close",className:"ms-header-btn",onClick:f,disabled:j}))),o().createElement("div",{role:"body",className:L},M),G&&o().createElement("div",{style:{display:"flex"},role:"footer"},o().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},n?o().createElement(y.Z,null):null),o().createElement("div",{className:"ms-resizable-modal-loading-text"},n?i:null),o().createElement(c.Z,{buttons:T})))):null;return Z?o().createElement(p(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},J):J}))},93451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(86638),o=r(45697),i=r.n(o),a=r(84596),l=r.n(a),s=r(1469),c=r.n(s),u=r(14293),f=r.n(u),p=r(47037),y=r.n(p),d=r(67076),b=["messages"];function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(c()(t))return t.map((function(o){var i=(0,n.S$)(e,o[r]||y()(o)&&o||"");return g(g({},o),{},h({},r,f()(i)?t:i))}));var o=(0,n.S$)(e,t);return f()(o)?t:o},S=function(e,t,r){return function(){var n=arguments.length>1?arguments[1]:void 0;return g(g({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},h({},n,e[n]&&O(t,e[n],r)))}};const w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,d.compose)((0,d.getContext)({messages:i().object}),(0,d.mapProps)((function(r){var n=r.messages,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,b);return g(g({},o),l()(e).reduce(S(o,n,t),{}))})))}},45869:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,r,n,i,a=(n=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(n);if(i){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),a.apply(this,arguments)}return t=f,(r=[{key:"render",value:function(){var e=this;return o().createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},o().createElement("input",{type:"checkbox",disabled:this.props.disabled,checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),o().createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(o().Component);f(y,"propTypes",{disabled:a().bool,className:a().string,checked:a().bool,onChange:a().func,onClick:a().func}),f(y,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}});const d=y},57037:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),l=r(24198),s=r(17621),c=r.n(s),u=r(90702);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){var t,r,i=e.value,a=e.format,s=e.onChangeColor,y=e.text,d=e.line,b=e.disabled,m=e.pickerProps,v=e.containerNode,g=e.onOpen,h=e.placement,O=(t=(0,n.useState)(),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=O[0],w=O[1],j=c()(i).toString();(0,n.useEffect)((function(){var e=S&&c()(S).toString();e&&j&&j!==e&&w(i)}),[j]);var P=(0,n.useRef)();P.current=function(e){g(e),e||b||!S||s(a?c()(S).toString(a):S)};var E,C,N=b?" ms-disabled":"";return o().createElement(u.Z,{disabled:b,onOpen:function(e){return P.current(e)},placement:h,containerNode:v,content:o().createElement(l.xS,f({},m,{className:"ms-sketch-picker",styles:{picker:{width:200,padding:"10px 10px 0",boxSizing:"initial"}},color:c()(S||i).toRgb(),onChange:function(e){return w(e.rgb)}}))},o().createElement("div",{className:"ms-color-picker".concat(N)},o().createElement("div",{className:"ms-color-picker-swatch",style:(E=S||i||"transparent",C=c()(E).toRgbString(),d?{boxSizing:"border-box",border:"4px solid ".concat(C),backgroundColor:"transparent"}:{color:"transparent"===E?"#000000":c().mostReadable(C,["#000000"],{includeFallbackColors:!0}).toHexString(),backgroundColor:C})},y)))}y.propTypes={value:a().oneOfType([a().string,a().shape({r:a().number,g:a().number,b:a().number,a:a().number})]),format:a().string,onChangeColor:a().func,text:a().string,line:a().bool,disabled:a().bool,pickerProps:a().object,containerNode:a().oneOfType([a().node,a().func]),onOpen:a().function,placement:a().string},y.defaultProps={disabled:!1,line:!1,onChangeColor:function(){},pickerProps:{},onOpen:function(){}};const d=y},12961:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),l=r(80681),s=r(57037);function c(e){var t=e.color,r=e.format,n=e.line,i=e.onChangeColor,a=e.disableAlpha,c=e.containerNode,u=e.onOpen,f=e.disabled,p=e.presetColors,y=e.placement;return o().createElement("div",{className:"ms-color-selector"},o().createElement(s.Z,{text:o().createElement(l.Glyphicon,{glyph:"dropper"}),format:r,line:n,value:t,onChangeColor:i,pickerProps:{disableAlpha:a,presetColors:p},containerNode:c,disabled:f,onOpen:u,placement:y}))}c.propTypes={color:a().oneOfType([a().string,a().shape({r:a().number,g:a().number,b:a().number,a:a().number})]),format:a().string,line:a().bool,onChangeColor:a().func,disableAlpha:a().bool,containerNode:a().node,disabled:a().bool,onOpen:a().func,presetColors:a().array,placement:a().string},c.defaultProps={line:!1,onChangeColor:function(){},onOpen:function(){}};const u=c},90702:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(24852),o=r.n(n),i=r(80307),a=r(74691),l=r.n(a),s=r(37275),c=r(23560),u=r.n(c);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["open","onOpen"];function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e){var t=e.containerNode,r=void 0===t?function(){return document.querySelector("."+((0,s.u8)("themePrefix")||"ms2")+" > div")||document.body}:t,a=e.placement,c=e.content,f=e.children,p=e.open,y=e.onOpen,d=void 0===y?function(){}:y,m=e.disabled,g=10,h=u()(r)?r():r,O=(0,n.useRef)({picker:{opacity:0},arrow:{opacity:0},overlay:{}}),S=v((0,n.useState)(O.current),2),w=S[0],j=S[1],P=(0,n.useRef)(),E=(0,n.useRef)(),C=(0,n.useRef)(),N=(0,n.useCallback)((function(){var e,t,r,n,o,i;if(!p)return O.current;var s={picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};if("center"===a)return s;var c=null==P||null===(e=P.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),u=null==E||null===(r=E.current)||void 0===r||null===(n=r.getBoundingClientRect)||void 0===n?void 0:n.call(r),f=null==C||null===(o=C.current)||void 0===o||null===(i=o.getBoundingClientRect)||void 0===i?void 0:i.call(o);if(c&&u&&f){var y,d,b,m,v=f.width,h=f.height,S=u.top,w=u.left,j=u.width,N=u.height,x=c.top,T=c.left,k=c.width,R=c.height,D=v+20<j,L=h+20<N,M={top:{filter:function(){return D&&x-S>h+g},styles:function(){var e=T+k/2-v/2-w;return{picker:{position:"absolute",top:x-h-g-S,left:l()(e,w+g,w+j-v-g)},overlay:{},arrow:{top:x+2,left:T+k/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return L&&w+j-(T+k)>v+g},styles:function(){var e=x-h/2-S+R/2,t=T+k+g-w;return{picker:{position:"absolute",top:l()(e,S+g,S+N-h-g),left:t},overlay:{},arrow:{top:x+R/2,left:T+k-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return D&&S+N-(x+R)>h+g},styles:function(){var e=T+k/2-v/2-w;return{picker:{position:"absolute",top:x+R+g-S,left:l()(e,w+g,w+j-v-g)},overlay:{},arrow:{top:x+R-2,left:T+k/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return L&&T-w>v+g},styles:function(){var e=x-h/2-S+R/2,t=T-v-g-w;return{picker:{position:"absolute",top:l()(e,S+g,S+N-h-g),left:t},overlay:{},arrow:{top:x+R/2,left:T+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null!=M&&null!==(y=M[a])&&void 0!==y&&null!==(d=y.filter)&&void 0!==d&&d.call(y))return null==M||null===(b=M[a])||void 0===b||null===(m=b.styles)||void 0===m?void 0:m.call(b);if("top"!==a&&M.top.filter())return M.top.styles();if("right"!==a&&M.right.filter())return M.right.styles();if("bottom"!==a&&M.bottom.filter())return M.bottom.styles();if("left"!==a&&M.left.filter())return M.left.styles()}return s}),[a,p]);(0,n.useEffect)((function(){j(N());var e=function(){return j(N())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[N]);var x=(0,n.useRef)();return x.current={open:p},(0,n.useEffect)((function(){function e(e){var t=C.current,r=P.current,n=e.target&&(t&&t.contains(e.target)||r&&r.contains(e.target));if(x.current.open&&!n){var o,i,a=e.clientX,l=e.clientY,s=(null==C||null===(o=C.current)||void 0===o||null===(i=o.getBoundingClientRect)||void 0===i?void 0:i.call(o))||{},c=s.left,u=s.top,f=s.width,p=s.height;void 0!==a&&void 0!==l&&!(a>=c&&a<=c+f&&l>=u&&l<=u+p)&&d(!1)}}return window.addEventListener("click",e,!0),window.addEventListener("wheel",e,!0),window.addEventListener("scroll",e,!0),function(){window.removeEventListener("click",e,!0),window.removeEventListener("wheel",e,!0),window.removeEventListener("scroll",e,!0)}}),[]),o().createElement(o().Fragment,null,o().createElement("div",{className:"ms-popover",ref:P},(0,n.cloneElement)(f,{onClick:function(e){m||(e.stopPropagation(),d(!p))}})),h&&p?(0,i.createPortal)(o().createElement("div",{className:"ms-popover-overlay",ref:E,style:b({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none"},null==w?void 0:w.overlay)},o().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),o().createElement("div",{ref:C,style:b({pointerEvents:"auto"},null==w?void 0:w.picker)},c),o().createElement("div",{className:"ms-popover-arrow",style:b({position:"absolute",borderTop:"".concat(12,"px solid transparent"),borderBottom:"".concat(12,"px solid transparent"),borderRight:"".concat(12,"px solid #ffffff"),filter:"drop-shadow(-4px 2px 4px rgba(0, 0, 0, 0.2))"},null==w?void 0:w.arrow)})),h):null)}const O=function(e){var t=e.open,r=e.onOpen,i=void 0===r?function(){}:r,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,p),l=v((0,n.useState)(t),2),s=l[0],c=l[1];return o().createElement(h,y({},a,{open:s,onOpen:function(e){c(e),i(e)}}))}},2576:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(24852),o=r.n(n),i=r(80307),a=r.n(i),l=r(45697),s=r.n(l),c=r(80681),u=r(52595),f=r(50966);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function m(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===p(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(s,e);var t,r,n,i,l=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(i){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),l.apply(this,arguments)}return t=s,(r=[{key:"renderPopover",value:function(){return o().createElement(c.Popover,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title},this.props.text)}},{key:"renderContent",value:function(){var e=this;return o().createElement(c.Glyphicon,{ref:function(t){e.target=t},className:"text-".concat(this.props.bsStyle),glyph:this.props.glyph})}},{key:"render",value:function(){var e=this,t=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return o().createElement("span",{className:"mapstore-info-popover"},this.props.trigger?o().createElement(f.Z,{trigger:t,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),o().createElement(u.Z,{placement:this.props.placement,show:!0,target:function(){return a().findDOMNode(e.target)}},this.renderPopover())])}}])&&y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(o().Component);m(g,"propTypes",{id:s().string,title:s().string,text:s().string,glyph:s().string,bsStyle:s().string,placement:s().string,left:s().number,top:s().number,trigger:s().oneOfType([s().array,s().bool])}),m(g,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]});const h=g},94943:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>ne});var n=r(49977),o=r.n(n),i=r(27361),a=r.n(i),l=r(91175),s=r.n(l),c=r(1469),u=r.n(c),f=r(41106),p=r.n(f),y=r(19155),d=r.n(y),b=r(97395),m=r(80416),v=r(60604),g=r(90825),h=r(80833),O=r(82904),S=r(24262),w=r(96909),j=r(9082),P=r(75875),E=r.n(P),C=r(84596),N=r.n(C),x=r(99009);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function k(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===T(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const A=function(e,t,r){var n=e+"layers/"+t+".json";return E().get(n,r).then((function(e){return e.data&&e.data.layer}))},B=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,o=void 0===n?[]:n,i=e.options,a=void 0===i?{}:i,l=(0,x.$N)(r),s=l.name,c=l.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(s,".json");return E().get(u,a).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&N()(t.styles.style)||[],n=o.map((function(e){return e.name})),i=r.filter((function(e){var t=e.name;return-1===n.indexOf(t)}));return{layer:L(L({},t),{},{styles:{"@class":"linked-hash-set",style:i}})}})).then((function(e){return E().put(u,e).then((function(){return e}))}))},_=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,o=void 0===n?[]:n,i=e.options,a=void 0===i?{}:i,l=(0,x.$N)(r),s=l.name,c=l.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(s,".json");return E().get(u,a).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&N()(t.styles.style)||[];return{layer:L(L({},t),{},{styles:{"@class":"linked-hash-set",style:[].concat(k(r),k(o))}})}})).then((function(e){return E().put(u,e).then((function(){return e}))}))},U=function(e){var t=e.baseUrl,r=e.layerName,n=e.styleName,o=e.options,i=void 0===o?{}:o,a=(0,x.$N)(r),l=a.name,s=a.workspace,c="".concat(t,"rest/").concat(s&&"workspaces/".concat(s,"/")||"","layers/").concat(l,".json");return E().get(c,i).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&N()(t.styles.style)||[],o=t.defaultStyle||{},i=d()([o].concat(k(r)),"name");return{layer:L(L({},t),{},{defaultStyle:{name:n},styles:{"@class":"linked-hash-set",style:i}})}})).then((function(e){return E().put(c,e).then((function(){return e}))}))};var I=r(93222),Z=r(75110),W=r(7147),$=r(8954);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}var F=["name","workspace"];function z(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||J(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===q(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||J(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(e){var t=e.status,r=e.styleName,n=e.baseUrl;return"edit"===t?o().Observable.defer((function(){return j.ZP.getStyleCodeByName({baseUrl:n,styleName:r}).then((function(e){return(0,x.co)(e).then((function(t){return[e,t]})).catch((function(){return[e,!1]}))}))})).switchMap((function(e){var t,r,n=H(e,2),i=n[0],a=n[1];return o().Observable.of((0,w.FU)({languageVersion:i.languageVersion,code:i.code,templateId:"",format:i.format,init:!0}),(0,w.bB)(a?{editorType:"textarea",styleJSON:null}:{editorType:(null==i||null===(t=i.metadata)||void 0===t?void 0:t.msEditorType)||"textarea",styleJSON:null==i||null===(r=i.metadata)||void 0===r?void 0:r.msStyleJSON}))})).catch((function(e){return o().Observable.of((0,w.Fe)("edit",e))})):o().Observable.empty()},Y=function(e){var t=e.styleName,r=e.baseUrl,n=e.onSuccess$,i=e.onError$;return o().Observable.defer((function(){return j.ZP.deleteStyle({baseUrl:r,styleName:t})})).switchMap((function(){return n||o().Observable.empty()})).catch((function(){return i||o().Observable.empty()}))},ee=function(e){var t=e.baseUrl,r=e.update,n=e.code,i=e.format,a=e.styleName,l=e.status,s=e.languageVersion,c=e.options,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return o().Observable.defer((function(){return j.ZP[r?"updateStyle":"createStyle"]({baseUrl:t,code:n,format:i,styleName:a,languageVersion:s,options:c})})).switchMap((function(){var e;return u()(f)&&(e=o().Observable).of.apply(e,[(0,w.Wm)()].concat(z(f)))||f})).catch((function(e){var t;return(t=o().Observable).of.apply(t,[(0,w.Fe)(l,e),(0,w.Wm)()].concat(z(p)))})).startWith((0,w.pt)(l))};function te(e,t){return!t&&e.availableStyles?o().Observable.of((0,m.Xy)({availableStyles:e.availableStyles}),(0,w.Wm)()):(0,h.kB)(e).switchMap((function(t){var r=(0,S.IA)(t);return r.availableStyles?o().Observable.of((0,m.Xy)({availableStyles:r.availableStyles}),(0,m.tV)(e.id,"layer",G({},r)),(0,w.Wm)()):o().Observable.of((0,w.Fe)("availableStyles",{status:401}),(0,w.Wm)())})).catch((function(e){var t=-1!==e.message.indexOf("could not be unmarshalled")?"parsingCapabilities":"global";return o().Observable.of((0,w.Fe)(t,e),(0,w.Wm)())})).startWith((0,w.pt)("global"))}function re(e){return r.e(2568).then(r.t.bind(r,2568,23)).then((function(t){return(0,t.default)(e)}))}const ne={toggleStyleEditorEpic:function(e,t){return e.ofType(w.vZ).filter((function(){return!(0,I.aN)(t.getState())})).switchMap((function(e){var r=t.getState(),n=(0,Z.jN)(r),i=!!a()(n,"options.availableStyles");if(!e.enabled)return function(e){var t=(0,I.gc)(e),r=(0,I.Z0)(e).baseUrl,n=void 0===r?"":r;return o().Observable.of((0,w.l1)(),(0,v.fU)({owner:x.s1})).merge(t?Y({styleName:t,baseUrl:n}):o().Observable.empty())}(r);if((0,I.ji)(r)&&i)return o().Observable.empty();var l=e.layer||(0,Z.Iz)(r);if(!l||l&&!l.url)return o().Observable.empty();var s=(0,S.Nd)(l);if(!s)return te(l);var c=l.url.split(s),u="".concat(c[0]).concat(s),f=(0,I.Z0)(r);return o().Observable.concat(o().Observable.of((0,w.pt)("global"),(0,w.l1)()),o().Observable.defer((function(){return(0,$.eb)({baseUrl:u,styleService:f})})).switchMap((function(e){return o().Observable.concat(o().Observable.of((0,w.E0)(e)),o().Observable.defer((function(){return A(u+"rest/",l.name)})).switchMap((function(e){var t,r=(null==e||null===(t=e.styles)||void 0===t?void 0:t.style)||[],n=d()([e.defaultStyle].concat(z(r)),"name");return 0===n.length?o().Observable.of((0,w.Fe)("availableStyles",{status:401}),(0,w.Wm)()):o().Observable.defer((function(){return Promise.all([j.ZP.getStylesInfo({baseUrl:u,styles:n}),(0,h.kB)(l).toPromise().then((function(e){return e})).catch((function(){return null}))])})).switchMap((function(e){var t=H(e,2),r=t[0],n=t[1],i=n&&(0,S.IA)(n),a=((null==i?void 0:i.availableStyles)||[]).map((function(e){return G(G({},e),(0,x.$N)(e.name))})).filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name})),s=a.length>0?r.map((function(e){var t=(0,x.$N)(e.name),r=a.find((function(e){return e.name===t.name}))||{},n=(r.name,r.workspace,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,F));return n?G(G({},n),e):e})):r;return o().Observable.of((0,v.W)(l.id,x.s1,"override",{}),(0,m.Xy)({availableStyles:s}),(0,m.tV)(l.id,"layer",{availableStyles:s}),(0,w.Wm)())}))})).catch((function(){return te(l,!0)})))})))}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(w.g$).filter((function(e){return!!e.status})).switchMap((function(r){var n=t.getState(),i=(0,I.Vf)(n),a=i&&i.params||{},l=i&&!i.describeFeatureType&&(0,g.H)(i.url,i,{query:a}),s=(0,I.i7)(n)||i.availableStyles&&i.availableStyles[0]&&i.availableStyles[0].name,c=(0,I.Z0)(n).baseUrl,u=void 0===c?"":c;return l&&function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=o().Observable).of.apply(r,[(0,w.pt)("global")].concat(z(i))).merge(e.ofType(m.K$).filter((function(){var e=(0,Z.Iz)(t.getState());return n(e)})).switchMap((function(){var e=(0,Z.Iz)(t.getState());return a(e)})).catch((function(e){return o().Observable.of((0,w.Fe)("global",e),(0,w.Wm)())})).takeUntil(e.ofType(w.E2)))}(e,t,(function(e){return e&&e.describeLayer}),[l],(function(e){return o().Observable.concat(Q({status:r.status,styleName:s,baseUrl:u}),o().Observable.of((0,w.xR)(!(e&&e.describeLayer&&401===e.describeLayer.error)),(0,w.Wm)()))}))||Q({status:r.status,styleName:s,baseUrl:u})}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(w.TB,w.DX).switchMap((function(e){var r=t.getState(),n=(0,I.gc)(r),o=(0,I.Vf)(r),i=(0,x.$N)(o.name).workspace,a=e.format&&e.format!==(0,I.iB)(r),l=n||"".concat(i?"".concat(i,":"):"").concat((0,x.Vi)()),s=e.format||(0,I.iB)(r),c=(0,I.ex)(r),u=(0,I.Z0)(r).baseUrl,f=void 0===u?"":u,p=(0,I.j5)(r),y="sld"===s&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},d=p.version!==y.version?{params:{raw:!0}}:{},m=y,g=function(t){return ee({update:!0,code:e.code,format:s,styleName:t,status:c,baseUrl:f,languageVersion:m,options:d},[(0,v.B1)(x.s1,[{style:t,_v_:Date.now(),singleTile:!0}]),(0,w.k5)({temporaryId:t,templateId:e.templateId||"",code:e.code,format:s,init:e.init,languageVersion:m})],"edit"===c?[]:[(0,b.vU)({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},h=("css"===s?"* { stroke: #888888; }":"sld"===s&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",O=function(e){return ee({code:h,format:s,styleName:e,status:c,baseUrl:f},g(e),[(0,b.vU)({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),(0,w.k5)({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return a&&n&&Y({styleName:n,baseUrl:f,onSuccess$:O("".concat(i?"".concat(i,":"):"").concat((0,x.Vi)())),onError$:g(l)})||n&&g(l)||O(l)}))},createStyleEpic:function(e,t){return e.ofType(w.vA).switchMap((function(e){var r=t.getState(),n=(0,I.gB)(r),i=(0,I.Vf)(r),a=(0,x.$N)(i.name).workspace,l="".concat(a?"".concat(a,":"):"").concat((0,x.nK)(e.settings)),c=(0,I.iB)(r),u=e.settings||{},f=u.title,y=void 0===f?"":f,d=u._abstract,g=void 0===d?"":d,h=(0,I.Z0)(r).baseUrl,O=void 0===h?"":h,S=G({title:y,description:g},{msStyleJSON:null,msEditorType:"visual"}),P=p()(n)({styleTitle:y,styleAbstract:g});return o().Observable.defer((function(){return re(P).then((function(e){return j.ZP.createStyle({baseUrl:O,code:P,format:c,styleName:l,metadata:G(G({},S),{},{msMD5Hash:e})})}))})).switchMap((function(){return o().Observable.of((0,v.B1)(x.s1,[{}]),(0,m.Xy)({style:l||""},!0),(0,w.Nf)(""),(0,w.Wm)()).merge(function(e){var t=e.baseUrl,r=e.layer,n=e.styleName,i=e.format,a=e.title,l=e._abstract,c=e.metadata;return o().Observable.defer((function(){return _({baseUrl:t,layerName:r.name,styles:[{name:n}]})})).switchMap((function(){var e=G({filename:"".concat(n,".").concat(i),format:i,name:n,title:a,_abstract:l},c&&{metadata:c}),t=s()(r.availableStyles),u=r.availableStyles&&[t,e].concat(z(r.availableStyles.filter((function(e,t){return t>0}))))||[e];return o().Observable.of((0,m.Xy)({availableStyles:u},!0),(0,w.Wm)())})).catch((function(){return o().Observable.of((0,w.Wm)())})).startWith((0,w.pt)("global"))}({layer:i,styleName:l,format:c,title:y,_abstract:g,baseUrl:O,metadata:S}))})).catch((function(e){return o().Observable.of((0,w.Fe)("",e),(0,w.Wm)(),(0,b.vU)({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))})).startWith((0,w.pt)(""))}))},updateStyleCodeEpic:function(e,t){return e.ofType(w.ch).switchMap((function(){var e=t.getState(),r=(0,I.iB)(e),n=(0,I.j5)(e),i=(0,I.gB)(e),a=(0,I.i7)(e),l=(0,I.gc)(e),s=(0,I.Vf)(e),c=(0,I.Z0)(e).baseUrl,u=void 0===c?"":c,f=(0,I.WW)(e)||{},p={msStyleJSON:f.styleJSON||null,msEditorType:f.editorType},y=(s.availableStyles||[]).map((function(e){return e.name===a?G(G({},e),{},{metadata:G(G({},e.metadata),p)}):e}));return o().Observable.defer((function(){return re(i).then((function(e){return j.ZP.updateStyle({baseUrl:u,code:i,format:r,styleName:a,languageVersion:n,options:{params:{raw:!0}},metadata:G(G({},p),{},{msMD5Hash:e})})}))})).switchMap((function(){return o().Observable.of((0,w.Wm)(),(0,m.tV)(s.id,"layer",{_v_:Date.now(),availableStyles:y}),(0,m.Xy)({availableStyles:y}),(0,w.k5)({temporaryId:l,templateId:"",code:i,format:r,init:!0,languageVersion:n}),(0,b.Vp)({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))})).catch((function(e){return o().Observable.of((0,w.Fe)("global",e),(0,w.Wm)(),(0,b.vU)({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))})).startWith((0,w.pt)("global"))}))},deleteStyleEpic:function(e,t){return e.ofType(w.j1).filter((function(e){return!!e.styleName})).switchMap((function(e){var r=e.styleName,n=t.getState(),i=(0,I.Vf)(n),a=(0,I.Z0)(n).baseUrl,l=void 0===a?"":a,s=(0,W.tL)(n),c=(0,W.Gd)(n);return o().Observable.defer((function(){return B({baseUrl:l,layerName:i.name,styles:[{name:r}]})})).switchMap((function(){var e=i.availableStyles&&i.availableStyles.filter((function(e){return e.name!==r}))||[];return o().Observable.concat(o().Observable.of((0,m.Xy)({style:"",availableStyles:e},!0),(0,w.Wm)(),(0,O.Xg)("layersettings","originalSettings",G(G({},s),{},{style:""})),(0,O.Xg)("layersettings","initialSettings",G(G({},c),{},{style:""}))),Y({styleName:r,baseUrl:l,onSuccess$:o().Observable.of((0,b.Vp)({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:o().Observable.of((0,b.vU)({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return o().Observable.of((0,w.Wm)())})).startWith((function(){return o().Observable.of((0,w.pt)("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(w.rb).switchMap((function(){var e=t.getState(),r=(0,I.Z0)(e).baseUrl,n=void 0===r?"":r,i=(0,I.Vf)(e),a=(0,I.i7)(e);return o().Observable.defer((function(){return U({baseUrl:n,layerName:i.name,styleName:a})})).switchMap((function(){var e=i.availableStyles.filter((function(e){var t=e.name;return a===t})),t=i.availableStyles.filter((function(e){var t=e.name;return a!==t})),r=[].concat(z(e),z(t));return o().Observable.of((0,m.Xy)({availableStyles:r},!0),(0,b.Vp)({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),(0,w.Wm)())})).startWith((0,w.pt)("global")).catch((function(){return o().Observable.of((0,b.vU)({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),(0,w.Wm)())}))}))}}},80833:(e,t,r)=>{"use strict";r.d(t,{kB:()=>v,HI:()=>g});var n=r(72500),o=r.n(n),i=(r(91175),r(90173)),a=r(49977),l=r(67007),s=r(75875),c=r.n(s),u=(r(86267),r(24262)),f=r(10284),p=r(33044);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}i.default;var v=function(e){return a.Observable.defer((function(){return l.ZP.getCapabilities((0,u.Fh)(e))})).let(f.oB).map((function(t){return l.ZP.parseLayerCapabilities(t,e)}))},g=function(e){return function(e){return a.Observable.defer((function(){return c().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=o().parse(n.url||i,!0);return o().format(b(b({},a),{},{search:void 0,query:b(b({},a.query),{},{service:"WMS",version:"1.1.1",layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(f.oB)}(e).map((function(e){var t=e.data,r=void 0===t?{}:t;return r&&r.layerDescriptions[0]})).map((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return b(b({},e),{},{params:{},search:t?{type:"wfs",url:(0,p.cleanAuthParamsFromURL)(t)}:void 0})}))}},98592:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var n=r(1469),o=r.n(n),i=r(47037),a=r.n(i),l=r(27418),s=r.n(l),c=r(45697),u=r.n(c),f=r(24852),p=r.n(f),y=r(71703),d=r(67076),b=r(22222),m=r(80416),v=r(96909),g=r(15402),h=r(65539),O=r(82030),S=r(73014),w=r(32425),j=r(74621),P=r(93222),E=r(99009),C=r(29916);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function L(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===N(t)?t:String(t)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(s,e);var t,r,n,i,l=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(n);if(i){var r=D(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),l.apply(this,arguments)}return t=s,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=!this.props.editingAllowedRoles||o()(this.props.editingAllowedRoles)&&a()(this.props.userRole)&&-1!==this.props.editingAllowedRoles.indexOf(this.props.userRole);this.props.onInit(this.props.styleService,e&&(0,E.uW)(this.props.layer,this.props.styleService))}},{key:"render",value:function(){return p().createElement(h.Z,{className:"ms-style-editor-container",header:this.props.showToolbar?p().createElement("div",{className:"ms-style-editor-container-header"},this.props.header,p().createElement("div",{className:"text-center"},p().createElement(C.lC,{enableSetDefaultStyle:this.props.enableSetDefaultStyle}))):null,footer:p().createElement("div",{style:{height:25}})},this.props.isEditing?p().createElement(C.m2,{config:this.props.editorConfig}):p().createElement(C.tM,{showDefaultStyleIcon:this.props.canEdit&&this.props.enableSetDefaultStyle}))}}])&&k(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(p().Component);L(A,"propTypes",{layer:u().object,header:u().node,isEditing:u().bool,showToolbar:u().node.bool,onInit:u().func,styleService:u().object,userRole:u().string,editingAllowedRoles:u().array,enableSetDefaultStyle:u().bool,canEdit:u().bool,editorConfig:u().object}),L(A,"defaultProps",{layer:{},onInit:function(){},editingAllowedRoles:["ADMIN"],editorConfig:{}});var B=(0,d.compose)(d.toClass,(0,d.branch)((function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).active}),(function(){return function(){return null}})),(0,y.connect)((0,b.P1)([P.ex,P.aN,P.Vf,P.p,j.L3,P.z_,P.Z0],(function(e,t,r,n,o,i,a){return{isEditing:"edit"===e,loading:t,layer:r,error:n,userRole:o,canEdit:i,styleService:a}})),{onInit:v.E0,onUpdateParams:m.Xy},(function(e,t,r){var n,o,i,a=(null===(n=r.styleService)||void 0===n?void 0:n.baseUrl)===(null===(o=e.styleService)||void 0===o?void 0:o.baseUrl)&&(null===(i=e.styleService)||void 0===i?void 0:i.isStatic),l=r.styleService&&!a?T(T({},r.styleService),{},{isStatic:!0}):T({},e.styleService);return T(T(T(T({},r),e),t),{},{styleService:l})})),(0,O.Z)((function(e){var t=e.error;return!!(null!=t&&t.availableStyles||null!=t&&t.global||null!=t&&t.parsingCapabilities)}),(function(e){var t=e.error;return{glyph:"exclamation-mark",title:p().createElement(g.Z,{msgId:"styleeditor.errorTitle"}),description:p().createElement(g.Z,{msgId:((null==t?void 0:t.availableStyles)?"styleeditor.missingAvailableStylesMessage":(null==t?void 0:t.parsingCapabilities)&&"styleeditor.parsingCapabilitiesError")||(null==t?void 0:t.global)&&"styleeditor.globalError"}),style:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},mainViewStyle:{margin:"auto",width:300}}})),(0,S.Z)((function(e){return"global"===e.loading}),{size:150,style:{margin:"auto"}},(function(e){return p().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},p().createElement(w.Z,e))})),(0,d.compose)((0,y.connect)((function(){return{}}),{toggleStyleEditor:v.Wv}),(0,d.lifecycle)({componentDidMount:function(){this.props.toggleStyleEditor(null,!0)}})))(A);const _={StyleEditorPlugin:s()(B,{TOC:{priority:1,container:"TOCItemSettings"},TOCItemsSettings:{name:"StyleEditor",target:"style",priority:1,ToolbarComponent:C.lC}}),reducers:{styleeditor:r(32244).Z},epics:r(94943).ZP}},32244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(96909),o=r(47037),i=r.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.wL:return s(s({},e),{},{service:t.service,canEdit:t.canEdit});case n.Nm:return s(s({},e),{},{canEdit:t.canEdit});case n.gF:return s(s({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case n.g$:return""===t.status?s(s({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):s(s({},e),{},{status:t.status});case n.dJ:return{service:e.service&&s({},e.service)||{},canEdit:e.canEdit,loading:e.loading};case n.uz:return s(s({},e),{},{addStyle:t.add});case n.lX:return s(s({},e),{},{loading:!t.status||t.status});case n.E2:return s(s({},e),{},{loading:!1,enabled:!0});case n.mF:var r,o,a,l=(null==t||null===(r=t.error)||void 0===r?void 0:r.statusText)||(null==t||null===(o=t.error)||void 0===o?void 0:o.message)||"",u=i()(null==t||null===(a=t.error)||void 0===a?void 0:a.messageId)&&{messageId:t.error.messageId},f=l.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),p=f&&2===f.length&&f.reduce((function(e,t){var r=t.split(" "),n=r[0].replace(/Number:/g,""),o=parseFloat(r[1]);return n&&!isNaN(o)&&s(s({},e),{},c({},n,o))||s({},e)}),s({message:l},u))||s({message:l},u);return s(s({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status||t.error.message&&-1!==t.error.message.indexOf("could not be unmarshalled"))),error:s(s({},e.error),{},c({},t.status||"global",s({status:t.error&&t.error.status||400},p)))});case n.dk:return s(s({},e),{},{metadata:s(s({},e.metadata),t.metadata)});default:return e}}},11847:(e,t,r)=>{"use strict";r.d(t,{ij:()=>v,w0:()=>g,vl:()=>h,K2:()=>O,Nw:()=>S});var n=r(72500),o=r.n(n),i=r(1469),a=r.n(i),l=r(47037),s=r.n(l),c=r(18446),u=r.n(c),f=r(89734),p=r.n(f),y=r(13311),d=r.n(y),b=r(64210);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var o,i,a=(i=6,function(e){if(Array.isArray(e))return e}(o=r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(o,i)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[1],s=a[3],c=a[4],u=a[5],f=0===u.indexOf("/")?u.split("/")[1]:"";return{protocol:l,domain:s,port:c,rootPath:u,applicationRootPath:f}},g=function(e,t){var r=a()(e)?e[0]:e,n=a()(t)?t[0]:t;if(r===n)return!0;if(!r||!n)return!1;if(!s()(r)||!s()(n))return!1;var i=o().parse(r),l=o().parse(n),c=v(r),f=v(n),y=c.protocol===f.protocol,d=c.domain===f.domain,b=c.port===f.port,m=i.pathname===l.pathname,g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return u()(p()(r),p()(n))}(i.query,l.query);return y&&b&&d&&m&&g},h=function(e){return b.Qc(e)},O=function(e){return new RegExp(arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/).test(e)},S=function(e,t){var r=new RegExp(arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/).test(e);if(!r)return!1;if(r&&!t)return!0;if(r&&t){var n=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return d()(n,e)})).length}return!1}}}]);