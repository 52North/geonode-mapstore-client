(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1103],{75480:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(24852),l=n.n(r);const o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{display:"inline-block"}:e;return l().createElement("div",{style:t,className:"mapstore-inline-loader"})}},94745:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(24852),l=n.n(r),o=n(94184),a=n.n(o),i=n(80681),c=n(7472),s=n(80717),u=n(67076),d=n(19081),m=n.n(d),f=n(75480),v={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},p={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const b=(0,u.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,n=void 0!==t&&t,r=e.loading,o=e.loadingText,u=e.onClose,d=void 0===u?function(){}:u,b=e.title,g=void 0===b?"":b,y=e.clickOutEnabled,h=void 0===y||y,E=e.showClose,O=void 0===E||E,S=e.disabledClose,j=void 0!==S&&S,C=e.showFullscreen,w=void 0!==C&&C,P=e.fullscreenType,I=void 0===P?"full":P,Z=e.buttons,x=void 0===Z?[]:Z,z=e.size,N=void 0===z?"":z,k=e.bodyClassName,A=void 0===k?"":k,D=e.children,F=e.draggable,T=void 0!==F&&F,G=e.fullscreenState,_=e.onFullscreen,L=e.fade,M=void 0!==L&&L,$=e.fitContent,B=e.modalClassName,R=void 0===B?"":B,U=e.dialogClassName,X=void 0===U?"":U,q=e.enableFooter,H=void 0===q||q,V=v[N]||"",J=w&&"expanded"===G&&p.className[I]||"",K=n?l().createElement("div",{className:"modal-fixed ".concat(R," ")+(T?"ms-draggable":"")},l().createElement(c.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:h?d:function(){},containerClassName:"ms-resizable-modal",draggable:T,modal:!0,className:a()("modal-dialog modal-content",V,J,X,{"ms-fit-content":$})},l().createElement("span",{role:"header"},l().createElement("h4",{className:"modal-title"},l().createElement("div",{className:"ms-title"},g),w&&p.className[I]&&l().createElement(i.Glyphicon,{className:"ms-header-btn",onClick:function(){return _("expanded"===G?"collapsed":"expanded")},glyph:p.glyph[G][I]}),O&&d&&l().createElement(i.Glyphicon,{glyph:"1-close",className:"ms-header-btn",onClick:d,disabled:j}))),l().createElement("div",{role:"body",className:A},D),H&&l().createElement("div",{style:{display:"flex"},role:"footer"},l().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},r?l().createElement(f.Z,null):null),l().createElement("div",{className:"ms-resizable-modal-loading-text"},r?o:null),l().createElement(s.Z,{buttons:x})))):null;return M?l().createElement(m(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},K):K}))},93451:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(86638),l=n(45697),o=n.n(l),a=n(84596),i=n.n(a),c=n(1469),s=n.n(c),u=n(14293),d=n.n(u),m=n(47037),f=n.n(m),v=n(67076),p=["messages"];function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===b(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(s()(t))return t.map((function(l){var o=(0,r.S$)(e,l[n]||f()(l)&&l||"");return y(y({},l),{},h({},n,d()(o)?t:o))}));var l=(0,r.S$)(e,t);return d()(l)?t:l},O=function(e,t,n){return function(){var r=arguments.length>1?arguments[1]:void 0;return y(y({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},h({},r,e[r]&&E(t,e[r],n)))}};const S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,v.compose)((0,v.getContext)({messages:o().object}),(0,v.mapProps)((function(n){var r=n.messages,l=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(n,p);return y(y({},l),i()(e).reduce(O(l,r,t),{}))})))}},81114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var r=n(24852),l=n.n(r),o=n(71703),a=n(22222),i=n(22843),c=n(82904),s=n(5346),u=n(80681),d=n(827),m=n(74621),f=n(73443),v=n(25108),p=n(72036),b=n(62170),g=n(12547),y=n(45697),h=n.n(y),E=n(94745),O=n(14068),S=n(93451),j=n(32425);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o,a,i=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){s=!0,l=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw l}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=(0,S.Z)("placeholder")(u.FormControl);function I(e){var t=e.update,n=e.error,o=e.success,a=e.labelId,i=e.resource,c=e.contentId,d=e.saving,m=e.loading,f=e.enabled,v=e.onClose,p=e.onSave,b=e.onInit,g=e.onClear,y=e.thumbnailOptions,h=C((0,r.useState)(),2),S=h[0],w=h[1],I=C((0,r.useState)(),2),Z=I[0],x=I[1],z=C((0,r.useState)(""),2),N=z[0],k=z[1],A=C((0,r.useState)(""),2),D=A[0],F=A[1],T=C((0,r.useState)(!1),2),G=T[0],_=T[1],L=(0,r.useRef)();L.current={contentId:c,resource:i},(0,r.useEffect)((function(){f?b(L.current.contentId):g()}),[f]),(0,r.useEffect)((function(){if(!m){var e=L.current.resource||{};w(e.thumbnail_url),k(e.title),F(e.abstract),x(!1),_(e.title?void 0:"error")}}),[f,m]);var M=m||d;return l().createElement(E.Z,{title:l().createElement(s.Z,{msgId:a}),show:f,fitContent:!0,clickOutEnabled:!1,buttons:M?[]:[{text:l().createElement(s.Z,{msgId:"close"}),onClick:function(){return v()}},{text:l().createElement(s.Z,{msgId:a}),disabled:!!G,onClick:function(){return p(t?c:void 0,{thumbnail:S,name:N,description:D},!0)}}],onClose:M?null:function(){return v()}},n&&l().createElement(u.Alert,{bsStyle:"danger",style:{margin:0}},l().createElement("div",null,l().createElement(s.Z,{msgId:"map.mapError.errorDefault"}))),o&&l().createElement(u.Alert,{bsStyle:"success",style:{margin:0}},l().createElement("div",null,l().createElement(s.Z,{msgId:"saveDialog.saveSuccessMessage"}))),l().createElement(u.Form,null,l().createElement(u.FormGroup,{validationState:Z?"error":void 0},l().createElement(u.ControlLabel,null,l().createElement(s.Z,{msgId:"map.thumbnail"})),l().createElement(O.Z,{thumbnail:S,thumbnailOptions:y,message:l().createElement(s.Z,{msgId:"map.message"}),onUpdate:function(e){w(e),x(!1)},onError:function(e){x(e)}}),Z&&l().createElement("div",null,l().createElement("div",null,l().createElement(s.Z,{msgId:"map.error"})),l().createElement("div",null,Z.indexOf&&-1!==Z.indexOf("FORMAT")&&l().createElement("small",null,l().createElement(s.Z,{msgId:"map.errorFormat"}))),l().createElement("div",null,Z.indexOf&&-1!==Z.indexOf("SIZE")&&l().createElement("small",null,l().createElement(s.Z,{msgId:"map.errorSize"}))))),l().createElement(u.FormGroup,{validationState:G},l().createElement(u.ControlLabel,null,l().createElement(s.Z,{msgId:"saveDialog.name"})),l().createElement(P,{placeholder:"saveDialog.namePlaceholder",value:N,onChange:function(e){k(e.target.value),_(e.target.value?void 0:"error")},onBlur:function(e){_(e.target.value?void 0:"error")}})),l().createElement(u.FormGroup,null,l().createElement(u.ControlLabel,null,l().createElement(s.Z,{msgId:"saveDialog.description"})),l().createElement(P,{placeholder:"saveDialog.descriptionPlaceholder",value:D,onChange:function(e){return F(e.target.value)}}))),M&&l().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},l().createElement(j.Z,{size:70})))}I.propTypes={update:h().bool,labelId:h().string,contentId:h().oneOfType([h().string,h().number]),resource:h().object,loading:h().bool,enabled:h().bool,onClose:h().func,onSave:h().func,onInit:h().func,onClear:h().func,error:h().oneOfType([h().string,h().object]),success:h().oneOfType([h().string,h().object]),thumbnailOptions:h().object},I.defaultProps={update:!1,resource:{},loading:!1,enabled:!1,onClose:function(){},onSave:function(){},onInit:function(){},onClear:function(){},thumbnailOptions:{width:300,height:250,type:"image/jpeg",quality:.9,contain:!1}};const Z=I;function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===x(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}var A=(0,o.connect)((0,a.P1)([function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.saveAs)||void 0===n?void 0:n.enabled},d._H,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,n,r,l,o,a,i){return{enabled:e,contentId:i||(null==t?void 0:t.id),resource:n,loading:r,saving:l,error:o,success:a}})),{onClose:c.Xi.bind(null,"saveAs",null),onInit:f.Pg,onSave:f.Vj,onClear:f.rG})((function(e){return l().createElement(Z,k({},e,{labelId:"saveAs"}))}));const D=(0,i.rx)("SaveAs",{component:A,containers:{BurgerMenu:{name:"saveAs",position:30,text:l().createElement(s.Z,{msgId:"saveAs"}),icon:l().createElement(u.Glyphicon,{glyph:"floppy-open"}),action:c.Xi.bind(null,"saveAs",null),selector:(0,a.P1)(m.jl,(function(e){var t,n,r;return null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.perms)||void 0===r?void 0:r.includes("add_resource")}),(function(e,t){return{style:e&&t?{}:{display:"none"}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},g.ZP),reducers:{gnresource:p.Z,gnsave:b.Z,controls:v.Z}})},19081:(e,t,n)=>{"use strict";e.exports=n(1174)}}]);