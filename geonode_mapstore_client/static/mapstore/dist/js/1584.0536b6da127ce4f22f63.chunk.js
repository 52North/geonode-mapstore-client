(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1584,82582,65417],{185447:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(798574);var i=r(427244);const o=function(e,t){if(t=t||{},!(0,i.Kn)(t))throw new Error("options is invalid");var r=t.properties;if(!e)throw new Error("geojson is required");var o=function(e){var t=[1/0,1/0,-1/0,-1/0];return(0,n.pZ)(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}(e),a=(o[0]+o[2])/2,l=(o[1]+o[3])/2;return(0,i.xm)([a,l],r)}},223502:(e,t,r)=>{"use strict";r.d(t,{$:()=>u,b:()=>s});var n=r(737275),i=r(701469),o=r.n(i),a=r(513218),l=r.n(a),u=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o()(t))return t.reduce((function(t,r){return e(r)&&t}),!0);var i=!1,a=!(0===t.indexOf("http")),u=!a&&t.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(u){var s=window.location;a=u[1]===s.protocol&&u[3]===s.hostname;var c=u[4],m=s.port;(80!==c&&""!==c||"80"!==m&&""!==m)&&(a=a&&c===m)}if(!a){var p=n.ZP.getProxyUrl(r);if(p){var f=[];l()(p)&&(f=p.useCORS||[],p=p.url),f.reduce((function(e,r){return e||0===t.indexOf(r)}),!1)||(i=!0)}}return i},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.ZP.getProxyUrl(e);return t&&l()(t)&&(t=t.url),t}},833122:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ve});var n=r(115915),i=r(35961),o=r(312763),a=r(660904),l=r(532056),u=r(888340),s=r(11020),c=r(659635),m=r(720794),p=r(160629),f=r(218157),y=r(344485),d=r(405254),h=r(296541),v=r(990778),g=r(644001),T=r(205522),b=r(428709),x=r(730617),O=r(203547),P=r(503939),E=r(65792),C=r.n(E),Z=r(984596),S=r.n(Z),w=r(281763),L=r.n(w),M=r(618446),G=r.n(M),R=r(396026),I=r.n(R),_=r(807654),H=r.n(_),j=r(223502),B=r(830049),N=r(342196),Y=r(976337),A=r(407578);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}var z=["msTranslateX","msTranslateY","msHeight"],D=["msGeometry"],k=["msGeometry"];function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J(n.key),n)}}function W(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return(t=J(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==X(t)?t:t+""}function $(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ee=N.v.cesium({Cesium:n});function te(e){var t=e.color,r=e.opacity;if(!t)return new i.Z(0,0,0,0);var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,l=[],u=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(C()(t).gl(),4),o=n[0],a=n[1],l=n[2],u=n[3];return void 0!==r?new i.Z(o,a,l,r):new i.Z(o,a,l,u)}function re(e){var t=e.color,r=e.opacity,n=e.dasharray;if((null==n?void 0:n.length)<=0)return te({color:t,opacity:r});var i=n.reduce((function(e,t){return e+t}),0);return new o.Z({color:te({color:t,opacity:r}),dashLength:i,dashPattern:parseInt(n.map((function(e){return Math.floor(e/i*16)})).map((function(e,t){return I()(e).map((function(){return t%2==0?"1":"0"})).join("")})).join(""),2)})}var ne=function(e){var t=parseFloat(e);return!H()(t)&&L()(t)?t:null},ie=function(e){var t=e.map,r=e.positions,n=e.heightReference,i=e.sampleTerrain,o=e.initialHeight,c=null!=n?n:"none",m={none:function(e){return e},relative:function(e,t){return e+t},clamp:function(e,t){return t}},p=[],f=function(e){var t=m[c],r=1/0,n=-1/0,i=1/0,o=-1/0,l=e.map((function(e,l){var u=p[l]||0,s="none"===c?0:e.height||0,m=t(u,s);return r=m<r?m:r,n=m>n?m:n,i=s<i?s:i,o=s>o?s:o,a.Z.fromRadians(e.longitude,e.latitude,m)}));return{height:{min:r,max:n},sampledHeight:{min:i,max:o},positions:l}},y=r.map((function(e){var t,r=l.Z.fromCartesian(e);return p.push(null!==(t=null!=o?o:r.height)&&void 0!==t?t:0),new l.Z(r.longitude,r.latitude,null!=o?o:0)})),d=null==t?void 0:t.terrainProvider;return"none"!==c&&d?(d.ready?Promise.resolve(!0):d.readyPromise).then((function(){var e,t,r,n=null!=d&&d.availability?u.Z(d,y):i(d,null!==(e=null==d?void 0:d.sampleTerrainZoomLevel)&&void 0!==e?e:18,y);return s.Z(n)?null===(t=n.then((function(e){return f(e)})))||void 0===t||null===(r=t.catch)||void 0===r?void 0:r.call(t,(function(){return f(y)})):f(y)})):Promise.resolve(f(y))},oe={};function ae(e){var t=e.offset,r=void 0===t?[]:t,n=e.msLeaderLineWidth,i=null!=n?n:1,o=Math.abs(r[0]||1),a=Math.abs(r[1]||1),l=Math.sign(r[0])===Math.sign(r[1]),u=[o,a,i,l].join(";");if(oe[u])return oe[u];var s=document.createElement("canvas");s.setAttribute("width",o),s.setAttribute("height",a);var c=s.getContext("2d");return c.strokeStyle="#ffffff",c.lineWidth=i,c.beginPath(),c.moveTo.apply(c,$(l?[0,0]:[o,0])),c.lineTo.apply(c,$(l?[o,a]:[0,a])),c.stroke(),oe[u]=s,s}var le=function(e,t){var r=t||{},n=r.msTranslateX,i=r.msTranslateY,o=ne(n),l=ne(i);return o||l?c.Z.multiplyByPoint(m.Z.eastNorthUpToFixedFrame(e),new a.Z(o||0,l||0,0),new a.Z):e},ue={none:"NONE",relative:"RELATIVE_TO_GROUND",clamp:"CLAMP_TO_GROUND"},se=function(e){switch(e){case"top-left":return{horizontalOrigin:p.Z.LEFT,verticalOrigin:f.Z.TOP};case"top":return{horizontalOrigin:p.Z.CENTER,verticalOrigin:f.Z.TOP};case"top-right":return{horizontalOrigin:p.Z.RIGHT,verticalOrigin:f.Z.TOP};case"left":return{horizontalOrigin:p.Z.LEFT,verticalOrigin:f.Z.CENTER};case"center":default:return{horizontalOrigin:p.Z.CENTER,verticalOrigin:f.Z.CENTER};case"right":return{horizontalOrigin:p.Z.RIGHT,verticalOrigin:f.Z.CENTER};case"bottom-left":return{horizontalOrigin:p.Z.LEFT,verticalOrigin:f.Z.BOTTOM};case"bottom":return{horizontalOrigin:p.Z.CENTER,verticalOrigin:f.Z.BOTTOM};case"bottom-right":return{horizontalOrigin:p.Z.RIGHT,verticalOrigin:f.Z.BOTTOM}}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Square",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("Circle"===e){for(var r=[],n=0;n<360;n++){var i=y.Z.toRadians(n);r.push(new d.Z(t*Math.cos(i),t*Math.sin(i)))}return r}return"Square"===e?[new d.Z(-t,-t),new d.Z(t,-t),new d.Z(t,t),new d.Z(-t,t)]:[]},me=function(e,t){var r=t||{},n=r.heading,i=r.pitch,o=r.roll;if(n||i||o){var a=new h.Z(y.Z.toRadians(null!=n?n:0),y.Z.toRadians(null!=i?i:0),y.Z.toRadians(null!=o?o:0));return m.Z.headingPitchRollQuaternion(e,a)}return null},pe=function(e,t){var r,n=t.radius,i=e;if(t.geodesic){var o=Y.Z.computeEllipsePositions({granularity:.02,semiMajorAxis:n,semiMinorAxis:n,rotation:0,center:i},!1,!0).outerPositions;r=a.Z.unpackArray(o),r=[].concat($(r),[r[0]])}else{var l=c.Z.multiplyByTranslation(m.Z.eastNorthUpToFixedFrame(i),new a.Z(0,0,0),new c.Z);r=A.Z.computePositions(0,n,n,128,!1),r=(r=$((r=a.Z.unpackArray(r)).splice(0,Math.ceil(r.length/2)))).map((function(e){return c.Z.multiplyByPoint(l,e,new a.Z)})),r=[].concat($(r),[r[0]])}return r},fe=function(e,t){var r=(t||{}).msHeight,n=ne(r);if(null!==n){var i=l.Z.fromCartesian(e);return a.Z.fromRadians(i.longitude,i.latitude,n)}return e},ye={point:function(e){var t=e.feature,r=e.primitive,n=e.parsedSymbolizer;if("Point"===t.geometry.type){var i=fe(t.positions[0][0],n),o=me(i,n);return V(V({},e),{},{primitive:V(V({},r),{},{orientation:o,geometry:le(i,n)})})}var a=ee(V({msGeometry:{name:"centerPoint"}},n))(t).position,l=me(a,n);return V(V({},e),{},{primitive:V(V({},r),{},{orientation:l,geometry:le(fe(a,n),n)})})},leaderLine:function(e,t){var r=t.map,n=t.sampleTerrain,i=e.parsedSymbolizer,o=(i.msTranslateX,i.msTranslateY,i.msHeight,W(i,z)),a=ye.point(V(V({},e),{},{parsedSymbolizer:o})).primitive;return Promise.all([ie({map:r,positions:[a.geometry],heightReference:"clamp",sampleTerrain:n}).then((function(e){return e.positions[0]})),ie({map:r,positions:[le(fe(a.geometry,i),i)],heightReference:i.msHeightReference,sampleTerrain:n}).then((function(e){return e.positions[0]}))]).then((function(t){return V(V({},e),{},{primitive:V(V({},a),{},{geometry:[t]})})}))},polyline:function(e,t){var r=t.map,n=t.sampleTerrain,i=e.feature,o=e.primitive,a=e.parsedSymbolizer,l=ne(a.msExtrudedHeight),u=ne(a.msHeight);if(null!==u||a.msExtrusionRelativeToGeometry){var s=1/0,c=-1/0;return Promise.all(null==i?void 0:i.positions.map((function(e){return ie({map:r,positions:e,heightReference:a.msHeightReference,sampleTerrain:n,initialHeight:u}).then((function(e){var t=e[a.msExtrusionRelativeToGeometry?"height":"sampledHeight"];return s=t.min<s?t.min:s,c=t.max>c?t.max:c,e.positions}))}))).then((function(t){return V(V({},e),{},{primitive:V(V({},o),{},{geometry:t,extrudedHeight:l?l+(l>0?c:s):void 0})})}))}return V(V({},e),{},{primitive:V(V({},o),{},{geometry:null==i?void 0:i.positions},null!==l&&{extrudedHeight:l})})},wall:function(e,t){return Promise.resolve(ye.polyline(e,t)).then((function(t){var r,n,i=t.primitive;return V(V({},e),{},{primitive:V(V({},i),{},{geometry:null==i?void 0:i.geometry,minimumHeights:null==i||null===(r=i.geometry)||void 0===r?void 0:r.map((function(e){return e.map((function(e){return l.Z.fromCartesian(e).height}))})),maximumHeights:null==i||null===(n=i.geometry)||void 0===n?void 0:n.map((function(e){return e.map((function(){return i.extrudedHeight}))}))})})}))},polygon:function(e,t){var r,n,i=t.map,o=t.sampleTerrain,a=e.feature,l=e.primitive,u=e.parsedSymbolizer,s=ne(u.msExtrudedHeight),c=ne(u.msHeight);if("none"!==(u.msHeightReference||"none")||u.msExtrusionRelativeToGeometry){var m=1/0,p=-1/0;return Promise.all(null==a?void 0:a.positions.map((function(e){return ie({map:i,positions:e,heightReference:u.msHeightReference,sampleTerrain:o,initialHeight:c}).then((function(e){var t=e[u.msExtrusionRelativeToGeometry?"height":"sampledHeight"];return m=t.min<m?t.min:m,p=t.max>p?t.max:p,e.positions}))}))).then((function(t){var r,n,i={height:void 0,extrudedHeight:s?s+(s>0?p:m):void 0};return V(V({},e),{},{primitive:V(V({},l),{},{geometry:t},null!=l&&null!==(r=l.entity)&&void 0!==r&&r.polygon?{entity:{polygon:V(V({},null==l||null===(n=l.entity)||void 0===n?void 0:n.polygon),i)}}:i)})}))}var f=V(V({},null!==s&&{extrudedHeight:s}),null!==c&&{height:c,perPositionHeight:!1});return V(V({},e),{},{primitive:V(V({},l),{},{geometry:null==a?void 0:a.positions},null!=l&&null!==(r=l.entity)&&void 0!==r&&r.polygon?{entity:{polygon:V(V({},null==l||null===(n=l.entity)||void 0===n?void 0:n.polygon),f)}}:f)})},circlePolyline:function(e){var t=e.feature,r=e.primitive,n=e.parsedSymbolizer;if("Point"===t.geometry.type){var i=a.Z.fromDegrees(t.geometry.coordinates[0],t.geometry.coordinates[1],t.geometry.coordinates[2]||0),o=pe(i,n);return V(V({},e),{},{primitive:V(V({},r),{},{geometry:[o]})})}return e},circlePolygon:function(e){var t=e.feature,r=e.primitive,n=e.parsedSymbolizer;if("Point"===t.geometry.type){var i=a.Z.fromDegrees(t.geometry.coordinates[0],t.geometry.coordinates[1],t.geometry.coordinates[2]||0),o=pe(i,n);return V(V({},e),{},{primitive:V(V({},r),{},{geometry:[o]})})}return e}},de={Mark:function(e){var t,r=e.parsedSymbolizer,n=e.globalOpacity,i=e.images,o=e.symbolizer,a=i.find((function(e){return e.id===(0,B.kD)(r,o)}))||{},l=a.image,u=a.width,s=a.height,c=u>s?u:s,m=2*r.radius/c;return l&&!H()(m)?[{type:"point",geometryType:"point",entity:{billboard:{image:l,scale:m,rotation:y.Z.toRadians(-1*r.rotate||0),disableDepthTestDistance:r.msBringToFront?Number.POSITIVE_INFINITY:0,heightReference:v.Z[ue[r.msHeightReference]||"NONE"],color:te({color:"#ffffff",opacity:1*n})}}}].concat($(r.msLeaderLineWidth?[{type:"leaderLine",geometryType:"leaderLine",entity:{polyline:{material:te({color:r.msLeaderLineColor||"#000000",opacity:(null!==(t=r.msLeaderLineOpacity)&&void 0!==t?t:1)*n}),width:r.msLeaderLineWidth}}}]:[])):[]},Icon:function(e){var t,r=e.parsedSymbolizer,n=e.globalOpacity,i=e.images,o=e.symbolizer,a=i.find((function(e){return e.id===(0,B.kD)(r,o)}))||{},l=a.image,u=a.width,s=a.height,c=u>s?u:s,m=r.size/c;return l&&!H()(m)?[{type:"point",geometryType:"point",entity:{billboard:V(V({image:l,scale:m},se(r.anchor)),{},{pixelOffset:r.offset?new d.Z(r.offset[0],r.offset[1]):null,rotation:y.Z.toRadians(-1*r.rotate||0),disableDepthTestDistance:r.msBringToFront?Number.POSITIVE_INFINITY:0,heightReference:v.Z[ue[r.msHeightReference]||"NONE"],color:te({color:"#ffffff",opacity:r.opacity*n})})}}].concat($(r.msLeaderLineWidth?[{type:"leaderLine",geometryType:"leaderLine",entity:{polyline:{material:te({color:r.msLeaderLineColor||"#000000",opacity:(null!==(t=r.msLeaderLineOpacity)&&void 0!==t?t:1)*n}),width:r.msLeaderLineWidth}}}]:[])):[]},Text:function(e){var t,r,n,i,o=e.parsedSymbolizer,a=e.feature,l=e.globalOpacity,u=ne(null==o||null===(t=o.offset)||void 0===t?void 0:t[0]),s=ne(null==o||null===(r=o.offset)||void 0===r?void 0:r[1]);return[{type:"point",geometryType:"point",entity:{label:V(V({text:(0,B.xV)({properties:a.properties},o.label,""),font:[o.fontStyle,o.fontWeight,"".concat(o.size,"px"),S()(o.font||["serif"]).join(", ")].filter((function(e){return e})).join(" "),fillColor:te({color:o.color,opacity:1*l})},se(o.anchor)),{},{disableDepthTestDistance:o.msBringToFront?Number.POSITIVE_INFINITY:0,heightReference:v.Z[ue[o.msHeightReference]||"NONE"],pixelOffset:new d.Z(null!=u?u:0,null!=s?s:0)},o.haloWidth>0&&{style:g.Z.FILL_AND_OUTLINE,outlineColor:te({color:o.haloColor,opacity:1*l}),outlineWidth:o.haloWidth})}}].concat($(o.msLeaderLineWidth?[{type:"leaderLine",geometryType:"leaderLine",entity:{polyline:{material:te({color:o.msLeaderLineColor||"#000000",opacity:(null!==(n=o.msLeaderLineOpacity)&&void 0!==n?n:1)*l}),width:o.msLeaderLineWidth}}}]:[]),$(o.msLeaderLineWidth&&(u||s)?[{type:"offset",geometryType:"point",entity:{billboard:{image:ae(o),scale:1,pixelOffset:new d.Z((u||0)/2,(s||0)/2),color:te({color:o.msLeaderLineColor||"#000000",opacity:(null!==(i=o.msLeaderLineOpacity)&&void 0!==i?i:1)*l})}}}]:[]))},Model:function(e){var t,r,n,i,o=e.parsedSymbolizer,a=e.globalOpacity;return null!=o&&o.model?[{type:"point",geometryType:"point",entity:{model:{uri:new T.Z({proxy:(0,j.$)(null==o?void 0:o.model)?new b.Z((0,j.b)()):void 0,url:null==o?void 0:o.model}),color:te({color:null!==(t=o.color)&&void 0!==t?t:"#ffffff",opacity:(null!==(r=o.opacity)&&void 0!==r?r:1)*a}),scale:null!==(n=null==o?void 0:o.scale)&&void 0!==n?n:1,heightReference:v.Z[ue[o.msHeightReference]||"NONE"]}}}].concat($(o.msLeaderLineWidth?[{type:"leaderLine",geometryType:"leaderLine",entity:{polyline:{material:te({color:o.msLeaderLineColor||"#000000",opacity:(null!==(i=o.msLeaderLineOpacity)&&void 0!==i?i:1)*a}),width:o.msLeaderLineWidth}}}]:[])):[]},Line:function(e){var t,r,n=e.parsedSymbolizer,i=e.feature,o=e.globalOpacity,a=ee(n),l=a?a(i):{};return[].concat($(n.color&&0!==n.width?[{type:"polyline",geometryType:"polyline",entity:{polyline:V({material:null!=n&&n.dasharray?re({color:n.color,opacity:n.opacity*o,dasharray:n.dasharray}):te({color:n.color,opacity:n.opacity*o}),width:n.width,clampToGround:n.msClampToGround,arcType:n.msClampToGround?x.Z.GEODESIC:x.Z.NONE},l)}}]:[]),$(n.msClampToGround||!n.msExtrudedHeight||n.msExtrusionType?[]:[{type:"polylineVolume",geometryType:"wall",entity:{wall:{material:te({color:n.msExtrusionColor||"#000000",opacity:(null!==(t=n.msExtrusionOpacity)&&void 0!==t?t:1)*o})}}}]),$(!n.msClampToGround&&n.msExtrudedHeight&&n.msExtrusionType?[{type:"polylineVolume",geometryType:"polyline",entity:{polylineVolume:{material:te({color:n.msExtrusionColor||"#000000",opacity:(null!==(r=n.msExtrusionOpacity)&&void 0!==r?r:1)*o}),shape:ce(n.msExtrusionType,n.msExtrudedHeight/2)}}}]:[]))},Fill:function(e){var t=e.parsedSymbolizer,r=e.feature,n=e.globalOpacity,i=!t.msClampToGround&&!!t.msExtrudedHeight,o=ee(t),a=o?o(r):{};return[{type:"polygon",geometryType:"polygon",clampToGround:t.msClampToGround,entity:{polygon:V(V({material:te({color:t.color,opacity:t.fillOpacity*n}),perPositionHeight:!t.msClampToGround},t.msClampToGround?{classificationType:"terrain"===t.msClassificationType?O.Z.TERRAIN:"3d"===t.msClassificationType?O.Z.CESIUM_3D_TILE:O.Z.BOTH}:void 0),{},{arcType:t.msClampToGround?x.Z.GEODESIC:void 0},a)}}].concat($(t.outlineColor&&0!==t.outlineWidth&&!i?[{type:"polyline",geometryType:"polyline",entity:{polyline:V(V({material:null!=t&&t.outlineDasharray?re({color:t.outlineColor,opacity:t.outlineOpacity*n,dasharray:t.outlineDasharray}):te({color:t.outlineColor,opacity:t.outlineOpacity*n}),width:t.outlineWidth,clampToGround:t.msClampToGround},t.msClampToGround?{classificationType:"terrain"===t.msClassificationType?O.Z.TERRAIN:"3d"===t.msClassificationType?O.Z.CESIUM_3D_TILE:O.Z.BOTH}:void 0),{},{arcType:t.msClampToGround?x.Z.GEODESIC:x.Z.NONE},a)}}]:[]))},Circle:function(e){var t=e.parsedSymbolizer,r=e.globalOpacity;return[{type:"polygon",geometryType:"circlePolygon",clampToGround:t.msClampToGround,entity:{polygon:V({material:te({color:t.color,opacity:t.opacity*r})},t.geodesic?V(V({perPositionHeight:!t.msClampToGround},t.msClampToGround?{classificationType:"terrain"===t.msClassificationType?O.Z.TERRAIN:"3d"===t.msClassificationType?O.Z.CESIUM_3D_TILE:O.Z.BOTH}:void 0),{},{arcType:x.Z.GEODESIC}):{perPositionHeight:!0,arcType:void 0})}}].concat($(t.outlineColor&&0!==t.outlineWidth?[{type:"polyline",geometryType:"circlePolyline",entity:{polyline:V({material:null!=t&&t.outlineDasharray?re({color:t.outlineColor,opacity:t.outlineOpacity*r,dasharray:t.outlineDasharray}):te({color:t.outlineColor,opacity:t.outlineOpacity*r}),width:t.outlineWidth},t.geodesic?V(V({clampToGround:t.msClampToGround},t.msClampToGround?{classificationType:"terrain"===t.msClassificationType?O.Z.TERRAIN:"3d"===t.msClassificationType?O.Z.CESIUM_3D_TILE:O.Z.BOTH}:void 0),{},{arcType:x.Z.GEODESIC}):{clampToGround:!1,arcType:x.Z.NONE})}}]:[]))}},he=function(e,t){e.msGeometry;var r=W(e,D),n=(t.msGeometry,W(t,k));return!G()(r,n)};const ve=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"readStyle",value:function(){return new Promise((function(e,t){try{e(null)}catch(e){t(e)}}))}},{key:"writeStyle",value:function(e){return new Promise((function(t,r){try{t(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).rules,t=void 0===e?[]:e;return function(e){var r=e.opacity,n=void 0===r?1:r,i=e.features,o=e.getPreviousStyledFeature,a=void 0===o?function(){}:o,l=e.map,u=e.sampleTerrain,s=void 0===u?P.Z:u;return(0,B.vg)({rules:t},{features:i}).then((function(e){var r=function(e){var t=e.rules,r=e.features,n=e.globalOpacity,i=e.images;return null==t?void 0:t.map((function(e){var t=r.filter((function(t){var r=t.properties;return!e.filter||(0,B.NG)({properties:r||{}},e.filter)}));return e.symbolizers.map((function(e){return t.filter((function(t){return function(e){var t=e.geometry,r=e.symbolizer;return!("Point"===t.type&&["Fill","Line"].includes(r.kind)||"LineString"===t.type&&["Fill"].includes(r.kind)||"Polygon"===t.type&&["Line"].includes(r.kind))}({geometry:t.geometry,symbolizer:e})})).map((function(t){var r=(0,B.mL)(e,t);return(de[r.kind]?de[r.kind]:function(){return[]})({feature:t,symbolizer:e,images:i,parsedSymbolizer:r,globalOpacity:n}).map((function(n){return{id:"".concat(t.id,":").concat(r.symbolizerId,":").concat(n.type),feature:t,primitive:n,symbolizer:e,parsedSymbolizer:r}}))})).flat()})).flat()})).flat()}({rules:t,features:i,globalOpacity:n,images:e});return Promise.all(r.map((function(e){var t,r,n,i,o,u,c=a(e);if(!c||(n=c.parsedSymbolizer,i=e.parsedSymbolizer,(null==n||null===(o=n.msGeometry)||void 0===o?void 0:o.name)!==(null==i||null===(u=i.msGeometry)||void 0===u?void 0:u.name)||(null==n?void 0:n.msHeight)!==(null==i?void 0:i.msHeight)||(null==n?void 0:n.msHeightReference)!==(null==i?void 0:i.msHeightReference)||(null==n?void 0:n.msExtrudedHeight)!==(null==i?void 0:i.msExtrudedHeight)||(null==n?void 0:n.msExtrusionRelativeToGeometry)!==(null==i?void 0:i.msExtrusionRelativeToGeometry)||(null==n?void 0:n.msExtrusionType)!==(null==i?void 0:i.msExtrusionType)||(null==n?void 0:n.msTranslateX)!==(null==i?void 0:i.msTranslateX)||(null==n?void 0:n.msTranslateY)!==(null==i?void 0:i.msTranslateY)||(null==n?void 0:n.heading)!==(null==i?void 0:i.heading)||(null==n?void 0:n.pitch)!==(null==i?void 0:i.pitch)||(null==n?void 0:n.roll)!==(null==i?void 0:i.roll))){var m,p,f=ye[null==e||null===(m=e.primitive)||void 0===m?void 0:m.geometryType]?ye[null==e||null===(p=e.primitive)||void 0===p?void 0:p.geometryType]:function(){return e};return Promise.resolve(f(e,{map:l,sampleTerrain:s})).then((function(e){return V(V({},e),{},{action:"replace"})}))}return Promise.resolve(V(V({},e),{},{primitive:V(V(V({},null==c?void 0:c.primitive),null==e?void 0:e.primitive),{},{geometry:null==c||null===(t=c.primitive)||void 0===t?void 0:t.geometry,entity:V({},Object.keys((null==e||null===(r=e.primitive)||void 0===r?void 0:r.entity)||{}).reduce((function(t,r){var n,i,o,a;return V(V({},t),{},q({},r,V(V({},null==c||null===(n=c.primitive)||void 0===n||null===(i=n.entity)||void 0===i?void 0:i[r]),null==e||null===(o=e.primitive)||void 0===o||null===(a=o.entity)||void 0===a?void 0:a[r])))}),{}))}),action:he(c.parsedSymbolizer,e.parsedSymbolizer)?"update":"none"}))})))})).then((function(e){return e.filter((function(e){return!!e.primitive.geometry}))}))}}(e))}catch(e){r(e)}}))}}])&&F(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},342196:(e,t,r)=>{"use strict";r.d(t,{v:()=>h});var n=r(673032),i=r(798574);function o(e,t){return void 0===t&&(t={}),(0,i.hE)(e,(function(e,r){var i=r.geometry.coordinates;return e+(0,n.Z)(i[0],i[1],t)}),0)}var a=r(257322),l=r(50076),u=r(427244),s=r(55608);function c(e,t,r){void 0===r&&(r={});for(var i=(0,s.wA)(e).coordinates,o=0,c=0;c<i.length&&!(t>=o&&c===i.length-1);c++){if(o>=t){var m=t-o;if(m){var p=(0,a.Z)(i[c],i[c-1])-180;return(0,l.Z)(i[c],m,p,r)}return(0,u.xm)(i[c])}o+=(0,n.Z)(i[c],i[c+1],r)}return(0,u.xm)(i[i.length-1])}var m=r(185447),p=r(688362);function f(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){return["centerPoint","lineToArc","startPoint","endPoint"].includes(null==e?void 0:e.name)},h={cesium:function(e){var t=e.Cesium,r=function(e){if(null!=e&&e.positions)return{type:e.geometry.type,positions:null==e?void 0:e.positions[0]};var r=("Polygon"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates).map((function(e){return t.Cartesian3.fromDegrees(e[0],e[1],e[2])}));return{type:e.geometry.type,positions:r}},n={centerPoint:function(e){var n,i=r(e),o=i.positions,a=i.type,l=o.map((function(e){var r=t.Cartographic.fromCartesian(e),n=r.longitude,i=r.latitude,o=r.height;return[t.Math.toDegrees(n),t.Math.toDegrees(i),o]}));if("LineString"===a){var u=o.reduce((function(e,r,n){return o[n+1]?e+t.Cartesian3.distance(r,o[n+1]):e}),0)/2,s=l.map((function(e,r){var n=o.filter((function(e,t){return t<r+1}));return[e[0],e[1],e[2],n.reduce((function(e,r,i){return n[i+1]?e+t.Cartesian3.distance(r,n[i+1]):e}),0)]})),c=s.find((function(e){return e[3]>u})),p=s.indexOf(c)-1,d=s[p],h=u-d[3],v=t.Cartographic.toCartesian(t.Cartographic.fromDegrees(d[0],d[1],d[2])),g=t.Cartesian3.normalize(t.Cartesian3.subtract(t.Cartographic.toCartesian(t.Cartographic.fromDegrees(c[0],c[1],c[2])),v,new t.Cartesian3),new t.Cartesian3);return{position:t.Cartesian3.add(v,t.Cartesian3.multiplyByScalar(g,h,new t.Cartesian3),new t.Cartesian3)}}var T,b=((0,m.Z)({type:"Polygon",coordinates:[[].concat((T=l,function(e){if(Array.isArray(e))return y(e)}(T)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(T)||f(T)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[l[0]])]})||{}).geometry,x=l.reduce((function(e,t){return e+function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,l=[],u=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,3)[2]}),0)/l.length,O=[b.coordinates[0],b.coordinates[1],x]||0;return{position:t.Cartographic.toCartesian((n=t.Cartographic).fromDegrees.apply(n,O))}},lineToArc:function(){return{arcType:t.ArcType.GEODESIC,perPositionHeight:void 0}},startPoint:function(e){return{position:r(e).positions[0].clone()}},endPoint:function(e){var t=r(e).positions;return{position:t["Polygon"===e.geometry.type?t.length-2:t.length-1].clone()}}};return function(e){var t=e.msGeometry;return d(t)&&n[null==t?void 0:t.name]?n[t.name]:null}},openlayers:function(e){var t=e.Point,r=e.LineString,n=e.Polygon,i=e.GeoJSON,a=e.getCenter,l=new i,u={centerPoint:function(e){return function(r){var n=r.getGeometry().getType();if(["Point","MultiPoint"].includes(n))return r.getGeometry();var i=e?e.getView().getProjection().getCode():"EPSG:3857",u=r.getGeometry();if(["LineString"].includes(n)){var s=JSON.parse(l.writeFeature(r,{dataProjection:"EPSG:4326",featureProjection:i})),m=c(s,o(s)/2),f=(0,p.reproject)(m.geometry.coordinates,"EPSG:4326",i);return new t([f.x,f.y])}var y=u.getExtent(),d=a(y);return new t(d)}},lineToArc:function(e){return function(t){var i=e?e.getView().getProjection().getCode():"EPSG:3857",o=t.getGeometry().getType();if("LineString"===o||"MultiPoint"===o){var a=t.getGeometry().getCoordinates();return a=(0,p.transformLineToArcs)(a.map((function(e){var t=(0,p.reproject)(e,i,"EPSG:4326");return[t.x,t.y]}))),new r(a.map((function(e){var t=(0,p.reproject)(e,"EPSG:4326",i);return[t.x,t.y]})))}if("Polygon"===o){var l=t.getGeometry().getCoordinates()[0];return l=(0,p.transformLineToArcs)(l.map((function(e){var t=(0,p.reproject)(e,i,"EPSG:4326");return[t.x,t.y]}))),new n([l.map((function(e){var t=(0,p.reproject)(e,"EPSG:4326",i);return[t.x,t.y]}))])}return t.getGeometry()}},startPoint:function(){return function(e){var r=e.getGeometry(),n=r.getType();if(["Point","MultiPoint"].includes(n))return e.getGeometry();var i="Polygon"===n?r.getCoordinates()[0]:r.getCoordinates();return i.length>1?new t(i[0]):null}},endPoint:function(){return function(e){var r=e.getGeometry(),n=r.getType();if(["Point","MultiPoint"].includes(n))return e.getGeometry();var i="Polygon"===n?r.getCoordinates()[0]:r.getCoordinates();return new t(i.length>3?i[i.length-("Polygon"===n?2:1)]:i[i.length-1])}}};return function(e,t,r){var n,i=e.msGeometry;if(d(i)&&u[null==i?void 0:i.name])return{geometry:u[i.name](r)};var o=(null==t?void 0:t.getGeometry)&&(null==t||null===(n=t.getGeometry())||void 0===n?void 0:n.getType());return["Mark","Icon"].includes(e.kind)&&["LineString","MultiLineString","Polygon","MultiPolygon"].includes(o)?{geometry:u.centerPoint(r)}:null}},geojson:function(){var e={centerPoint:function(e){return["LineString"].includes(e.geometry.type)?c(e,o(e)/2).geometry.coordinates:(0,m.Z)(e).geometry.coordinates},lineToArc:function(e){return"LineString"===e.geometry.type?(0,p.transformLineToArcs)(e.geometry.coordinates):"Polygon"===e.geometry.type?e.geometry.coordinates.map(p.transformLineToArcs):null},startPoint:function(e){return"Polygon"===e.geometry.type?e.geometry.coordinates[0][0]:"LineString"===e.geometry.type?e.geometry.coordinates[0]:null},endPoint:function(e){return"Polygon"===e.geometry.type?e.geometry.coordinates[0][e.geometry.coordinates[0].length-2]:"LineString"===e.geometry.type?e.geometry.coordinates[e.geometry.coordinates.length-1]:null}};return function(t){var r=t.msGeometry;return d(r)&&e[null==r?void 0:r.name]?e[r.name]:null}}}},540098:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,i,o){for(var a=-1,l=r(t((n-e)/(i||1)),0),u=Array(l);l--;)u[o?l:++a]=e,e+=i;return u}},747445:(e,t,r)=>{var n=r(540098),i=r(816612),o=r(418601);e.exports=function(e){return function(t,r,a){return a&&"number"!=typeof a&&i(t,r,a)&&(r=a=void 0),t=o(t),void 0===r?(r=t,t=0):r=o(r),a=void 0===a?t<r?1:-1:o(a),n(t,r,a,e)}}},396026:(e,t,r)=>{var n=r(747445)();e.exports=n},382582:function(e){e.exports=function(){"use strict";function e(e,n,i,o,a){!function e(r,n,i,o,a){for(;o>i;){if(o-i>600){var l=o-i+1,u=n-i+1,s=Math.log(l),c=.5*Math.exp(2*s/3),m=.5*Math.sqrt(s*c*(l-c)/l)*(u-l/2<0?-1:1);e(r,n,Math.max(i,Math.floor(n-u*c/l+m)),Math.min(o,Math.floor(n+(l-u)*c/l+m)),a)}var p=r[n],f=i,y=o;for(t(r,i,n),a(r[o],p)>0&&t(r,i,o);f<y;){for(t(r,f,y),f++,y--;a(r[f],p)<0;)f++;for(;a(r[y],p)>0;)y--}0===a(r[i],p)?t(r,i,y):t(r,++y,o),y<=n&&(i=y+1),n<=y&&(o=y-1)}}(e,n,i||0,o||e.length-1,a||r)}function t(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function r(e,t){return e<t?-1:e>t?1:0}var n=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function o(e,t){a(e,0,e.children.length,t,e)}function a(e,t,r,n,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t;o<r;o++){var a=e.children[o];l(i,e.leaf?n(a):a)}return i}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function u(e,t){return e.minX-t.minX}function s(e,t){return e.minY-t.minY}function c(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function m(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function y(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(t,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var l=r+Math.ceil((n-r)/i/2)*i;e(t,l,r,n,o),a.push(r,l,l,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(e){var t=this.data,r=[];if(!f(e,t))return r;for(var n=this.toBBox,i=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],l=t.leaf?n(a):a;f(e,l)&&(t.leaf?r.push(a):p(e,l)?this._all(a,r):i.push(a))}t=i.pop()}return r},n.prototype.collides=function(e){var t=this.data;if(!f(e,t))return!1;for(var r=[];t;){for(var n=0;n<t.children.length;n++){var i=t.children[n],o=t.leaf?this.toBBox(i):i;if(f(e,o)){if(t.leaf||p(e,o))return!0;r.push(i)}}t=r.pop()}return!1},n.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},n.prototype.clear=function(){return this.data=y([]),this},n.prototype.remove=function(e,t){if(!e)return this;for(var r,n,o,a=this.data,l=this.toBBox(e),u=[],s=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=s.pop(),o=!0),a.leaf){var c=i(e,a.children,t);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}o||a.leaf||!p(a,l)?n?(r++,a=n.children[r],o=!1):a=null:(u.push(a),s.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(e){return e},n.prototype.compareMinX=function(e,t){return e.minX-t.minX},n.prototype.compareMinY=function(e,t){return e.minY-t.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(e){return this.data=e,this},n.prototype._all=function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},n.prototype._build=function(e,t,r,n){var i,a=r-t+1,l=this._maxEntries;if(a<=l)return o(i=y(e.slice(t,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,n-1))),(i=y([])).leaf=!1,i.height=n;var u=Math.ceil(a/l),s=u*Math.ceil(Math.sqrt(l));d(e,t,r,s,this.compareMinX);for(var c=t;c<=r;c+=s){var m=Math.min(c+s-1,r);d(e,c,m,u,this.compareMinY);for(var p=c;p<=m;p+=u){var f=Math.min(p+u-1,m);i.children.push(this._build(e,p,f,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(e,t,r,n){for(;n.push(t),!t.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,l=0;l<t.children.length;l++){var u=t.children[l],s=c(u),m=(p=e,f=u,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-s);m<o?(o=m,i=s<i?s:i,a=u):m===o&&s<i&&(i=s,a=u)}t=a||t.children[0]}var p,f;return t},n.prototype._insert=function(e,t,r){var n=r?e:this.toBBox(e),i=[],o=this._chooseSubtree(n,this.data,t,i);for(o.children.push(e),l(o,n);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(n,i,t)},n.prototype._split=function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),l=y(r.children.splice(a,r.children.length-a));l.height=r.height,l.leaf=r.leaf,o(r,this.toBBox),o(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(r,l)},n.prototype._splitRoot=function(e,t){this.data=y([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(e,t,r){for(var n,i,o,l,u,s,m,p=1/0,f=1/0,y=t;y<=r-t;y++){var d=a(e,0,y,this.toBBox),h=a(e,y,r,this.toBBox),v=(i=d,o=h,void 0,void 0,void 0,void 0,l=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),s=Math.min(i.maxX,o.maxX),m=Math.min(i.maxY,o.maxY),Math.max(0,s-l)*Math.max(0,m-u)),g=c(d)+c(h);v<p?(p=v,n=y,f=g<f?g:f):v===p&&g<f&&(f=g,n=y)}return n||r-t},n.prototype._chooseSplitAxis=function(e,t,r){var n=e.leaf?this.compareMinX:u,i=e.leaf?this.compareMinY:s;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},n.prototype._allDistMargin=function(e,t,r,n){e.children.sort(n);for(var i=this.toBBox,o=a(e,0,t,i),u=a(e,r-t,r,i),s=m(o)+m(u),c=t;c<r-t;c++){var p=e.children[c];l(o,e.leaf?i(p):p),s+=m(o)}for(var f=r-t-1;f>=t;f--){var y=e.children[f];l(u,e.leaf?i(y):y),s+=m(u)}return s},n.prototype._adjustParentBBoxes=function(e,t,r){for(var n=r;n>=0;n--)l(t[n],e)},n.prototype._condense=function(e){for(var t=e.length-1,r=void 0;t>=0;t--)0===e[t].children.length?t>0?(r=e[t-1].children).splice(r.indexOf(e[t]),1):this.clear():o(e[t],this.toBBox)},n}()}}]);