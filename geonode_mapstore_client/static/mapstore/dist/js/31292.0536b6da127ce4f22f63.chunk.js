(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[31292],{185447:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(798574);var o=r(427244);const i=function(e,t){if(t=t||{},!(0,o.Kn)(t))throw new Error("options is invalid");var r=t.properties;if(!e)throw new Error("geojson is required");var i=function(e){var t=[1/0,1/0,-1/0,-1/0];return(0,n.pZ)(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}(e),a=(i[0]+i[2])/2,u=(i[1]+i[3])/2;return(0,o.xm)([a,u],r)}},620388:(e,t,r)=>{"use strict";r.d(t,{L:()=>s});var n=r(688362),o=r(552259),i=6371008.8;function a(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,o=e[1]*Math.PI/180,a=e[0]*Math.PI/180,u=t/n,c=Math.asin(Math.sin(o)*Math.cos(u)+Math.cos(o)*Math.sin(u)*Math.cos(r));return[180*(a+Math.atan2(Math.sin(r)*Math.sin(u)*Math.cos(o),Math.cos(u)-Math.sin(o)*Math.sin(c)))/Math.PI,180*c/Math.PI]}function u(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.sides,o=void 0===n?128:n,i=r.sphereRadius,u=[],c=0;c<o;++c)u.push(a(e,t,2*Math.PI*c/o,i));return u.push(u[0]),u}function c(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.sides,a=void 0===i?128:i,u=r.projection,c=void 0===u?"EPSG:3857":u,s=(0,n.reproject)(e,"EPSG:4326",c),l=[s.x,s.y],g=(0,n.getUnits)(c),y=t/o.Wm[g],f=2*(a+1),m=new Array(f),d=0;d<f;d+=2){m[d]=0,m[d+1]=0;for(var p=2;p<2;p++)m[d+p]=l[p]}for(var v,h,P=0;P<=a;++P){var C=2*P,S=0+2*(void 0,(h=P%(v=a))*v<0?h+v:h)*Math.PI/a;m[C]=l[0]+y*Math.cos(S),m[C+1]=l[1]+y*Math.sin(S)}for(var M=[],G=0;G<m.length-1;G++)if(G%2==0){var w=(0,n.reproject)([m[G],m[G+1]],c,"EPSG:4326");M.push([w.x,w.y])}return M}function s(e,t,r,n){return{type:"Polygon",coordinates:[(r?u:c)(e,t,n)]}}},342196:(e,t,r)=>{"use strict";r.d(t,{v:()=>p});var n=r(673032),o=r(798574);function i(e,t){return void 0===t&&(t={}),(0,o.hE)(e,(function(e,r){var o=r.geometry.coordinates;return e+(0,n.Z)(o[0],o[1],t)}),0)}var a=r(257322),u=r(50076),c=r(427244),s=r(55608);function l(e,t,r){void 0===r&&(r={});for(var o=(0,s.wA)(e).coordinates,i=0,l=0;l<o.length&&!(t>=i&&l===o.length-1);l++){if(i>=t){var g=t-i;if(g){var y=(0,a.Z)(o[l],o[l-1])-180;return(0,u.Z)(o[l],g,y,r)}return(0,c.xm)(o[l])}i+=(0,n.Z)(o[l],o[l+1],r)}return(0,c.xm)(o[o.length-1])}var g=r(185447),y=r(688362);function f(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){return["centerPoint","lineToArc","startPoint","endPoint"].includes(null==e?void 0:e.name)},p={cesium:function(e){var t=e.Cesium,r=function(e){if(null!=e&&e.positions)return{type:e.geometry.type,positions:null==e?void 0:e.positions[0]};var r=("Polygon"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates).map((function(e){return t.Cartesian3.fromDegrees(e[0],e[1],e[2])}));return{type:e.geometry.type,positions:r}},n={centerPoint:function(e){var n,o=r(e),i=o.positions,a=o.type,u=i.map((function(e){var r=t.Cartographic.fromCartesian(e),n=r.longitude,o=r.latitude,i=r.height;return[t.Math.toDegrees(n),t.Math.toDegrees(o),i]}));if("LineString"===a){var c=i.reduce((function(e,r,n){return i[n+1]?e+t.Cartesian3.distance(r,i[n+1]):e}),0)/2,s=u.map((function(e,r){var n=i.filter((function(e,t){return t<r+1}));return[e[0],e[1],e[2],n.reduce((function(e,r,o){return n[o+1]?e+t.Cartesian3.distance(r,n[o+1]):e}),0)]})),l=s.find((function(e){return e[3]>c})),y=s.indexOf(l)-1,d=s[y],p=c-d[3],v=t.Cartographic.toCartesian(t.Cartographic.fromDegrees(d[0],d[1],d[2])),h=t.Cartesian3.normalize(t.Cartesian3.subtract(t.Cartographic.toCartesian(t.Cartographic.fromDegrees(l[0],l[1],l[2])),v,new t.Cartesian3),new t.Cartesian3);return{position:t.Cartesian3.add(v,t.Cartesian3.multiplyByScalar(h,p,new t.Cartesian3),new t.Cartesian3)}}var P,C=((0,g.Z)({type:"Polygon",coordinates:[[].concat((P=u,function(e){if(Array.isArray(e))return m(e)}(P)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(P)||f(P)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[u[0]])]})||{}).geometry,S=u.reduce((function(e,t){return e+function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,3)[2]}),0)/u.length,M=[C.coordinates[0],C.coordinates[1],S]||0;return{position:t.Cartographic.toCartesian((n=t.Cartographic).fromDegrees.apply(n,M))}},lineToArc:function(){return{arcType:t.ArcType.GEODESIC,perPositionHeight:void 0}},startPoint:function(e){return{position:r(e).positions[0].clone()}},endPoint:function(e){var t=r(e).positions;return{position:t["Polygon"===e.geometry.type?t.length-2:t.length-1].clone()}}};return function(e){var t=e.msGeometry;return d(t)&&n[null==t?void 0:t.name]?n[t.name]:null}},openlayers:function(e){var t=e.Point,r=e.LineString,n=e.Polygon,o=e.GeoJSON,a=e.getCenter,u=new o,c={centerPoint:function(e){return function(r){var n=r.getGeometry().getType();if(["Point","MultiPoint"].includes(n))return r.getGeometry();var o=e?e.getView().getProjection().getCode():"EPSG:3857",c=r.getGeometry();if(["LineString"].includes(n)){var s=JSON.parse(u.writeFeature(r,{dataProjection:"EPSG:4326",featureProjection:o})),g=l(s,i(s)/2),f=(0,y.reproject)(g.geometry.coordinates,"EPSG:4326",o);return new t([f.x,f.y])}var m=c.getExtent(),d=a(m);return new t(d)}},lineToArc:function(e){return function(t){var o=e?e.getView().getProjection().getCode():"EPSG:3857",i=t.getGeometry().getType();if("LineString"===i||"MultiPoint"===i){var a=t.getGeometry().getCoordinates();return a=(0,y.transformLineToArcs)(a.map((function(e){var t=(0,y.reproject)(e,o,"EPSG:4326");return[t.x,t.y]}))),new r(a.map((function(e){var t=(0,y.reproject)(e,"EPSG:4326",o);return[t.x,t.y]})))}if("Polygon"===i){var u=t.getGeometry().getCoordinates()[0];return u=(0,y.transformLineToArcs)(u.map((function(e){var t=(0,y.reproject)(e,o,"EPSG:4326");return[t.x,t.y]}))),new n([u.map((function(e){var t=(0,y.reproject)(e,"EPSG:4326",o);return[t.x,t.y]}))])}return t.getGeometry()}},startPoint:function(){return function(e){var r=e.getGeometry(),n=r.getType();if(["Point","MultiPoint"].includes(n))return e.getGeometry();var o="Polygon"===n?r.getCoordinates()[0]:r.getCoordinates();return o.length>1?new t(o[0]):null}},endPoint:function(){return function(e){var r=e.getGeometry(),n=r.getType();if(["Point","MultiPoint"].includes(n))return e.getGeometry();var o="Polygon"===n?r.getCoordinates()[0]:r.getCoordinates();return new t(o.length>3?o[o.length-("Polygon"===n?2:1)]:o[o.length-1])}}};return function(e,t,r){var n,o=e.msGeometry;if(d(o)&&c[null==o?void 0:o.name])return{geometry:c[o.name](r)};var i=(null==t?void 0:t.getGeometry)&&(null==t||null===(n=t.getGeometry())||void 0===n?void 0:n.getType());return["Mark","Icon"].includes(e.kind)&&["LineString","MultiLineString","Polygon","MultiPolygon"].includes(i)?{geometry:c.centerPoint(r)}:null}},geojson:function(){var e={centerPoint:function(e){return["LineString"].includes(e.geometry.type)?l(e,i(e)/2).geometry.coordinates:(0,g.Z)(e).geometry.coordinates},lineToArc:function(e){return"LineString"===e.geometry.type?(0,y.transformLineToArcs)(e.geometry.coordinates):"Polygon"===e.geometry.type?e.geometry.coordinates.map(y.transformLineToArcs):null},startPoint:function(e){return"Polygon"===e.geometry.type?e.geometry.coordinates[0][0]:"LineString"===e.geometry.type?e.geometry.coordinates[0]:null},endPoint:function(e){return"Polygon"===e.geometry.type?e.geometry.coordinates[0][e.geometry.coordinates[0].length-2]:"LineString"===e.geometry.type?e.geometry.coordinates[e.geometry.coordinates.length-1]:null}};return function(t){var r=t.msGeometry;return d(r)&&e[null==r?void 0:r.name]?e[r.name]:null}}}}}]);